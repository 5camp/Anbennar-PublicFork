namespace = population

country_event = {
	id = population.0
	title = population.0.t
	desc = population.0.d
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}

	option = {	
		name = population.0.a
		
		set_variable = { totalPop = 0 }
		set_variable = { dwarvenPop = 0 }
		set_variable = { elvenPop = 0 }
		set_variable = { halflingPop = 0 }
		set_variable = { gnomishPop = 0 }
		set_variable = { half_orcishPop = 0 }
		set_variable = { koboldPop = 0 }
		set_variable = { orcishPop = 0 }
		set_variable = { humanPop = 0 }
		set_variable = { gnollishPop = 0 }
		set_variable = { ruinbornPop = 0 }
		set_variable = { goblinPop = 0 }
		set_variable = { harpyPop = 0 }
		set_variable = { trollPop = 0 }
		set_variable = { half_elvenPop = 0 }
		set_variable = { ogrePop = 0 }
		set_variable = { harimariPop = 0 }
		set_variable = { centaurPop = 0 }
		set_variable = { hobgoblinPop = 0 }
		every_owned_province = {
			random_list = {
				1 = { set_province_flag = one_pop }
				1 = { set_province_flag = two_pop }
				1 = { set_province_flag = three_pop }
			}
		}
		every_owned_province = {
			limit = { has_province_flag = one_pop }
			set_variable = { totalPop = 0 }
			set_variable = { provDev = 0 }
			set_variable = { dwarvenPop = 0 }
			set_variable = { elvenPop = 0 }
			set_variable = { halflingPop = 0 }
			set_variable = { gnomishPop = 0 }
			set_variable = { half_orcishPop = 0 }
			set_variable = { koboldPop = 0 }
			set_variable = { orcishPop = 0 }
			set_variable = { humanPop = 0 }
			set_variable = { gnollishPop = 0 }
			set_variable = { ruinbornPop = 0 }
			set_variable = { goblinPop = 0 }
			set_variable = { harpyPop = 0 }
			set_variable = { trollPop = 0 }
			set_variable = { half_elvenPop = 0 }
			set_variable = { ogrePop = 0 }
			set_variable = { harimariPop = 0 }
			set_variable = { centaurPop = 0 }
			set_variable = { hobgoblinPop = 0 }
			export_to_variable = {
				which = provM
				value = base_manpower
			}
			export_to_variable = {
				which = provP
				value = base_production 
			}
			export_to_variable = {
				which = provT
				value = base_tax
			}
			change_variable = { which = provDev which = provM }
			change_variable = { which = provDev which = provP }
			change_variable = { which = provDev which = provT }
			
			calculate_prov_total_pop = yes
			ROOT = { change_variable = { which = totalPop which = PREV } }
			calculate_prov_minorities_pop = yes
			calculate_prov_majority_pop = yes
			
		}
		every_owned_province = {
			limit = { has_province_flag = two_pop }
			set_variable = { totalPop = 0 }
			set_variable = { provDev = 0 }
			set_variable = { dwarvenPop = 0 }
			set_variable = { elvenPop = 0 }
			set_variable = { halflingPop = 0 }
			set_variable = { gnomishPop = 0 }
			set_variable = { half_orcishPop = 0 }
			set_variable = { koboldPop = 0 }
			set_variable = { orcishPop = 0 }
			set_variable = { humanPop = 0 }
			set_variable = { gnollishPop = 0 }
			set_variable = { ruinbornPop = 0 }
			set_variable = { goblinPop = 0 }
			set_variable = { harpyPop = 0 }
			set_variable = { trollPop = 0 }
			set_variable = { half_elvenPop = 0 }
			set_variable = { ogrePop = 0 }
			set_variable = { harimariPop = 0 }
			set_variable = { centaurPop = 0 }
			set_variable = { hobgoblinPop = 0 }
			export_to_variable = {
				which = provM
				value = base_manpower
			}
			export_to_variable = {
				which = provP
				value = base_production 
			}
			export_to_variable = {
				which = provT
				value = base_tax
			}
			change_variable = { which = provDev which = provM }
			change_variable = { which = provDev which = provP }
			change_variable = { which = provDev which = provT }
			
			calculate_prov_total_pop = yes
			ROOT = { change_variable = { which = totalPop which = PREV } }
			calculate_prov_minorities_pop = yes
			calculate_prov_majority_pop = yes
			
		}
		every_owned_province = {
			limit = { has_province_flag = three_pop }
			set_variable = { totalPop = 0 }
			set_variable = { provDev = 0 }
			set_variable = { dwarvenPop = 0 }
			set_variable = { elvenPop = 0 }
			set_variable = { halflingPop = 0 }
			set_variable = { gnomishPop = 0 }
			set_variable = { half_orcishPop = 0 }
			set_variable = { koboldPop = 0 }
			set_variable = { orcishPop = 0 }
			set_variable = { humanPop = 0 }
			set_variable = { gnollishPop = 0 }
			set_variable = { ruinbornPop = 0 }
			set_variable = { goblinPop = 0 }
			set_variable = { harpyPop = 0 }
			set_variable = { trollPop = 0 }
			set_variable = { half_elvenPop = 0 }
			set_variable = { ogrePop = 0 }
			set_variable = { harimariPop = 0 }
			set_variable = { centaurPop = 0 }
			set_variable = { hobgoblinPop = 0 }
			export_to_variable = {
				which = provM
				value = base_manpower
			}
			export_to_variable = {
				which = provP
				value = base_production 
			}
			export_to_variable = {
				which = provT
				value = base_tax
			}
			change_variable = { which = provDev which = provM }
			change_variable = { which = provDev which = provP }
			change_variable = { which = provDev which = provT }
			
			calculate_prov_total_pop = yes
			ROOT = { change_variable = { which = totalPop which = PREV } }
			calculate_prov_minorities_pop = yes
			calculate_prov_majority_pop = yes
			
		}
		set_variable = { totalPop = 0 }
		#Adjustement
		multiply_variable = { koboldPop = 3 }
		multiply_variable = { goblinPop = 1.2 }
		multiply_variable = { ogrePop = 0.2 }
		multiply_variable = { trollPop = 0.1 }
		multiply_variable = { elvenPop = 0.3 }
		multiply_variable = { halflingPop = 1.3 }
		multiply_variable = { dwarvenPop = 0.85 }
		#Add back to total
		change_variable = { which = totalPop which = dwarvenPop }
		change_variable = { which = totalPop which = elvenPop }
		change_variable = { which = totalPop which = halflingPop }
		change_variable = { which = totalPop which = gnomishPop }
		change_variable = { which = totalPop which = half_orcishPop }
		change_variable = { which = totalPop which = koboldPop }
		change_variable = { which = totalPop which = orcishPop }
		change_variable = { which = totalPop which = humanPop }
		change_variable = { which = totalPop which = gnollishPop }
		change_variable = { which = totalPop which = ruinbornPop }
		change_variable = { which = totalPop which = goblinPop }
		change_variable = { which = totalPop which = harpyPop }
		change_variable = { which = totalPop which = trollPop }
		change_variable = { which = totalPop which = half_elvenPop }
		change_variable = { which = totalPop which = ogrePop }
		change_variable = { which = totalPop which = harimariPop }
		change_variable = { which = totalPop which = centaurPop }
		change_variable = { which = totalPop which = hobgoblinPop }
	}
	
	option = {
		name = population.0.b
		trigger = { NOT = { has_country_flag = pop_counter_flag } }
		set_country_flag = pop_counter_flag
	}
	
	#Go Back
	option = {
		name = population.0.c
	}
}
