namespace = adventurer

country_event = {
	id = adventurer.1
	title = adventurer.1.t
	desc = adventurer.1.desc
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	# trigger = {
		# has_reform = adventurer_reform
		# NOT = { has_country_flag = in_adventurer_heir_selection }
		# has_government_attribute = heir
	# }

	immediate = {
		hidden_effect = {
			set_country_flag = in_adventurer_heir_selection
			
			clr_country_flag = theo_local_noble_flag
			clr_country_flag = theo_foreign_noble_flag
			clr_country_flag = theo_merchants_son_flag
			clr_country_flag = theo_talented_theologian_flag
			clr_country_flag = theo_local_preacher_flag
			clr_country_flag = theo_papal_protege_flag
			clr_country_flag = theo_imam_khatib_flag
			
			#Local Noble,etc:
			if = {
				limit = {
					any_owned_province = {
						has_estate = estate_nobles
					}
				}
				random_owned_province = {
					limit = { has_estate = estate_nobles }
					save_event_target_as = noble_province
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						has_estate = estate_rajput
					}
					religion = hinduism
				}
				random_owned_province = {
					limit = { has_estate = estate_rajput }
					save_event_target_as = noble_province
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						has_estate = estate_maratha
					}
					religion = hinduism
				}
				random_owned_province = {
					limit = { has_estate = estate_maratha }
					save_event_target_as = noble_province
				}
			}
			#Local Noble:
			if = {
				limit = {
					any_owned_province = {
						has_estate = estate_nobles
					}
				}
				random_owned_province = {
					limit = { has_estate = estate_nobles }
					save_event_target_as = noble_province
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						has_estate = estate_rajput
					}
					religion = hinduism
				}
				random_owned_province = {
					limit = { has_estate = estate_rajput }
					save_event_target_as = noble_province
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						has_estate = estate_maratha
					}
					religion = hinduism
				}
				random_owned_province = {
					limit = { has_estate = estate_maratha }
					save_event_target_as = noble_province
				}
			}
			if = {
				limit = {
					any_owned_province = {
						has_estate = estate_burghers
					}
				}
				random_owned_province = {
					limit = { has_estate = estate_burghers }
					save_event_target_as = burgher_province
				}
			}
			else_if = {
				limit = {
					religion = hinduism
					any_owned_province = {
						has_estate = estate_vaisyas
					}
				}
				random_owned_province = {
					limit = { has_estate = estate_vaisyas }
					save_event_target_as = burgher_province
				}
			}
			if = {
				limit = {
					any_owned_province = {
						has_estate = estate_church
					}
				}
				random_owned_province = {
					limit = { has_estate = estate_church }
					save_event_target_as = church_province
				}
			}
			else_if = {
				limit = {
					religion = hinduism
					any_owned_province = {
						has_estate = estate_brahmins
					}
				}
				random_owned_province = {
					limit = { has_estate = estate_brahmins }
					save_event_target_as = church_province
				}
			}
			#Papal Protoge:
			random_country = {
				limit = {
					OR = {
						tag = PAP
						culture_group = latin
					}
				}
				save_event_target_as = papal_protoge_country
			}
			
		}
	}


	#Marcher picks - Greentide veteran, Escanni native
	
	#Pioneer picks - Escanni native
	
	#Fortune seeker picks - merchant
	
	# A Renowned Fighter - guaranteed mil 3
	option = {
		name = adventurer.1.a	
		set_country_flag = theo_local_noble_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_saved_event_target = noble_province
			}
			define_heir = {
				age = 35
				hidden = yes
				mil = 3
				culture = event_target:noble_province
			}
		}
		else = {
			define_heir = {
				age = 35
				mil = 3
				hidden = yes
			}
		}
		add_devotion = -5
		add_prestige = 10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	
	# A Veteran Captain - guaranteed adm 3
	
	# A Shrewd Merchant - guaranteed dip 3
	
	#A Prominent Adventurer - generic
	
	# A Noble from our Homeland
	option = {
		name = adventurer.1.b		# A Noble 
		trigger = {
			any_known_country = {
				government = monarchy
				has_regency = no
				religion = ROOT
				superregion = western_cannor_superregion
				culture = ROOT
			}
		}	
		set_country_flag = adv_noble_flag # USED IN DEVOTION.TXT
		random_country = { 
			limit = {
				government = monarchy
				has_regency = no
				religion = ROOT
				superregion = western_cannor_superregion
				culture = ROOT
			}
			ROOT = { 
				define_heir = { 
					dynasty = PREV 
					age = 35
					culture = PREV
					hidden = yes
				} 
			}
			add_opinion = { who = ROOT modifier = opinion_adventurer_noble }
		}
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	
	# A Lilac Wars Veteran (only available in early Greentide)
	
	# An Escanni Native
	option = {
		name = adventurer.1.c	
		trigger = {
			capital_scope = { superregion = escann_superregion }
		}
		set_country_flag = adv_escanni_native_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				capital_scope = {
					region = inner_castanor_region
				}
			}
			define_heir = {
				age = 25
				hidden = yes
				culture = castellyrian
			}
		}
		else_if = {
			limit = {
				capital_scope = {
					region = west_castanor_region
				}
			}
			define_heir = {
				age = 25
				hidden = yes
				culture = adenner
			}
		}
		else_if = {
			limit = {
				capital_scope = {
					region = south_castanor_region
				}
			}
			define_heir = {
				age = 25
				hidden = yes
				culture = marcher
			}
		}
		add_prestige = 10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	
	# A Mage
	option = {
		name = adventurer.1.d
		trigger = {
		
		}
		set_country_flag = theo_mage_flag # USED IN DEVOTION.TXT
		
		random_list = {
			90 = {
			
			}
			
		}
		if = {
			limit = {
				has_saved_event_target = mage_province
			}
			define_heir = {
				age = 25
				hidden = yes
				culture = event_target:mage_province
			}
		}
		else = {
			define_heir = {
				age = 25
				hidden = yes
			}
		}
		hidden_effect = { add_heir_personality = mage_personality }
		add_prestige = 10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
		
		
		#Something that can randomize
	}
	
	
	option = {
		name = adventurer.1.a		# A Local Noble
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = 15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_maratha
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_maratha
				loyalty = 15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_rajput
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_rajput
				loyalty = 15
			}
		}
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_brahmins
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_brahmins
				loyalty = -15
			}
		}
		set_country_flag = theo_local_noble_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_saved_event_target = noble_province
			}
			define_heir = {
				age = 35
				hidden = yes
				culture = event_target:noble_province
			}
		}
		else = {
			define_heir = {
				age = 35
				hidden = yes
			}
		}
		add_devotion = -5
		add_prestige = 10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}

	option = {
		name = adventurer.1.b		# A Foreign Noble
		trigger = {
			any_neighbor_country = {
				government = monarchy
				has_regency = no
				religion = ROOT
			}
		}
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = 10
			}
		}
		else_if = {
			limit = {
				has_estate = estate_maratha
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_maratha
				loyalty = 10
			}
		}
		else_if = {
			limit = {
				has_estate = estate_rajput
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_rajput
				loyalty = 10
			}
		}
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
			}
		}
		else_if = {
			limit = {
				has_estate = estate_brahmins
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_brahmins
				loyalty = -10
			}
		}		
		set_country_flag = theo_foreign_noble_flag # USED IN DEVOTION.TXT
		random_neighbor_country = { 
			limit = {
				government = monarchy
				has_regency = no
				religion = ROOT
			}
			ROOT = { 
				define_heir = { 
					dynasty = PREV 
					age = 35
					culture = PREV
					hidden = yes
				} 
			}
			add_opinion = { who = ROOT modifier = opinion_adventurer_noble }
		}
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}

	option = {
		name = adventurer.1.c		# A Merchant's Son
		if = {
			limit = {
				has_estate = estate_burghers
			}
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = 15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_vaisyas
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_vaisyas
				loyalty = 15
			}
		}
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_brahmins
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_brahmins
				loyalty = -15
			}
		}
		set_country_flag = theo_merchants_son_flag # USED IN DEVOTION.TXT
		
		if = {
			limit = {
				has_saved_event_target = burgher_province
			}
			define_heir = {
				age = 35
				hidden = yes
				culture = event_target:burgher_province
			}
		}
		else = {
			define_heir = {
				age = 35
				hidden = yes
			}
		}
		add_years_of_income = 0.35
		add_devotion = -5
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}

	option = {
		name = adventurer.1.e		# A Talented Theologian
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_brahmins
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_brahmins
				loyalty = -15
			}
		}
		if = {
			limit = {
				has_estate = estate_burghers
			}
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = -15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_vaisyas
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_vaisyas
				loyalty = -15
			}
		}
		set_country_flag = theo_talented_theologian_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_saved_event_target = church_province
			}
			define_heir = {
				age = 35
				hidden = yes
				culture = event_target:church_province
			}
		}
		else = {
			define_heir = {
				age = 35
				hidden = yes
			}
		}
		add_devotion = 5
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	option = {
		name = adventurer.1.f		# A Local Preacher
		trigger = {
			NOT = {
				religion_group = muslim
			}
		}
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_brahmins
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_brahmins
				loyalty = -15
			}
		}
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_maratha
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_maratha
				loyalty = -15
			}
		}
		else_if = {
			limit = {
				has_estate = estate_rajput
				religion = hinduism
			}
			add_estate_loyalty = {
				estate = estate_rajput
				loyalty = -15
			}
		}
		set_country_flag = theo_local_preacher_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_saved_event_target = church_province
			}
			define_heir = {
				age = 35
				hidden = yes
				culture = event_target:church_province
			}
		}
		else = {
			define_heir = {
				age = 35
				hidden = yes
			}
		}
		add_devotion = 10
		add_prestige = -5
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	option = {
		name = adventurer.1.d		# A Papal Protege
		trigger = {
			religion = catholic
		}
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 15
			}
		}
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -10
			}
		}
		if = {
			limit = {
				has_estate = estate_burghers
			}
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = -10
			}
		}
		set_country_flag = theo_papal_protege_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_saved_event_target = papal_protoge_country
			}
			define_heir = {
				age = 35
				culture = event_target:papal_protoge_country
				hidden = yes
			}
		}
		else = {
			define_heir = {
				age = 35
				hidden = yes
			}
		}
		add_papal_influence = 10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	option = {
		name = adventurer.1.g		# A Local Imam Khatib
		trigger = {
			religion_group = muslim
		}
		set_country_flag = theo_imam_khatib_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 15
			}
		}
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -15
			}
		}		
		define_heir = {
			age = 35
			hidden = yes
		}
		add_devotion = 10
		add_prestige = -10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
	option = {
		name = adventurer.1.h		# An Influential Reformer
		trigger = {
			OR = {
				religion = reformed
				religion = protestant
			}
		}
		set_country_flag = theo_influential_reformer_flag # USED IN DEVOTION.TXT
		if = {
			limit = {
				has_estate = estate_burghers
			}
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = 10
			}
		}		
		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
			}
		}
		define_heir = {
			age = 35
			hidden = yes
		}
		if = { 
			limit = { religion = reformed }
			add_fervor = 10
		}
		if = { 
			limit = { religion = protestant }
			add_church_power = 10
		}
		add_prestige = -10
		clr_country_flag = in_adventurer_heir_selection
		custom_tooltip = adventurer.1.tt
	}
}