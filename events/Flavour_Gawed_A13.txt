namespace = flavor_gawed

#Burning of the Redglades
country_event = {
	id = flavor_gawed.1
	title = flavor_gawed.1.t
	desc = flavor_gawed.1.d
	picture = BORDER_TENSION_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_gawed.1.a
		add_country_modifier = {
			name = "gawed_bane_of_elfkind"
			duration = -1
		}
		redglades_area = {
			add_loot_from_rich_province_general_effect = {
				LOOTER = owner
			}
			add_province_modifier = {
				name = "gawed_burning_of_the_redglades"
				duration = -1
			}
			change_culture = ROOT
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						capital_scope = { continent = europe }
						capital_scope = { superregion = bulwar_superregion }
						capital_scope = { superregion = salahad_superregion }
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = flavor_gawed.2 days = 7 }
			}
		}
	}

}

#Gawed burns the Redglades
country_event = {
	id = flavor_gawed.2
	title = flavor_gawed.2.t
	desc = flavor_gawed.2.d
	picture = BORDER_TENSION_eventPicture
	
	is_triggered_only = yes
	
	option = {	#This is preposterous!
		name = flavor_gawed.2.a
		trigger = {
			NOT = { culture_group = elven }
		}
		ai_chance = {
			factor = 80
			
			modifier = {
				factor = 1.5
				OR = {
					culture_group = lencori
					culture_group = anbennarian
					culture_group = escanni
					culture_group = businori
					is_rival = A13
					historical_rival_with = A13
				}
			}
		}
		add_opinion = { who = A13 modifier = A13_burned_the_redglades_anb }
	}
	
	option = {	#Elven reaction
		name = flavor_gawed.2.b
		trigger = {
			culture_group = elven
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				OR = {
					culture_group = elven
				}
			}
		}
		add_opinion = { who = A13 modifier = A13_burned_the_redglades_elf }
	}
	
	option = {	#Meh
		name = flavor_gawed.2.c
		ai_chance = {
			factor = 10
			
			modifier = {
				factor = 100
				OR = {
					alliance_with = A13
					historical_friend_with = A13
				}
			}
			modifier = {
				factor = 10
				OR = {
					culture_group = orcish
					culture_group = goblin
					culture_group = kobold
					culture_group = gerudian
					culture_group = divenori
					culture_group = alenic
				}
			}
			
		}
		
		if = {
			limit = { 
				OR = { 
					culture_group = elven
					culture_group = anbennarian	
					culture_group = lencori
					culture_group = escanni
					culture_group = businori
					culture_group = bulwari
				}
			}
			add_prestige = -10	#you're supposed to dislike em
		}
	}
}

#Gawed countryside converts to corinite
country_event = {
	id = flavor_gawed.3
	title = flavor_gawed.3.t
	desc = flavor_gawed.3.d
	picture = RELIGION_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = A13
		is_religion_enabled = corinite
		current_age = age_of_reformation
		
		NOT = { religion = corinite }
	}
	
	mean_time_to_happen = {
		months = 100
		
		modifier = {
			factor = 0.5
			any_owned_province = { 
				religion = corinite
			}
		}
		
		modifier = {
			factor = 0.1
			any_owned_province = { 
				religion = corinite
				is_reformation_center = yes
			}
		}
	}
	immediate = {
		hidden_effect = {
			alenic_frontier_region = {
				limit = {
					culture = old_alenic	
					development = 10
					religion = regent_court
				}
				random = {
					chance = 20
					change_religion = corinite
				}
			}
			alenic_frontier_region = {
				limit = {
					NOT = {
						development = 10
					}
					culture = old_alenic	
					religion = regent_court
				}
				random = {
					chance = 70
					change_religion = corinite
				}
			}
			alenic_frontier_region = {
				limit = {
					NOT = {
						development = 10
						culture = old_alenic
					}
					religion = regent_court
					culture_group = alenic
				}
				random = {
					chance = 30
					change_religion = corinite
				}
			}
			alenic_frontier_region = {
				limit = {
					NOT = {
						culture = old_alenic
					}
					development = 10
					religion = regent_court
					culture_group = alenic
				}
				random = {
					chance = 5
					change_religion = corinite
				}
			}
			dragonhills_area = {
				limit = {
					culture_group = alenic
					religion = regent_court
				}
				random = {
					chance = 20
					change_religion = corinite
				}
			}
			gawed_area = {
				limit = {
					culture_group = alenic
					religion = regent_court
				}
				add_permanent_province_modifier = {
					name = "gawed_regent_court"
					duration = 3650
				}
			}
			south_alen_area = {
				limit = {
					culture_group = alenic
					religion = regent_court
				}
				add_permanent_province_modifier = {
					name = "gawed_regent_court"
					duration = 3650
				}
			}
			westmounts_area = {
				limit = {
					culture_group = alenic
					religion = regent_court
				}
				add_permanent_province_modifier = {
					name = "gawed_regent_court"
					duration = 3650
				}
			}
			alenvord_area = {
				limit = {
					culture_group = alenic
					religion = regent_court
				}
				add_permanent_province_modifier = {
					name = "gawed_regent_court"
					duration = 3650
				}
			}
		}
	}
	
	#Ignore the peasants
	option = {
		name = flavor_gawed.3.a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 2
				has_personal_deity = adean
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = calm_personality
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = careful_personality
			}
			modifier = {
				factor = 1.5
				has_personal_deity = ara	#Adean's wife
			}
			modifier = {
				factor = 2
				ruler_has_personality = zealot_personality
			}
		}
		
	}
	
	#Convert to Corinite
	option = {
		name = flavor_gawed.3.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 4
				has_personal_deity = corin
			}
			modifier = {
				factor = 2
				mil = 3
			}
			modifier = {
				factor = 0
				is_emperor = yes
				hre_religion_treaty = no
			}
			modifier = {
				factor = 2
				personality = ai_militarist
			}
			modifier = {
				factor = 1.5
				ruler_has_personality = free_thinker_personality
			}
		}
		change_religion = corinite
		add_country_modifier = {
			name = "conversion_zeal"
			duration = 3650
		}
		capital_scope = {
			change_religion = corinite
			add_permanent_province_modifier = {
				name = "religious_zeal_at_conv"
				duration = 9000
			}
		}
	}
}

#Derek Deland
country_event = {
	id = flavor_gawed.4
	title = flavor_gawed.4.t
	desc = flavor_gawed.4.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		tag = A13
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	#Fantastic
	option = {
		name = flavor_gawed.4.a
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = gawed_deland_council
			duration = 18250 #50 Years
		}
		set_estate_privilege = estate_burghers_magnate_council
	}
	
	#This cannot be allowed
	option = {
		name = flavor_gawed.4.b
		ai_chance = {
			factor = 0
		}
		reduce_stability_or_adm_power = yes
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -20
		}
	}	
}

# Magnates determin support
country_event = {
	id = flavor_gawed.5
	title = flavor_gawed.5.t
	desc = {
		trigger = has_country_flag = council_support_ruler
		desc = flavor_gawed.5.d1
	}
	desc = {
		trigger = has_country_flag = council_oppose_ruler
		desc = flavor_gawed.5.d2
	}
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		random_list = {
			66 = { set_country_flag = council_support_ruler }
			33 = { set_country_flag = council_oppose_ruler }
		}
	}
	
	# Fantastic
	option = {
		name = flavor_gawed.5.a
		ai_chance = {
			factor = 3
		}
		trigger = {
			has_country_flag = council_support_ruler
		}
		add_ruler_modifier = {
			name = magnate_council_support
			duration = -1 #50 Years
		}
	}
	
	# We do not need their help
	option = {
		name = flavor_gawed.5.b
		ai_chance = {
			factor = 3
		}
		trigger = {
			has_country_flag = council_support_ruler
		}
		add_prestige = 10
		add_ruler_modifier = {
			name = magnate_council_rejected
			duration = -1 #50 Years
		}
	}
	
	# Terrible
	option = {
		name = flavor_gawed.5.c
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_country_flag = council_support_ruler
		}
		add_ruler_modifier = {
			name = magnate_council_opposition
			duration = -1 #50 Years
		}
	}
	
	# Perhaps we could buy them out?
	option = {
		name = flavor_gawed.5.d
		ai_chance = {
			factor = 3
		}
		trigger = {
			has_country_flag = council_support_ruler
		}
		if = { # AI is seriously bad at managing land share
			limit = { ai = no }
			change_estate_land_share = {
				estate = estate_burghers
				share = 5
			}
		}
		add_years_of_income = -0.25
		add_country_modifier = {
			name = magnate_council_support
			duration = -1 #50 Years
		}
	}
}

# Magnate family goes bankrupt
country_event = {
	id = flavor_gawed.6
	title = flavor_gawed.6.t
	desc = flavor_gawed.6.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}

	# Purchase their stuff
	option = {
		name = flavor_gawed.6.a
		ai_chance = {
			factor = 1
		}
		change_estate_land_share = {
			estate = estate_burghers
			share = -2.5
		}
		add_years_of_income = -0.25
		add_country_modifier = {
			name = magnate_council_support
			duration = -1 #50 Years
		}
	}
	
	# Sell their stuff
	option = {
		name = flavor_gawed.6.b
		ai_chance = {
			factor = 1
		}
		add_years_of_income = 0.25
		add_country_modifier = {
			name = sold_magnate_business
			duration = 1825 #2 Years
		}
	}
}

# Magnates purchase land
country_event = {
	id = flavor_gawed.7
	title = flavor_gawed.7.t
	desc = flavor_gawed.7.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 2
		modifier = { # Less likely in influential
			factor = 0.5
			estate_influence = {
				estate = estate_burghers
				influence = 50
			}
		}
	}
	
	# We can do nothing
	option = {
		name = flavor_gawed.7.a
		ai_chance = {
			factor = 1
		}
		change_estate_land_share = {
			estate = estate_burghers
			share = 2.5
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -2.5
		}
	}
}

# Magnates offer bailout
country_event = {
	id = flavor_gawed.8
	title = flavor_gawed.8.t
	desc = flavor_gawed.8.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		num_of_loans = 1
		NOT = { has_country_modifier = magnate_offered_bailout }
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			num_of_loans = 2
		}
		modifier = {
			factor = 2
			num_of_loans = 5
		}
		modifier = {
			factor = 2
			num_of_loans = 10
		}
		modifier = {
			factor = 5
			is_bankrupt = yes
		}
		modifier = {
			factor = 2
			has_country_modifier = magnate_council_support
		}
		modifier = {
			factor = 0.5
			has_country_modifier = magnate_council_opposition
		}
	}
	
	option = {
		ai_chance = {
			factor = 1
		}
		name = flavor_gawed.8.a
		change_estate_land_share = {
			estate = estate_burghers
			share = 5
		}
		add_years_of_income = 1
	}
	
	option = {
		name = flavor_gawed.8.b
		ai_chance = {
			factor = 1
		}
		add_prestige = 10
	}
	
	after = {
		hidden_effect = {
			add_country_modifier = {
				name = magnate_offered_bailout
				duration = 3650 # 10 years
				hidden = yes
			}
		}
	}
}

# Magnates offer Support
country_event = {
	id = flavor_gawed.9
	title = flavor_gawed.9.t
	desc = flavor_gawed.9.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = magnate_council_opposition
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			estate_loyalty = {
				estate = estate_burghers
				loyalty = 60
			}
		}
	}
	
	option = {
		ai_chance = {
			factor = 1
		}
		name = flavor_gawed.9.a
		add_years_of_income = -0.25
		add_estate_influence_modifier = {
			influence = 10
			duration = 1825
			desc = EXPANDED_MAGNATE_PRIVILEGES
			estate = estate_burghers
		}
		remove_country_modifier = magnate_council_opposition
		add_country_modifier = magnate_council_support
	}
	
	option = {
		name = flavor_gawed.9.b
		ai_chance = {
			factor = 1
		}
		add_prestige = 10
		if = {
			limit = { absolutism = 5 }
			add_absolutism = 10
		}
	}	
}

# Magnate Feud
country_event = {
	id = flavor_gawed.10
	title = flavor_gawed.10.t
	desc = flavor_gawed.10.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = magnate_council_opposition
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { is_capital = no is_in_capital_area = yes }
				save_event_target_as = feud_province
			}
		}
	}
	
	goto = feud_province
	
	# Take sides
	option = {
		name = flavor_gawed.10.a
		ai_chance = {
			factor = 1
		}
		event_target:feud_province = {
			spawn_rebels = {
				type = particularist_rebels
				size = 2
			}
			add_local_autonomy = -10 # Cause the winner is happy
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 10
		}
	}
	
	# Stay Neutral
	option = {
		name = flavor_gawed.10.b
		ai_chance = {
			factor = 1
		}
		add_prestige = 5
		add_estate_influence_modifier = {
			influence = -10
			duration = 1825
			desc = MAGNATES_FEUDING
			estate = estate_burghers
		}
	}
}

# New Magnate Business in PROVINCE
country_event = {
	id = flavor_gawed.11
	title = flavor_gawed.11.t
	desc = flavor_gawed.11.d
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = magnate_council_opposition
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { is_capital = no is_in_capital_area = yes }
				save_event_target_as = business_province
			}
		}
	}
	
	goto = business_province
	
	# Fantastic!
	option = {
		name = flavor_gawed.11.a
		ai_chance = {
			factor = 1
		}
		event_target:business_province = {
			add_permanent_province_modifier = {
				name = new_magnate_business
				duration = 3650
			}
			add_local_autonomy = 10
		}
		change_estate_land_share = {
			estate = estate_burghers
			share = 2
		}
	}
	
	# Stop this now!
	option = {
		name = flavor_gawed.11.b
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				estate_loyalty = {
					estate = estate_burghers
					loyalty = 40
				}
			}
			event_target:business_province = {
				spawn_rebels = {
					type = particularist_rebels
					size = 3
				}
			}
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = -10
			}
		}
		else = {
			event_target:business_province = {
				spawn_rebels = {
					type = particularist_rebels
					size = 4
				}
			}
		}
		add_prestige = -10
	}
}

#Admin Magnate Click
country_event = {
	id = flavor_gawed.100
	title = NO_LOCALIZATION
	desc = NO_LOCALIZATION
	picture = BORDER_TENSION_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		faction_in_power = nl_cooperatists
		has_reform = northern_league_magnates
	}
	
	option = {
		name = NO_LOCALIZATION
		add_years_of_income = 0.5
	}
	
}

#Dip Magnate Click
country_event = {
	id = flavor_gawed.101
	title = NO_LOCALIZATION
	desc = NO_LOCALIZATION
	picture = BORDER_TENSION_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		faction_in_power = nl_trade_barons
		has_reform = northern_league_magnates
	}
	
	option = {
		name = NO_LOCALIZATION
		every_owned_province = {
			if = {
				limit = { NOT = { has_province_flag = got_prosperity_temp } }
				if = {
					limit = { prosperity = 100 }
					add_base_production = 1
				}
				else = {
					add_prosperity = 25
				}
				set_province_flag = got_prosperity_temp
				area = {
					set_province_flag = got_prosperity_temp
				}
			}
			add_devastation = -10
		}
		every_owned_province = {
			clr_province_flag = got_prosperity_temp
		}
	}
}

#Mil Magnate Click
country_event = {
	id = flavor_gawed.102
	title = NO_LOCALIZATION
	desc = NO_LOCALIZATION
	picture = BORDER_TENSION_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		faction_in_power = nl_old_guard
		has_reform = northern_league_magnates
	}
	
	option = {
		name = NO_LOCALIZATION
		capital_scope = {
			build_to_forcelimit = {
				infantry = 0.1
				artillery = 0.1
			}
			# Kill the unit it spits out for some reason
			kill_units = {
				who = ROOT
				type = streltsy_infantry
				amount = 1
			}
		}
	}
}