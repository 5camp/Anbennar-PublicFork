
namespace = aakhetist

#1-19 system stuff
#20-49 religious abilities
#50-99 aakhet demands
#100+ random flavor



################################
### System ###
################################

#Aakhet arrives
country_event = {
	id = aakhetist.01
	title = aakhetist.01.t
	desc = aakhetist.01.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
	}

	option = {
		name = aakhetist.01.a
		custom_tooltip = aakhetist.01.tooltip
		add_stability_or_adm_power = yes
		hidden_effect = {
			set_country_flag = current_aakhet_host
			save_global_event_target_as = aakhet_host
		}
	}
}

#Aakhet's approval decreases due to other tag
country_event = {
	id = aakhetist.02
	title = aakhetist.02.t
	desc = aakhetist.02.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
	}

	option = {
		name = aakhetist.02.a
		trigger_switch = {
			on_trigger = has_country_flag

			aakhet_reduction_30 = { change_aakhet_approval = { value = -30 } }
			aakhet_reduction_25 = { change_aakhet_approval = { value = -25 } }
			aakhet_reduction_20 = { change_aakhet_approval = { value = -20 } }
			aakhet_reduction_15 = { change_aakhet_approval = { value = -15 } }
			aakhet_reduction_10 = { change_aakhet_approval = { value = -10 } }
			aakhet_reduction_5 = { change_aakhet_approval = { value = -5 } }
		}
	}

	after = {
		clr_country_flag = aakhet_reduction_30
		clr_country_flag = aakhet_reduction_25
		clr_country_flag = aakhet_reduction_20
		clr_country_flag = aakhet_reduction_15
		clr_country_flag = aakhet_reduction_10
		clr_country_flag = aakhet_reduction_05
	}
}


#Aakhet leaves 
country_event = {
	id = aakhetist.03
	title = aakhetist.03.t
	desc = aakhetist.03.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
	}

	option = {
		name = aakhetist.03.a
		custom_tooltip = aakhetist.03.tooltip
		reduce_stability_or_adm_power = yes
		hidden_effect = {
			clr_country_flag = current_aakhet_host

			if = {
				limit = { 
					any_country = {
						religion = aakhetist
						ai = no
						check_variable = { aakhet_approval = 90 }
					}
				}
				random_country = {
					limit = { religion = aakhetist ai = no check_variable = { aakhet_approval = 90 } }
					country_event = { id = aakhetist.01 }
				}
			}
			else_if = {
				limit = { 
					any_country = {
						religion = aakhetist
						#check_variable = { aakhet_approval = 90 }
					}
				}
				random_country = {
					limit = {
						religion = aakhetist
						any_known_country = {
							religion = aakhetist
							NOT = { check_variable = { which = aakhet_approval which = PREV } }
						}
					}
					country_event = { id = aakhetist.01 }
				}
			}
			else = { set_global_flag = aakhet_hostless }
		}
	}
}



################################
### Religious Abilities ###
################################


#Offer servitude
country_event = {
	id = aakhetist.20
	title = aakhetist.20.t
	desc = aakhetist.20.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.20.a
		add_prestige = -15
		change_aakhet_approval = { value = 5 }
	}
}

#Offer Food
country_event = {
	id = aakhetist.21
	title = aakhetist.21.t
	desc = aakhetist.21.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.21.a
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				development = 5
			}
			if = {
				limit = { base_tax = 1 }
				add_base_tax = -1
			}
			else_if = {
				limit = { base_production = 1 }
				add_base_production = -1
			}
			else_if = {
				limit = { base_manpower = 1 }
				add_base_manpower = -1
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				development = 4
			}
			if = {
				limit = { base_manpower = 1 }
				add_base_manpower = -1
			}
			else_if = {
				limit = { base_production = 1 }
				add_base_production = -1
			}
			else_if = {
				limit = { base_tax = 1 }
				add_base_tax = -1
			}
		}
		change_aakhet_approval = { value = 15 }
	}
}

#Offer Weapons
country_event = {
	id = aakhetist.22
	title = aakhetist.22.t
	desc = aakhetist.22.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.22.a
		if = {
			limit = { total_development = 1000 }
			add_treasury = -1000
		}
		else_if = {
			limit = { total_development = 750 }
			add_treasury = -750
		}
		else_if = {
			limit = { total_development = 500 }
			add_treasury = -500
		}
		else = { add_years_of_income = -1.5 }
		change_aakhet_approval = { value = 15 }
	}
}

#Offer Knowledge
country_event = {
	id = aakhetist.23
	title = aakhetist.23.t
	desc = aakhetist.23.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.23.a
		add_adm_power = -100
		add_dip_power = -100
		add_mil_power = -100
		change_aakhet_approval = { value = 30 }
	}
}

#Offer Mind
country_event = {
	id = aakhetist.24
	title = aakhetist.24.t
	desc = aakhetist.24.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.24.a
		if = {
			limit = {
				OR = {
					commandant = 5
					army_organiser = 5
					army_reformer = 5
					fortification_expert = 5
				}
			}
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 30 }
		}
		else_if = {
			limit = {
				OR = {
					commandant = 4
					army_organiser = 4
					army_reformer = 4
					fortification_expert = 4
				}
			}
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 20 }
		}
		else = {
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 10 }
		}
	}
}


#Aakhet's blessing
country_event = {
	id = aakhetist.25
	title = aakhetist.25.t
	desc = aakhetist.25.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.25.a
		change_aakhet_approval = { value = -5 }
		add_country_modifier = { name = aakhetist_aakhet_blessing_modifier duration = 730 }
	}
}

#Aakhet's Retinue
country_event = {
	id = aakhetist.26
	title = aakhetist.26.t
	desc = aakhetist.26.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.26.a
		change_aakhet_approval = { value = -5 }
		if = {
			limit = { army_tradition = 80 }
			create_general = { tradition = 100 culture = kheteratan }
		}
		else_if = {
			limit = { army_tradition = 60 }
			create_general = { tradition = 80 culture = kheteratan }
		}
		else_if = {
			limit = { army_tradition = 40 }
			create_general = { tradition = 60 culture = kheteratan }
		}
		else_if = {
			limit = { army_tradition = 20 }
			create_general = { tradition = 40 culture = kheteratan }
		}
		else = { create_general = { tradition = 20 culture = kheteratan } }

		if = {
			limit = { any_owned_province = { has_port = yes } }
			if = {
				limit = { navy_tradition = 80 }
				create_admiral = { tradition = 100 culture = kheteratan }
			}
			else_if = {
				limit = { navy_tradition = 60 }
				create_admiral = { tradition = 80 culture = kheteratan }
			}
			else_if = {
				limit = { navy_tradition = 40 }
				create_admiral = { tradition = 60 culture = kheteratan }
			}
			else_if = {
				limit = { navy_tradition = 20 }
				create_admiral = { tradition = 40 culture = kheteratan }
			}
			else = { create_admiral = { tradition = 20 culture = kheteratan } }
		}
	}
}

#Aakhet's Wrath
country_event = {
	id = aakhetist.27
	title = aakhetist.27.t
	desc = aakhetist.27.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	immediate = {
		hidden_effect = {
			random_province = {
				limit = {
					fort_level = 1
					sieged_by = ROOT
					unit_has_leader = yes
					num_of_units_in_province = {
						who = ROOT
						amount = 1
					}
				}
				save_event_target_as = event_province
			}
		}
	}

	option = {
		name = aakhetist.27.a
		event_target:event_province = {
			change_siege = 25
			add_devastation = 50
		}
	}
}

#Aakhet's Rage
country_event = {
	id = aakhetist.28
	title = aakhetist.28.t
	desc = aakhetist.28.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	immediate = {
		hidden_effect = {
			random_war_enemy_country = {
				limit = {
					OR = {
						is_in_war = { defender_leader = THIS attacker_leader = ROOT }
						is_in_war = { attacker_leader = THIS defender_leader = ROOT }
					}
					OR = {
						num_of_generals = 2
						AND = {
							num_of_generals = 1
							NOT = {
								is_monarch_leader = yes
								is_heir_leader = yes
							}
						}
					}
				}
				save_event_target_as = event_country
			}
		}
	}

	option = {
		name = aakhetist.28.a
		
		#cost
		if = {
			limit = { 
				event_target:event_country = {
					ruler_has_personality = mage_personality
					is_monarch_leader = yes
				} 
			}
			custom_tooltip = aakhetist.28.tooltip
			change_aakhet_approval = { value = -15 }
		}
		if = {
			limit = {
				event_target:event_country = {
					num_of_generals = 5
				}
			}
			custom_tooltip = aakhetist.28.tooltip2
			change_aakhet_approval = { value = -10 }
		}
		#effect
		event_target:event_country = {
			if = {
				limit = { 
					ruler_has_personality = mage_personality
					is_monarch_leader = yes
				}
				kill_ruler = yes
			}
			custom_tooltip = aakhetist.28.tooltip3
			hidden_effect = {
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
				kill_leader = general
			}
		}
	}
}

#Aakhet's Conquest
country_event = {
	id = aakhetist.29
	title = aakhetist.29.t
	desc = aakhetist.29.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.29.a
		random_neighbor_country = {
			limit = {
				NOT = {
					is_subject_of = ROOT
					alliance_with = ROOT
					total_development = 500
				}
			}
			reverse_add_casus_belli = { type = cb_vassalize_mission target = ROOT }
		}
	}
}

#Aakhet's Conquest
country_event = {
	id = aakhetist.30
	title = aakhetist.30.t
	desc = aakhetist.30.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.30.a
		if = {
			limit = {
				has_heir = yes
				NOT = { heir_mil = 6 }
			}
			change_heir_mil = 1
		}
		else = { add_mil_power = 100 add_army_tradition = 10 }
	}
}


#Aakhet's Glory
country_event = {
	id = aakhetist.31
	title = aakhetist.31.t
	desc = aakhetist.31.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.31.a
		
	}
}