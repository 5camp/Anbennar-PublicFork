
namespace = aakhetist

#1-19 system stuff
#20-49 religious abilities
#50-99 aakhet demands
#100+ random flavor



################################
### System ###
################################

#Aakhet arrives
country_event = {
	id = aakhetist.01
	title = aakhetist.01.t
	desc = aakhetist.01.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
	}

	option = {
		name = aakhetist.01.a
		custom_tooltip = aakhetist.01.tooltip
		hidden_effect = {
			set_country_flag = current_aakhet_host
			save_global_event_target_as = aakhet_host
		}
	}
}

#Aakhet's approval decreases due to other tag
country_event = {
	id = aakhetist.02
	title = aakhetist.02.t
	desc = aakhetist.02.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
	}

	option = {
		name = aakhetist.02.a
		trigger_switch = {
			on_trigger = has_country_flag

			aakhet_reduction_30 = { change_aakhet_approval = { value = -30 } }
			aakhet_reduction_25 = { change_aakhet_approval = { value = -25 } }
			aakhet_reduction_20 = { change_aakhet_approval = { value = -20 } }
			aakhet_reduction_15 = { change_aakhet_approval = { value = -15 } }
			aakhet_reduction_10 = { change_aakhet_approval = { value = -10 } }
			aakhet_reduction_5 = { change_aakhet_approval = { value = -5 } }
		}
	}

	after = {
		clr_country_flag = aakhet_reduction_30
		clr_country_flag = aakhet_reduction_25
		clr_country_flag = aakhet_reduction_20
		clr_country_flag = aakhet_reduction_15
		clr_country_flag = aakhet_reduction_10
		clr_country_flag = aakhet_reduction_05
	}
}


#Aakhet leaves 
country_event = {
	id = aakhetist.03
	title = aakhetist.03.t
	desc = aakhetist.03.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		religion = aakhetist
		has_country_flag = current_aakhet_host
	}

	option = {
		name = aakhetist.03.a
		custom_tooltip = aakhetist.03.tooltip
		reduce_stability_or_adm_power = yes
		hidden_effect = {
			clr_country_flag = current_aakhet_host

			if = {
				limit = { 
					any_country = {
						religion = aakhetist
						ai = no
						check_variable = { aakhet_approval = 90 }
					}
				}
				random_country = {
					limit = { religion = aakhetist ai = no check_variable = { aakhet_approval = 90 } }
					country_event = { id = aakhetist.01 }
				}
			}
			else_if = {
				limit = { 
					any_country = {
						religion = aakhetist
						check_variable = { aakhet_approval = 90 }
					}
				}
				random_country = {
					limit = {
						religion = aakhetist
						any_known_country = {
							religion = aakhetist
							NOT = { check_variable = { which = aakhet_approval which = PREV } }
						}
					}
					country_event = { id = aakhetist.01 }
				}
			}
			else = { set_global_flag = aakhet_hostless }
		}
	}
}



################################
### Religious Abilities ###
################################


#Offer servitude
country_event = {
	id = aakhetist.20
	title = aakhetist.20.t
	desc = aakhetist.20.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.20.a
		add_prestige = -15
		change_aakhet_approval = { value = 5 }
	}
}

#Offer Food
country_event = {
	id = aakhetist.21
	title = aakhetist.21.t
	desc = aakhetist.21.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.21.a
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				development = 5
			}
			if = {
				limit = { base_tax = 1 }
				add_base_tax = -1
			}
			else_if = {
				limit = { base_production = 1 }
				add_base_production = -1
			}
			else_if = {
				limit = { base_manpower = 1 }
				add_base_manpower = -1
			}
		}
		random_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				development = 4
			}
			if = {
				limit = { base_tax = 1 }
				add_base_tax = -1
			}
			else_if = {
				limit = { base_production = 1 }
				add_base_production = -1
			}
			else_if = {
				limit = { base_manpower = 1 }
				add_base_manpower = -1
			}
		}
		change_aakhet_approval = { value = 15 }
	}
}

#Offer Weapons
country_event = {
	id = aakhetist.22
	title = aakhetist.22.t
	desc = aakhetist.22.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.22.a
		if = {
			limit = { total_development = 1000 }
			add_treasury = -1000
		}
		else_if = {
			limit = { total_development = 750 }
			add_treasury = -750
		}
		else_if = {
			limit = { total_development = 500 }
			add_treasury = -500
		}
		else = { add_years_of_income = -1.5 }
		change_aakhet_approval = { value = 15 }
	}
}

#Offer Knowledge
country_event = {
	id = aakhetist.23
	title = aakhetist.23.t
	desc = aakhetist.23.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.23.a
		add_adm_power = -100
		add_dip_power = -100
		add_mil_power = -100
		change_aakhet_approval = { value = 30 }
	}
}

#Offer Mind
country_event = {
	id = aakhetist.24
	title = aakhetist.24.t
	desc = aakhetist.24.d
	picture = INVENTION_eventPicture
	
	is_triggered_only = yes
	trigger = {  religion = aakhetist }

	option = {
		name = aakhetist.24.a
		if = {
			limit = {
				OR = {
					commandant = 5
					army_organiser = 5
					army_reformer = 5
					fortification_expert = 5
				}
			}
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 30 }
		}
		else_if = {
			limit = {
				OR = {
					commandant = 4
					army_organiser = 4
					army_reformer = 4
					fortification_expert = 4
				}
			}
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 20 }
		}
		else = {
			remove_advisor_by_category = MIL
			change_aakhet_approval = { value = 10 }
		}
	}
}