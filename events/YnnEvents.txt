
namespace = ynn_events

# Ynn Urbanization
country_event = {
	id = ynn_events.0
	title = ynn_events.0.t
	desc = ynn_events.0.d
	picture = CITY_VIEW_eventPicture
	
	fire_only_once = yes
	major = yes
	
	trigger = {
		is_year = 1620
		capital_scope = { 
			OR = {
				superregion = ynn_superregion 
				region = forest_of_the_cursed_ones_region
				area = ynnsmouth_area
			}
		}
		OR = {
			ai = no
			num_of_cities = 10
		}
		has_institution = global_trade
        OR = {
            AND = {
                has_dlc = "Mandate of Heaven"
                1139 = { is_prosperous = yes }
                1171 = { is_prosperous = yes }
                1191 = { is_prosperous = yes }
            }
            NOT = {
                has_dlc = "Mandate of Heaven"
				1139 = { devastation = 1 }
                1171 = { devastation = 1 }
                1191 = { devastation = 1 }
            }
        }
		OR = {
			AND = {
				has_dlc = "Rights of Man"
				is_great_power = yes
			}
			AND = {
				NOT = { has_dlc = "Rights of Man" }
				total_development = 300
			}
		}
		capital_scope = { superregion = ynn_superregion }
		has_institution = global_trade
	}

	mean_time_to_happen = {
		months = 1
	}
	
	# Hooray
	option = {
        name = ynn_events.0.a
		add_prestige = 10
		add_stability_or_adm_power = yes
		1139 = {
			remove_province_modifier = ynn_urban_decline
			add_center_of_trade_level = 1
			owner = {
				add_opinion = {
					who = ROOT
					modifier = opinion_grateful
				}
			}
		}
		1171 = {
			remove_province_modifier = ynn_urban_decline
			add_center_of_trade_level = 1
			owner = {
				add_opinion = {
					who = ROOT
					modifier = opinion_grateful
				}
			}
		}
		1191 = {
			remove_province_modifier = ynn_urban_decline
			add_center_of_trade_level = 1
			owner = {
				add_opinion = {
					who = ROOT
					modifier = opinion_grateful
				}
			}
		}
		add_country_modifier = {
			name = ynn_ynnic_population_boom
			duration = -1
		}
	}
}

country_event = { #Prepare infrastructure Tromseloc way
	id = ynn_events.1
	title = ynn_events.1.t
	desc = ynn_events.1.d
	picture = EXPLORERS_eventPicture

	is_triggered_only = yes

	trigger = {
		technology_group = tech_ynnic
	}

	option = {
		name = ynn_events.1.a
		2781 = {
			add_siberian_construction = 400
			rename_capital = "Rohaves"	
		}
	}
}

#iosahar drifts away
#country_event = {
#	id = ynn_events.6
#	title = ynn_events.6.t
#	desc = ynn_events.6.d
#	picture = ACCUSATION_eventPicture
#	goto = iosahar_into_tributary_capital
#	
#	is_triggered_only = yes
#	trigger = {
#		has_country_modifier = ynn_diplo
#		any_subject_country = {
#			is_subject_of_type = ynnic_iosahar
#			NOT = { is_neighbor_of = ROOT }
#			liberty_desire = 20
#		}
#		NOT = { 
#			has_country_flag = yrw_overlord_debating
#			stability = 3
#		}
#	}
#	
#	immediate = {
#		hidden_effect = {
#			random_subject_country = {
#				limit = {
#					is_subject_of_type = ynnic_iosahar
#					NOT = { is_neighbor_of = ROOT }
#					liberty_desire = 20
#				}
#				save_event_target_as = iosahar_into_tributary_target
#				capital_scope = {
#					save_event_target_as = iosahar_into_tributary_capital
#				}
#			}
#			random_subject_country = {
#				limit = {
#					is_subject_of_type = ynnic_iosahar
#					NOT = { is_neighbor_of = ROOT }
#					liberty_desire = 50	#Prioritizes disloyal vassals
#				}
#				save_event_target_as = iosahar_into_tributary_target
#				capital_scope = {
#					save_event_target_as = iosahar_into_tributary_capital
#				}
#			}
#		}
#	}
#	
#	option = {
#		name = ynn_events.6.a
#		trigger = {
#			has_dlc = "El Dorado"
#			authority = 5
#		}
#		ai_chance = {
#			factor = 5
#			modifier = {
#				factor = 2
#				NOT = { ynnic_iosahar = 3 }
#			}
#		}
#		
#		custom_tooltip = iosahar_goes_tributary_dlc_tooltip
#		add_authority = -5
#	}
#	
#	option = {
#		name = ynn_events.6.a
#		trigger = {
#			NOT = { has_dlc = "El Dorado" }
#			legitimacy = 5		#insert whatever currency you replace legitimacy with
#		}
#		ai_chance = {
#			factor = 5
#			modifier = {
#				factor = 2
#				NOT = { ynnic_iosahar = 3 }
#			}
#		}
#		
#		custom_tooltip = iosahar_goes_tributary_no_dlc_tooltip
#		add_legitimacy = -5		#insert whatever currency you replace legitimacy with
#	}
#
#	option = {
#		name = ynn_events.6.b
#		
#		trigger = {
#			has_dlc = "Mandate of Heaven"
#		}
#		ai_chance = {
#			factor = 3
#			modifier = {
#				factor = 3
#				ynnic_iosahar = 8
#			}
#		}
#		
#		custom_tooltip = iosahar_goes_tributary_dlc_tooltip
#		event_target:iosahar_into_tributary_target = {
#			ROOT = {
#				create_subject = {
#					subject_type = tributary_state
#					subject = PREV
#				}
#			}
#			hidden_effect = { country_event = { id = ynn_events.18 } }
#		}
#	}
#
#	option = {
#		name = ynn_events.6.c
#		
#		trigger = {
#			NOT = { has_dlc = "Mandate of Heaven" }
#		}
#		ai_chance = {
#			factor = 3
#			modifier = {
#				factor = 3
#				ynnic_iosahar = 8
#			}
#		}
#		
#		custom_tooltip = iosahar_goes_tributary_no_dlc_tooltip
#		event_target:iosahar_into_tributary_target = {
#			grant_independence = yes
#			hidden_effect = { country_event = { id = ynn_events.18 } }
#		}
#	}
#}

#The Great Iosahar Insurrection - For the debate-triggered version, see ynn_debate.19
country_event = {
	id = ynn_events.7
	title = ynn_events.7.t
	desc = {
		trigger = { has_country_flag = ynn_civil_war_iosahar }	#Triggered by discontinuing the Iosahar system
	   desc = ynn_events.7.d1
	}
	desc = {
	   trigger = { has_country_flag = ynn_civil_war_religion }	#Triggered by converting away from Ynn River Worship
	   desc = ynn_events.7.d2
	}
	picture = ACCUSATION_eventPicture
	
	is_triggered_only = yes
	trigger = {
		NOT = { is_companion = yes }
		liberty_desire = 30
		is_subject_of_type = ynnic_iosahar
	}
	
	immediate = {
		hidden_effect = {
			save_event_target_as = ynn_civil_war_leader
		}
	}
	
	option = {
		name = ynn_events.7.a		
		
		ai_chance = {
			factor = 1
		}
		
		set_country_flag = ynn_iosahar_is_revolting
		grant_independence = yes
		
		FROM = {
			every_subject_country = {
				limit = {
					is_subject_of_type = ynnic_iosahar
					liberty_desire = 30
				}
				set_country_flag = ynn_iosahar_is_revolting
				event_target:ynn_civil_war_leader = {
					create_subject = {
						subject_type = ynnic_iosahar
						subject = PREV
					}
				}
			}
			country_event = { id = ynn_events.8 }
		}
		declare_war_with_cb = {
			who = FROM
			casus_belli = cb_iosahar_annex
		}
	}

	option = {
		name = ynn_events.7.b
		
		ai_chance = {
			factor = 0
		}
		add_prestige = -10
	}
	
	after = {
		event_target:ynn_civil_war_leader = {
			add_country_modifier = {	#Five years of loyal vassals, ensures they contribute to the revolt
				name = ynn_leading_iosahar_revolt
				duration = 1825
			}
		}
	}
}

#The Great Iosahar Insurrection
country_event = {
	id = ynn_events.8
	title = ynn_events.8.t
	desc = {
		trigger = { FROM = { has_country_flag = ynn_civil_war_iosahar } }
	   desc = ynn_events.8.d1
	}
	desc = {
	   trigger = { FROM = { has_country_flag = ynn_civil_war_religion } }
	   desc = ynn_events.8.d2
	}
	picture = CIVIL_WAR_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = ynn_events.8.a		
		
		ai_chance = {
			factor = 1
		}
		
		add_stability = -1
		custom_tooltip = ynn_events_8_tooltip
		#tooltip = {	#broken, tooltip doesn't show
		#	FROM = {
		#		declare_war_with_cb = {
		#			who = ROOT
		#			casus_belli = cb_iosahar_annex
		#		}
		#	}
		#}
	}
	
	after = {
		FROM = {
			clr_country_flag = ynn_civil_war_iosahar
			clr_country_flag = ynn_civil_war_religion
		}
	}
}

country_event = {	#Event used to turn someone into a Iosahar. Use ynn_events.20 if you want it to be hidden
	id = ynn_events.9
	title = ynn_events.9.t
	desc = {
		trigger = { NOT = { has_reform = malacnar_monarchy } }
		desc = ynn_events.9.d1
	}
	desc = {
		trigger = { has_reform = malacnar_monarchy }
		desc = ynn_events.9.d2
	}
	picture = CONQUEST_eventPicture

	is_triggered_only = yes
	
	trigger = {
		NOT = { has_country_flag = ynnic_debug_subjugation }
		#FROM = { has_country_modifier = ynn_diplo }
	}
	
	immediate = {
		set_country_flag = ynnic_debug_subjugation
		set_country_flag = ynnic_debug_subjugation_2
	}
	
	option = {
		name = ynn_events.9.a
		ai_chance = { factor = 1 }
		hidden_effect = { clr_country_flag = ynnic_debug_subjugation }
		add_prestige = -25
		tooltip = {
			FROM = {
				create_subject = {
					subject_type = ynnic_iosahar
					subject = ROOT
				}
			}
		}
		every_subject_country = {
			if = {	#Breaks PUs
				limit = {
					junior_union_with = ROOT
				}
				break_union = ROOT
			}
			else_if = {		#Iosahar and countries with Ynnic diplomacy are now yours
				limit = {
					OR = {
						is_subject_of_type = ynnic_iosahar
						has_country_modifier = ynn_diplo
					}
				}
				FROM = {
					create_subject = {
						subject_type = ynnic_iosahar
						subject = PREV
					}
				}
			}
			else = {	#Other subjects are released
				grant_independence = yes
			}
		}
		hidden_effect = {
			if = {	#cleaning allies for an overlord
				limit = {
					FROM = {
						ynnic_iosahar = 1
						has_country_modifier = ynn_diplo
						num_of_allies = 1
					}
				}
				ROOT = {
					if = {
						limit = {
							is_subject_of = FROM
							is_subject_of_type = ynnic_iosahar
						}
					}
					create_subject = {
						subject_type = vassal
						subject = FROM
					}
					FROM = {
						grant_independence = yes
					#	create_subject = {
					#		subject_type = ynnic_iosahar
					#		subject = ROOT
					#	}
					}
				}
			}
		}
		
		if = {
			limit = {
				tag = G32
				has_reform = malacnar_monarchy
			}
			FROM = { country_event = { id = flavor_malacnar.200 } }	#The fate of Malacnar
		}
	}
	
	after = {
		clr_country_flag = ynnic_debug_subjugation_2
		FROM = {	#Aftereffect takes care of the double overlords bug
			create_subject = {
				subject_type = ynnic_iosahar
				subject = ROOT
			}
		}
	}
}

#Iosahar Defects Due to Alliance
country_event = {
	id = ynn_events.10
	title = ynn_events.10.t
	desc = ynn_events.10.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_country_modifier = ynn_diplo
			NOT = { has_country_flag = ynnic_debug_subjugation_2 }	#To fix a subjugated overlord getting this event on its former iosahar
		}
		any_ally = {
			war_with = FROM
		}
	}
	
	option = {
		name = ynn_events.10.a		
		
		ai_chance = {
			factor = 1
		}
		
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = ynn_overlord_at_war_with_iosahar
			}
			add_trust = {
				who = ROOT
				value = -5
				mutual = yes	#Mutual loss of trust is so that you won't purposefully declare war on your Iosahar's allies to use the Iosahar as a piggy bank
			}
			add_prestige = -5 
		}
		
		custom_tooltip = you_as_iosahar_defect_tooltip
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
		hidden_effect = { FROM = { country_event = { id = ynn_events.11 } } }
	}
}

#Overlord is Informed of Iosahar Defection
country_event = {
	id = ynn_events.11
	title = ynn_events.11.t
	desc = ynn_events.11.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes
	
	#hidden = yes #Can hide it if it's too obnoxious
	
	option = {
		name = ynn_events.11.a		
		
		ai_chance = {
			factor = 1
		}
		
		tooltip = {
			add_opinion = {
				who = FROM
				modifier = ynn_overlord_at_war_with_iosahar
			}
			add_trust = {
				who = FROM
				value = -5
				mutual = yes
			}
			add_prestige = -5 
		}

		custom_tooltip = iosahar_defects_tooltip

		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
	}
}

#Iosahar-overlord war ends
country_event = {
	id = ynn_events.12
	title = ynn_events.12.t
	desc = ynn_events.12.d
	picture = REFORM_eventPicture

	is_triggered_only = yes
	
	trigger = {
		FROM = { has_country_modifier = ynn_diplo }	#Defeated by a country that observes Ynnic Diplomacy
	}
	
	hidden = yes
	
	option = {
		name = ynn_events.12.a		
		
		ai_chance = {
			factor = 1
		}
		
		country_event = { id = ynn_events.13 }
		every_ally = { country_event = { id = ynn_events.13 } }
	}
}

#Sorter Event
country_event = {
	id = ynn_events.13
	title = ynn_events.13.t
	desc = ynn_events.13.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes
	
	hidden = yes
	
	trigger = {
		any_known_country = {
			OR = {
				has_opinion_modifier = {	
					who = ROOT
					modifier = ynn_overlord_at_war_with_iosahar
				}
				reverse_has_opinion_modifier = {	
					who = ROOT
					modifier = ynn_overlord_at_war_with_iosahar
				}
			}
		}
	}
	
	option = {
		name = ynn_events.13.a
		
		ai_chance = {
			factor = 1
		}
		
		random_known_country = {	#Checks if you are a Iosahar defector, you regain them
			limit = { 
				has_opinion_modifier = {	
					who = ROOT
					modifier = ynn_overlord_at_war_with_iosahar
				}
			}
			country_event = { id = ynn_events.14 }
			overlord = {			#In case the overlord has been made into a Iosahar, the new overlord gets it. This scenario is currently impossible, as making an overlord into a Iosahar will make them lose the defector
				country_event = { id = ynn_events.14 } 
				set_country_flag = ynn_14_overlord
			}
		}
		
		random_known_country = {	#Checks if you have any Iosahar defector, you lose em
			limit = { 
				reverse_has_opinion_modifier = {	
					who = ROOT
					modifier = ynn_overlord_at_war_with_iosahar
				}
			}
			country_event = { id = ynn_events.15 }
		}
	}
}

#Your Iosahar is returned
country_event = {
	id = ynn_events.14
	title = ynn_events.14.t
	desc = {
		trigger = { NOT = { has_country_flag = ynn_14_overlord } }
		desc = ynn_events.14.d1
	}
	desc = {
		trigger = { has_country_flag = ynn_14_overlord }
		desc = ynn_events.14.d2
	}
	picture = CONQUEST_eventPicture
	goto = iosahar_traitor


	is_triggered_only = yes
	
	trigger = { is_subject = no }
	
	immediate = {
		hidden_effect = {
			remove_opinion = {
				who = FROM
				modifier = ynn_overlord_at_war_with_iosahar
			}
			FROM = { country_event = { id = ynn_events.20 } }
		}
	}
	
	option = {	#Traitors get their heads removed
		name = ynn_events.14.a
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = righteous_personality
					ruler_has_personality = bold_fighter_personality
					ruler_has_personality = inspiring_leader_personality
					ruler_has_personality = incorruptible_personality
					ruler_has_personality = just_personality
				}
			}
		}
		
		tooltip = {
			remove_opinion = {
				who = FROM
				modifier = ynn_overlord_at_war_with_iosahar
			}
			create_subject = {
				subject_type = ynnic_iosahar
				subject = FROM
			}
			FROM = {
				add_liberty_desire = 10
			}
			every_subject_country = {
				limit = {
					NOT = {
						tag = FROM
					}
				}
				add_liberty_desire = -5
			}
		}

		FROM = {
			country_event = {	#Ruler of FROM gets executed event
				id = ynn_events.39
				days = 2
			}
		}
		hidden_effect = {
			FROM = {
				save_event_target_as = iosahar_traitor
			}
			country_event = {
				id = ynn_events.39
				days = 2
			}
			every_subject_country = {
				country_event = {
					id = ynn_events.39
					days = 2
				}
			}
		}

		add_prestige = 10
		
		clr_country_flag = ynn_14_overlord
	}

	option = {	#Just pacify them by taking "Wards" definitely not hostages
		name = ynn_events.14.b
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = secretive_personality
					ruler_has_personality = intricate_web_weaver_personality
					ruler_has_personality = silver_tongue_personality
					ruler_has_personality = tactical_genius_personality
				}
			}
		}
		
		tooltip = {
			remove_opinion = {
				who = FROM
				modifier = ynn_overlord_at_war_with_iosahar
			}
			create_subject = {
				subject_type = ynnic_iosahar
				subject = FROM
			}
			FROM = {
				add_liberty_desire = -15
			}
			every_subject_country = {
				limit = {
					NOT = {
						tag = FROM
					}
				}
				add_liberty_desire = 5
			}
		}

		FROM = {
			country_event = {	#Overlord demands hostages
				id = ynn_events.38
				days = 2
			}
		}

		hidden_effect = {
			FROM = {
				save_event_target_as = iosahar_traitor
			}
			country_event = {
				id = ynn_events.38
				days = 2
			}
			every_subject_country = {
				country_event = {
					id = ynn_events.38
				}
			}
		}

		add_prestige = 10
		
		clr_country_flag = ynn_14_overlord
	}

	option = {	#Kill the fucker and take hostages
		name = ynn_events.14.c
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = malevolent_personality
					ruler_has_personality = conqueror_personality
					ruler_has_personality = mythical_conqueror_personality
					ruler_has_personality = great_conqueror_personality
				}
			}
		}
		
		tooltip = {
			remove_opinion = {
				who = FROM
				modifier = ynn_overlord_at_war_with_iosahar
			}
			create_subject = {
				subject_type = ynnic_iosahar
				subject = FROM
			}
			FROM = {
				add_liberty_desire = -5
			}
		}
		
		FROM = {
			country_event = {
				id = ynn_events.37
			}
		}

		hidden_effect = {
			FROM = {
				save_event_target_as = iosahar_traitor
			}
			country_event = {
				id = ynn_events.37
			}
			every_subject_country = {
				limit = {
					NOT = {
						tag = FROM 
					}
				}
				country_event = {
					id = ynn_events.37
				}
			}
		}

		add_prestige = 10
		
		clr_country_flag = ynn_14_overlord
	}

	option = {	#Simply chastise them heavily
		name = ynn_events.14.e
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = craven_personality
					ruler_has_personality = charismatic_negotiator_personality
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = malevolent_personality
					ruler_has_personality = bold_fighter_personality
				}
			}
		}
		
		tooltip = {
			remove_opinion = {
				who = FROM
				modifier = ynn_overlord_at_war_with_iosahar
			}
			create_subject = {
				subject_type = ynnic_iosahar
				subject = FROM
			}
			every_subject_country = {
				random = {
					chance = 25
					add_liberty_desire = -5
				}
			}
		}
		
		add_prestige = 10
		
		clr_country_flag = ynn_14_overlord
	}
}

#Defector Iosahar goes free
country_event = {
	id = ynn_events.15
	title = ynn_events.15.t
	desc = ynn_events.15.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		hidden_effect = {
			FROM = {
				remove_opinion = {
					who = ROOT
					modifier = ynn_overlord_at_war_with_iosahar
				}
			}
		}
	}
	
	option = {
		name = ynn_events.15.a
		
		ai_chance = {
			factor = 1
		}
		
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = vassal_broke_free
			}
			add_trust = {
				who = ROOT
				value = -5
				mutual = yes
			}
			add_prestige = -5
			country_event = { id = ynn_events.16 }
		}
	}
}

#You are informed your defector Iosahar went free
country_event = {
	id = ynn_events.16
	title = ynn_events.16.t
	desc = ynn_events.16.d
	picture = COUNTRY_COLLAPSE_eventPicture

	is_triggered_only = yes
	
	option = {
		name = ynn_events.16.a
		
		ai_chance = {
			factor = 1
		}
		
		tooltip = {
			add_opinion = {
				who = FROM
				modifier = vassal_broke_free
			}
			add_trust = {
				who = FROM
				value = -5
				mutual = yes
			}
			add_prestige = -5
		}
	}
}

#The Dragon Kingdom - Rzentur ditch Ynnic Diplomacy
country_event = {
	id = ynn_events.17
	title = ynn_events.17.t
	desc = ynn_events.17.d
	picture = CONQUEST_eventPicture

	is_triggered_only = yes
	#fire_only_once = yes
	major = yes
	
	trigger = {	#Is a Drozma Tur Rzentur who has vassalized or annexed every other Rzentur.
		religion = drozma_tur
		has_country_modifier = ynn_diplo
		is_subject = no
		NOT = { is_year = 1500 }	#Stops the checks after the first century, just end the iosahar by decision afterwards
		NOT = { has_country_modifier = ynn_leading_iosahar_revolt }	#Pomvasonn led a iosahar rebellion just to turn everybody into normal vassals, in one test game
		primary_culture = rzentur
		all_known_country = {
			OR = {
				NOT = { religion = drozma_tur }
				is_subject_of = ROOT
			}
		}
	}
	
	immediate = {	#If you have non-Drozma Tur / non-Rzentur subjects, they rise up in rebellion
		hidden_effect = {
			random_subject_country = {
				limit = {
					is_subject_of_type = ynnic_iosahar
					NOT = { primary_culture = rzentur }
					liberty_desire = 20
					all_known_country = {
						NOT = {
							AND = {
								is_subject_of_type = ynnic_iosahar
								is_subject_of = ROOT
								total_development = PREV
								NOT = { primary_culture = rzentur }
								liberty_desire = 20
							}
						}
					}
				}
				set_country_flag = ynn_civil_war_iosahar
				save_event_target_as = iosahar_ynn_17
			}
		}
	}
	
	option = {
		name = ynn_events.17.a
		
		ai_chance = {
			factor = 1
		}
		
		remove_country_modifier = ynn_diplo
		
		if = {
			limit = {
				ynnic_iosahar = 1
			}
			custom_tooltip = ynn_17_tooltip
			hidden_effect = {
				every_subject_country = {
					limit = {
						is_subject_of_type = ynnic_iosahar
						primary_culture = rzentur
						NOT = { has_country_flag = ynn_civil_war_iosahar }
					}
					remove_country_modifier = ynn_diplo
					ROOT = {
						create_subject = {
							subject_type = vassal
							subject = PREV
						}
					}
				}
				every_subject_country = {
					add_liberty_desire = 20
					add_trust = {
						who = ROOT
						value = -10
						mutual = no
					}
				}
			}
			
			if = {	#Checks if there's enough non-Rzentur / non-DT countries for a rebellion
				limit = {
					any_subject_country = {
						is_subject_of_type = ynnic_iosahar
						has_country_flag = ynn_civil_war_iosahar
					}
					any_subject_country = {
						is_subject_of_type = ynnic_iosahar
						NOT = { primary_culture = rzentur }
						NOT = { has_country_flag = ynn_civil_war_iosahar }
						liberty_desire = 20
					}
				}
				custom_tooltip = ynn_17_tooltip_really_good_idea
				hidden_effect = {
					event_target:iosahar_ynn_17 = {
						set_country_flag = ynn_civil_war_iosahar
						country_event = { id = ynn_events.7 }
					}
				}
			}
			else = {
				hidden_effect = {
					event_target:iosahar_ynn_17 = {
						remove_country_modifier = ynn_diplo
						ROOT = {
							create_subject = {
								subject_type = vassal
								subject = PREV
							}
						}
						clr_country_flag = ynn_civil_war_iosahar
					}
					every_subject_country = {
						limit = {
							is_subject_of_type = ynnic_iosahar
							NOT = { primary_culture = rzentur }
						}
						remove_country_modifier = ynn_diplo
						ROOT = {
							create_subject = {
								subject_type = vassal
								subject = PREV
							}
						}
					}
				}
			}
		}
		
		add_country_modifier = {
			name = ruling_like_dragons
			duration = 7300
		}
	}
	
	option = {
		name = ynn_events.17.b
		
		trigger = {
			ynnic_iosahar = 2
		}
		
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				NOT = { tag = G23 }
			}
		}
	}
}

#iosahar drifts away
country_event = {
	id = ynn_events.18
	title = ynn_events.18.t
	desc = {
		trigger = { is_subject_of_type = tributary_state }
		desc = ynn_events.18.d1
	}
	desc = {
		trigger = { is_subject = no }
		desc = ynn_events.18.d2
	}
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = ynn_events.18.a
		ai_chance = {
			factor = 1
		}
		
		if = {
			limit = { is_subject_of_type = tributary_state }
			tooltip = {
				FROM = {
					create_subject = {
						subject_type = tributary_state
						subject = ROOT
					}
				}
			}
		}
		
		FROM = {
			add_trust = {
				who = ROOT
				value = -10
				mutual = yes
			}
		}
	}
}

#iosahar doesn't get inherited
country_event = {
	id = ynn_events.19
	title = ynn_events.19.t
	desc = ynn_events.19.d
	picture = COUNTRY_COLLAPSE_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	trigger = {
		is_subject_of_type = ynnic_iosahar
		FROM = {
			NOT = { has_country_modifier = ynn_diplo }
			NOT = {
				has_opinion_modifier = {
					who = ROOT
					modifier = ynn_revolting_iosahar
				}
			}
		}
		is_companion = no
	}
	
	option = {
		name = ynn_events.19.a
		ai_chance = {
			factor = 1
		}
		
		grant_independence = yes
		
	}
}

country_event = {	#Hidden event used to turn someone into a Iosahar. Use ynn_events.9 if you want it to be visible
	id = ynn_events.20
	title = ynn_events.20.t
	desc = ynn_events.20.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		NOT = { has_country_flag = ynnic_debug_subjugation }
		#FROM = { has_country_modifier = ynn_diplo }
	}
	
	immediate = {
		set_country_flag = ynnic_debug_subjugation
		set_country_flag = ynnic_debug_subjugation_2
	}
	
	option = {
		name = ynn_events.20.a
		ai_chance = { factor = 1 }
		hidden_effect = { clr_country_flag = ynnic_debug_subjugation }
		tooltip = {
			FROM = {
				create_subject = {
					subject_type = ynnic_iosahar
					subject = ROOT
				}
			}
		}
		every_subject_country = {
			if = {	#Breaks PUs
				limit = {
					junior_union_with = ROOT
				}
				break_union = ROOT
			}
			else_if = {		#Iosahar and countries with Ynnic diplomacy are now yours
				limit = {
					OR = {
						is_subject_of_type = ynnic_iosahar
						has_country_modifier = ynn_diplo
					}
				}
				FROM = {
					create_subject = {
						subject_type = ynnic_iosahar
						subject = PREV
					}
				}
			}
			else = {	#Other subjects are released
				grant_independence = yes
			}
		}
		hidden_effect = {
			if = {	#cleaning allies for an overlord
				limit = {
					FROM = {
						ynnic_iosahar = 1
						has_country_modifier = ynn_diplo
						num_of_allies = 1
					}
				}
				ROOT = {
					if = {
						limit = {
							is_subject_of = FROM
							is_subject_of_type = ynnic_iosahar
						}
					}
					create_subject = {
						subject_type = vassal
						subject = FROM
					}
					FROM = {
						grant_independence = yes
					#	create_subject = {
					#		subject_type = ynnic_iosahar
					#		subject = ROOT
					#	}
					}
				}
			}
		}
		
		if = {
			limit = {
				tag = G32
				has_reform = malacnar_monarchy
			}
			FROM = { country_event = { id = flavor_malacnar.200 } }	#The fate of Malacnar
		}
	}
	
	after = {
		clr_country_flag = ynnic_debug_subjugation_2
		FROM = {	#Aftereffect takes care of the double overlords bug
			create_subject = {
				subject_type = ynnic_iosahar
				subject = ROOT
			}
		}
	}
}

country_event = {	#Background event to transfer Iosahar of Iosahar to the top overlord
	id = ynn_events.21
	title = ynn_events.21.t
	desc = ynn_events.21.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		ynnic_iosahar = 1
		is_subject = no
		any_subject_country = {
			is_subject_of_type = ynnic_iosahar
			ynnic_iosahar = 1
		}
	}
	
	option = {
		name = ynn_events.21.a
		ai_chance = { factor = 1 }
		
		every_subject_country = {
			limit = {
				is_subject_of_type = ynnic_iosahar
				ynnic_iosahar = 1
			}
			every_subject_country = {
				limit = {
					is_subject_of_type = ynnic_iosahar
				}
				grant_independence = yes # So you don't get a double subject
				country_event = { id = ynn_events.9 }
			}
		}
	}
}

#Visitors to Adbrabohvi
country_event = {
	id = ynn_events.22
	title = ynn_events.22.t
	desc = ynn_events.22.d
	picture = TRADE_GOODS_FURS_FISH_AND_SALT_eventPicture
	
	fire_only_once = yes
	major = yes
	
	trigger = {
		owns = 1133
		any_country = {
			has_discovered = 1133
			NOT = {
				technology_group = tech_ynnic
				culture_is_ruinborn = yes
			}
		}
	}
	
	option = {
		name = ynn_events.22.a

		medium_increase_of_human_tolerance_effect = yes
		medium_increase_of_halfling_tolerance_effect = yes
		medium_increase_of_elven_tolerance_effect = yes
		medium_increase_of_dwarven_tolerance_effect = yes
		medium_increase_of_half_orcish_tolerance_effect = yes
		
		1133 = { 
			center_of_trade = 1
		}
		add_country_modifier = {
			name = adbrabohvi_cultural_shock
			duration = 7300
		}
		
		if = {
			limit = {
				has_country_flag = yrw_1a	#Debating for inclusiveness
			}
			every_subject_country = {
				limit = { is_subject_of_type = ynnic_iosahar }
				yrw_iosahar_liberty_ally_1 = yes
			}
		}
		else_if = {
			limit = {
				has_country_flag = yrw_1b	#Debating for excluding non Ynnics
			}
			every_subject_country = {
				limit = { is_subject_of_type = ynnic_iosahar }
				yrw_iosahar_liberty_opposition_1 = yes
			}
		}
		else_if = {
			limit = {	#Contradicting your chosen reform
				OR = {
					has_country_flag = yrw_1b_reform
					has_country_modifier = yrw_1b
					overlord = { has_country_flag = yrw_1b_reform }
					overlord = { has_country_modifier = yrw_1b }
				}
			}
			reduce_stability_or_adm_power = yes
		}
		
		ai_chance = {
			factor = 1
		}
	}
		
	option = {
		name = ynn_events.22.b

		medium_decrease_of_human_tolerance_effect = yes
		medium_decrease_of_halfling_tolerance_effect = yes
		medium_decrease_of_elven_tolerance_effect = yes
		medium_decrease_of_dwarven_tolerance_effect = yes
		medium_decrease_of_half_orcish_tolerance_effect = yes
		
		if = {
			limit = {
				has_country_flag = yrw_1a	#Debating for inclusiveness
			}
			every_subject_country = {
				limit = { is_subject_of_type = ynnic_iosahar }
				yrw_iosahar_liberty_opposition_1 = yes
			}
		}
		else_if = {
			limit = {
				has_country_flag = yrw_1b	#Debating for excluding non Ynnics
			}
			add_stability_or_adm_power = yes
			every_subject_country = {
				limit = { is_subject_of_type = ynnic_iosahar }
				yrw_iosahar_liberty_ally_1 = yes
			}
		}
		else_if = {
			limit = {	#Stabilizing so long as you're not contradicting your chosen reform
				NOT = {
					has_country_flag = yrw_1a
					has_country_flag = yrw_1a_reform
					has_country_modifier = yrw_1a
					overlord = { has_country_flag = yrw_1a_reform }
					overlord = { has_country_modifier = yrw_1a }
				}
			}
			add_stability_or_adm_power = yes
		}
		
		random = {
			chance = 50
			custom_tooltip = ynn_22_tooltip
		}
		random = {
			chance = 50
			1133 = {
				spawn_rebels = {
					type = pretender_rebels
					size = 2
					culture = vernman
					religion = regent_court	#might be too early for Corinite
					leader = "Aril 'the Courteous'"
					leader_dynasty = "sina Redcoast"
					win = no
				}
			}
		}
		
		ai_chance = {	#Non-canon option, would be annoying for players to lose out on a CoT
			factor = 0
		}
	}
}

province_event = {	#Pomentere Estates
	id = ynn_events.23
	title = ynn_events.23.t
	desc = ynn_events.23.d
	picture = NATIVES_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		owner = { has_country_flag = has_pomentere_estates }
	}
	
	#Update the modifier
	option = {
        name = ynn_events.23.a
		if = {
			limit = {
				culture = veykodan
				has_owner_accepted_culture = yes
			}
			add_province_modifier = {
				name = ynn_pomentere_estates
				duration = -1
			}
		}
		else = {
			remove_province_modifier = ynn_pomentere_estates
		}
	}
}

country_event = {	#The Dragon Cult's Last Stand
	id = ynn_events.24
	title = ynn_events.24.t
	desc = ynn_events.24.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = drozma_fighting_last_stand
	}
	
	immediate = {
		hidden_effect = {
			random_province = {
				limit = {
					province_id = 1191
				}
				save_event_target_as = drozma_last_stand_prov
			}
			if = {
				limit = {
					is_year = 1480
				}
				set_country_flag = drozma_grown_prince
			}
			#random_province = {
			#	limit = {
			#		has_province_modifier = drozma_dragon_prince
			#	}
			#	save_event_target_as = drozma_last_stand_prov
			#}
		}
	}
	
	option = {
        name = ynn_events.24.a		#Dolenmach + DT fanatics + Dragon itself fight against you
		if = {
			limit = { has_country_flag = drozma_grown_prince }
			event_target:drozma_last_stand_prov = {
				spawn_rebels = {
					type = drozma_tur_rebels
					size = 3
					leader = "Erethra Dolenmach"
				}
				set_province_flag = drozma_last_stand_prov_flag
			}
		}
		else = {
			event_target:drozma_last_stand_prov = {
				spawn_rebels = {
					type = drozma_tur_rebels
					size = 2
					leader = "Erethra Dolenmach"
				}
				set_province_flag = drozma_last_stand_prov_flag
			}
		}
	}
}

country_event = {	#Controller event for 26
	id = ynn_events.25
	title = ynn_events.25.t
	desc = ynn_events.25.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = ynn_events.25.a
		
		if = {
			limit = {
				has_country_flag = drozma_fighting_last_stand
			}
			country_event = { id = ynn_events.26 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = drozma_fighting_last_stand
				}
				country_event = { id = ynn_events.26 }
			}
		}
	}
}

country_event = {	#You beat the Dragon Cult's last stand
	id = ynn_events.26
	title = ynn_events.26.t
	desc = {
		trigger = { NOT = { has_country_flag = drozma_grown_prince } }
		desc = ynn_events.26.d1
	}
	desc = {
		trigger = { 
			has_country_flag = drozma_grown_prince
			NOT = { has_country_flag = drozma_leader_v_dragon }
		}
		desc = ynn_events.26.d2
	}
	desc = {
		trigger = { 
			has_country_flag = drozma_grown_prince 
			has_country_flag = drozma_leader_v_dragon
			has_country_flag = drozma_die_to_dragon
		}
		desc = ynn_events.26.d3	#Leader fights dragon and dies
	}
	desc = {
		trigger = { 
			has_country_flag = drozma_grown_prince 
			has_country_flag = drozma_leader_v_dragon
			has_country_flag = drozma_slay_dragon
		}
		desc = ynn_events.26.d4	#Leader fights dragon and wins
	}
	picture = IMPALED_SOLDIERS_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	trigger = {
		has_country_flag = drozma_fighting_last_stand
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = drozma_grown_prince
					has_country_flag = drozma_leader_v_dragon
					calc_true_if = {
						mil = 6
						mil = 5
						ruler_has_mage_personality = yes
						ruler_has_personality = tactical_genius_personality
						ruler_has_personality = bold_fighter_personality
						ruler_has_personality = strict_personality
						ruler_has_personality = inspiring_leader_personality
						ruler_has_personality = martial_educator_personality
						has_ruler_modifier = g32_legendary_battleking
						has_ruler_modifier = g32_veteran_battleking
						tag = G34	 #Arganjuzorn
						amount = 3
					}
				}
				set_country_flag = drozma_slay_dragon
			}
			else_if = {
				limit = {
					has_country_flag = drozma_grown_prince
					has_country_flag = drozma_leader_v_dragon
				}
				set_country_flag = drozma_die_to_dragon
			}
			random_province = {
				limit = {
					has_province_flag = drozma_last_stand_prov_flag
				}
				save_event_target_as = drozma_last_stand_prov
				clr_province_flag = drozma_last_stand_prov_flag
			}
			if = {
				limit = { has_country_flag = drozma_grown_prince }
				event_target:drozma_last_stand_prov = {
					kill_units = {
						who = ROOT
						type = infantry
						amount = 5
					}
				}
			}
		}
	}
	
	option = {
        name = ynn_events.26.a
		
		if = {
			limit = {
				has_country_flag = drozma_slay_dragon
			}
			add_stability_or_adm_power = yes
			add_prestige = 50
			add_splendor = 200
			malacnar_battleking_rankup = yes
			add_authority = 20
			add_ruler_modifier = {
				name = ynn_dragonslayer
				duration = -1
			}
		}
		else_if = {
			limit = {
				has_country_flag = drozma_die_to_dragon
			}
			hidden_effect = {		#Monarch barge flows down from Rzenta instead of your capital as usual
				set_country_flag = buried_at_drozma_last_stand	
				event_target:drozma_last_stand_prov = { set_province_flag = buried_at_drozma_last_stand_prov }
			}
			kill_ruler = yes
			add_prestige = 40
			add_splendor = 150
			add_authority = 20
		}
		else = {
			add_prestige = 30
			add_splendor = 100
			add_authority = 10
		}
		
		if = {
			limit = {
				has_country_flag = drozma_grown_prince
			}
			tooltip = {
				event_target:drozma_last_stand_prov = {
					kill_units = {
						who = ROOT
						type = infantry
						amount = 5
					}
				}
			}
		}
		
		custom_tooltip = ynn_26_tooltip
		
		hidden_effect = {
			every_known_country = {
				limit = {
					OR = {
						religion = ynn_river_worship
						religion = ynn_river_reformed
					}
				}
				add_opinion = {
					who = ROOT
					modifier = yrw_dragonslayer
				}
			}
			
			every_known_country = {
				limit = {
					religion = drozma_tur
				}
				country_event = { id = ynn_events.29 } #Dragonless Once More
			}
			
			ynn_superregion = {
				limit = { religion = drozma_tur }
				
				change_religion = ROOT
				if = {
					limit = { owned_by = ROOT }
					heretic_rebels = 1
				}
			}
			clr_country_flag = drozma_fighting_last_stand
			clr_country_flag = drozma_leader_v_dragon
			clr_country_flag = drozma_die_to_dragon
			clr_country_flag = drozma_slay_dragon
		}
	}
}

country_event = {	#Controller event for 28
	id = ynn_events.27
	title = ynn_events.27.t
	desc = ynn_events.27.d
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = ynn_events.27.a
		
		if = {
			limit = {
				has_country_flag = drozma_fighting_last_stand
			}
			country_event = { id = ynn_events.28 }
		}
		else = {
			random_known_country = {
				limit = {
					has_country_flag = drozma_fighting_last_stand
				}
				country_event = { id = ynn_events.28 }
			}
		}
	}
}

country_event = {	#Dragon Cult's last stand beats you
	id = ynn_events.28
	title = ynn_events.28.t
	desc = ynn_events.28.d
	picture = REVOLUTION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = drozma_fighting_last_stand
	}
	
	immediate = {
		hidden_effect = {
			clr_country_flag = drozma_fighting_last_stand
			random_province = {
				limit = {
					has_province_flag = drozma_last_stand_prov_flag
				}
				save_event_target_as = drozma_last_stand_prov
				clr_province_flag = drozma_last_stand_prov_flag
			}
		}
	}
	
	option = {
        name = ynn_events.28.a
		
		event_target:drozma_last_stand_prov = {
			if = {
				limit = {
					owned_by = ROOT
				}
				if = {
					limit = {
						any_core_country = {
							NOT = { tag = ROOT }
							exists = yes
						}
					}
					random_core_country = {
						limit = {
							NOT = { tag = ROOT }
							exists = yes
						}
						event_target:drozma_last_stand_prov = {
							cede_province = PREV
						}
						if = {
							limit = {
								is_subject = yes
							}
							grant_independence = yes
						}
						add_truce_with = ROOT
					}
				}
				else = {
					random_core_country = {
						limit = {
							NOT = { tag = ROOT }
						}
						ROOT = {
							release = PREV
						}
						hidden_effect = {
							change_religion = drozma_tur
						}
						add_truce_with = ROOT
					}
				}
			}
			else_if = {
				limit = {
					owner = { is_subject = yes }
				}
				owner = {
					grant_independence = yes
					add_truce_with = ROOT
				}
			}
			kill_units = {
				who = REB
			}
		}
	}
	
	after = {
		hidden_effect = {
			event_target:drozma_last_stand_prov = {
				owner = {
					infantry = PREV
					infantry = PREV
					infantry = PREV
					infantry = PREV
					infantry = PREV
					infantry = PREV
					infantry = PREV
					infantry = PREV
					cavalry = PREV
				}
			}
		}
	}
}

country_event = {	#Dragonless Once More
	id = ynn_events.29
	title = ynn_events.29.t
	desc = ynn_events.29.d
	picture = IMPALED_SOLDIERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		religion = drozma_tur
	}
	
	option = {
        name = ynn_events.29.a
		
		add_prestige = -20
		add_stability = -3
		
		add_country_modifier = {
			name = begrudging_conversion
			duration = 3650
		}
		
		add_opinion = {
			who = FROM
			modifier = dt_dragonslayer
		}
		add_trust = {
			who = FROM
			value = -50
			mutual = no
		}
		change_religion = FROM
		set_ruler_religion = FROM
		set_consort_religion = FROM
		set_heir_religion = FROM
		
		every_owned_province = {
			limit = { religion = drozma_tur }
			change_religion = FROM
		}
	}
}

#Iosahar Revolts
country_event = {
	id = ynn_events.30
	title = ynn_events.30.t
	desc = ynn_events.30.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		OR = {
			is_in_war = {
				attackers = ROOT
				defender_leader = FROM
				casus_belli = cb_independence_war
			}
			is_in_war = {
				attacker_leader = ROOT
				defender_leader = FROM
				casus_belli = cb_iosahar_annex
			}
			any_ally = {	#Allies of rebel who are about to join don't count as being at war in this exact moment
				war_with = FROM
				is_in_war = {
					attacker_leader = THIS
					defender_leader = FROM
					casus_belli = cb_independence_war
				}
			}
			has_country_flag = ynn_iosahar_is_revolting
		}
	}
	
	option = {
		name = ynn_events.30.a		
		
		ai_chance = {
			factor = 1
		}
		
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = ynn_revolting_iosahar
			}
			add_trust = {
				who = ROOT
				value = -5
				mutual = yes	#Mutual loss of trust is so that you won't purposefully declare war on your Iosahar's allies to use the Iosahar as a piggy bank
			}
			add_prestige = -5 
		}
		clr_country_flag = ynn_iosahar_is_revolting
	}
}

#Event To tell ally their ally has ditched them
country_event = {
	id = ynn_events.35
	title = ynn_events.35.t
	desc = ynn_events.35.d
	picture = ASSASSINATION_eventPicture

	is_triggered_only = yes

	option = {
		name = ynn_events.35.a
		ai_chance = {
			factor = 1
		}
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = insulted
			}
		}
	}
}

#Announcement event to tell player iosahars are not to be trusted
country_event = {
	id = ynn_events.36
	title = ynn_events.36.t
	desc = ynn_events.36.d
	picture = ASSASSINATION_eventPicture
	goto = iosahar_untrustworthy_capital

	is_triggered_only = yes

	trigger = {
		has_country_flag = ynn_iosahar_message
	}

	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = {
					any_ally = {
						NOT = {
							is_subject_of_type_with_overlord = {
								who = ROOT
								type = ynnic_iosahar
							}
						}
					}
				}
				save_event_target_as = iosahar_untrustworthy
				capital = {
					save_event_target_as = iosahar_untrustworthy_capital
				}
			}
		}
	}

	option = {
		name = ynn_events.36.a
		ai_chance = {
			factor = 0
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
	}

	option = {
		name = ynn_events.36.b
		ai_chance = {
			factor = 1
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
		custom_tooltip = ynn_iosahar_dont_show_again
		clr_country_flag = ynn_iosahar_message
	}
}

#overlord retribution for Iosahar betrayal

#Overlord Kills monarch and takes hostages
country_event = {
	id = ynn_events.37
	title = ynn_events.37.t
	desc = {
		trigger = {
			is_subject_of = FROM
			has_saved_event_target = iosahar_traitor
		}
		desc = ynn_events.37.d1
	}
	desc = {
		trigger = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
			}
		}
		desc = ynn_events.37.d2 
	}
	desc = {
		trigger = {
			is_subject_of = FROM
			NOT = {
				has_saved_event_target = iosahar_traitor
			}
		}
		desc = ynn_events.37.d3
	}
	picture = DEATH_OF_HEIR_eventPicture
	goto = iosahar_traitor

	is_triggered_only = yes

	option = {	#ruler is chop + family is yoink
		trigger = {
			is_subject_of = FROM
			has_saved_event_target = iosahar_traitor
		}
		name = ynn_events.37.a
		ai_chance = {
			factor = 1
		}
		kill_ruler = yes
		add_prestige = -10
		add_dip_power = -50
		add_country_modifier = {
			name = iosahar_ruler_executed_treason
			duration = 3650
		}
		add_country_modifier = {
			name = iosahar_overlord_has_hostages
			duration = 7300
		}
		tooltip = {
			overlord = {
				add_country_modifier = {
					name = iosahar_hostages
					duration = 7300
				}
				add_country_modifier = {
					name = iosahar_traitor_executed
					duration = 7300
				}
			}
		}
	}

	option = {	#You chop traitor and yoink family
		trigger = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
			}
		}
		name = ynn_events.37.b 
		add_prestige = 5
		add_dip_power = -50
		add_country_modifier = {
			name = iosahar_hostages
			duration = 7300
		}
		add_country_modifier = {
			name = iosahar_traitor_executed
			duration = 7300
		}
		tooltip = {
			event_target:iosahar_traitor = {
				kill_ruler = yes
				add_prestige = -10
				add_dip_power = -50
				add_country_modifier = {
					name = iosahar_ruler_executed_treason
					duration = 3650
				}
				add_country_modifier = {
					name = iosahar_overlord_has_hostages
					duration = 7300
				}
			}
		}
	}

	option = {	#overlord chops an iosahar and yoinks their family
		trigger = {
			is_subject_of = FROM
			NOT = {
				has_saved_event_target = iosahar_traitor
			}
		}
		name = ynn_events.37.c
		tooltip = {
			event_target:iosahar_traitor = {
				kill_ruler = yes
				add_prestige = -10
				add_dip_power = -50
				add_country_modifier = {
					name = iosahar_ruler_executed_treason
					duration = 3650
				}
				add_country_modifier = {
					name = iosahar_overlord_has_hostages
					duration = 7300
				}
			}
			overlord = {
				add_country_modifier = {
					name = iosahar_hostages
					duration = 7300
				}
				add_country_modifier = {
					name = iosahar_traitor_executed
					duration = 7300
				}
			}
		}
	}
}

#overlord takes hostages
country_event = {
	id = ynn_events.38
	title = ynn_events.38.t
	desc = {
		trigger = {
			is_subject_of = FROM
			has_saved_event_target = iosahar_traitor
		}
		desc = ynn_events.38.d1
	}
	desc = {
		trigger = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
			}
		}
		desc = ynn_events.38.d2 
	}
	desc = {
		trigger = {
			is_subject_of = FROM
			NOT = {
				has_saved_event_target = iosahar_traitor
			}
		}
		desc = ynn_events.38.d3
	}
	picture = DIPLOMAT_INTERROGATION_eventPicture
	goto = iosahar_traitor

	is_triggered_only = yes

	option = {	#family is yoink
		trigger = {
			is_subject_of = FROM
			has_saved_event_target = iosahar_traitor
		}
		name = ynn_events.38.a
		ai_chance = {
			factor = 1
		}
		add_prestige = -5
		add_dip_power = -50
		add_country_modifier = {
			name = iosahar_overlord_has_hostages
			duration = 7300
		}
		tooltip = {
			overlord = {
				add_country_modifier = {
					name = iosahar_hostages
					duration = 7300
				}
			}
		}
	}

	option = {	#You yoink family
		trigger = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
			}
		}
		ai_chance = {
			factor = 1
		}
		name = ynn_events.38.b 
		add_prestige = 5
		add_dip_power = -50
		add_country_modifier = {
			name = iosahar_hostages
			duration = 7300
		}
		tooltip = {
			event_target:iosahar_traitor = {
				add_prestige = -5
				add_dip_power = -50
				add_country_modifier = {
					name = iosahar_overlord_has_hostages
					duration = 7300
				}
			}
		}
	}

	option = {	#overlord yoinks an iosahars family members
		trigger = {
			is_subject_of = FROM
			NOT = {
				has_saved_event_target = iosahar_traitor
			}
		}
		ai_chance = {
			factor = 1
		}
		name = ynn_events.38.c
		tooltip = {
			event_target:iosahar_traitor = {
				add_prestige = -5
				add_dip_power = -50
				add_country_modifier = {
					name = iosahar_overlord_has_hostages
					duration = 7300
				}
			}
			overlord = {
				add_country_modifier = {
					name = iosahar_hostages
					duration = 7300
				}
			}
		}
	}
}

#Overlord kills monarch
country_event = {
	id = ynn_events.39
	title = ynn_events.39.t
	desc = {
		trigger = {
			is_subject_of = FROM
			has_saved_event_target = iosahar_traitor
		}
		desc = ynn_events.39.d1
	}
	desc = {
		trigger = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
			}
		}
		desc = ynn_events.39.d2 
	}
	desc = {
		trigger = {
			is_subject_of = FROM
			NOT = {
				has_saved_event_target = iosahar_traitor
			}
		}
		desc = ynn_events.39.d3
	}
	picture = DEATH_OF_HEIR_eventPicture
	goto = iosahar_traitor


	is_triggered_only = yes

	option = {	#ruler is chop
		trigger = {
			is_subject_of = FROM
			has_saved_event_target = iosahar_traitor
		}
		name = ynn_events.39.a
		ai_chance = {
			factor = 1
		}
		kill_ruler = yes
		add_prestige = -10
		add_dip_power = -50
		add_country_modifier = {
			name = iosahar_ruler_executed_treason
			duration = 3650
		}
		tooltip = {
			overlord = {
				add_country_modifier = {
					name = iosahar_traitor_executed
					duration = 7300
				}
			}
		}
	}

	option = {	#You chop traitor 
		trigger = {
			any_subject_country = {
				is_subject_of_type = ynnic_iosahar
			}
		}
		name = ynn_events.39.b 
		add_prestige = 5
		add_country_modifier = {
			name = iosahar_traitor_executed
			duration = 7300
		}
		tooltip = {
			event_target:iosahar_traitor = {
				kill_ruler = yes
				add_prestige = -5
				add_country_modifier = {
					name = iosahar_ruler_executed_treason
					duration = 3650
				}
			}
		}
	}

	option = {	#overlord chops an iosahar 
		trigger = {
			is_subject_of = FROM
			NOT = {
				has_saved_event_target = iosahar_traitor
			}
		}
		name = ynn_events.39.c
		tooltip = {
			event_target:iosahar_traitor = {
				kill_ruler = yes
				add_prestige = -5
				add_country_modifier = {
					name = iosahar_ruler_executed_treason
					duration = 3650
				}
			}
			overlord = {
				add_country_modifier = {
					name = iosahar_traitor_executed
					duration = 7300
				}
			}
		}
	}
}

#overlord gets alerted about Iosahar considering disloyalty
country_event = {
	id = ynn_events.49
	title = ynn_events.49.t
	desc = ynn_events.49.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	option = {
		name = ynn_events.49.a
		ai_chance = {
			factor = 1
		}

		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
		if = {
			limit = {
				NOT = {
					FROM = {
						liberty_desire = 40
					}
				}
			}
			custom_tooltip = ynn_iosahar_loyalty_loyal
		}

		if = {
			limit = {
				FROM = {
					liberty_desire = 40
					NOT = {
						liberty_desire = 60
					}
				}
			}
			custom_tooltip = ynn_iosahar_loyalty_disloyal_small
		}

		if = {
			limit = {
				FROM = {
					liberty_desire = 60
				}
			}
			custom_tooltip = ynn_iosahar_loyalty_disloyal_large
		}
	}
}

#Overlord declares offensive war against ally of Iosahar
country_event = {
	id = ynn_events.40
	title = ynn_events.40.t
	desc = ynn_events.40.desc
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	trigger = {
		is_subject_of_type = ynnic_iosahar
		overlord = {
			any_known_country = {
				is_in_war = {
					attacker_leader = PREV
					defender_leader = THIS
				}
				alliance_with = ROOT
			}
		}
	}

	immediate = {
		hidden_effect = {
			overlord = {
				save_event_target_as = iosahar_overlord
				random_known_country = {
					limit = {
						is_in_war = {
							attacker_leader = event_target:iosahar_overlord
							defender_leader = THIS
						}
					}
					save_event_target_as = iosahar_ally
				}
				country_event = {
					id = ynn_events.49
				}
			}
		}
	}

	option = {	#Join overlord
		trigger = {
			NOT = {
				liberty_desire = 50
			}
		}
		name = ynn_events.40.a
		ai_chance = {
			factor = 90
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
		join_all_offensive_wars_of = event_target:iosahar_overlord
		hidden_effect = {
			event_target:iosahar_overlord = {
				country_event = {
					id = ynn_events.46
					days = 2
				}
			}
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.35
					days = 2
				}
			}
		}
	}
	option = {	#pay up and we join overlord
		trigger = {
			NOT = {
				liberty_desire = 80
			}
		}
		name = ynn_events.40.b
		ai_chance = {
			factor = 50
		}
		event_target:iosahar_overlord= {
			country_event = {
				id = ynn_events.41
				days = 2
			}
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
	}
	option = {	#Stay out of it
		name = ynn_events.40.c
		ai_chance = {
			factor = 25
		}
		add_prestige = -5
		hidden_effect = {
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
			event_target:iosahar_overlord = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
	}
	option = {	#Pay us or we won't stay out of it
		trigger = {
			liberty_desire = 50
		}
		name = ynn_events.40.d
		ai_chance = {
			factor = 25
		}
		event_target:iosahar_overlord = {
			country_event = {
				id = ynn_events.42
				days = 2
			}
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
	}
	option = {	#Pay up or we won't fight our overlord
		trigger = {
			liberty_desire = 60
		}
		name = ynn_events.40.e
		ai_chance = {
			factor = 50
		}
		event_target:iosahar_ally = {
			country_event = {
				id = ynn_events.43
				days = 2
			}
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
	}
	option = {	#Fuck it we hate their guts anyway
		trigger = {
			liberty_desire = 75
		}
		name = ynn_events.40.f
		ai_chance = {
			factor = 75
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_subject
		join_all_defensive_wars_of = event_target:iosahar_ally
		set_country_flag = iosahar_chooses_violence
		hidden_effect = {
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.48
					days = 2
				}
			}
		}
	}
}

#Iosahar demands compensation to join war
country_event = {
	id = ynn_events.41
	title = ynn_events.41.t
	desc = ynn_events.41.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	trigger = {
		overlord_of = FROM
		has_country_modifier = ynn_diplo
	}

	option = {	#I suppose we can pay
		name = ynn_events.41.a
		ai_chance = {
			factor = 50
		}
		add_years_of_income = -0.5
		add_prestige = -5
		add_trust = {
			who = FROM
			value = 5
			mutual = yes
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
		FROM = {
			set_country_flag = iosahar_join_war_overlord
			country_event = {
				id = ynn_events.44
				days = 2
			}
		}
	}
	option = {	#You swore an oath!
		name = ynn_events.41.b
		ai_chance = {
			factor = 50
		}
		add_prestige = 10
		add_trust = {
			who = FROM
			value = -5
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
		FROM = {
			set_country_flag = iosahar_not_join_war_overlord
			country_event = {
				id = ynn_events.45 
				days = 2
			}
		}
	}
}

#Iosahar demands compensation to stay neutral
country_event = {
	id = ynn_events.42
	title = ynn_events.42.t
	desc = ynn_events.42.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	trigger = {
		overlord_of = FROM
		has_country_modifier = ynn_diplo
	}

	option = {	#I suppose we can't afford another enemy
		name = ynn_events.42.a
		ai_chance = {
			factor = 50
		}
		add_years_of_income = -0.3
		add_prestige = -5
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
		FROM = {
			set_country_flag = iosahar_neutral
			add_trust = {
				who = ROOT
				value = -5
			}
			country_event = {
				id = ynn_events.44
				days = 2
			}
		}
	}
	option = {	#Pay you to sit in your castle and do nothing? lmao
		name = ynn_events.42.b
		ai_chance = {
			factor = 50
		}
		add_prestige = 10
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
		FROM = {
			set_country_flag = iosahar_not_neutral
			country_event = {
				id = ynn_events.45
				days = 2
			}
		}
	}
}

#Iosahar demands compensation of ally to join war
country_event = {
	id = ynn_events.43
	title = ynn_events.43.t
	desc = ynn_events.43.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	trigger = {
		alliance_with = FROM
		is_in_war = {
			attacker_leader = event_target:iosahar_overlord
			defender_leader = ROOT
		}
	}

	option = {	#We need their help dammit
		name = ynn_events.43.a
		ai_chance = {
			factor = 50
		}
		add_years_of_income = -0.5
		add_prestige = -5
		add_trust = {
			who = FROM
			value = 5
			mutual = yes 
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip
		FROM = {
			set_country_flag = iosahar_join_war_ally
			country_event = {
				id = ynn_events.44
				days = 2
			}
		}
	}
	option = { #Don't pay the extorting cunts
		name = ynn_events.43.b
		ai_chance = {
			factor = 50
		}
		add_trust = {
			who = FROM
			value = -5
		}
		add_prestige = 10
		custom_tooltip = ynn_iosahar_loyalty_tooltip
		FROM = {
			set_country_flag = iosahar_not_join_war_ally
			country_event = {
				id = ynn_events.45
				days = 2
			}
		}
	}
}

#Iosahar gets paid for their stance
country_event = {
	id = ynn_events.44
	title = ynn_events.44.t
	desc = ynn_events.44.desc
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	trigger = {
		FROM = {
			OR = {
				overlord_of = ROOT
				AND = {
					alliance_with = ROOT
					is_in_war = {
						attacker_leader = event_target:iosahar_overlord
					}
				}
			}
		}
	}

	option = { #overlord pays for assistance
		trigger = {
			has_country_flag = iosahar_join_war_overlord
		}
		name = ynn_events.44.a
		ai_chance = {
			factor = 100
		}
		add_years_of_income = 0.7
		add_prestige = 5
		join_all_offensive_wars_of = event_target:iosahar_overlord
		hidden_effect = {
			overlord = {
				country_event = {
					id = ynn_events.46
					days = 2
				}
			}
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.35
					days = 2
				}
			}
		}
	}

	option = { #Overlord pays for neutrality
		trigger = {
			has_country_flag = iosahar_neutral
		}
		name = ynn_events.44.b
		ai_chance = {
			factor = 75
		}
		add_years_of_income = 0.5
		add_prestige = 5
		hidden_effect = {
			overlord = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
		}
	}

	option = {	#We got paid, and we've changed our mind
		trigger = {
			has_country_flag = iosahar_neutral
		}
		name = ynn_events.44.c
		ai_chance = {
			factor = 25
		}
		add_years_of_income = 0.7
		add_prestige = 5
		join_all_offensive_wars_of = event_target:iosahar_overlord
		hidden_effect = {
			event_target:iosahar_overlord = {
				country_event = {
					id = ynn_events.46
					days = 2
				}
			}
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.35
					days = 2
				}
			}
		}
	}

	option = { #Our ally paid us, off to war we go
		trigger = {
			has_country_flag = iosahar_join_war_ally
		}
		name = ynn_events.44.d
		ai_chance = {
			factor = 100
		}
		add_years_of_income = 0.7
		add_prestige = 5
		clr_country_flag = iosahar_join_war_ally
		set_country_flag = iosahar_chooses_violence
		join_all_defensive_wars_of = event_target:iosahar_ally
		hidden_effect = {
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.48
					days = 2
				}
			}
		}
	}
}

#Iosahar does not get paid
country_event = {
	id = ynn_events.45
	title = ynn_events.45.t
	desc = ynn_events.45.desc
	picture = SIEGE_eventPicture

	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				overlord_of = ROOT
				AND = {
					alliance_with = ROOT
					is_in_war = {
						attacker_leader = event_target:iosahar_overlord
					}
				}
			}
		}
	}

	option = { #I guess we stay out of it
		trigger = {
			has_country_flag = iosahar_not_join_war_overlord
		}
		name = ynn_events.45.a
		ai_chance = {
			factor = 100
		}
		add_prestige = -5
		add_trust = {
			who = FROM
			value = -5
		}
		hidden_effect = {
			overlord = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
		}
	}
	option = { #It's treason then
		trigger = {
			has_country_flag = iosahar_not_neutral
		}
		name = ynn_events.45.b
		ai_chance = {
			factor = 75
		}
		clr_country_flag = iosahar_not_neutral
		set_country_flag = iosahar_chooses_violence
		hidden_effect = {
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.48
					days = 2
				}
			}
		}
	}
	option = { #We won't betray our overlord for nothing
		trigger = {
			has_country_flag = iosahar_not_join_war_ally
		}
		name = ynn_events.45.c
		ai_chance = {
			factor = 80
		}
		add_trust = {
			who = FROM
			value = -5
		}
		hidden_effect = {
			overlord = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
		}
	}
	option = { #We'll join our overlord then
		trigger = {
			has_country_flag = iosahar_not_join_war_ally
		}
		name = ynn_events.45.d
		ai_chance = {
			factor = 10
		}
		join_all_offensive_wars_of = event_target:iosahar_overlord
		hidden_effect = {
			event_target:iosahar_overlord = {
				country_event = {
					id = ynn_events.46
					days = 2
				}
			}
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.35
					days = 2
				}
			}
		}
	}
	option = {	#Nevermind we're not messing with that
		name = ynn_events.45.e
		ai_chance = {
			factor = 20
		}
		add_prestige = -5
		hidden_effect = {
			event_target:iosahar_overlord = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
			event_target:iosahar_ally = {
				country_event = {
					id = ynn_events.47
					days = 2
				}
			}
		}
		clr_country_flag = iosahar_not_join_war_ally
		clr_country_flag = iosahar_not_join_war_overlord
		clr_country_flag = iosahar_not_neutral
	}
}

#Iosahar Joins overlord in war
country_event = {
	id = ynn_events.46
	title = ynn_events.46.t
	desc = {	#Iosahar joins normally
		trigger = { 
			FROM = {
				NOT = {
					has_country_flag = iosahar_not_join_war_ally
					has_country_flag = iosahar_neutral
					has_country_flag = iosahar_join_war_overlord
				}
			}
		}
		desc = ynn_events.46.d1
	}
	desc = {	#Iosahar joined with payment
		trigger = {
			FROM = {
				has_country_flag = iosahar_join_war_overlord
			}
		}
		desc = ynn_events.46.d2
	}
	desc = {	#Iosahar joins despite them saying they'd be neutral
		trigger = {
			FROM = {
				has_country_flag = iosahar_neutral
			}
		}
		desc = ynn_events.46.d3
	}
	desc = {	#Iosahar joins to spite their ally
		trigger = {
			FROM = {
				has_country_flag = iosahar_not_join_war_ally
			}
		}
		desc = ynn_events.46.d4 
	}
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	trigger = {
		overlord_of = FROM
	}

	option = {	#Naturally they join, it is their duty
		trigger = {
			FROM = {
				NOT = {
					has_country_flag = iosahar_join_war_overlord
					has_country_flag = iosahar_not_join_war_ally
					has_country_flag = iosahar_neutral
				}
			}
		}
		name = ynn_events.46.a
		ai_chance = {
			factor = 100
		}
		add_prestige = 5
		add_trust = {
			who = FROM
			value = 5
			mutual = yes
		}
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
	}
	option = {	#It should have been done without question
		trigger = {
			FROM = {
				OR = {
					has_country_flag = iosahar_join_war_overlord
					has_country_flag = iosahar_not_join_war_ally
					has_country_flag = iosahar_neutral
				}
			}
		}
		name = ynn_events.46.b
		ai_chance = {
			factor = 100
		}
		add_prestige = 5
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
	}
}

#Iosahar stays neutral
country_event = {
	id = ynn_events.47
	title = ynn_events.47.t
	desc = {	#Iosahar stays neutral
		trigger = {
			FROM = {
				NOT = {
					has_country_flag = iosahar_neutral
					has_country_flag = iosahar_not_join_war_ally
					has_country_flag = iosahar_not_join_war_overlord
				}
			}
		}
		desc = ynn_events.47.d0 
	}
	desc = {	#Iosahar is staying neutral because they were paid
		trigger = {
			overlord_of = FROM
			FROM = {
				has_country_flag = iosahar_neutral
			}
		}
		desc = ynn_events.47.d1 
	}
	desc = {	#Iosahar doesn't join since they weren't paid to help overlord
		trigger = {
			From = {
				has_country_flag = iosahar_not_join_war_overlord
			}
		}
		desc = ynn_events.47.d2
	}
	desc = {	#Iosahar doesn't join since they weren't paid to help ally
		trigger = {
			FROM = {
				has_country_flag = iosahar_not_join_war_ally
			}
		}
		desc = ynn_events.47.d3
	}
	desc = {
		trigger = {
			FROM = {
				has_country_flag = iosahar_neutral
			}
			NOT = {
				overlord_of = FROM
			}
		}
		desc = ynn_events.47.d4
	}

	is_triggered_only = yes 
	
	option = {	#So much for keeping their oaths
		trigger = {
			overlord_of = FROM
		}
		name = ynn_events.47.a
		ai_chance = {
			factor = 100
		}
		add_prestige = -1
		custom_tooltip = ynn_iosahar_loyalty_tooltip_overlord
	}
	option = {	#They are too cowardly to face us, or help us
		trigger = {
			NOT = {
				overlord_of = FROM
			}
		}
		name = ynn_events.47.b
		ai_chance = {
			factor = 100
		}
		add_prestige = 1
		custom_tooltip = ynn_iosahar_loyalty_tooltip
	}
}

#Iosahar joins ally against overlord
country_event = {
	id = ynn_events.48
	title = ynn_events.48.t
	desc = {	#Iosahar joins war against overlord
		trigger = {
			from = {
				NOT = {
					has_country_flag = iosahar_join_war_ally
					has_country_flag = iosahar_not_neutral
				}
			}
		}
		desc = ynn_events.48.d0 
	}
	desc = {	#Iosahar joins war against overlord because they got paid
		trigger = {
			FROM = {
				has_country_flag = iosahar_join_war_ally
			}
		}
		desc = ynn_events.48.d1 
	}
	desc = {	#Iosahar joins war since overlord didn't pay them to stay neutral
		trigger = {
			FROM = {
				has_country_flag = iosahar_not_neutral
			}
		}
		desc = ynn_events.48.d2 
	}
	picture = SIEGE_eventPicture

	is_triggered_only = yes 

	trigger = {
		alliance_with = FROM
		war_with = event_target:iosahar_overlord
	}

	option = {	#We will get you your freedom
		trigger = {
			FROM = {
				NOT = {
					has_country_flag = iosahar_join_war_ally
					has_country_flag = iosahar_not_neutral
				}
			}
		}
		name = ynn_events.48.a
		ai_chance = {
			factor = 100
		}
		add_prestige = 5
		custom_tooltip = ynn_iosahar_loyalty_tooltip
	}
	option = {	#Their help is most needed
		trigger = {
			FROM = {
				OR = {
					has_country_flag = iosahar_join_war_ally
					has_country_flag = iosahar_not_neutral
				}
			}
		}
		name = ynn_events.48.b
		ai_chance = {
			factor = 100
		}
		add_prestige = 2
		custom_tooltip = ynn_iosahar_loyalty_tooltip
	}
}

# country_event = { #Dam Maintenance
	# id = ynn_events.23
	# title = ynn_events.23.t
	# desc = ynn_events.23.d
	# picture = RELIGION_eventPicture

	# is_triggered_only = yes
	
	# trigger = {
		# has_country_flag = ynn_recently_maintained_dam_flag
	# }
	
	# option = { 
		# name = ynn_events.23.a
		# ai_chance = { factor = 1 }
		# clr_country_flag = ynn_recently_maintained_dam_flag
	# }
# }

country_event = { #Dam Maintenance
	id = ynn_events.50
	title = ynn_events.50.t
	desc = ynn_events.50.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes
	
	trigger = {
		OR = {
			1186 = { #Mocbarja
				owned_by = ROOT
			}
			1165 = { #Bosancovac
				owned_by = ROOT
			}
			1138 = { #Vels Bacar
				owned_by = ROOT
			}
			1133 = { #Adbrabohvi
				owned_by = ROOT
			}
		}
		capital_scope = {
			superregion = ynn_superregion
		}
		NOT = {
			has_country_flag = ynn_recently_maintained_dam_flag
		}
	}
	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						1186 = { #Mocbarja
							owned_by = ROOT
						}
					}
					1186 = {
						save_event_target_as = ynnic_dam_maintenance_event_target
					}
				}
				1 = {
					trigger = {
						1165 = { #Bosancovac
							owned_by = ROOT
						}
					}
					1165 = {
						save_event_target_as = ynnic_dam_maintenance_event_target
					}
				}
				1 = {
					trigger = {
						1138 = { #Vels Bacar
							owned_by = ROOT
						}
					}
					1138 = {
						save_event_target_as = ynnic_dam_maintenance_event_target
					}
				}
				1 = {
					trigger = {
						1133 = { #Adbrabohvi
							owned_by = ROOT
						}
					}
					1133 = {
						save_event_target_as = ynnic_dam_maintenance_event_target
					}
				}
			}
		}
	}
	option = { #Let it Decay, we can't afford it.
		name = ynn_events.50.a
		ai_chance = { factor = 1 }
		event_target:ynnic_dam_maintenance_event_target = {
			
		}
	}
	option = { #
		name = ynn_events.50.b
		ai_chance = { factor = 1 }
	}
	option = { #Let us hire dwarves to aid in it's construction!
		name = ynn_events.50.c
		ai_chance = { factor = 1 }
		trigger = {
			OR = {
				any_known_country = {
					tag = G94
				}
				any_owned_province = {
					has_dwarven_minority_trigger = yes
					has_dwarven_majority_trigger = yes
				}
			}
		}
	}
}


country_event = { #We must demand Satisfaction
	id = ynn_events.110
	title = ynn_events.110.t
	desc = ynn_events.110.d 
	picture = ACCUSATION_eventPicture

	is_triggered_only = no

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
		NOT = {
			OR = {
				has_country_flag = defender_in_honour_joust
				has_country_flag = offender_in_honour_joust
			}
		}
		any_known_country = {
			NOT = {
				OR = {
					has_country_flag = offender_in_honour_joust
					has_country_flag = defender_in_honour_joust
				}
			}
			ROOT = {
				OR = {
					has_opinion_modifier = {
						who = PREV
						modifier = insulted
					}
					has_opinion_modifier = {
						who = PREV
						modifier = scornfully_insulted
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		set_country_flag = defender_in_honour_joust
		random_known_country = {
			limit = {
				ROOT = {
					OR = {
						has_opinion_modifier = {
							who = PREV
							modifier = insulted
						}
						has_opinion_modifier = {
							who = PREV
							modifier = scornfully_insulted
						}
					}
				}
			}
			set_country_flag = offender_in_honour_joust 
		}	
	}

	option = { #They must answer for their words
		name = ynn_events.110.a 
		ai_chance = {
			factor = 9
		}
		random_known_country = {
			limit = {
				has_country_flag = offender_in_honour_joust
				ROOT = {
					OR = {
						has_opinion_modifier = {
							who = PREV
							modifier = insulted
						}
						has_opinion_modifier = {
							who = PREV
							modifier = scornfully_insulted
						}
					}
				}
			}
			country_event = {
				id = ynn_events.111
				days = 5
			}
		}
	}

	option = { #This is a stupid idea
		name = ynn_events.110.b 
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				ruler_has_personality = craven_personality
			}
		}
		add_prestige = -10
		if = {
			limit = {
				government = monarchy
			}
			add_legitimacy = -5
		}
		else_if = {
			limit = {
				government = republic 
			}
			add_scaled_republican_tradition = -5
		}
		else_if = {
			limit = {
				government = theocracy
			}
			add_devotion = -5
		}
	}
}

country_event = {	#The gauntlet has been thrown
	id = ynn_events.111
	title = ynn_events.111.t
	desc = ynn_events.111.d 
	picture = NOBLE_ESTATE_DEMANDS_eventPicture

	is_triggered_only = yes 
	
	immediate = {
		hidden_effect = {
			set_variable = {
				which = offenderJoustPower
				value = 0
			}
			set_variable = {
				which = defenderJoustPower
				value = 0
			}
			if = {
				limit = { 
					mil = 6 
				}
				change_variable = {
					which = offenderJoustPower
					value = 10
				}
			}
			else_if = {
				limit = { 
					mil = 5 
				}
				change_variable = {
					which = offenderJoustPower
					value = 8
				}
			}
			else_if = {
				limit = { 
					mil = 4 
				}
				change_variable = {
					which = offenderJoustPower
					value = 6
				}
			}
			else_if = {
				limit = { 
					mil = 2 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 2
				}
			}
			else_if = {
				limit = { 
					mil = 1 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 3
				}
			}
			else_if = {
				limit = { 
					mil = 0 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_has_personality = bold_fighter_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_has_personality = strict_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_has_personality = martial_educator_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_has_personality = tactical_genius_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_has_personality = great_conqueror_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 7
				}
			}
			if = {
				limit = { 
					ruler_has_personality = mythical_conqueror_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 10
				}
			}
			if = {
				limit = { 
					ruler_has_personality = conqueror_personality 
				}
				change_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_has_personality = craven_personality 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 4
				}
			}
			if = {
				limit = { 
					ruler_age = 60 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 3
				}
			}
			else_if = {
				limit = { 
					ruler_age = 50 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 2
				}
			}
			else_if = {
				limit = { 
					ruler_age = 40 
				}
				subtract_variable = {
					which = offenderJoustPower
					value = 1
				}
			}
			if = {
				limit = {
					FROM = { 
						mil = 6 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 10
				}
			}
			else_if = {
				limit = {
					FROM = { 
						mil = 5 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 8
				}
			}
			else_if = {
				limit = {
					FROM = { 
						mil = 4 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 6
				}
			}
			else_if = {
				limit = {
					FROM = { 
						mil = 2 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 2
				}
			}
			else_if = {
				limit = {
					FROM = { 
						mil = 1 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 3
				}
			}
			else_if = {
				limit = {
					FROM = { 
						mil = 0 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_has_personality = bold_fighter_personality 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_has_personality = strict_personality 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_has_personality = martial_educator_personality 
					}
				}	
				change_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_has_personality = tactical_genius_personality 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_has_personality = great_conqueror_personality 
					}
				}	
				change_variable = {
					which = defenderJoustPower
					value = 7
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_has_personality = mythical_conqueror_personality 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 10
				}
			}
			if = {
				limit = {
					FROM = {
						ruler_has_personality = conqueror_personality 
					}
				}
				change_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = {
						ruler_has_personality = craven_personality 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 4
				}
			}
			if = {
				limit = {
					FROM = { 
						ruler_age = 60 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 3
				}
			}
			else_if = {
				limit = {
					FROM = { 
						ruler_age = 50 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 2
				}
			}
			else_if = {
				limit = {
					FROM = { 
						ruler_age = 40 
					}
				}
				subtract_variable = {
					which = defenderJoustPower
					value = 1
				}
			}
		}
	}
	
	option = { #I will prove my words with steel
		name = ynn_events.111.a 
		ai_chance = {
			factor = 9
		}
	}

	option = { #I am a pussy
		name = ynn_events.111.b 
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				ruler_has_personality = craven_personality
			}
		}
		add_prestige = -10
		add_ruler_modifier = {
			name = refused_duel_of_honour
			duration = -1
			desc = refused_duel_of_honour.d
		}
		FROM = {
			country_event = {
				id = ynn_events.114
			}
		}
		clr_country_flag = offender_in_honour_joust
	}

	after = {
		if = {
			limit = {
				has_country_flag = offender_in_honour_joust
			}
			subtract_variable = {
				which = defenderJoustPower
				which = offenderJoustPower
			}
			log = "Current Defender Joust Power is [Root.defenderJoustPower.GetValue]"
			hidden_effect = {
				if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 10 
						} 
					}
					country_event = {
						id = ynn_events.113
						days = 5
					}
					random = {
						chance = 50
						set_ruler_flag = brutally_unhorsed
					}
					FROM = {
						country_event = {
							id = ynn_events.112
							days = 5
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = {
							which = defenderJoustPower 
							value = 9
						} 
					}
					random_list = {
						95 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 30
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						05 = {
							country_event = {
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 8
						} 
					}
					random_list = {
						90 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 30
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						10 = {
							country_event = {
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 7
						} 
					}
					random_list = {
						85 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 25
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						15 = {
							country_event = {
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 6
						} 
					}
					random_list = {
						80 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 20
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						20 = {
							country_event = {
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 5
						} 
					}
					random_list = {
						75 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 15
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						25 = {
							country_event = {
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 4 
						} 
					}
					random_list = {
						70 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 10
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						30 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower
							value = 3 
						} 
					}
					random_list = {
						65 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							random = {
								chance = 05
								set_ruler_flag = brutally_unhorsed
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						35 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 2 
						} 
					}
					random_list = {
						60 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						40 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 1
						} 
					}
					random_list = {
						55 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						45 = {
							country_event = {
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = 0 
						} 
					}
					random_list = {
						50 = {
							country_event = {
									id = ynn_events.113
									days = 5
								}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						50 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -1 
						} 
					}
					random_list = {
						45 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						55 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -2 
						} 
					}
					random_list = {
						40 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						60 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -3 
						} 
					}
					random_list = {
						35 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						65 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 05
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -4 
						} 
					}
					random_list = {
						30 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						70 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 10
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -5 
						} 
					}
					random_list = {
						25 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						75 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 15
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -6
						} 
					}
					random_list = {
						20 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						80 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 20
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -7
						} 
					}
					random_list = {
						15 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						85 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 25
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -8
						} 
					}
					random_list = {
						10 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						90 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 30
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						check_variable = { 
							which = defenderJoustPower 
							value = -9
						} 
					}
					random_list = {
						05 = {
							country_event = {
								id = ynn_events.113
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.112
									days = 5
								}
							}
						}
						95 = {
							country_event = { 
								id = ynn_events.112
								days = 5
							}
							FROM = {
								country_event = {
									id = ynn_events.113
									days = 5
								}
								random = {
									chance = 30
									set_ruler_flag = brutally_unhorsed
								}
							}
						}
					}
				}
				else = {
					country_event = { 
						id = ynn_events.112
						days = 5
					}
					FROM = {
						country_event = {
							id = ynn_events.113
							days = 5
						}
						random = {
							chance = 50
							set_ruler_flag = brutally_unhorsed
						}
					}
				}
			}
		}
	}
}

country_event = { #Joust is won 
	id = ynn_events.112
	title = ynn_events.112.t 
	desc = {
		trigger = {
			has_country_flag = offender_in_honour_joust
			has_country_flag = defender_in_honour_joust
			NOT = {
				any_known_country = {
					OR = {
						has_country_flag = offender_in_honour_joust
						has_country_flag = defender_in_honour_joust
					}
					has_ruler_flag = brutally_unhorsed
				}
			}
		}

		desc = ynn_events.112.d1
	}

	desc = {
		trigger = {
			has_country_flag = offender_in_honour_joust
			any_known_country = {
				has_country_flag = defender_in_honour_joust
				has_ruler_flag = brutally_unhorsed
			}
		}

		desc = ynn_events.112.d2
	}

	desc = {
		trigger = {
			has_country_flag = defender_in_honour_joust
			any_known_country = {
				has_country_flag = offender_in_honour_joust
				has_ruler_flag = brutally_unhorsed
			}
		}

		desc = ynn_events.112.d3
	}

	picture = TOURNAMENT_eventPicture

	is_triggered_only = yes 
	hidden = no 

	trigger = {
		OR = {
			has_country_flag = offender_in_honour_joust
			has_country_flag = defender_in_honour_joust
		}
	}

	option = {
		name = ynn_events.112.a 
		ai_chance = {
			factor = 100
		}
		add_country_modifier = {
			name = honour_joust_won
			duration = 3650
		}
		add_prestige = 20
		if = {
			limit = {
				government = monarchy
			}
			add_legitimacy = 10
		}
		else_if = {
			limit = {
				government = theocracy 
			}
			add_devotion = 10
		}
		else_if = {
			limit = {
				government = republic
			}
			add_scaled_republican_tradition = 10
		}
		clr_country_flag = defender_in_honour_joust
		clr_country_flag = offender_in_honour_joust
		clr_ruler_flag = brutally_unhorsed
	}
}

country_event = { #Joust is lost 
	id = ynn_events.113
	title = ynn_events.113.t 
	desc = {
		trigger = {
			has_country_flag = offender_in_honour_joust 
			has_country_flag = defender_in_honour_joust
			NOT = {
				has_ruler_flag = brutally_unhorsed
			}
		}
		
		desc = ynn_events.113.d1
	}

	desc = {
		trigger = {
			has_country_flag = offender_in_honour_joust
			has_ruler_flag = brutally_unhorsed
		}

		desc = ynn_events.113.d2
	}

	desc = {
		trigger = {
			has_country_flag = defender_in_honour_joust
			has_ruler_flag = brutally_unhorsed
		}

		desc = ynn_events.113.d3
	}
	
	picture = TOURNAMENT_eventPicture

	is_triggered_only = yes 
	hidden = no 

	trigger = {
		OR = {
			has_country_flag = offender_in_honour_joust
			has_country_flag = defender_in_honour_joust
		}
	}

	option = {
		name = ynn_events.113.a 
		ai_chance = {
			factor = 100
		}
		add_country_modifier = {
			name = honour_joust_lost
			duration = 3650
		}
		add_prestige = -20
		if = {
			limit = {
				has_ruler_flag = brutally_unhorsed
			}
			random = {
				chance = 50
				kill_ruler = yes
			}
		}
		if = {
			limit = {
				government = monarchy
			}
			add_legitimacy = -10
		}
		else_if = {
			limit = {
				government = theocracy 
			}
			add_devotion = -10
		}
		else_if = {
			limit = {
				government = republic
			}
			add_scaled_republican_tradition = -10
		}
		clr_country_flag = defender_in_honour_joust
		clr_country_flag = offender_in_honour_joust
		clr_ruler_flag = brutally_unhorsed
	}
}

country_event = { #The coward refused our challenge
	id = ynn_events.114
	title = ynn_events.114.t 
	desc = ynn_events.114.d
	picture = KING_DOING_GREAT_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_flag = defender_in_honour_joust
	}

	option = {
		name = ynn_events.114.a 
		ai_chance = {
			factor = 100
		}
		add_prestige = 10
		add_country_modifier = {
			name = insults_proven_wrong
			duration = 3650
		}
		if = {
			limit = {
				government = monarchy
			}
			add_legitimacy = 5
		}
		else_if = {
			limit = {
				government = theocracy 
			}
			add_devotion = 5
		}
		else_if = {
			limit = {
				government = republic
			}
			add_scaled_republican_tradition = 5
		}
	}

	after = {
		clr_country_flag = defender_in_honour_joust
	}
}

country_event = {	#A gift of flowers
	id = ynn_events.151
	title = ynn_events.151.t
	desc = ynn_events.151.d
	picture = GOOD_WITH_MONARCH_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		any_known_country = {
			AND = {
				tag = G28
				owns = 1182
			}
		}
		NOT = {
			tag = G28
		}
		G28 = {
			has_opinion = {
				who = ROOT
				value = 100
			}
			OR = {
				alliance_with = ROOT
				is_subject_of_type_with_overlord = {
					who = ROOT
					type = ynnic_iosahar
				}
			}
		}
	}

	option = {
		name = ynn_events.151.a
		ai_chance = {
			factor = 100
		}
		add_prestige = 5
		add_country_modifier = {
			name = grebniesthi_garden
			duration = 3650
		}
		add_trust = {
			who = G28
			value = 10
			mutual = yes
		}
		set_country_flag = flowers_from_grebniesth
	}
}

country_event = {	#Bellflowers in bloom
	id = ynn_events.152
	title = ynn_events.152.t
	desc = ynn_events.152.t
	picture = SURAKES_SUN_GARDEN_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = flowers_from_grebniesth
	}

	option = {
		name = ynn_events.152.a
		ai_chance = {
			factor = 100
		}
		capital = {
			add_province_modifier = {
				name = wonderful_garden
				duration = -1
			}
		}
	}
}

country_event = {	#Exiled amethyst knight
	id = ynn_events.153
	title = ynn_events.153.t
	desc = ynn_events.153.d
	picture = NOBLE_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
		any_known_country = {
			AND = {
				tag = G26
				owns = 1172
			}
		}
		NOT = {
			tag = G26
		}
	}

	option = {
		name = ynn_events.153.a 
		ai_chance = {
			factor = 50
			modifier = {
				factor = 90
				ruler_has_personality = conqueror_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = great_conqueror_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = mythical_conqueror_personality
			}
		}
		create_general = {
			tradition = 60
			culture = dolindhan
		}
		add_trust = {
			who = G26
			value = -5
			mutual = yes
		}
		add_opinion = {
			who = G26
			modifier = ynn_harbored_exiled_knight
		}
	}

	option = {
		name = ynn_events.153.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 90
				ruler_has_personality = zealot_personality
			}
		}
		add_trust = {
			who = G26
			value = 5
			mutual = yes
		}
		add_opinion = {
			who = G26
			modifier = ynn_rejected_exiled_knight
		}
	}
}

country_event = { #The blood of Lukaus
	id = ynn_events.115
	title = ynn_events.115.t
	desc = ynn_events.115.d
	picture = TOURNAMENT_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
		OR = {
			mil = 4
			OR = {
				army_organiser = 3
				army_reformer = 3
				commandant = 3
				grand_captain = 3
				master_recruiter = 3 
				military_engineer = 3
				quartermaster = 3
			}
		}
	}

	option = {
		name = ynn_events.115.a 
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				mil = 4
			}
			add_ruler_modifier = {
				name = lukaus_blood_trainer
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = lukaus_blood_trainer
				duration = 7300
			}
		}
	}

	option = {
		name = ynn_events.115.b
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				mil = 4
			}
			add_ruler_modifier = {
				name = lukaus_blood_tamer
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = lukaus_blood_tamer
				duration = 7300
			}
		}
	}
}

country_event = { #Mage of the Academy of Rzenta
	id = ynn_events.205
	title = ynn_events.205.t
	desc = ynn_events.205.d
	picture = BIG_BOOK_eventPicture

	is_triggered_only = yes 

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		1756 = {
			owner = {
				NOT = {
					has_country_flag = banned_magic
				}
			}
		}
		NOT = {
			has_country_flag = banned_magic
		}
	}

	option = {
		name = ynn_events.205.a 
		ai_chance = {
			factor = 45
			modifier = {
				factor = 90
				ruler_has_personality = scholar_personality
			}
		}
		add_treasury = -50
		define_advisor = {
			type = court_mage
			skill = 2
			location = 1756
			discount = yes 
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = conscripted_war_wizard
			influence = 10
			duration = 7300
		}
	}

	option = {
		name = ynn_events.205.b
		ai_chance = {
			factor = 45
			modifier = {
				factor = 90
				OR = {
					ruler_has_personality = martial_educator_personality
					ruler_has_personality = great_conqueror_personality
					ruler_has_personality = mythical_conqueror_personality
					ruler_has_personality = conqueror_personality
				}
			}
		}
		add_treasury = -100
		add_prestige = -10
		create_war_wizard_effect = yes 
	}
	
	option = {
		name = ynn_events.205.c
		ai_chance = {
			factor = 10
		}
		add_prestige = -5
	}
}

country_event = {	#Adopt epednar crossmount for scouting?
	id = ynn_events.154
	title = ynn_events.154.t
	desc = ynn_events.154.d
	picture = HORDE_ON_HORSEBACK_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		any_known_country = {
			AND = {
				tag = G34	#Arganjuzorn
				owns = 1820
			}
		}
		G34 = {
			has_opinion = {
				who = ROOT
				value = 50
			}
		}
	}

	option = {
		name = ynn_events.154.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				ruler_has_personality = greedy_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = conqueror_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = great_conqueror_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = mythical_conqueror_personality
			}
		}
		add_treasury = -100
		add_country_modifier = {
			name = crossbreed_mounted_scouts
			duration = 3650
		}
	}

	option = {
		name = ynn_events.154.b
		ai_chance = {
			factor = 50
		}
		add_prestige = 10
	}
}

country_event = {	#Holy merchant fleet asks for a port
	id = ynn_events.155
	title = ynn_events.155.t
	desc = ynn_events.155.d
	picture = NAVAL_MILITARY_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
		any_owned_province = {
			province_group = ynn_riverside
		}
		any_known_country = {
			AND = {
				tag = G33
				owns = 1165
			}
		}
	}

	option = {
		name = ynn_events.155.a
		ai_chance = {
			factor = 60
			modifier = {
				factor = 90
				ruler_has_personality = naive_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = entrepreneur_personality
			}
			modifier = {
				factor = 90
				ruler_has_personality = embezzler_personality
			}
			modifier = {
				factor = 0
				ruler_has_personality = secretive_personality
			}
		}
		add_years_of_income = 0.5
		add_prestige = -5
		add_mercantilism = -5
		random_owned_province = {
			limit = {
				province_group = ynn_riverside
			}
			add_province_modifier = {
				name = ynn_holy_merhcant_port
				duration = 3650
			}
		}
	}

	option = {
		name = ynn_events.155.b
		ai_chance = {
			factor = 50
		}
		add_prestige = 5
		add_mercantilism = 5
	}
}

country_event = {	#Aspiring hero on Potraga
	id = ynn_events.116
	title = ynn_events.116.t
	desc = ynn_events.116.desc
	picture = MILITARISTICALLY_TALENTED_RULER_eventPicture

	is_triggered_only = yes 

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
			
		}
		NOT = {
			capital = 2813
		}
		NOT = {
			tag = G29 
		}
	}

	option = {
		name = ynn_events.116.a
		ai_chance = {
			factor = 50
		}
		add_treasury = -40
		define_advisor = {
			type = army_reformer
			skill = 3
			location = 2813
			discount = yes 
			culture = dolindhan
			religion = ynn_river_worship
		}
	}

	option = {
		name = ynn_events.116.b
		ai_chance = {
			factor = 50
		}
		add_treasury = -40
		create_general = {
			tradition = 60
			culture = dolindhan
		}
	}

	option = {
		trigger = {
			OR = {
				has_female_heir = yes 
				has_heir = no
			}
		}
		name = ynn_events.116.c
		ai_chance = {
			factor = 75
			modifier = {
				factor = 100
				ruler_has_personality = infertile_personality
			}
			modifier = {
				factor = 10
				ruler_has_personality = fertile_personality
			}
		}
		define_heir = {
			dynasty = ROOT 
			age = 16
			claim = 50
			adm = 4
			dip = 4
			mil = 4
			hide_skills = yes 
			no_consort_with_heir = yes 
			male = yes 
			culture = dolindhan
			religion = ynn_river_worship
		}
	}

	option = {
		trigger = {
			is_female = yes 
			has_consort = no 
		}
		name = ynn_events.116.d 
		ai_chance = {
			factor = 75
			modifier = {
				factor = 100
				OR = {
					ruler_has_personality = fertile_personality
					ruler_has_personality = sinner_personality
				}
			}
		}
		define_consort = {
			age = 16
			adm = 4
			dip = 5
			mil = 5
			hide_skills = yes 
			male = yes 
			culture = dolindhan
			religion = ynn_river_worship
		}
	}
}

country_event = {	#False rumours of Thromshana
	id = ynn_events.206
	title = ynn_events.206.t
	desc = ynn_events.206.desc
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		NOT = {
			capital = 1140
			has_country_flag = destroyed_rumour_mill
			has_country_modifier = hunting_down_rumours
			has_ruler_flag = thromshana_slandered
		}
	}

	mean_time_to_happen = {
		days = 1

		modifier = {
			factor = 1.2
			NOT = {
				diplomatic_reputation = 1
			}
		}

		modifier = {
			factor = 1.5
			NOT = {
				diplomatic_reputation = 0
			}
		}

		modifier = {
			factor = 1.2
			corruption = 1
		}

		modifier = {
			factor = 1.3
			corruption = 2
		}

		modifier = {
			factor = 1.5
			corruption = 5
		}

		modifier = {
			factor = 1.5
			overextension_percentage = 0.75
		}
	}

	immediate = {
		hidden_effect = {
			random_known_country = {
				limit = {
					owns = 1140
				}
				save_event_target_as = thromshana_owner
			}
		}
	}

	option = { 
		trigger = {
			OR = {
				ruler_has_personality = secretive_personality
				ruler_has_personality = intricate_web_weaver_personality
			}
			NOT = {
				ruler_has_personality = malevolent_personality
				ruler_has_personality = bold_fighter_personality
			}
		}
		name = ynn_events.206.a
		ai_chance = {
			factor = 100
		}
		set_ruler_flag = thromshana_slandered
		add_prestige = 5
		if = {
			limit = {
				any_known_country = {
					tag = G85 
				}
			}
			every_known_country = {
				limit = {
					capital_scope = {
						OR = {
							superregion = ynn_superregion
							region = forest_of_the_cursed_ones_region
						}
					}
				}
				add_trust = {
					who = G85 
					value = -5
				}
			}
		}
	}

	option = {
		trigger = {
			NOT = {
				ruler_has_personality = secretive_personality
				ruler_has_personality = intricate_web_weaver_personality
			}
			OR = {
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
				ruler_has_personality = bold_fighter_personality
			}
		}
		name = ynn_events.206.b
		ai_chance = {
			factor = 100
		}
		set_ruler_flag = thromshana_slandered
		every_known_country = {
			limit = {
				capital_scope = {
					OR = {
						superregion = ynn_superregion
						region = forest_of_the_cursed_ones_region
					}
				}
			}
			add_trust = {
				who = ROOT 
				value = -10
			}
		}
		if = {
			limit = {
				1140 = {
					owned_by = ROOT
				}
			}
			1140 = {
				add_devastation = 10
				add_base_tax = -1
				add_base_production = -1
			}
			set_country_flag = destroyed_rumour_mill
		}
		else = {
			declare_war_with_cb = {
				who = event_target:thromshana_owner
				casus_belli = cb_insult
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				ruler_has_personality = secretive_personality
				ruler_has_personality = intricate_web_weaver_personality
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
				ruler_has_personality = bold_fighter_personality
			}
		}
		name = ynn_events.206.c
		ai_chance = {
			factor = 33
		}
		set_ruler_flag = thromshana_slandered
		add_legitimacy = -5
		add_prestige = 5
		every_known_country = {
			limit = {
				capital_scope = {
					OR = {
						superregion = ynn_superregion
						region = forest_of_the_cursed_ones_region
					}
				}
				NOT = {
					tag = G85
				}
			}
			random = {
				chance = 50
				add_trust = {
					who = ROOT
					value = -5
				}
			}
		}
		if = {
			limit = {
				any_known_country = {
					tag = G85
				}
			}
			add_trust = {
				who = G85
				value = -10
			}
		}
	}

	option = {
		trigger = {
			NOT = {
				ruler_has_personality = secretive_personality
				ruler_has_personality = intricate_web_weaver_personality
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
				ruler_has_personality = bold_fighter_personality
			}
		}
		name = ynn_events.206.d
		ai_chance = {
			factor = 33
		}
		set_ruler_flag = thromshana_slandered
		add_treasury = -50
		add_legitimacy = -5
		add_country_modifier = {
			name = hunting_down_rumours
			duration = 1825
		}
		if = {
			limit = {
				any_known_country = {
					tag = G85
				}
			}
			add_trust = {
				who = G85
				value = -10
			}
		}
	}

	option = {
		trigger = {
			NOT = {
				ruler_has_personality = secretive_personality
				ruler_has_personality = intricate_web_weaver_personality
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
				ruler_has_personality = bold_fighter_personality
			}
		}
		name = ynn_events.206.e
		ai_chance = {
			factor = 33
		}
		set_ruler_flag = thromshana_slandered
		add_stability = -1
		add_corruption = -2
		if = {
			limit = {
				ruler_has_personality = cruel_personality
			}
			remove_ruler_personality = cruel_personality
		}
		if = {
			limit = {
				ruler_has_personality = malevolent_personality
			}
			remove_ruler_personality = malevolent_personality
		}
		if = {
			limit = {
				ruler_has_personality = obsessive_perfectionist_personality
			}
			remove_ruler_personality = obsessive_perfectionist_personality
		}
		if = {
			limit = {
				ruler_has_personality = loose_lips_personality
			}
			remove_ruler_personality = loose_lips_personality
		}
		if = {
			limit = {
				ruler_has_personality = craven_personality
			}
			remove_ruler_personality = craven_personality
		}
		if = {
			limit = {
				ruler_has_personality = naive_personality
			}
			remove_ruler_personality = naive_personality
		}
		if = {
			limit = {
				ruler_has_personality = greedy_personality
			}
			remove_ruler_personality = greedy_personality
		}
		if = {
			limit = {
				ruler_has_personality = sinner_personality
			}
			remove_ruler_personality = sinner_personality
		}
		if = {
			limit = {
				ruler_has_personality = drunkard_personality
			}
			remove_ruler_personality = drunkard_personality
		}
		if = {
			limit = {
				ruler_has_personality = infertile_personality
			}
			remove_ruler_personality = infertile_personality
		}
		if = {
			limit = {
				ruler_has_personality = embezzler_personality
			}
			remove_ruler_personality = embezzler_personality
		}
		if = {
			limit = {
				ruler_has_personality = babbling_buffoon_personality
			}
			remove_ruler_personality = babbling_buffoon_personality
		}
		if = {
			limit = {
				NOT = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = malevolent_personality
					ruler_has_personality = obsessive_perfectionist_personality
					ruler_has_personality = loose_lips_personality
					ruler_has_personality = craven_personality
					ruler_has_personality = naive_personality
					ruler_has_personality = greedy_personality
					ruler_has_personality = sinner_personality 
					ruler_has_personality = drunkard_personality
					ruler_has_personality = infertile_personality
					ruler_has_personality = embezzler_personality
					ruler_has_personality = babbling_buffoon_personality
				}
			}
			change_dip = 1
		}
		every_known_country = {
			limit = {
				capital_scope = {
					OR = {
						superregion = ynn_superregion
						region = forest_of_the_cursed_ones_region
					}
				}
			}
			add_trust = {
				who = ROOT
				value = -5
			}
		}
	}
}

country_event = {	#Stenurynn gifts Teriyer
	id = ynn_events.156
	title = ynn_events.156.t
	desc = ynn_events.156.d
	picture = NOBLE_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		any_known_country = {
			AND = {
				tag = H25
				owns = 1135
			}
		}
		NOT = {
			tag = H25 
		}
		H25 = {
			OR = {
				alliance_with = ROOT
				is_subject_of_type_with_overlord = {
					who = ROOT
					type = ynnic_iosahar
				}
			}
		}
	}

	option = {
		name = ynn_events.156.a
		ai_chance = {
			factor = 100
		}
		add_opinion = {
			who = H25
			modifier = ynn_gifted_puppy
		}
		add_trust = {
			who = H25
			value = 5
			mutual = yes
		}
		add_country_modifier = {
			name = stenurynn_teriyer
			duration = 5475
		}
	}
}

country_event = {	#The king of the stuir balia
	id = ynn_events.300
	title = ynn_events.300.t
	desc = ynn_events.300.d
	picture = MALAYAN_PORT_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
		has_personal_deity = ynn_zodiac_deity_14
		NOT = {
			had_country_flag = {
				flag = stranded_serpent
				days = 1460
			}
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = stranded_serpent
		}
	}

	option = {
		name = ynn_events.300.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 100
				ruler_has_personality = sinner_personality
			}
			modifier = {
				factor = 0
				ruler_has_personality = zealot_personality
			}
		}
		add_dip_power = 100
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		add_country_modifier = {
			name = king_of_the_stuir_balia
			duration = 3650
		}
		hidden_effect = {
			set_country_flag = captured_water_serpent
			clr_country_flag = stranded_serpent
		}
	}

	option = {
		name = ynn_events.300.b
		ai_chance = {
			factor = 50
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		clr_country_flag = stranded_serpent
	}
}

country_event = {	#Water Serpent surfaces!
	id = ynn_events.301
	title = ynn_events.301.t
	desc = {
		trigger = {
			NOT = {
				has_country_flag = captured_water_serpent
				has_country_flag = serpent_eats_barge
			}
		}
		desc = ynn_events.301.d1
	}

	desc = {
		trigger = {
			OR = {
				has_country_flag = captured_water_serpent
				has_country_flag = serpent_eats_barge
			}
		}
		desc = ynn_events.301.d2
	}
	picture = SHIP_SAILING_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			has_country_flag = big_barges
			has_country_flag = normal_barges
			has_country_flag = little_barges
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = normal_barges
				}
				random = {
					chance = 20
					set_country_flag = serpent_eats_barge
				}
			}
			if = {
				limit = {
					has_country_flag = little_barges
				}
				random = {
					chance = 50
					set_country_flag = serpent_eats_barge
				}
			}
		}
	}

	option = {
		trigger = {
			NOT = {
				has_country_flag = captured_water_serpent
				has_country_flag = serpent_eats_barge
			}
		}
		name = ynn_events.301.a
		ai_chance = {
			factor = 100
		}
		add_prestige = 10
		add_legitimacy = 10
	}

	option = {
		trigger = {
			OR = {
				has_country_flag = captured_water_serpent
				has_country_flag = serpent_eats_barge
			}
		}
		name = ynn_events.301.b
		ai_chance = {
			factor = 100
		}
		hidden_effect = {
			country_event = {
				id = ynn_barges.6
			}
			clr_country_flag = captured_water_serpent
			clr_country_flag = serpent_eats_barge
		}
	}
}

country_event = { #Pet snapping ottter
	id = ynn_events.302
	title = ynn_events.302.t
	desc = ynn_events.302.desc
	picture = SEA_TREASURE_eventpicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
	}

	option = { #Make this the basic name ai will pcick
		name = ynn_events.302.a 
		ai_chance = {
			factor = 100
		}
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_1_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.b  
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_2_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.c 
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_3_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.d 
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_4_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.e 
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_5_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.f
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_6_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.g
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_7_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.h 
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_8_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.i 
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_9_desc
		}
	}
	option = { #Thank you kind citizen
		name = ynn_events.302.j 
		add_country_modifier = {
			name = pet_snapping_otter
			duration = -1
			desc = pet_snapping_otter_10_desc
		}
	}
}

country_event = { #Pet otter does a good fishing
	id = ynn_events.303
	title = ynn_events.303.t
	desc = ynn_events.303.d 
	picture = SEA_TREASURE_eventpicture

	is_triggered_only = no

	trigger = {
		has_country_modifier = pet_snapping_otter
	}

	mean_time_to_happen = {
		months = 60
	}

	option = { #Thank you otter 
		name = ynn_events.303.a 
		add_dip_power = 20
		add_prestige = 1
	}
}

country_event = { #Pet otter dies
	id = ynn_events.304
	title = ynn_events.304.t
	desc = ynn_events.304.d 
	picture = BAD_WITH_MONARCH_eventpicture

	is_triggered_only = no 

	trigger = {
		has_country_modifier = pet_snapping_otter
	}

	mean_time_to_happen = {
		months = 240
	}

	option = { #Rip otter
		name = ynn_events.304.a 
		ai_chance = {
			factor = 80
		}
		remove_country_modifier = pet_snapping_otter
		if = {
			limit = {
				ruler_has_personality = cruel_personality
			}
			random = {
				chance = 50
				remove_ruler_personality = cruel_personality
			}
		}
		if = {
			limit = {
				ruler_has_personality = malevolent_personality
			}
			random = {
				chance = 50
				remove_ruler_personality = malevolent_personality
			}
		}
	}
	
	option = {
		name = ynn_events.304.b
		ai_chance = {
			factor = 20
		}
		remove_country_modifier = pet_snapping_otter
		if = {
			limit = {
				ruler_has_personality = cruel_personality
			}
			random = {
				chance = 50
				remove_ruler_personality = cruel_personality
			}
		}
		if = {
			limit = {
				ruler_has_personality = malevolent_personality
			}
			random = {
				chance = 50
				remove_ruler_personality = malevolent_personality
			}
		}
	}
}

province_event = { #Giant Beavers swamp village
	id = ynn_events.305
	title = ynn_events.305.t 
	desc = ynn_events.305.d 
	picture = 19_MONSOON_eventpicture 

	is_triggered_only = yes

	trigger = {
		OR = {
			superregion = ynn_superregion
			region = forest_of_the_cursed_ones_region
		}
	}

	immediate = {
		add_devastation = 10
	}

	option = { #Help them rebuild
		name = ynn_events.305.a 
		goto = ROOT 
		ai_chance = {
			factor = 80
			modifier = {
				factor = 100
				owner = {
					OR = {
						ruler_has_personality = kind_hearted_personality
						ruler_has_personality = benevolent_personality 
					}
				}
			}
			modifier = {
				factor = 90
				owner = {
					OR = {
						ruler_has_personality = architectural_visionary_personality
						ruler_has_personality = industrious_personality
						ruler_has_personality = well_advised_personality
					}
				}
			}
		}
		owner = {
			add_adm_power = -40 
			add_treasury = -50
		}
		add_province_modifier = { 
			name = rebuilding_flooded_property
			duration = 7300 
			desc = rebuilding_flooded_property_desc
		}
	}

	option = { #Fuck em
		name = ynn_events.305.b 
		ai_chance = {
			factor = 20
			modifier = {
				factor = 100
				owner = {
					OR = {
						ruler_has_personality = greedy_personality
						is_bankrupt = yes
					}
				}
			}
			modifier = {
				factor = 50 
				owner = {
					num_of_loans = 5
				}
			}
		}
		random = {
			chance = 50
			add_base_tax = -1 
		}
		random = {
			chance = 50
			add_base_production = -1
		}
		random = {
			chance = 50
			add_base_manpower = -1
		}
		add_devastation = 20
	}
}

country_event = {	#Pet ynnea pig 
	id = ynn_events.306
	title = ynn_events.306.t
	desc = ynn_events.306.d
	picture = ARTWORK_eventpicture 

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_reformed
			religion = ynn_river_worship
		}
	}

	option = {
		name = ynn_events.306.a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				ruler_has_personality = infertile_personality
			}
		}
		add_treasury = -40
		add_ruler_modifier = { 
			name = pet_ynnea_pig
			duration = -1
			desc = pet_ynnea_pig_desc
		}
	}

	option = {
		name = ynn_events.306.b 
		ai_chance = {
			factor = 10
		}
		add_prestige = -5
	}
}

province_event = { #Whitetail fox 
	id = ynn_events.307
	title = ynn_events.307.t 
	desc = ynn_events.307.d 
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			superregion = ynn_superregion
			region = forest_of_the_cursed_ones_region
		}
	}

	option = {
		name = ynn_events.307.a 
		goto = ROOT
		ai_chance = {
			factor = 100
		}
		add_province_modifier = {
			name = whitetail_residence
			duration = 3650
			desc = whitetail_residence_desc
		}
	}
}

country_event = {	#Stone fish at the feast
	id = ynn_events.308
	title = ynn_events.308.t
	desc = ynn_events.308.d 
	picture = DIPLOMACY_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			OR = {
				superregion = ynn_superregion
				region = forest_of_the_cursed_ones_region
			}
		}
		OR = {
			religion = ynn_river_worship
			religion = ynn_river_reformed
		}
		ynnic_iosahar = 2
	}

	option = {
		name = ynn_events.308.a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				ruler_has_personality = craven_personality
			}
		}
		hidden_effect = {
			random_list = {
				95 = {
					country_event = {
						id = ynn_events.309
					}
				}
				05 = {
					country_event = {
						id = ynn_events.310
					}
				}
			}
		}
	}

	option = {
		name = ynn_events.308.b
		ai_chance = {
			factor = 10
		}
		every_subject_country = {
			add_liberty_desire = 5
			add_opinion = {
				who = ROOT
				modifier = ynn_poisonous_fish
			}
		}
	}
}

country_event = {	#Fish good
	id = ynn_events.309
	title = ynn_events.309.t
	desc = ynn_events.309.d
	picture = KING_DOING_GREAT_eventPicture

	is_triggered_only = yes

	trigger = {
		always = yes
	}

	option = {
		name = ynn_events.309.a
		ai_chance = {
			factor = 100
		}
		add_dip_power = 30
		add_prestige = 5
		every_subject_country = {
			add_liberty_desire = -5
			add_opinion = {
				who = ROOT
				modifier = ynn_good_fish
			}
		}
	}
}

country_event = {	#Fish bad :(
	id = ynn_events.310
	title = ynn_events.310.t
	desc = ynn_events.310.d
	picture = KING_SICK_IN_BED_eventPicture

	is_triggered_only = yes

	trigger = {
		always = yes
	}

	option = {
		name = ynn_events.310.a
		ai_chance = {
			factor = 100
		}
		add_dip_power = -30
		random = {
			chance = 20
			kill_ruler = yes
		}
		every_subject_country = {
			add_liberty_desire = 5
			add_opinion = {
				who = ROOT
				modifier = ynn_poisonous_fish
			}
		}
	}
}

