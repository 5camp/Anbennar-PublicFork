
namespace = estate_adeen


country_event = {
	id = estate_adeen.1
	title = estate_adeen.1.t
	desc = estate_adeen.1.d
	picture = KOBOLD_BALRIS_eventPicture
	
	trigger = { 
		has_estate = estate_adeen
		is_year = 1650
		NOT = { has_disaster = estate_adeen_palace_coup }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = adeen_integrated
		}
	}

	option = {
		name = estate_adeen.1.a
		set_estate_privilege = estate_adeen_adeen_integrated
	}
}

country_event = {
	id = estate_adeen.2
	title = estate_adeen.2.t
	desc = estate_adeen.2.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_control_of_the_army
	}

	option = {
		name = estate_adeen.2.a
		#adeen officers abuse power
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			desc = adeen_quarrels
			loyalty = -10
			duration = 7300
		}
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_quarrels
			loyalty = 10
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_adeen
			desc = adeen_quarrels
			influence = 10
			duration = 7300
		}
		if = {
			limit = { adeen_limit_low = yes }
			add_corruption = 0.5
		}
		else_if = {
			limit = { adeen_limit_low = yes }
			add_corruption = 1
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_corruption = 1.5
		}
		adeen_increase_appease = yes
	}

	option = {
		name = estate_adeen.2.b
		#adeen officers abuse power
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			desc = adeen_quarrels
			loyalty = 10
			duration = 7300
		}
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_quarrels
			loyalty = -10
			duration = 7300
		}
		if = {
			limit = { adeen_limit_low = yes }
			add_army_tradition = -5
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			add_army_tradition = -10
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_army_tradition = -15
		}
	}

	option = {
		name = estate_adeen.2.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = strict_personality
				mil = 5
				army_professionalism = 0.75
			}
		}
		#adeen officers abuse power
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = -20
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -20
		}
		add_army_professionalism = 0.05
	}
}

country_event = { #adeen families demand more
	id = estate_adeen.3
	title = estate_adeen.3.t
	desc = estate_adeen.3.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_support_adeen_families
	}

	option = {
		name = estate_adeen.3.a
		if = {
			limit = { adeen_limit_low = yes }
			add_years_of_income = -0.5
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			add_years_of_income = -1
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_years_of_income = -1.5
		}
		adeen_increase_appease = yes
	}

	option = {
		name = estate_adeen.3.b
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = -10
		}
	}
}

country_event = { #adeen want more land
	id = estate_adeen.4
	title = estate_adeen.4.t
	desc = estate_adeen.4.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_land_grants_for_adeen
	}

	option = {
		name = estate_adeen.4.a
		if = {
			limit = { adeen_limit_low = yes }
			change_estate_land_share = {
				estate = estate_adeen
				share = 1
			}
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			change_estate_land_share = {
				estate = estate_adeen
				share = 3
			}
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			change_estate_land_share = {
				estate = estate_adeen
				share = 6
			}
		}
		add_yearly_sailors = 1
		adeen_increase_appease = yes
	}

	option = {
		name = estate_adeen.4.b
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = -10
		}
	}
}

country_event = { #adeen corruption
	id = estate_adeen.5
	title = estate_adeen.5.t
	desc = estate_adeen.5.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_allow_adeen_halqa
	}

	option = {
		name = estate_adeen.5.a
		if = {
			limit = { adeen_limit_low = yes }
			add_corruption = 0.5
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			add_corruption = 1
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_corruption = 1.5
		}
		adeen_increase_appease = yes
	}

	option = {
		name = estate_adeen.5.b
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_halqa_purges
			loyalty = -10
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_adeen
			desc = adeen_halqa_purges
			influence = -10
			duration = 7300
		}
		every_owned_province = {
			limit = { trade_goods = slaves }
			add_unrest = 10
		}
	}
}

country_event = { #adeen corruption
	id = estate_adeen.6
	title = estate_adeen.6.t
	desc = estate_adeen.6.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_rights_of_collection
	}

	option = {
		name = estate_adeen.6.a
		add_years_of_income = 1
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_farmers_censured
			loyalty = -10
			duration = 7300
		}
	}

	option = {
		name = estate_adeen.6.b
		if = {
			limit = { adeen_limit_low = yes }
			add_years_of_income = -0.5
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			add_years_of_income = -1
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_years_of_income = -1.5
		}
		adeen_increase_appease = yes
	}
}

country_event = { #adeen corruption
	id = estate_adeen.7
	title = estate_adeen.7.t
	desc = estate_adeen.7.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_privilege_of_first_speech
	}

	option = {
		name = estate_adeen.7.a
		change_estate_land_share = {
			estate = estate_nobles
			share = -5
		}
		change_estate_land_share = {
			estate = estate_adeen
			share = 5
		}
	}

	option = {
		name = estate_adeen.7.b
		change_estate_land_share = {
			estate = estate_burghers
			share = -5
		}
		change_estate_land_share = {
			estate = estate_adeen
			share = 5
		}
	}

	option = {
		name = estate_adeen.7.c
		change_estate_land_share = {
			estate = estate_church
			share = -5
		}
		change_estate_land_share = {
			estate = estate_adeen
			share = 5
		}
	}
}

#Pay Adeen at the end of wars
country_event = {
	id = estate_adeen.8
	title = estate_adeen.8.t
	desc = estate_adeen.8.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_reward_incentives
	}

	option = {
		name = estate_adeen.8.a
		if = {
			limit = { adeen_limit_min = yes }
			add_years_of_income = -0.2
		}
		else_if = {
			limit = { adeen_limit_low = yes }
			add_years_of_income = -0.3
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			add_years_of_income = -0.4
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_years_of_income = -0.6
		}
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = 5
		}
		adeen_increase_appease = yes
	}

	option = {
		name = estate_adeen.8.b
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = -10
		}
	}
}

#Two lives
country_event = {
	id = estate_adeen.9
	title = estate_adeen.9.t
	desc = estate_adeen.9.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate_privilege = estate_adeen_allow_employment
	}

	option = {
		name = estate_adeen.8.a
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_adeen
			desc = adeen_two_lives
			influence = 10
			duration = 7300
		}
		if = {
			limit = { adeen_limit_low = yes }
			add_years_of_income = -0.2
			add_yearly_manpower = -0.5
		}
		else_if = {
			limit = { adeen_limit_mid = yes }
			add_years_of_income = -0.4
			add_yearly_manpower = -1
		}
		else_if = {
			limit = { adeen_limit_high = yes }
			add_years_of_income = -0.6
			add_yearly_manpower = -1.5
		}
		adeen_increase_appease = yes
	}

	option = {
		name = estate_adeen.8.b
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = -10
		}
		add_war_exhaustion = 5
	}
}

#Random event handler
country_event = {
	id = estate_adeen.10
	title = estate_adeen.10.t
	desc = estate_adeen.10.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	trigger = { 
		always = yes
	}

	immediate = {
		random_list = {
			1 = {
				country_event = { id = estate_adeen.2 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_control_of_the_army }
				}
			}
			1 = {
				country_event = { id = estate_adeen.3 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_support_adeen_families }
				}
			}
			1 = {
				country_event = { id = estate_adeen.4 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_land_grants_for_adeen }
				}
			}
			1 = {
				country_event = { id = estate_adeen.5 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_allow_adeen_halqa }
				}
			}
			1 = {
				country_event = { id = estate_adeen.6 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_rights_of_collection }
				}
			}
			1 = {
				country_event = { id = estate_adeen.7 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_privilege_of_first_speech }
				}
			}
			6 = { #this is much more likely to fire because it can only fire when at war
				country_event = { id = estate_adeen.9 }
				modifier = {
					factor = 0
					NOT = { has_estate_privilege = estate_adeen_allow_employment }
				}
				modifier = {
					factor = 0
					is_at_war = no
				}
			}
		}
	}

	option = {
		name = estate_adeen.8.a
	}
}

country_event = { #adeen ask for privs in republic
	id = estate_adeen.11
	title = estate_adeen.11.t
	desc = estate_adeen.11.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		always = yes
	}

	option = {
		name = estate_adeen.11.a
		add_years_of_income = -5
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = 10
		}
	}

	option = {
		name = estate_adeen.11.b
		add_scaled_republican_tradition = -15
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = 10
		}
	}

	option = {
		name = estate_adeen.11.c
		if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_allow_employment
				}
			}
			set_estate_privilege = estate_adeen_allow_employment
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_reward_incentives
				}
			}
			set_estate_privilege = estate_adeen_reward_incentives
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_privilege_of_first_speech
				}
			}
			set_estate_privilege = estate_adeen_privilege_of_first_speech
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_rights_of_collection
				}
			}
			set_estate_privilege = estate_adeen_rights_of_collection
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_allow_adeen_halqa
				}
			}
			set_estate_privilege = estate_adeen_allow_adeen_halqa
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_land_grants_for_adeen
				}
			}
			set_estate_privilege = estate_adeen_land_grants_for_adeen
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_support_adeen_families
				}
			}
			set_estate_privilege = estate_adeen_support_adeen_families
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_control_of_the_army
				}
			}
			set_estate_privilege = estate_adeen_control_of_the_army
		}
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = 30
		}
	}
	option = {
		name = estate_adeen.11.z
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_restless
			loyalty = -10
			duration = 1825
		}
		add_estate_influence_modifier = {
			estate = estate_adeen
			desc = adeen_restless
			influence = 10
			duration = 1825
		}
	}
}

country_event = { #adeen ask for privs in monarchy
	id = estate_adeen.12
	title = estate_adeen.12.t
	desc = estate_adeen.12.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		has_estate = estate_adeen
	}

	option = {
		name = estate_adeen.12.a
		add_years_of_income = -5
		add_country_modifier = {
			name = adeen_payments_modifier
			duration = 3650
		}
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_retirement
			loyalty = 10
			duration = 3650
		}
	}

	option = {
		name = estate_adeen.12.b
		mil_power_cost = -75
		add_estate_influence_modifier = {
			estate = estate_adeen
			desc = adeen_ceremonial_offices
			influence = 10
			duration = 3650
		}
	}

	option = {
		name = estate_adeen.12.c
		if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_allow_employment
				}
			}
			set_estate_privilege = estate_adeen_allow_employment
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_reward_incentives
				}
			}
			set_estate_privilege = estate_adeen_reward_incentives
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_privilege_of_first_speech
				}
			}
			set_estate_privilege = estate_adeen_privilege_of_first_speech
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_rights_of_collection
				}
			}
			set_estate_privilege = estate_adeen_rights_of_collection
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_allow_adeen_halqa
				}
			}
			set_estate_privilege = estate_adeen_allow_adeen_halqa
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_land_grants_for_adeen
				}
			}
			set_estate_privilege = estate_adeen_land_grants_for_adeen
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_support_adeen_families
				}
			}
			set_estate_privilege = estate_adeen_support_adeen_families
		}
		else_if = {
			limit = {
				NOT = {
					has_estate_privilege = estate_adeen_control_of_the_army
				}
			}
			set_estate_privilege = estate_adeen_control_of_the_army
		}
		add_estate_loyalty = {
			estate = estate_adeen
			loyalty = 30
		}
	}
	option = {
		name = estate_adeen.12.z
		add_estate_loyalty_modifier = {
			estate = estate_adeen
			desc = adeen_restless
			loyalty = -10
			duration = 3650
		}
		add_estate_influence_modifier = {
			estate = estate_adeen
			desc = adeen_restless
			influence = 10
			duration = 3650
		}
	}
}

country_event = {
	id = estate_adeen.13
	title = estate_adeen.13.t
	desc = estate_adeen.13.d
	picture = KOBOLD_BALRIS_eventPicture
	
	trigger = { 
		is_year = 1550
		has_estate = estate_adeen
		culture_group = baashidi
		NOT = {
			check_variable = {
				which = adeen_appease_count
				value = 15
			}
			has_country_flag = adeen_declined_integration
			has_country_flag = adeen_integrating
			has_country_flag = adeen_integrated
			has_country_flag = adeen_coup_lost
			has_country_flag = adeen_coup_won
		}
	}

	mean_time_to_happen = {
		years = 2
	}

	immediate = {
	}

	option = {
		name = estate_adeen.13.a
		custom_tooltip = adeen_integration_time
		add_adm_power = -150
		add_dip_power = -150
		add_mil_power = -150
		hidden_effect = {
			set_country_flag = adeen_integrating
			country_event = {
				id = estate_adeen.14
				days = 730
				random = 60
			}
		}
	}

	option = {
		name = estate_adeen.13.b
		hidden_effect = {
			set_country_flag = adeen_declined_integration
		}
	}
}

country_event = {
	id = estate_adeen.14
	title = estate_adeen.14.t
	desc = estate_adeen.14.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	
	trigger = { 
		always = yes
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = estate_adeen.14.a
		set_estate_privilege = estate_adeen_adeen_integrated
		hidden_effect = {
			clr_country_flag = adeen_integrating
			set_country_flag = adeen_integrated
		}
	}
}

##################
# Adeen disaster #
##################

#Disaster start
country_event = {
	id = estate_adeen.100
	title = estate_adeen.100.t
	desc = estate_adeen.100.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	
	trigger = { 
		always = yes
	}

	immediate = {
		capital_scope = {
			spawn_rebels = {
				type = adeen_coupists
				culture = adeen
				size = 1
				should_take_capital = yes
			}
		}
		random_owned_province = {
			spawn_rebels = {
				type = adeen_coupists
				culture = adeen
				size = 1
			}
		}
		random_owned_province = {
			spawn_rebels = {
				type = adeen_coupists
				culture = adeen
				size = 1
			}
		}
		random_owned_province = {
			spawn_rebels = {
				type = adeen_coupists
				culture = adeen
				size = 1
			}
		}
	}

	option = {
		name = estate_adeen.100.a
		add_stability = -3
		add_prestige = -20
	}
}

#Disaster stop
country_event = {
	id = estate_adeen.101
	title = estate_adeen.101.t
	desc = estate_adeen.101.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	
	trigger = { 
		always = yes
	}

	immediate = {
		hidden_effect = {
			set_country_flag = adeen_coup_won
		}
	}

	option = {
		name = estate_adeen.101.a
	}
}

#Disaster loss
country_event = {
	id = estate_adeen.102
	title = estate_adeen.102.t
	desc = estate_adeen.102.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	trigger = { 
		always = yes
	}

	immediate = {
		hidden_effect = {
			set_country_flag = adeen_coup_lost
		}
		end_disaster = estate_adeen_palace_coup
		change_estate_land_share = {
			estate = estate_adeen
			share = 20.0
		}
	}

	option = {
		name = estate_adeen.102.a

		set_estate_privilege = estate_adeen_power_over_the_throne

		hidden_effect = {
			disband_rebels = adeen_coupists
		}
	}
}

#More Adeen join the coup
country_event = {
	id = estate_adeen.103
	title = estate_adeen.103.t
	desc = estate_adeen.103.d
	picture = KOBOLD_BALRIS_eventPicture
	
	is_triggered_only = yes
	
	trigger = { 
		any_owned_province = {
			trade_goods = slaves
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				trade_goods = slaves
			}
			save_event_target_as = revolt_target
		}
	}

	option = {
		name = estate_adeen.103.a
		event_target:revolt_target = {
			spawn_rebels = {
				type = adeen_coupists
				culture = adeen
				size = 1
			}
		}
	}
}