########################################
# Raj Events                         #
########################################

namespace = rahenraj

country_event = {
	id = rahenraj.0
	title = rahenraj.0.t
	desc = rahenraj.0.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = { tag = R51 }
	
	immediate = {
		hidden_effect = {
			save_global_event_target_as = raja_global_target	#This is only used for the raj menu and NOT updated regularly
			random_subject_country = {
				limit = { has_country_flag = raj_vizier }
				save_global_event_target_as = raj_vizier_global_target	#same
			}
			raj_monthy_calc = yes
			raj_cohesion_yearly_tick = yes
			4411 = {
				set_variable = { which = raj_cohesion value = 30 }
				set_variable = { which = vizierSway value = 0 }
				set_variable = { which = rajCohesionIncreaseGargantuan value = 4.9 }
				set_variable = { which = rajCohesionIncreaseHuge value = 1.9 }
				set_variable = { which = rajCohesionIncreaseLarge value = 0.9 }
				set_variable = { which = rajCohesionIncreaseMedium value = 0.4 }
				set_variable = { which = rajCohesionIncreaseSmall value = 0.1 }
				set_variable = { which = rajCohesionChangeNull value = 0 }
				set_variable = { which = rajCohesionDecreaseGargantuan value = -5 }
				set_variable = { which = rajCohesionDecreaseHuge value = -2 }
				set_variable = { which = rajCohesionDecreaseLarge value = -1 }
				set_variable = { which = rajCohesionDecreaseMedium value = -0.5 }
				set_variable = { which = rajCohesionDecreaseSmall value = -0.2 }
				
				set_variable = { which = rahen_court_case_strength value = 5 }
			}
			
			random_owned_province = {
				limit = { NOT = { has_province_modifier = rahen_severely_neglected_infrastructure has_province_modifier = rahen_neglected_infrastructure  } }
				random_list = {
					1 = {
						add_permanent_province_modifier = {
							name = rahen_severely_neglected_infrastructure
							duration = -1
						}
						set_variable = { which = rahen_months_to_repair value = 6 }
					}
					7 = {
						add_permanent_province_modifier = {
							name = rahen_neglected_infrastructure
							duration = -1
						}
						set_variable = { which = rahen_months_to_repair value = 6 }
					}
				}
			}
			random_owned_province = {
				limit = { NOT = { has_province_modifier = rahen_severely_neglected_infrastructure has_province_modifier = rahen_neglected_infrastructure  } }
				random_list = {
					1 = {
						add_permanent_province_modifier = {
							name = rahen_severely_neglected_infrastructure
							duration = -1
						}
						set_variable = { which = rahen_months_to_repair value = 6 }
					}
					7 = {
						add_permanent_province_modifier = {
							name = rahen_neglected_infrastructure
							duration = -1
						}
						set_variable = { which = rahen_months_to_repair value = 6 }
					}
				}
			}
			for = {
				amount = 20
				effect = "
					rahen_add_new_neglected_infrastructure = yes
				"
			}
			
			add_corruption = 15
			
			rahen_calc_reform_ministry_of_agriculture = yes
			rahen_calc_reform_ministry_of_philosophy = yes
			rahen_calc_reform_ministry_of_internal_relations = yes
			rahen_calc_reform_ministry_of_foreign_relations = yes
			
		}
	}
	
	option = {
		name = rahenraj.0.a
		
		custom_tooltip = raj_cohesion_current_tt
		
		hidden_effect = {
			country_event = { id = rahenraj.2000 days = 365 }
		}
	}
}

# The DYNASTYNAME raja_reform has fallen!
province_event = {
	id = rahenraj.1
	title = rahenraj.1.t
	picture = COURT_eventPicture
	desc = {
		trigger = {
			owner = {
				has_reform = raja_reform
				NOT = { has_country_flag = raj_was_vizier }
			}
			FROM = { has_reform = raja_reform }
		}
		desc = rahenraj.1.da
	}
	desc = {
		trigger = {
			owner = { has_reform = raja_reform }
			FROM = { NOT = { has_reform = raja_reform } }
		}
		desc = rahenraj.1.db
	}
	desc = {
		trigger = { owner = { NOT = { has_reform = raja_reform } } }
		desc = rahenraj.1.db
	}
	desc = {
		trigger = {
			owner = {
				has_reform = raja_reform
				has_country_flag = raj_was_vizier
			}
			FROM = { has_reform = raja_reform }
		}
		desc = rahenraj.1.dc
	}
	
	major = yes
	is_triggered_only = yes
	
	trigger = {
		province_id = 4411
	}
	

	immediate = {
		# Save new owner as Raja if valid
		hidden_effect = {
			owner = {
				if = {
					limit = {
						OR = {
							has_reform = prabhi_reform
							has_reform = senapti_reform
							has_reform = indep_prabhi_reform
						}
					}
					add_core = 4411
					set_capital = 4411
					grant_independence = yes
					add_government_reform = raja_reform
					save_event_target_as = new_shogunate
					if = {
						limit = { NOT = { has_estate_privilege = estate_raj_ministries_raj_cohesion } }
						set_estate_privilege = estate_raj_ministries_raj_cohesion
					}
				}
			}
		
			# Handle all Prabhi+Senapti transfers
			if = { #Case: new owner is the new Raja, previous Raja lives -> all Prahbi+Senapti get transferred to new Raja
				limit = {
					#FROM = Previous Raja
					FROM = { exists = yes }
					FROM = { has_reform = raja_reform }
					#New owner is Raja
					owner = { has_reform = raja_reform }
				}
				#Degrade the previous Raja to Prahbi level, and gives them+their daimyo vassals to new raja
				FROM = {
					every_subject_country = {
						limit = {
							OR = {
								is_subject_of_type = daimyo_vassal
								is_subject_of_type = great_daimyo_vassal
							}
						}
						#Make subject of new raja 
						event_target:new_shogunate = {
							vassalize = PREV
						}
					}
					
					#Make old raja subject of new raja
					event_target:new_shogunate = {
						vassalize = FROM
					}
					
					#Downgrade rank and force prabhi reform onto old raja
					set_government_rank = 1
					add_government_reform = prabhi_reform
				}
				#Cleanup event.
				event_target:new_shogunate = {
					country_event = {
						id = rahenraj.1001
						days = 5
					}
					if = { limit = { has_country_flag = raj_vizier }
						raj_clear_vizier = yes
						set_country_flag = raj_was_vizier
					}
				}
				raj_cohesion_calc = yes
			}
			if = { #Case: new owner is NOT the new Raja, previous Raja lives -> all Prahbi+Senapti go free
				limit = {
					#FROM = Previous Raja
					FROM = { exists = yes }
					FROM = { has_reform = raja_reform }
					#New owner is NOT raja
					NOT = { owner = { has_reform = raja_reform } }
				}
				#Degrade the previous Raja to Prahbi level, release everyone, disband the Raja
				FROM = {
					every_subject_country = {
						limit = {
							OR = {
								is_subject_of_type = daimyo_vassal
								is_subject_of_type = great_daimyo_vassal
							}
						}
						
						#Grant freedom from old raja
						grant_independence = yes
						
						if = {
							limit = {
								has_reform = prabhi_reform
								has_reform = senapti_reform
							}
							#Previous subjects become independent Prabhi
							add_government_reform = indep_prabhi_reform
						}
					}
					
					#Downgrade rank and force indep_prabhi reform onto old raja
					set_government_rank = 1
					add_government_reform = indep_prabhi_reform
				}
			}
			if = { #Case: new owner is the new Raja, previous Raja is dead -> all Prahbi+Senapti get transferred to new Raja
				limit = {
					#FROM = Previous Raja is dead
					NOT = { FROM = { exists = yes } }
					#New owner is raja
					owner = { has_reform = raja_reform }
				}
				#Vassalize all old prabhi/senapti.
				every_country = {
					limit = {
						OR = {
							has_reform = prabhi_reform
							has_reform = senapti_reform
						}
						NOT = { war_with = event_target:new_shogunate }
					}
					event_target:new_shogunate = {
						vassalize = PREV
					}
				}
				#Any old prabhi/senapti still at war with the new raja get independence
				every_country = {
					limit = {
						OR = {
							has_reform = prabhi_reform
							has_reform = senapti_reform
						}
						war_with = event_target:new_shogunate
					}
					add_government_reform = indep_prabhi_reform
				}
				
				#Cleanup event.
				event_target:new_shogunate = {
					country_event = {
						id = rahenraj.1001
						days = 5
					}
					if = { limit = { has_country_flag = raj_vizier }
						raj_clear_vizier = yes
						set_country_flag = raj_was_vizier
					}
				}
				raj_cohesion_calc = yes
			}
			if = { #Case: new owner is NOT the new Raja, previous Raja dead -> all Prahbi+Senapti go free, disband the Raja
				limit = {
					#FROM = Previous Raja is dead
					NOT = { FROM = { exists = yes } }
					#New owner is NOT raja
					NOT = { owner = { has_reform = raja_reform } }
				}
				
				#Grant freedom to all old prabhi/senapti
				every_country = {
					limit = { 
						OR = {
							has_reform = prabhi_reform
							has_reform = senapti_reform
						}
					}
					
					#Grant freedom
					grant_independence = yes
					add_government_reform = indep_prabhi_reform
				}
			}
			
			
			if = {
				limit = {
					any_country = {
						OR = {
							is_subject_of_type = daimyo_vassal
							is_subject_of_type = great_daimyo_vassal
						}
						NOT = { overlord = { has_reform = raja_reform } }
					}
				}
				every_country = {
					limit = {
						OR = {
							is_subject_of_type = daimyo_vassal
							is_subject_of_type = great_daimyo_vassal
						}
						NOT = { overlord = { has_reform = raja_reform } }
					}
					grant_independence = yes
					add_government_reform = indep_daimyo
				}
			}
		}
	}
	
	option = {
		name = rahenraj.1.a
		trigger = { owner = { has_reform = raja_reform } }
		custom_tooltip = claiming_the_raj_tooltip
		if = { limit = { has_country_flag = raj_was_vizier }
			raj_cohesion_change_absolute = { amount = -15 }
			clr_country_flag = raj_was_vizier
		}
		else = {
			raj_cohesion_change_absolute = { amount = -10 }
		}
		country_event = { id = rahenraj.2100 days = 1 }	#new Vizier election
		hidden_effect = { #strip all reformation modifiers from the former Raja
			FROM = {
				rahen_remove_harimraj_reforms_effect = yes
				remove_country_modifier = raj_opened_senapti_ranks
				remove_country_modifier = raj_closed_senapti_ranks
			}
		}
	}
	
	option = {
		name = rahenraj.1.b
		trigger = { owner = { NOT = { has_reform = raja_reform } } }
		owner = {
			if = { limit = { NOT = { has_global_flag = destroyed_raj } }
				add_prestige = 20
				add_adm_power = 50
				add_dip_power = 50
				add_mil_power = 50
				set_global_flag = destroyed_raj
				4411 = {
					remove_province_modifier = rahen_corrupt_ministery_of_agriculture
					remove_province_modifier = rahen_corrupt_ministery_of_philosophy
					remove_province_modifier = rahen_corrupt_ministery_of_internal_relations
					remove_province_modifier = rahen_corrupt_ministery_of_foreign_relations
				}
			}
		}
		hidden_effect = { #stip all reformation modifiers from the former Raja
			FROM = {
				rahen_remove_harimraj_reforms_effect = yes
				remove_country_modifier = raj_opened_senapti_ranks
				remove_country_modifier = raj_closed_senapti_ranks
			}
		}
	}
}

#A Senapti Falls
country_event = { #This event lowers a Senapti to Prabhi rank
	id = rahenraj.2
	title = rahenraj.2.t
	desc = rahenraj.2.d
	picture = CONQUEST_eventPicture
	
	trigger = {
		is_subject_of_type = great_daimyo_vassal
		NOT = { has_country_modifier = prabhi_recently_promoted }
		NOT = { has_country_modifier = raj_mandate_senapti_primacy }
		NOT = { has_country_modifier = rajiya_senapti }
		OR = {
			AND = {
				OR = {
					NOT = { num_of_cities = 2 }
					AND = {
						overlord = {
							has_country_modifier = raj_closed_senapti_ranks
							culture_group = harimari
						}
						NOT = { ruler_is_harimari = yes }
					}
					AND = {
						overlord = {
							has_country_modifier = raj_closed_senapti_ranks
							culture_is_human = yes
						}
						NOT = { ruler_is_human = yes }
					}
				}
			}
			AND = {
				raj_above_allowed_senaptia = yes
				overlord = {
					NOT = {
						any_subject_country = {
							is_subject_of_type = great_daimyo_vassal
							NOT = { has_country_modifier = prabhi_recently_promoted }
							NOT = { has_country_modifier = raj_mandate_senapti_primacy }
							NOT = { has_country_modifier = rajiya_senapti }
							NOT = { tag = ROOT }
							ROOT = { total_development = PREV }
						}
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = { #Oh no, we've fallen from grace!!!
		name = rahenraj.2.a
		ai_chance = { factor = 1 }
		
		overlord = {
			create_subject = {
				subject_type = daimyo_vassal
				subject = ROOT
			}
		}
		if = {
			limit = {
				has_reform = senapti_reform
			}
			add_government_reform = prabhi_reform
		}
		hidden_effect = {
			4411 = { change_variable = { raj_current_num_of_senaptia = -1 } }
		}
	}
}

# #A Prabhi Rises
# country_event = { #This is a hidden event that just does the original effect
	# id = rahenraj.3
	# title = rahenraj.3.t
	# desc = rahenraj.3.d
	# picture = CONQUEST_eventPicture
	# hidden = yes
	
	# trigger = {
		# is_subject_of_type = daimyo_vassal
		# if = {
			# limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks } }
			# OR = {
				# AND = {
					# overlord = {
						# culture_group = harimari
					# }
					# ruler_is_harimari = yes
				# }
				# AND = {
					# overlord = {
						# culture_is_human = yes
					# }
					# ruler_is_human = yes
				# }
			# }
		# }
		# NOT = { has_country_modifier = prabhi_promotion_rejected }
		# NOT = { has_country_modifier = senapti_recently_demoted }
		# num_of_cities = 2
		# NOT = { has_country_flag = potential_senapti }
		# OR = {
			# overlord = {
				# num_of_subjects = 100
				# NOT = { great_daimyo_vassal = 14 }
			# }
			# overlord = {
				# num_of_subjects = 70
				# NOT = { great_daimyo_vassal = 12 }
			# }
			# overlord = {
				# num_of_subjects = 50
				# NOT = { great_daimyo_vassal = 10 }
			# }
			# overlord = {
				# num_of_subjects = 35
				# NOT = { great_daimyo_vassal = 8 }
			# }
			# overlord = {
				# num_of_subjects = 25
				# NOT = { great_daimyo_vassal = 4 }
			# }
			# overlord = {
				# num_of_subjects = 15
				# NOT = { great_daimyo_vassal = 2 }
			# }
		# }
		# NOT = {
			# overlord = {
				# any_subject_country = {
					# is_subject_of_type = daimyo_vassal
					# NOT = { has_country_modifier = prabhi_promotion_rejected }
					# NOT = { has_country_modifier = senapti_recently_demoted }
					# num_of_cities = 2
					# if = {
						# limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks culture_group = harimari } }
						# ruler_is_harimari = yes
					# }
					# if = {
						# limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks culture_is_human = yes } }
						# ruler_is_human = yes
					# }
					# NOT = { tag = ROOT }
					# variable_arithmetic_trigger = {
						# export_to_variable = {
							# which = our_total_development
							# value = trigger_value:total_development
						# }
						# export_to_variable = {
							# which = root_total_development
							# value = trigger_value:total_development
							# who = ROOT
						# }
						
						# check_variable = { #Check if A >= B
							# which = our_total_development #A
							# which = root_total_development #B
						# }
					# }
				# }
			# }
		# }
	# }
	
	# mean_time_to_happen = {
		# months = 1
	# }
	
	# option = { #Send event to Raj
		# ai_chance = { factor = 1 }
		# save_global_event_target_as = potential_senapti_target
		# overlord = {
			# country_event = {
				# id = rahenraj.4
			# }
		# }
		# hidden_effect = { set_country_flag = potential_senapti }
	# }
# }
country_event = { #Tell the Raj that there is a new potential Senpati
	id = rahenraj.4
	title = rahenraj.4.t
	desc = rahenraj.4.d
	picture = CONQUEST_eventPicture
	
	major = yes
	major_trigger = {
		has_reform = raja_reform
		overlord = { has_reform = raja_reform }
	}
	
	is_triggered_only = yes
	
	option = { #Raise Prabhi to Senapti
		name = rahenraj.4.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				event_target:potential_senapti_target = {
					has_idea_group = offensive_ideas
				}
			}
			modifier = {
				factor = 2
				event_target:potential_senapti_target = {
					has_idea_group = defensive_ideas
				}
			}
			modifier = {
				factor = 2
				event_target:potential_senapti_target = {
					has_idea_group = quantity_ideas
				}
			}
			modifier = {
				factor = 2
				event_target:potential_senapti_target = {
					has_idea_group = quality_ideas
				}
			}
		} #! Balance AI chance
		
		event_target:potential_senapti_target = {
			overlord = {
				create_subject = {
					subject_type = great_daimyo_vassal
					subject = event_target:potential_senapti_target
				}
			}
			add_government_reform = senapti_reform
			hidden_effect = { clr_country_flag = potential_senapti }
		}
		hidden_effect = { 4411 = { change_variable = { raj_current_num_of_senaptia = 1 } } }
	}
	
	option = { #We don't need any more Senapti
		name = rahenraj.4.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				event_target:potential_senapti_target = {
					NOT = { total_development = 50 }
				}
			}
			modifier = {
				factor = 2
				event_target:potential_senapti_target = {
					NOT = { army_size = 8 }
				}
			}
			modifier = {
				factor = 2
				any_subject_country = {
					is_subject_of_type = daimyo_vassal
					NOT = { has_country_modifier = prabhi_promotion_rejected }
					NOT = { has_country_modifier = senapti_recently_demoted }
					NOT = { has_country_modifier = raj_mandate_extended_prabhi_privileges }
					num_of_cities = 2
					if = {
						limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks culture_group = harimari } }
						ruler_is_harimari = yes
					}
					if = {
						limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks culture_is_human = yes } }
						ruler_is_human = yes
					}
					total_development = ROOT
				}
			}
		} #! Balance AI chance
		
		event_target:potential_senapti_target = {
			add_country_modifier = {
				name = prabhi_promotion_rejected
				duration = 3650 #10 years
			}
			hidden_effect = { clr_country_flag = potential_senapti }
		} #! Notify of rejection
	}
}

#Event to ensure that Senapti and Prabhi keep Harimari rulers
country_event = { #If a Senapti ruler isn't a harimari
	id = rahenraj.5
	title = rahenraj.5.t
	picture = COURT_eventPicture
	
	desc = {
		trigger = {
			overlord = {
				culture_group = harimari
			}
		}
		desc = rahenraj.5.da
	}
	desc = {
		trigger = {
			overlord = {
				culture_is_human = yes
			}
		}
		desc = rahenraj.5.db
	}
	
	trigger = {
		has_reform = senapti_reform
		OR = {
			AND = {
				overlord = {
					has_country_modifier = raj_closed_senapti_ranks
					culture_group = harimari
				}
				NOT = { ruler_is_harimari = yes }
			}
			AND = {
				overlord = {
					has_country_modifier = raj_closed_senapti_ranks
					culture_is_human = yes
				}
				NOT = { ruler_is_human = yes }
			}
		}
	}
	is_triggered_only = yes
	
	option = { #Keep Current Ruler
		ai_chance = { factor = 0 }
		name = rahenraj.5.a
		
		add_prestige = 10
		increase_legitimacy_medium_effect = yes
	}
	option = { #Change Ruler
		ai_chance = { factor = 5 }
		name = rahenraj.5.b
		
		hidden_effect = {
			export_to_variable = {
				which = rajCulture
				value = primary_culture
				who = overlord
			}
		}
		
		define_ruler = {
			culture = variable:rajCulture
			claim = 50
			male = yes
		}
	}
}
country_event = { #If a Raj subject has an heir that isn't a harimari
	id = rahenraj.6
	title = rahenraj.6.t
	picture = COURT_eventPicture
	
	desc = {
		trigger = {
			overlord = {
				culture_group = harimari
			}
		}
		desc = rahenraj.6.da
	}
	desc = {
		trigger = {
			overlord = {
				culture_is_human = yes
			}
		}
		desc = rahenraj.6.db
	}
	
	trigger = {
		OR = {
			has_reform = prabhi_reform
			has_reform = senapti_reform
		}
		overlord = { has_country_modifier = raj_closed_senapti_ranks }
		has_heir = yes
		NOT = { has_heir_flag = raj_heir_refused }
		OR = {
			AND = {
				overlord = {
					culture_group = harimari
				}
				ruler_is_harimari = yes
				NOT = { heir_is_harimari = yes }
			}
			AND = {
				overlord = {
					culture_is_human = yes
				}
				ruler_is_human = yes
				NOT = { heir_is_human = yes }
			}
		}
	}
	is_triggered_only = yes
	
	option = { #Keep Current Heir
		ai_chance = { factor = 0 }
		name = rahenraj.5.a
		
		add_prestige = 10
		add_heir_claim = 20
		
		set_heir_flag = raj_heir_refused
	}
	option = { #Change Heir
		ai_chance = { factor = 5 }
		name = rahenraj.5.b
		
		hidden_effect = {
			export_to_variable = {
				which = rajCulture
				value = primary_culture
				who = overlord
			}
			
		}
		
		define_heir = {
			culture = variable:rajCulture
			claim = 50
			male = yes
			no_consort_with_heir = yes
			age = 25
		}
		set_heir_flag = set_heir_race
	}
}



###########################
### Reforming the court ###
###########################




country_event = { #The Court has finally been reformed
	id = rahenraj.97
	title = rahenraj.97.t
	desc = rahenraj.97.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	trigger = { has_country_flag = reformed_rahen_court }
	
	option = { #Shit
		ai_chance = { factor = 1 }
		name = rahenraj.97.a
		
		add_government_reform = restructured_dhenijansari_court_reform
		add_country_modifier = {
			name = rahen_curtailed_courts
			duration = 9125 #25 years
		}
	}
}
country_event = { #The Court is completely out of our control
	id = rahenraj.98
	title = rahenraj.98.t
	desc = rahenraj.98.d
	picture = COURT_eventPicture
	
	trigger = { capital = 4411 }
	
	major = yes
	is_triggered_only = yes
	
	option = { #How dare they disobey me!
		ai_chance = { factor = 1 }
		name = rahenraj.98.a
		
		reduce_legitimacy_huge_effect = yes
		
		hidden_effect = {
			random_owned_province = {
				add_permanent_province_modifier = {
					name = rahen_suspicious_ministry_estate
					duration = -1
				}
			}
			random_subject_country = {
				random_owned_province = {
					add_permanent_province_modifier = {
						name = rahen_suspicious_ministry_estate
						duration = -1
					}
				}
			}
			random_subject_country = {
				random_owned_province = {
					add_permanent_province_modifier = {
						name = rahen_suspicious_ministry_estate
						duration = -1
					}
				}
			}
			random_subject_country = {
				random_owned_province = {
					add_permanent_province_modifier = {
						name = rahen_suspicious_ministry_estate
						duration = -1
					}
				}
			}
			random_subject_country = {
				random_owned_province = {
					add_permanent_province_modifier = {
						name = rahen_suspicious_ministry_estate
						duration = -1
					}
				}
			}
		}
	}
}
country_event = { #The Court has finally been reformed
	id = rahenraj.99
	title = rahenraj.99.t
	desc = rahenraj.99.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = { #Grand!
		ai_chance = { factor = 1 }
		name = rahenraj.99.a
		
		set_country_flag = rahen_corrupt_court_completed
		hidden_effect = {
			if = { limit = { has_reform = raja_reform }
				set_country_flag = reformed_rahen_court
			}
		}
		country_event = {
			id = rahenraj.97
			days = 5
		}
	}
}

country_event = { #Update Score calculation
	id = rahenraj.100
	title = rahenraj.100.t
	desc = rahenraj.100.d
	picture = ACCUSATION_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.100.a
		
		rahen_calc_reform_ministry_of_agriculture = yes
		rahen_calc_reform_ministry_of_philosophy = yes
		rahen_calc_reform_ministry_of_internal_relations = yes
		rahen_calc_reform_ministry_of_foreign_relations = yes
	}
}

#########################
### Random Raj Events ###
#########################
country_event = { #Blackmailed by a courtier
	id = rahenraj.101
	title = rahenraj.101.t
	desc = rahenraj.101.d
	picture = ACCUSATION_eventPicture
	
	is_triggered_only = yes
	
	option = { #Give in
		ai_chance = { factor = 1 }
		name = rahenraj.101.a
		
		add_corruption = 0.5
	}
	option = { #Refuse
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				stability = 1
			}
			modifier = {
				factor = 10
				NOT = { stability = -2 }
			}
		}
		name = rahenraj.101.b
		
		reduce_stability_or_adm_power = yes
		add_corruption = -1
	}
}
country_event = { #New suspicious ministry estate
	id = rahenraj.102
	title = rahenraj.102.t
	desc = rahenraj.102.d
	picture = KING_SICK_IN_BED_eventPicture
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.102.a
		
		custom_tooltip = rahen_new_suspicious_ministry_estate_tt
		hidden_effect = {
			random_list = {
				1 = {
					random_owned_province = {
						limit = { NOT = { has_province_modifier = rahen_suspicious_ministry_estate } }
						add_permanent_province_modifier = {
							name = rahen_suspicious_ministry_estate
							duration = -1
						}
					}
				}
				4 = {
					random_subject_country = {
						limit = { any_owned_province = { NOT = { has_province_modifier = rahen_suspicious_ministry_estate } } }
						random_owned_province = {
							limit = { NOT = { has_province_modifier = rahen_suspicious_ministry_estate } }
							add_permanent_province_modifier = {
								name = rahen_suspicious_ministry_estate
								duration = -1
							}
						}
					}
				}
			}
		}
	}
}
country_event = { #Crumbling Infrastructure
	id = rahenraj.103
	title = rahenraj.103.t
	desc = rahenraj.103.d
	picture = KING_SICK_IN_BED_eventPicture
	
	is_triggered_only = yes
	trigger = {
		4411 = { has_province_modifier = rahen_corrupt_ministery_of_agriculture }
	}
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.103.a
		
		custom_tooltip = rahen_crumbling_infastructure_tt
		hidden_effect = {
			random_list = {
				1 = {
					random_owned_province = {
						if = {
							limit = { has_province_modifier = rahen_severely_neglected_infrastructure }
							random_list = {
								1 = { add_base_tax = -1 }
								1 = { add_base_production = -1 }
								1 = { add_base_manpower = -1 }
							}
						}
						else_if = {
							limit = { has_province_modifier = rahen_neglected_infrastructure }
							remove_province_modifier = rahen_neglected_infrastructure
							add_permanent_province_modifier = {
								name = rahen_severely_neglected_infrastructure
								duration = -1
							}
						}
						else = {
							add_permanent_province_modifier = {
								name = rahen_neglected_infrastructure
								duration = -1
							}
						}
					}
				}
				4 = {
					random_subject_country = {
						random_owned_province = {
							if = {
								limit = { has_province_modifier = rahen_severely_neglected_infrastructure }
								random_list = {
									1 = { add_base_tax = -1 }
									1 = { add_base_production = -1 }
									1 = { add_base_manpower = -1 }
								}
							}
							else_if = {
								limit = { has_province_modifier = rahen_neglected_infrastructure }
								remove_province_modifier = rahen_neglected_infrastructure
								add_permanent_province_modifier = {
									name = rahen_severely_neglected_infrastructure
									duration = -1
								}
							}
							else = {
								add_permanent_province_modifier = {
									name = rahen_neglected_infrastructure
									duration = -1
								}
							}
						}
					}
				}
			}
		}
	}
}
country_event = { #Raid on the archives
	id = rahenraj.104
	title = rahenraj.104.t
	desc = rahenraj.104.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		4411 = { has_province_modifier = rahen_corrupt_ministery_of_philosophy }
	}
	
	option = { #Deep raid
		ai_chance = { factor = 1 }
		name = rahenraj.104.a
		
		add_mil_power = -50
		4411 = { change_variable = { which = rahen_court_case_strength value = 2 } }
	}
	option = { #Proceed as planned
		ai_chance = { factor = 1 }
		name = rahenraj.104.b
		
		
		4411 = { change_variable = { which = rahen_court_case_strength value = 2 } }
	}
	option = { #This is not proper
		ai_chance = { factor = 1 }
		name = rahenraj.104.c
		
		add_legitimacy = 5
		4411 = { change_variable = { which = rahen_court_case_strength value = -2 } }
	}
}
country_event = { #Ministers demand more privileges
	id = rahenraj.105
	title = rahenraj.105.t
	desc = rahenraj.105.d
	picture = ACCUSATION_eventPicture
	
	is_triggered_only = yes
	
	option = { #Give them what they want
		ai_chance = { factor = 1 }
		name = rahenraj.105.a
		
		add_corruption = 1
	}
	option = { #This has to end
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				manpower_percentage = 0.1
			}
		}
		name = rahenraj.105.b
		
		4411 = {
			spawn_rebels = {
				type = pretender_rebels
				size = 1
			}
		}
		add_corruption = -0.5
	}
}
country_event = { #Evidence found
	id = rahenraj.106
	title = rahenraj.106.t
	desc = rahenraj.106.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		4411 = { has_province_modifier = rahen_corrupt_ministery_of_philosophy }
	}
	
	option = { #File it for later
		ai_chance = { factor = 1 }
		name = rahenraj.106.a
		
		4411 = { change_variable = { which = rahen_court_case_strength value = 5 } }
	}
	option = { #Use it now
		ai_chance = { factor = 1 }
		name = rahenraj.106.b
		
		add_corruption = 0.5
		add_stability_or_adm_power = yes
	}
}
country_event = { #Honest courtiers replace the corrupt
	id = rahenraj.107
	title = rahenraj.107.t
	desc = rahenraj.107.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { 4411 = { has_province_modifier = rahen_corrupt_ministery_of_philosophy } }
	}
	
	option = { #Finally some cooperation
		ai_chance = { factor = 1 }
		name = rahenraj.107.a
		
		add_corruption = -0.5
	}
}


province_event = { #Estate investigation management event
	id = rahenraj.120
	title = rahenraj.120.t
	desc = rahenraj.120.d
	picture = KING_SICK_IN_BED_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.120.a
		
		if = {
			limit = { owner = { has_reform = raja_reform } }
			owner = { country_event = { id = rahenraj.121 } }
		}
		else_if = {
			limit = { owner = { overlord = { has_reform = raja_reform } } }
			owner = { overlord = { country_event = { id = rahenraj.121 } } }
		}
	}
	option = {
		ai_chance = { factor = 2 }
		name = rahenraj.120.a
		
		if = {
			limit = { owner = { has_reform = raja_reform } }
			owner = { country_event = { id = rahenraj.122 } }
		}
		else_if = {
			limit = { owner = { overlord = { has_reform = raja_reform } } }
			owner = { overlord = { country_event = { id = rahenraj.122 } } }
		}
	}
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.120.a
		
		if = {
			limit = { owner = { has_reform = raja_reform } }
			owner = { country_event = { id = rahenraj.123 } }
		}
		else_if = {
			limit = { owner = { overlord = { has_reform = raja_reform } } }
			owner = { overlord = { country_event = { id = rahenraj.123 } } }
		}
	}
}
country_event = { #Investigation turned up blank
	id = rahenraj.121
	title = rahenraj.121.t
	desc = rahenraj.121.d
	picture = KING_SICK_IN_BED_eventPicture
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.121.a
		
		add_prestige = -1
		add_estate_loyalty = {
			estate = estate_raj_ministries
			loyalty = -2
		}
		FROM = { remove_province_modifier = rahen_suspicious_ministry_estate }
	}
}
country_event = { #Investigation meets resistance
	id = rahenraj.122
	title = rahenraj.122.t
	desc = rahenraj.122.d
	picture = KING_SICK_IN_BED_eventPicture
	
	is_triggered_only = yes
	
	option = { #We're not here to tumble
		ai_chance = { factor = 1 }
		name = rahenraj.122.a
		
		add_prestige = -1
		add_estate_loyalty = {
			estate = estate_raj_ministries
			loyalty = -2
		}
		FROM = { remove_province_modifier = rahen_suspicious_ministry_estate }
	}
	option = { #Force the matter
		ai_chance = { factor = 1 }
		name = rahenraj.122.a
		
		FROM = { noble_rebels = 1 }
		random_list = {
			1 = { add_corruption = -0.5 4411 = { change_variable = { which = rahen_court_case_strength value = 2 } } }
			1 = { add_corruption = -0.5 4411 = { change_variable = { which = rahen_court_case_strength value = 5 } } }
			1 = { add_corruption = -1 4411 = { change_variable = { which = rahen_court_case_strength value = 2 } } }
			1 = { add_corruption = -1 4411 = { change_variable = { which = rahen_court_case_strength value = 5 } } }
		}
		add_estate_influence_modifier = {
			estate = estate_raj_ministries
			desc = EST_VAL_PERSONAL_ESTATES_INVESTIGATED
			influence = -2
			duration = 3650
		}
		4411 = { change_variable = { which = rahen_court_case_strength value = 5 } }
		FROM = { remove_province_modifier = rahen_suspicious_ministry_estate }
	}
}
country_event = { #Estate investigation found evidence!
	id = rahenraj.123
	title = rahenraj.123.t
	desc = rahenraj.123.d
	picture = KING_SICK_IN_BED_eventPicture
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.123.a
		
		random_list = {
			1 = { add_corruption = -0.5 4411 = { change_variable = { which = rahen_court_case_strength value = 2 } } }
			1 = { add_corruption = -0.5 4411 = { change_variable = { which = rahen_court_case_strength value = 5 } } }
			1 = { add_corruption = -1 4411 = { change_variable = { which = rahen_court_case_strength value = 2 } } }
			1 = { add_corruption = -1 4411 = { change_variable = { which = rahen_court_case_strength value = 5 } } }
		}
		add_estate_influence_modifier = {
			estate = estate_raj_ministries
			desc = EST_VAL_PERSONAL_ESTATES_INVESTIGATED
			influence = -2
			duration = 3650
		}
		FROM = { remove_province_modifier = rahen_suspicious_ministry_estate }
	}
}

##################################
### Collapse of the Raj Events ###
##################################

country_event = { #Collapse of the Raj
	id = rahenraj.200
	title = rahenraj.200.t
	desc = rahenraj.200.d
	picture = COURT_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	trigger = { corruption = 60 }
	
	option = { #It was inevitable
		ai_chance = { factor = 1 }
		name = rahenraj.200.a
		
		add_stability = -4
		every_subject_country = {
			every_owned_province = {
				add_claim = ROOT
				hidden_effect = { rahen_clear_court_disaster_province_modifiers = yes }
			}
		}
		every_subject_country = {
			limit = {
				NOT = {
					AND = {
						capital_scope = { province_group = harimraj_core_lands }
						NOT = { liberty_desire = 50 }
					}
				}
			}
			grant_independence = yes
			if = {
				limit = {
					OR = {
						has_reform = senapti_reform
						has_reform = prabhi_reform
					}
				}
				add_government_reform = indep_prabhi_reform
			}
		}
		every_subject_country = {
			overlord = {
				create_subject = {
					subject_type = vassal
					subject = PREV
				}
			}
		}
		4411 = {
			remove_province_modifier = rahen_corrupt_ministery_of_agriculture
			remove_province_modifier = rahen_corrupt_ministery_of_philosophy
			remove_province_modifier = rahen_corrupt_ministery_of_internal_relations
			remove_province_modifier = rahen_corrupt_ministery_of_foreign_relations
		}
		add_government_reform = autocracy_reform
		
		hidden_effect = {
			every_owned_province = { rahen_clear_court_disaster_province_modifiers = yes }
			rahen_remove_harimraj_reforms_effect = yes
			clr_country_flag = reformed_rahen_court
			remove_country_modifier = raj_opened_senapti_ranks
			remove_country_modifier = raj_closed_senapti_ranks
		}
	}
}



################################
#####   Flavour 'n shit    #####
################################

country_event = { #The title of Sar
	id = rahenraj.401
	title = rahenraj.401.t
	desc = rahenraj.401.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.401.a
		
		FROM = {
			add_country_modifier = {
				name = rajiya_senapti
				duration = -1
			}
		}
		if = {
			limit = { NOT = { is_subject_of_type = great_daimyo_vassal } }
			
			FROM = {
				overlord = {
					create_subject = {
						subject_type = great_daimyo_vassal
						subject = FROM
					}
				}
				add_government_reform = senapti_reform
			}
			hidden_effect = { 4411 = { change_variable = { raj_current_num_of_senaptia = 1 } } }
		}
	}
	option = {
		ai_chance = { factor = 0 }
		name = rahenraj.401.b
		
		FROM = {
			add_liberty_desire = 50
		}
	}
}


#####################################
### General Raj Management Extras ###
#####################################

country_event = {
	id = rahenraj.1000
	title = rahenraj.1000.t
	desc = rahenraj.1000.d
	picture = COURT_eventPicture

	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_reform = raja_reform
			overlord = { has_reform = raja_reform }
		}
		OR = {
			AND = {
				is_subject_of_type = daimyo_vassal
				NOT = { has_reform = prabhi_reform }
			}
			AND = {
				is_subject_of_type = great_daimyo_vassal
				NOT = { has_reform = senapti_reform }
			}
			NOT = {
				has_estate_privilege = estate_raj_ministries_raj_cohesion
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				is_subject_of_type = daimyo_vassal
				NOT = { has_reform = prabhi_reform }
			}
			add_government_reform = prabhi_reform
		}
		else_if = {
			limit = {
				is_subject_of_type = great_daimyo_vassal
				NOT = { has_reform = senapti_reform }
			}
			add_government_reform = senapti_reform
		}
		
		if = {
			limit = { NOT = { has_estate_privilege = estate_raj_ministries_raj_cohesion } }
			set_estate_privilege = estate_raj_ministries_raj_cohesion
		}
	}
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.1000.a
	}
}
#Open or Closed Senapti Ranks?
country_event = {
	id = rahenraj.1001
	title = rahenraj.1001.t
	desc = rahenraj.1001.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	option = { #Only our own can be Senapti
		ai_chance = { factor = 20 }
		name = rahenraj.1001.b
		trigger = { OR = { culture_group = harimari culture_is_human = yes } }
		add_country_modifier = {
			name = raj_closed_senapti_ranks
			duration = -1
		}
		custom_tooltip = rahen_close_senapti_ranks_tt
		hidden_effect = {
			if = {
				limit = { culture_group = harimari }
				every_subject_country = {
					limit = { ruler_is_harimari = yes }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_closed_senapti_a
					}
				}
				every_subject_country = {
					limit = { NOT = { ruler_is_harimari = yes } }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_closed_senapti_b
					}
				}
			}
			if = {
				limit = { culture_is_human = yes }
				every_subject_country = {
					limit = { ruler_is_human = yes }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_closed_senapti_a
					}
				}
				every_subject_country = {
					limit = { NOT = { ruler_is_human = yes } }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_closed_senapti_b
					}
				}
			}
		}
	}
	option = { #Open Senapti ranks to all
		ai_chance = { factor = 1 }
		name = rahenraj.1001.a
		add_country_modifier = {
			name = raj_opened_senapti_ranks
			duration = -1
		}
		reduce_stability_or_adm_power = yes
		custom_tooltip = rahen_open_up_senapti_ranks_tt
		hidden_effect = {
			if = {
				limit = { culture_group = harimari }
				every_subject_country = {
					limit = { ruler_is_harimari = yes }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_opened_up_senapti_b
					}
				}
				every_subject_country = {
					limit = { NOT = { ruler_is_harimari = yes } }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_opened_up_senapti_a
					}
				}
			}
			if = {
				limit = { culture_is_human = yes }
				every_subject_country = {
					limit = { ruler_is_human = yes }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_opened_up_senapti_b
					}
				}
				every_subject_country = {
					limit = { NOT = { ruler_is_human = yes } }
					add_opinion = {
						who = ROOT
						modifier = rahen_raja_opened_up_senapti_a
					}
				}
			}
		}
	}
}
country_event = { #Requesting Raj Mandates
	id = rahenraj.1002
	title = rahenraj.1002.t
	desc = rahenraj.1002.d
	picture = RAJ_SUBMENU_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			overlord = { save_event_target_as = raja_target }
			
			#For every mandate
			export_to_variable = { which = rajMandateReasonsRelations value = opinion who = event_target:raja_target }
			divide_variable = { which = rajMandateReasonsRelations value = 4000 }
			multiply_variable = { which = rajMandateReasonsRelations value = 1000 }
			export_to_variable = { which = rajMandateReasonsDipRep value = modifier:diplomatic_reputation }
			divide_variable = { which = rajMandateReasonsDipRep value = 1000 }
			multiply_variable = { which = rajMandateReasonsDipRep value = 5000 }
			
			#For protection mandate
			set_variable = { which = rajMandateReasonsProtectionPositives value = 0 }
			set_variable = { which = rajMandateReasonsProtectionNegatives value = -15 }
			if = { limit = { 4411 = { check_variable = { which = raj_cohesion value = 80 } } }
				change_variable = { which = rajMandateReasonsProtectionNegatives value = -1000 }
			}
			
			#For expansion mandate
			set_variable = { which = rajMandateReasonsExpansionPositives value = 0 }
			set_variable = { which = rajMandateReasonsExpansionNegatives value = -5 }
			export_to_variable = { which = rajMandateReasonsNumCities value = num_of_cities }
			multiply_variable = { which = rajMandateReasonsNumCities value = -3 }
			change_variable = { which = rajMandateReasonsExpansionNegatives which = rajMandateReasonsNumCities }
			
			#For guaranteed autonomy
			set_variable = { which = rajMandateReasonsAutonomyPositives value = 0 }
			set_variable = { which = rajMandateReasonsAutonomyNegatives value = -25 }
			if = { limit = { NOT = { liberty_desire = 30 } }
				change_variable = { which = rajMandateReasonsAutonomyNegatives value = -1000 }
			}
			else = {
				export_to_variable = { which = rajMandateReasonsLD value = trigger_value:liberty_desire }
				divide_variable = { which = rajMandateReasonsLD value = 5 }
				divide_variable = { which = rajMandateReasonsLD value = 1000 }
				multiply_variable = { which = rajMandateReasonsLD value = 1000 }
				change_variable = { which = rajMandateReasonsAutonomyPositives which = rajMandateReasonsLD }
			}
			
			#For Prabhi privileges
			if = { limit = { has_reform = prabhi_reform }
				set_variable = { which = rajMandateReasonsPrabhiPositives value = 0 }
				set_variable = { which = rajMandateReasonsPrabhiNegatives value = -10 }
			}
			#For Senapti guarantee
			else = {
				set_variable = { which = rajMandateReasonsSenaptiPositives value = 0 }
				set_variable = { which = rajMandateReasonsSenaptiNegatives value = -25 }
				export_to_variable = { which = rajMandateReasonsDisc value = modifier:discipline }
				multiply_variable = { which = rajMandateReasonsDisc value = 100 }
				if = { limit = { check_variable = { which = rajMandateReasonsDisc value = 0 } }
					change_variable = { which = rajMandateReasonsSenaptiPositives which = rajMandateReasonsDisc }
				}
				else = {
					change_variable = { which = rajMandateReasonsSenaptiNegatives which = rajMandateReasonsDisc }
				}
			}
			
			if = { limit = { check_variable = { which = rajMandateReasonsRelations value = 0.01 } }
				change_variable = { which = rajMandateReasonsProtectionPositives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsExpansionPositives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsAutonomyPositives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsPrabhiPositives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsSenaptiPositives which = rajMandateReasonsRelations }
			}
			else = {
				change_variable = { which = rajMandateReasonsProtectionNegatives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsExpansionNegatives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsAutonomyNegatives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsPrabhiNegatives which = rajMandateReasonsRelations }
				change_variable = { which = rajMandateReasonsSenaptiNegatives which = rajMandateReasonsRelations }
			}
			if = { limit = { check_variable = { which = rajMandateReasonsDipRep value = 0.01 } }
				change_variable = { which = rajMandateReasonsProtectionPositives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsExpansionPositives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsAutonomyPositives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsPrabhiPositives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsSenaptiPositives which = rajMandateReasonsDipRep }
			}
			else = {
				change_variable = { which = rajMandateReasonsProtectionNegatives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsExpansionNegatives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsAutonomyNegatives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsPrabhiNegatives which = rajMandateReasonsDipRep }
				change_variable = { which = rajMandateReasonsSenaptiNegatives which = rajMandateReasonsDipRep }
			}
			set_variable = { which = rajMandateReasonsProtectionDiff which = rajMandateReasonsProtectionPositives }
			change_variable = { which = rajMandateReasonsProtectionDiff which = rajMandateReasonsProtectionNegatives }
			set_variable = { which = rajMandateReasonsExpansionDiff which = rajMandateReasonsExpansionPositives }
			change_variable = { which = rajMandateReasonsExpansionDiff which = rajMandateReasonsExpansionNegatives }
			set_variable = { which = rajMandateReasonsAutonomyDiff which = rajMandateReasonsAutonomyPositives }
			change_variable = { which = rajMandateReasonsAutonomyDiff which = rajMandateReasonsAutonomyNegatives }
			set_variable = { which = rajMandateReasonsPrabhiDiff which = rajMandateReasonsPrabhiPositives }
			change_variable = { which = rajMandateReasonsPrabhiDiff which = rajMandateReasonsPrabhiNegatives }
			set_variable = { which = rajMandateReasonsSenaptiDiff which = rajMandateReasonsSenaptiPositives }
			change_variable = { which = rajMandateReasonsSenaptiDiff which = rajMandateReasonsSenaptiNegatives }
		}
	}
	
	#Ask the Raja for protection
	option = {
		name = rahenraj.1002.a
		trigger = {
			OR = {
				check_variable = { which = rajMandateReasonsProtectionDiff value = 1 }
				overlord = { ai = no }
			}
		}
		ai_chance = {
			factor = 5
			modifier = { factor = 0 total_development = 60 }
			modifier = { factor = 4 NOT = { num_of_cities = 2 } }
			modifier = {
				factor = 2
				any_neighbor_country = {
					overlord = { overlord_of = ROOT } 
					NOT = { alliance_with = ROOT }
					army_strength = { who = ROOT value = 2 }
				}
			}
		}
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_raja_protection
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_raja_protection
		}
		hidden_effect = { set_country_flag = requested_raj_mandate_raja_protection }
		hidden_effect = { overlord = { country_event = { id = rahenraj.1003 days = 1 } } }
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_protection_tt
	}
	#Ask the Raja for protection (unavailable)
	option = {
		name = rahenraj.1002.ax
		trigger = {
			NOT = { check_variable = { which = rajMandateReasonsProtectionDiff value = 1 } }
			overlord = { ai = yes }
		}
		ai_chance = {
			factor = 5
			modifier = { factor = 0 total_development = 60 }
			modifier = { factor = 4 NOT = { num_of_cities = 2 } }
			modifier = {
				factor = 2
				any_neighbor_country = {
					overlord = { overlord_of = ROOT } 
					NOT = { alliance_with = ROOT }
					army_strength = { who = ROOT value = 2 }
				}
			}
		}
		
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_raja_protection
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_raja_protection
		}
		
		custom_tooltip = raj_mandate_reasons_refuse_tt
		custom_tooltip = raj_mandate_reasons_protection_tt
		if = { limit = { 4411 = { check_variable = { which = raj_cohesion value = 80 } } }
			custom_tooltip = raj_mandate_reasons_80_cohesion_tt
		}
		
		hidden_effect = { country_event = { id = rahenraj.3007 } }
	}
	
	#Ask the Raja for expansion rights
	option = {
		name = rahenraj.1002.b
		trigger = {
			OR = {
				check_variable = { which = rajMandateReasonsExpansionDiff value = 1 }
				overlord = { ai = no }
			}
			NOT = { has_country_flag = raj_vizier }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				any_neighbor_country = {
					overlord = { overlord_of = ROOT } 
					NOT = { alliance_with = ROOT }
					ROOT = { army_strength = { who = PREV value = 2 } }
				}
			}
			modifier = {
				factor = 0
				NOT = {
					4411 = { check_variable = { which = raj_cohesion value = 80 } }
					total_development = 100
				}
			}
		}
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_right_to_expansion
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_right_to_expansion
		}
		hidden_effect = { set_country_flag = requested_raj_mandate_right_to_expansion }
		hidden_effect = { overlord = { country_event = { id = rahenraj.1003 days = 1 } } }
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_expansion_tt
		custom_tooltip = raj_mandate_reasons_num_cities_tt
	}
	#Ask the Raja for expansion rights (unavailable)
	option = {
		name = rahenraj.1002.bx
		trigger = {
			NOT = { check_variable = { which = rajMandateReasonsExpansionDiff value = 1 } }
			overlord = { ai = yes }
			NOT = { has_country_flag = raj_vizier }
		}
		
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_right_to_expansion
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_right_to_expansion
		}
		
		custom_tooltip = raj_mandate_reasons_refuse_tt
		custom_tooltip = raj_mandate_reasons_expansion_tt
		custom_tooltip = raj_mandate_reasons_num_cities_tt
		
		hidden_effect = { country_event = { id = rahenraj.3007 } }
	}
	
	#Ask the Raja to guarantee our autonomy
	option = {
		name = rahenraj.1002.c
		trigger = {
			OR = {
				check_variable = { which = rajMandateReasonsAutonomyDiff value = 1 }
				overlord = { ai = no }
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				overlord = { has_disaster = rahen_corrupt_court }
			}
			modifier = {
				factor = 0
				NOT = { 4411 = { check_variable = { which = raj_cohesion value = 80 } } }
			}
		}
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_guaranteed_autonomy
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_guaranteed_autonomy
		}
		hidden_effect = { set_country_flag = requested_raj_mandate_guaranteed_autonomy }
		hidden_effect = { overlord = { country_event = { id = rahenraj.1003 days = 1 } } }
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_autonomy_tt
	}
	#Ask the Raja to guarantee our autonomy (unavailable)
	option = {
		name = rahenraj.1002.cx
		trigger = {
			NOT = { check_variable = { which = rajMandateReasonsAutonomyDiff value = 1 } }
			overlord = { ai = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				overlord = { has_disaster = rahen_corrupt_court }
			}
			modifier = {
				factor = 0
				NOT = { 4411 = { check_variable = { which = raj_cohesion value = 80 } } }
			}
		}
		
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_guaranteed_autonomy
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_guaranteed_autonomy
		}
		
		hidden_effect = { country_event = { id = rahenraj.3007 } }
		
		custom_tooltip = raj_mandate_reasons_refuse_tt
		custom_tooltip = raj_mandate_reasons_autonomy_tt
		if = { limit = { NOT = { liberty_desire = 30 } }
			custom_tooltip = raj_mandate_reasons_low_LD_tt
		}
	}
	
	#Ask the Raja for trading privileges
	option = {
		name = rahenraj.1002.dd
		trigger = { has_reform = prabhi_reform }
		ai_chance = { factor = 10 }
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		add_years_of_income = -0.5
		add_country_modifier = {
			name = raj_mandate_mercantile_preference
			duration = 5475
		}
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_base_always_tt
	}
	
	#Ask the Raja for the right to expand our armoury
	option = {
		name = rahenraj.1002.e
		trigger = { has_reform = senapti_reform }
		ai_chance = { factor = 50 }
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		add_years_of_income = -0.5
		add_country_modifier = {
			name = raj_mandate_sanctioned_armoury
			duration = 5475
		}
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_base_always_tt
	}
	
	#Ask the Raja to provide education
	option = {
		name = rahenraj.1002.f
		trigger = { always = yes }
		ai_chance = {
			factor = 10
			modifier = { factor = 0 NOT = { adm_tech = 5 } }
		}
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		add_years_of_income = -0.5
		add_country_modifier = {
			name = raj_mandate_ministry_lectures
			duration = 5475
		}
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_base_always_tt
	}
	
	#Ask the Raja to secure our title as a Senapti
	option = {
		name = rahenraj.1002.g
		trigger = {
			has_reform = senapti_reform
			OR = {
				check_variable = { which = rajMandateReasonsSenaptiDiff value = 1 }
				overlord = { ai = no }
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				NOT = {
					overlord = {
						any_subject_country = {
							is_subject_of_type = great_daimyo_vassal
							NOT = { has_country_modifier = prabhi_recently_promoted }
							NOT = { has_country_modifier = raj_mandate_senapti_primacy }
							NOT = { has_country_modifier = rajiya_senapti }
							NOT = { tag = ROOT }
							NOT = { total_development = ROOT }
						}
					}
				}
			}
		}
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_senapti_primacy
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_senapti_primacy
		}
		hidden_effect = { set_country_flag = requested_raj_mandate_senapti_primacy }
		hidden_effect = { overlord = { country_event = { id = rahenraj.1003 days = 1 } } }
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_senapti_tt
	}
	#Ask the Raja to secure our title as a Senapti (unavailable)
	option = {
		name = rahenraj.1002.gx
		trigger = {
			has_reform = senapti_reform
			NOT = { check_variable = { which = rajMandateReasonsSenaptiDiff value = 1 } }
			overlord = { ai = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				NOT = {
					overlord = {
						any_subject_country = {
							is_subject_of_type = great_daimyo_vassal
							NOT = { has_country_modifier = prabhi_recently_promoted }
							NOT = { has_country_modifier = raj_mandate_senapti_primacy }
							NOT = { tag = ROOT }
							NOT = { total_development = ROOT }
						}
					}
				}
			}
		}
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_senapti_primacy
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_senapti_primacy
		}
		
		hidden_effect = { country_event = { id = rahenraj.3007 } }
		
		custom_tooltip = raj_mandate_reasons_refuse_tt
		custom_tooltip = raj_mandate_reasons_senapti_tt
	}
	
	#Ask the Raja to extend our privileges as a Prabhi
	option = {
		name = rahenraj.1002.h
		trigger = {
			has_reform = prabhi_reform
			OR = {
				check_variable = { which = rajMandateReasonsPrabhiDiff value = 1 }
				overlord = { ai = no }
			}
		}
		ai_chance = { factor = 20 }
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_extended_prabhi_privileges
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_extended_prabhi_privileges
		}
		hidden_effect = { set_country_flag = requested_raj_mandate_extended_prabhi_privileges }
		hidden_effect = { overlord = { country_event = { id = rahenraj.1003 days = 1 } } }
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
		
		custom_tooltip = raj_mandate_reasons_accept_tt
		custom_tooltip = raj_mandate_reasons_prabhi_tt
	}
	#Ask the Raja to extend our privileges as a Prabhi (unavailable)
	option = {
		name = rahenraj.1002.hx
		trigger = {
			has_reform = prabhi_reform
			NOT = { check_variable = { which = rajMandateReasonsSenaptiDiff value = 1 } }
			overlord = { ai = yes }
		}
		ai_chance = { factor = 20 }
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_extended_prabhi_privileges
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_extended_prabhi_privileges
		}
		
		hidden_effect = { country_event = { id = rahenraj.3007 } }
		
		custom_tooltip = raj_mandate_reasons_refuse_tt
		custom_tooltip = raj_mandate_reasons_prabhi_tt
	}
	
	#Swear to be a good boi
	option = {
		name = rahenraj.1002.i
		trigger = { always = no }
		ai_chance = { factor = 10 }
		
		raj_cohesion_change = { amount = 0.2 mandate = yes }
		custom_tooltip = request_raj_mandate_tt
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_territorial_limits
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_territorial_limits
			return_all_uncored_provinces = { release_nations = yes }
		}
		hidden_effect = { set_country_flag = requested_raj_mandate_territorial_limits }
		hidden_effect = { overlord = { country_event = { id = rahenraj.1003 days = 1 } } }
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
	}
	
	#Close
	option = {
		ai_chance = { factor = 0 }
		name = rahenraj.1002.z
		trigger = { always = yes }
		
		add_dip_power = 50
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			if = { limit = { ai = no }
				country_event = { id = rahenraj.3000 }
			}
		}
	}
}
country_event = { #The Raja agrees or not
	id = rahenraj.1003
	title = rahenraj.1003.t
	desc = rahenraj.1003.d
	picture = COURT_eventPicture

	major = yes
	major_trigger = { tag = FROM }
	
	is_triggered_only = yes
	
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_raja_protection } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_raja_protection
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_raja_protection
			}
			set_country_flag = raj_mandate_raja_protection
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_right_to_expansion } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_right_to_expansion
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_right_to_expansion
			}
			set_country_flag = raj_mandate_right_to_expansion
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_guaranteed_autonomy } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_guaranteed_autonomy
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_guaranteed_autonomy
			}
			set_country_flag = raj_mandate_guaranteed_autonomy
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_mercantile_preference } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_mercantile_preference
					duration = 5475
				}
			}
			set_country_flag = raj_mandate_mercantile_preference
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_sanctioned_armoury } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_sanctioned_armoury
					duration = 5475
				}
			}
			set_country_flag = raj_mandate_sanctioned_armoury
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_ministry_lectures } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_ministry_lectures
					duration = 5475
				}
			}
			set_country_flag = raj_mandate_ministry_lectures
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_senapti_primacy } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_senapti_primacy
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_senapti_primacy
			}
			set_country_flag = raj_mandate_senapti_primacy
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_extended_prabhi_privileges } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_extended_prabhi_privileges
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_extended_prabhi_privileges
			}
			set_country_flag = raj_mandate_extended_prabhi_privileges
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	option = {
		name = rahenraj.1003.a
		trigger = { FROM = { has_country_flag = requested_raj_mandate_territorial_limits } }
		ai_chance = { factor = 100 }
		
		if = { limit = { ai = no }
			add_adm_power = -5
		}
		FROM = {
			tooltip = { 
				add_country_modifier = {
					name = raj_mandate_territorial_limits
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_territorial_limits
				return_all_uncored_provinces = { release_nations = yes }
			}
			set_country_flag = raj_mandate_territorial_limits
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
	
	#refuse
	option = {
		name = rahenraj.1003.b
		ai_chance = { factor = 0 }
		
		FROM = {
			add_country_modifier = {
				name = raj_mandate_denied
				duration = 1825
			}
			hidden_effect = { country_event = { id = rahenraj.1004 } }
		}
	}
}

country_event = { #The Raja's response!
	id = rahenraj.1004
	title = rahenraj.1004.t
	desc = rahenraj.1004.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			clr_country_flag = raj_requested_mandate
			
			clr_country_flag = requested_raj_mandate_raja_protection
			clr_country_flag = requested_raj_mandate_right_to_expansion
			clr_country_flag = requested_raj_mandate_guaranteed_autonomy
			clr_country_flag = requested_raj_mandate_mercantile_preference
			clr_country_flag = requested_raj_mandate_sanctioned_armoury
			clr_country_flag = requested_raj_mandate_ministry_lectures
			clr_country_flag = requested_raj_mandate_senapti_primacy
			clr_country_flag = requested_raj_mandate_extended_prabhi_privileges
			clr_country_flag = requested_raj_mandate_territorial_limits
		}
	}
	
	option = { #The Raja has granted our request!
		ai_chance = { factor = 1 }
		name = rahenraj.1004.a
		trigger = { NOT = { has_country_modifier = raj_mandate_denied } }
		
		if = { limit = { has_country_flag = raj_mandate_raja_protection }
			add_country_modifier = {
				name = raj_mandate_raja_protection
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_raja_protection
			clr_country_flag = raj_mandate_raja_protection
		}
		else_if = { limit = { has_country_flag = raj_mandate_right_to_expansion }
			add_country_modifier = {
				name = raj_mandate_right_to_expansion
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_right_to_expansion
			clr_country_flag = raj_mandate_right_to_expansion
		}
		else_if = { limit = { has_country_flag = raj_mandate_guaranteed_autonomy }
			add_country_modifier = {
				name = raj_mandate_guaranteed_autonomy
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_guaranteed_autonomy
			clr_country_flag = raj_mandate_guaranteed_autonomy
		}
		else_if = { limit = { has_country_flag = raj_mandate_mercantile_preference }
			add_country_modifier = {
				name = raj_mandate_mercantile_preference
				duration = 5475
			}
			clr_country_flag = raj_mandate_mercantile_preference
		}
		else_if = { limit = { has_country_flag = raj_mandate_sanctioned_armoury }
			add_country_modifier = {
				name = raj_mandate_sanctioned_armoury
				duration = 5475
			}
			clr_country_flag = raj_mandate_sanctioned_armoury
		}
		else_if = { limit = { has_country_flag = raj_mandate_ministry_lectures }
			add_country_modifier = {
				name = raj_mandate_ministry_lectures
				duration = 5475
			}
			clr_country_flag = raj_mandate_ministry_lectures
		}
		else_if = { limit = { has_country_flag = raj_mandate_senapti_primacy }
			add_country_modifier = {
				name = raj_mandate_senapti_primacy
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_senapti_primacy
			clr_country_flag = raj_mandate_senapti_primacy
		}
		else_if = { limit = { has_country_flag = raj_mandate_extended_prabhi_privileges }
			add_country_modifier = {
				name = raj_mandate_extended_prabhi_privileges
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_extended_prabhi_privileges
			clr_country_flag = raj_mandate_extended_prabhi_privileges
		}
		else = {
			add_country_modifier = {
				name = raj_mandate_territorial_limits
				duration = 5475
			}
			custom_tooltip = desc_raj_mandate_territorial_limits
			return_all_uncored_provinces = { release_nations = yes }
			clr_country_flag = raj_mandate_territorial_limits
		}
	}
	option = { #The Raja has denied our request!
		ai_chance = { factor = 1 }
		name = rahenraj.1004.b
		trigger = { has_country_modifier = raj_mandate_denied }
		
		tooltip = {
			add_country_modifier = {
				name = raj_mandate_denied
				duration = 1825
			}
		}
	}
}
country_event = { #Hidden 
	id = rahenraj.1005
	title = rahenraj.1005.t
	desc = rahenraj.1005.d
	picture = COURT_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.1005.a
		
		overlord = { country_event = { id = rahenraj.1006 } }
	}
}
country_event = { #The Raja to hand out a privilege
	id = rahenraj.1006
	title = rahenraj.1006.t
	desc = rahenraj.1006.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = { #Give them our personal protection
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				FROM = {
					NOT = { num_of_cities = 2 }
				}
			}
		}
		name = rahenraj.1006.a
		trigger = {
			NOT = {
				4411 = {
					check_variable = {
						which = raj_cohesion
						value = 80
					}
				}
			}
		}
		
		FROM = {
			tooltip = {
			remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_raja_protection
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_raja_protection
			}
			set_country_flag = raj_mandate_raja_protection
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Grant them expansion rights
		ai_chance = {
			factor = 1
		}
		name = rahenraj.1006.b
		trigger = {
			4411 = {
				check_variable = {
					which = raj_cohesion
					value = 80
				}
			}
		}
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_right_to_expansion
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_right_to_expansion
			}
			set_country_flag = raj_mandate_right_to_expansion
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Guarantee their autonomy
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				FROM = { liberty_desire = 50 }
			}
		}
		name = rahenraj.1006.c
		trigger = { always = yes }
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_guaranteed_autonomy
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_guaranteed_autonomy
			}
			set_country_flag = raj_mandate_guaranteed_autonomy
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Give them trading privileges
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				FROM = { trade_income_percentage = 0.3 }
			}
			modifier = {
				factor = 2
				FROM = { any_owned_province = { province_has_center_of_trade_of_level = 1 } }
			}
		}
		name = rahenraj.1006.dd
		trigger = { FROM = { has_reform = prabhi_reform } }
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_mercantile_preference
					duration = 5475
				}
			}
			set_country_flag = raj_mandate_mercantile_preference
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Give them the right to expand their armoury
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				is_at_war = yes
			}
		}
		name = rahenraj.1006.e
		trigger = { FROM = { has_reform = senapti_reform } }
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_sanctioned_armoury
					duration = 5475
				}
			}
			set_country_flag = raj_mandate_sanctioned_armoury
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Provide education
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { FROM = { adm_tech = 5 } }
			}
		}
		name = rahenraj.1006.f
		trigger = { always = yes }
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_ministry_lectures
					duration = 5475
				}
			}
			set_country_flag = raj_mandate_ministry_lectures
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Secure their title as a Senapti
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				FROM = { liberty_desire = 50 }
			}
			modifier = {
				factor = 2
				FROM = {
					has_idea_group = offensive_ideas
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_idea_group = defensive_ideas
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_idea_group = quantity_ideas
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_idea_group = quality_ideas
				}
			}
		}
		name = rahenraj.1006.g
		trigger = { FROM = { has_reform = senapti_reform } }
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_senapti_primacy
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_senapti_primacy
			}
			set_country_flag = raj_mandate_senapti_primacy
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Extend their privileges as a Prabhi
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						has_idea_group = offensive_ideas
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						has_idea_group = defensive_ideas
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						has_idea_group = quantity_ideas
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						has_idea_group = quality_ideas
					}
				}
			}
		}
		name = rahenraj.1006.h
		trigger = { FROM = { has_reform = prabhi_reform } }
		
		FROM = {
			tooltip = {
				remove_raj_mandate = yes
				add_country_modifier = {
					name = raj_mandate_extended_prabhi_privileges
					duration = 5475
				}
				custom_tooltip = desc_raj_mandate_extended_prabhi_privileges
			}
			set_country_flag = raj_mandate_extended_prabhi_privileges
			hidden_effect = { country_event = { id = rahenraj.1007 } }
		}
	}
	option = { #Limit their Territories
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = {
					FROM = {
						total_development = 100
						overextension_percentage = 0.01
					}
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					who = FROM
					value = 180
				}
			}
		}
		name = rahenraj.1006.i
		trigger = { FROM = { NOT = { has_country_modifier = raj_mandate_sactioned_conquest } } }
		
		FROM = {
			# tooltip = {
				# remove_raj_mandate = yes
				# add_country_modifier = {
					# name = raj_mandate_territorial_limits
					# duration = 3650
				# }
				# custom_tooltip = desc_raj_mandate_territorial_limits
				# return_all_uncored_provinces = { release_nations = yes }
				
				# add_opinion = {
					# who = ROOT
					# modifier = rahen_raja_pronounced_undesired_mandate
				# }
			# }
			# set_country_flag = raj_mandate_territorial_limits
			# hidden_effect = { country_event = { id = rahenraj.1007 } }
			
			custom_tooltip = raj_mandate_territorial_limits_action_tt
			hidden_effect = { country_event = { id = rahenraj.1008 } }
		}
	}
	option = { #Nevermind
		ai_chance = {
			factor = 0
		}
		name = rahenraj.1002.x
		trigger = { always = yes }
		
		add_adm_power = 10
	}
}
country_event = { #The Raja pronounced a mandate
	id = rahenraj.1007
	title = rahenraj.1007.t
	desc = rahenraj.1007.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = { #The Raja has granted us their personal protection!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.a
		trigger = { has_country_flag = raj_mandate_raja_protection }

		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_raja_protection
			duration = 5475
		}
		custom_tooltip = desc_raj_mandate_raja_protection
		clr_country_flag = raj_mandate_raja_protection
	}
	option = { #The Raja has granted us expansion rights!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.b
		trigger = { has_country_flag = raj_mandate_right_to_expansion }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_right_to_expansion
			duration = 5475
		}
		custom_tooltip = desc_raj_mandate_right_to_expansion
		clr_country_flag = raj_mandate_right_to_expansion
	}
	option = { #The Raja has guaranteed our autonomy!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.c
		trigger = { has_country_flag = raj_mandate_guaranteed_autonomy }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_guaranteed_autonomy
			duration = 5475
		}
		custom_tooltip = desc_raj_mandate_guaranteed_autonomy
		clr_country_flag = raj_mandate_guaranteed_autonomy
	}
	option = { #The Raja has expanded our merchantile privileges!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.d
		trigger = { has_country_flag = raj_mandate_mercantile_preference }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_mercantile_preference
			duration = 5475
		}
		clr_country_flag = raj_mandate_mercantile_preference
	}
	option = { #The Raja has sanctioned the expansion of our armoury!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.e
		trigger = { has_country_flag = raj_mandate_sanctioned_armoury }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_sanctioned_armoury
			duration = 5475
		}
		clr_country_flag = raj_mandate_sanctioned_armoury
	}
	option = { #The Raja has provided education to our people!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.f
		trigger = { has_country_flag = raj_mandate_ministry_lectures }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_ministry_lectures
			duration = 5475
		}
		clr_country_flag = raj_mandate_ministry_lectures
	}
	option = { #The Raja has secured our title as Senapti!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.g
		trigger = { has_country_flag = raj_mandate_senapti_primacy }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_senapti_primacy
			duration = 5475
		}
		custom_tooltip = desc_raj_mandate_senapti_primacy
		clr_country_flag = raj_mandate_senapti_primacy
	}
	option = { #The Raja has extended our rights as a Prabhi!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.h
		trigger = { has_country_flag = raj_mandate_extended_prabhi_privileges }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_extended_prabhi_privileges
			duration = 5475
		}
		custom_tooltip = desc_raj_mandate_extended_prabhi_privileges
		clr_country_flag = raj_mandate_extended_prabhi_privileges
	}
	option = { #The Raja has limited our territory!
		ai_chance = { factor = 1 }
		name = rahenraj.1007.i
		trigger = { has_country_flag = raj_mandate_territorial_limits }
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_territorial_limits
			duration = 3650
		}
		custom_tooltip = desc_raj_mandate_territorial_limits
		return_all_uncored_provinces = { release_nations = yes }
		clr_country_flag = raj_mandate_territorial_limits
		
		add_opinion = {
			who = FROM
			modifier = rahen_raja_pronounced_undesired_mandate
		}
	}
}

country_event = { #The Raja demands we return conquered territory
	id = rahenraj.1008
	title = rahenraj.1008.t
	desc = rahenraj.1008.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = { #Return the land
		ai_chance = {
			factor = 2
		}
		name = rahenraj.1008.a
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_territorial_limits
			duration = 3650
		}
		custom_tooltip = desc_raj_mandate_territorial_limits
		return_all_uncored_provinces = { release_nations = yes }
		
		add_opinion = {
			who = FROM
			modifier = rahen_raja_pronounced_undesired_mandate
		}
	}
	option = { #Pay to keep the land
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				num_of_loans = 1
			}
		}
		name = rahenraj.1008.b
		
		transfer_uncored_province_value_to_overlord = yes
		add_adm_power = -10
		add_dip_power = -10
		add_mil_power = -10
		
		remove_raj_mandate = yes
		add_country_modifier = {
			name = raj_mandate_territorial_limits
			duration = 3650
		}
		custom_tooltip = desc_raj_mandate_territorial_limits
		
		add_opinion = {
			who = FROM
			modifier = rahen_raja_pronounced_undesired_mandate
		}
		hidden_effect = {
			FROM = {
				add_adm_power = 10
				add_dip_power = 10
				add_mil_power = 10
			}
		}
	}
	option = { #I think we need a new Raja.
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_opinion = {
					who = FROM
					value = 100
				}
			}
			modifier = {
				factor = 5
				army_size = FROM
			}
		}
		name = rahenraj.1008.c
		
		if = {
			limit = { 4411 = { NOT = { range = ROOT } NOT = { is_core = ROOT } } }
			4411 = { add_core = ROOT }
		}
		declare_war_with_cb = {
			who = FROM
			casus_belli = cb_prabhi_claim_raj
		}
		add_stability = -3
	}
}

country_event = { #A Raj falling apart
	id = rahenraj.1100
	title = rahenraj.1100.t
	desc = rahenraj.1100.d
	picture = COURT_eventPicture

	trigger = {
		OR = {
			has_reform = prabhi_reform
			has_reform = senapti_reform
		}
		NOT = {
			4411 = {
				check_variable = {
					which = raj_cohesion
					value = 20
				}
			}
		}
		OR = {
			any_neighbor_country = {
				NOT = { overlord = { has_reform = raja_reform } }
			}
			liberty_desire = 50
		}
	}
	mean_time_to_happen = {
		months = 12
		
		modifier = {
			factor = 2
			NOT = { liberty_desire = 30 }
		}
		modifier = {
			factor = 0.5
			NOT = { liberty_desire = 80 }
		}
		modifier = {
			factor = 0.8
			NOT = {
				4411 = {
					check_variable = {
						which = raj_cohesion
						value = 10
					}
				}
			}
		}
		modifier = {
			factor = 0.5
			NOT = {
				4411 = {
					check_variable = {
						which = raj_cohesion
						value = 5
					}
				}
			}
		}
	}
	
	option = { #! Notify the Raja
		ai_chance = { factor = 1 }
		name = rahenraj.1100.a
		
		hidden_effect = {
			overlord = {
				country_event = { id = rahenraj.1104 }
			}
		}
		raj_cohesion_change = { amount = 5 non_monthly = yes }
		grant_independence = yes
		if = {
			limit = {
				OR = {
					has_reform = senapti_reform
					has_reform = prabhi_reform
				}
			}
			add_government_reform = indep_prabhi_reform
		}
	}
	#! Alt option to choose to stay a part of the Raj
}
country_event = { #Nigh collapse of the Raj
	id = rahenraj.1101
	title = rahenraj.1101.t
	desc = rahenraj.1101.d
	picture = COURT_eventPicture
	
	trigger = {
		has_reform = raja_reform
		NOT = { num_of_subjects = 6 }
		NOT = { has_country_modifier = raj_nigh_collapse }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = { #Oh boy
		ai_chance = { factor = 1 }
		name = rahenraj.1101.a
		
		add_stability = -1
		
		custom_tooltip = raj_collapse_in_5_tt
		add_country_modifier = {
			name = raj_nigh_collapse
			duration = 1825
		}
		hidden_effect = {
			country_event = {
				id = rahenraj.1102
				days = 1825
			}
			country_event = {
				id = rahenraj.1103
				days = 1825
			}
		}
	}
}
country_event = { #Dissolution of the Raj
	id = rahenraj.1102
	title = rahenraj.1102.t
	desc = rahenraj.1102.d
	picture = COURT_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	trigger = {
		has_reform = raja_reform
		NOT = { num_of_subjects = 6 }
	}
	
	option = { #Times have changed
		ai_chance = { factor = 1 }
		name = rahenraj.1102.a
		
		add_stability = -1
		add_government_reform = autocracy_reform
		every_subject_country = {
			hidden_effect = { every_owned_province = { every_owned_province = { rahen_clear_court_disaster_province_modifiers = yes } } }
			overlord = {
				create_subject = {
					subject_type = vassal
					subject = PREV
				}
			}
		}
		
		hidden_effect = {
			every_owned_province = { rahen_clear_court_disaster_province_modifiers = yes }
			rahen_remove_harimraj_reforms_effect = yes
			clr_country_flag = reformed_rahen_court
			remove_country_modifier = raj_opened_senapti_ranks
			remove_country_modifier = raj_closed_senapti_ranks
			4411 = {
				remove_province_modifier = rahen_corrupt_ministery_of_agriculture
				remove_province_modifier = rahen_corrupt_ministery_of_philosophy
				remove_province_modifier = rahen_corrupt_ministery_of_internal_relations
				remove_province_modifier = rahen_corrupt_ministery_of_foreign_relations
			}
		}
	}
}
country_event = { #Stabalisation of the Raj
	id = rahenraj.1103
	title = rahenraj.1103.t
	desc = rahenraj.1103.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_reform = raja_reform
		num_of_subjects = 6
	}
	
	option = { #Crisis averted, for now
		ai_chance = { factor = 1 }
		name = rahenraj.1103.a
		
		add_stability = 1
		raj_cohesion_change_absolute = { amount = 10 }
	}
}
country_event = { #[From.GetName] has left the Raj!
	id = rahenraj.1104
	title = rahenraj.1104.t
	desc = rahenraj.1104.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = { #Oh no!
		ai_chance = { factor = 1 }
		name = rahenraj.1104.a
		
		add_prestige = -5
	}
}
country_event = { #Someone seems to be sabotaging the Raj!
	id = rahenraj.1105
	title = rahenraj.1105.t
	desc = rahenraj.1105.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = { #Oh no!
		ai_chance = { factor = 1 }
		name = rahenraj.1105.a
		tooltip = {
			raj_cohesion_change_absolute = { amount = -1 }
		}
	}
}

#Ministerial Census
country_event = { #To Subject: Visit of the Censors
	id = rahenraj.1200
	title = rahenraj.1200.t
	desc = rahenraj.1200.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = { #Grant them full access to our ledgers
		ai_chance = { factor = 1 }
		name = rahenraj.1200.a
		add_country_modifier = {
			name = raj_census_full_access_to_ledgers
			duration = 3650
		}
		raj_cohesion_change = { amount = 0.5 mandate = yes }
	}
	option = { #There are some things we would rather they do not see
		ai_chance = { factor = 1 }
		name = rahenraj.1200.b
		add_country_modifier = {
			name = raj_census_limited_access_to_ledgers
			duration = 3650
		}
		raj_cohesion_change = { amount = -0.5 mandate = yes }
		custom_tooltip = raj_raja_may_intervene_for_ministries_tt
	}
	
	after = {
		#if ministry influence is too low, send message to Raja and ask if they want to send extra administrators to the appropriate region
		if = {
			limit = {
				NOT = {
					estate_influence = {
						estate = estate_raj_ministries
						influence = 20
					}
				}
			}
			overlord = {
				country_event = {
					id = rahenraj.1201
					days = 14
					random = 30
				}
			}
		}
	}
}

country_event = { # Ministries failing their administration in FROM
	id = rahenraj.1201
	title = rahenraj.1201.t
	desc = rahenraj.1201.d
	picture = WESTERNISATION_eventPicture

	is_triggered_only = yes

	option = { # It's time for an intervention!
		name = rahenraj.1201.a
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = rahenraj.1202
				}
			}
		}
		tooltip = {
			FROM = {
				add_estate_influence_modifier = {
					estate = estate_raj_ministries
					desc = EST_VAL_INTERVENTION_FROM_THE_RAJA
					influence = 20
					duration = 3590
				}
			}
		}
		add_adm_power = -25
		add_dip_power = -25
	}
	option = { # We have other priorities currently
		name = rahenraj.1201.b
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = raj_neglected_provincial_administration
			duration = 3590
		}
		
	}
}

country_event = { # A Delegation from the Raja
	id = rahenraj.1202
	title = rahenraj.1202.t
	desc = rahenraj.1202.d
	picture = WESTERNISATION_eventPicture

	is_triggered_only = yes

	option = { # I see...
		name = rahenraj.1202.a
		ai_chance = {
			factor = 1
		}
		add_estate_influence_modifier = {
			estate = estate_raj_ministries
			desc = EST_VAL_INTERVENTION_FROM_THE_RAJA
			influence = 20
			duration = 3650
		}
	}
}

country_event = { #The Raj management event
	id = rahenraj.2000
	title = rahenraj.2000.t
	desc = rahenraj.2000.d
	picture = COURT_eventPicture

	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		capital = 4411
		has_reform = raja_reform
	}
	
	option = {
		ai_chance = { factor = 1 }
		name = rahenraj.1000.a
		
		raj_cohesion_yearly_tick = yes
	}
}

country_event = { #ai raj subjects to get spy network on raja
	id = rahenraj.2001
	title = rahenraj.2000.t
	desc = rahenraj.2000.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	trigger = {
		overlord = { has_reform = raja_reform }
		ai = yes
	}
	immediate = {
		overlord = { save_event_target_as = current_raja }
	}
	
	option = {
		ai_chance = { factor = 20 }
		name = rahenraj.1000.a
		
		
	}
	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				liberty_desire = 40
			}
		}
		name = rahenraj.1000.a
		
		add_spy_network_in = {
			who = event_target:current_raja
			value = 50
		}
	}
}

#--------# Raja #--------#
#Raja death
country_event = { 
	id = rahenraj.2099
	title = rahenraj.2099.t
	desc = rahenraj.2099.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	trigger = {
		has_reform = raja_reform
	}
	
	immediate = {
		set_country_flag = raja_death_event_active
	}
	
	#Check other candidates
	option = {
		name = rahenraj.2099.a
		goto = shortlisted_vizier_1_capital
		ai_chance = { factor = 100 }
		raj_cohesion_change_absolute = { amount = -10 }
		set_country_flag = vizier_nomination_on_new_raja
		clr_country_flag = raja_death_event_active
		country_event = { id = rahenraj.2100 }
	}
	
	#Nominate previous vizier
	option = {
		name = rahenraj.2099.b
		goto = current_vizier_capital
		trigger = { any_subject_country = { has_country_flag = raj_vizier } }
		ai_chance = { factor = 0 }
		hidden_effect = {
			clr_country_flag = raja_death_event_active
			set_country_flag = raj_same_vizier
			raj_calc_vizier_sway = yes
			country_event = { id = rahenraj.2101 }
		}
	}
}

#--------# Vizier #--------#

#Vizier Nomination
country_event = { 
	id = rahenraj.2100
	title = rahenraj.2100.t
	desc = { trigger = { has_country_flag = vizier_nomination_on_new_raja } desc = rahenraj.2100.da }
	desc = { trigger = { NOT = { has_country_flag = vizier_nomination_on_new_raja } } desc = rahenraj.2100.db }
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	trigger = {
		has_reform = raja_reform
		NOT = { has_country_flag = raja_death_event_active }
	}
	
	immediate = {
		hidden_effect = {
			if = { limit = { NOT = { any_subject_country = { has_country_flag = raj_vizier } } }
				4411 = {
					set_variable = { which = vizierSway value = 0 }
					set_variable = { which = vizierYearlySway value = 0 }
					owner = {
						4411 = {		
							export_to_variable = { which = rajaAdm value = ADM who = PREV }
							export_to_variable = { which = rajaDip value = DIP who = PREV }
							export_to_variable = { which = rajaMil value = MIL who = PREV }
						}
					}
					set_variable = { which = rajaVizierCohesion which = rajaAdm }
					change_variable = { which = rajaVizierCohesion which = rajaDip }
					change_variable = { which = rajaVizierCohesion which = rajaMil }
					subtract_variable = { which = rajaVizierCohesion value = 9 }
					divide_variable = { which = rajaVizierCohesion value = 10 }
				}
			}
			raj_calc_vizier_shortlist = yes
		}
	}
	
	#Nominate previous vizier
	option = {
		name = rahenraj.2100.a
		goto = current_vizier_capital
		trigger = {
			any_subject_country = { has_country_flag = raj_vizier }
			has_country_flag = vizier_nomination_on_new_raja
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				event_target:current_vizier = { NOT = { check_variable = { which = vizierScore which = event_target:shortlisted_vizier_1 } } }
			}
		}
		custom_tooltip = raj_vizier_stats_current_tt
		raj_cohesion_change_absolute = { amount = 10 }
		set_country_flag = raj_same_vizier
	}
	
	#Nominate previous vizier's heir
	option = {
		name = rahenraj.2100.b
		goto = current_vizier_capital
		trigger = {
			any_subject_country = { has_country_flag = raj_vizier }
			NOT = { has_country_flag = vizier_nomination_on_new_raja }
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				event_target:current_vizier = { NOT = { check_variable = { which = vizierScore which = event_target:shortlisted_vizier_1 } } }
			}
		}
		custom_tooltip = raj_vizier_stats_current_tt
		raj_cohesion_change_absolute = { amount = 5 }
		raj_vizier_sway_change = { amount = -10 }
		set_country_flag = raj_same_vizier
		clr_country_flag = raj_swayed_senaptia
		clr_country_flag = raj_gathered_ministries
		clr_country_flag = raj_outmaneuvered_raja
		clr_country_flag = raj_discredited_raja
		clr_country_flag = raj_became_raja_confident
	}
	
	#Others candidates
	option = {
		name = rahenraj.2100.c
		goto = shortlisted_vizier_1_capital
		ai_chance = { factor = 1 }
		custom_tooltip = raj_vizier_stats_1_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_1 }
	}
	
	option = {
		name = rahenraj.2100.dd
		goto = shortlisted_vizier_2_capital
		ai_chance = { factor = 0 }
		custom_tooltip = raj_vizier_stats_2_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_2 }
	}
	
	option = {
		name = rahenraj.2100.e
		goto = shortlisted_vizier_3_capital
		ai_chance = { factor = 0 }
		custom_tooltip = raj_vizier_stats_3_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_3 }
	}
	
	option = {
		name = rahenraj.2100.f
		goto = shortlisted_vizier_4_capital
		ai_chance = { factor = 0 }
		custom_tooltip = raj_vizier_stats_4_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_4 }
	}
	
	option = {
		name = rahenraj.2100.g
		goto = shortlisted_vizier_5_capital
		ai_chance = { factor = 0 }
		custom_tooltip = raj_vizier_stats_5_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_5 }
	}
	
	option = {
		name = rahenraj.2100.h
		goto = shortlisted_vizier_6_capital
		ai_chance = { factor = 0 }
		custom_tooltip = raj_vizier_stats_6_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_6 }
	}
	
	option = {
		name = rahenraj.2100.i
		goto = shortlisted_vizier_7_capital
		ai_chance = { factor = 0 }
		custom_tooltip = raj_vizier_stats_7_tt
		raj_vizier_nomination_effects = { scope = event_target:shortlisted_vizier_7 }
	}
	
	after = {
		clr_country_flag = vizier_nomination_on_new_raja
		raj_calc_vizier_sway = yes
		country_event = { id = rahenraj.2101 }
	}
}

#A new Vizier (Raja)
country_event = { 
	id = rahenraj.2101
	title = rahenraj.2101.t
	desc = { trigger = { NOT = { has_country_flag = raj_same_vizier } } desc = rahenraj.2101.da }
	desc = { trigger = { has_country_flag = raj_same_vizier } desc = rahenraj.2101.db }
	picture = COURT_eventPicture

	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		overlord = { has_reform = raja_reform }
	}
	
	option = {
		name = rahenraj.2101.a
		clr_country_flag = raj_same_vizier
	}
}

#A new Vizier (new Vizier)
country_event = { 
	id = rahenraj.2102
	title = rahenraj.2102.t
	desc = rahenraj.2102.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2102.a
		custom_tooltip = raj_vizier_mechanics_enabled_tt
	}
}

#A new Vizier (previous Vizier)
country_event = { 
	id = rahenraj.2103
	title = rahenraj.2103.t
	desc = rahenraj.2103.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2103.a
		custom_tooltip = raj_vizier_mechanics_disabled_tt
	}
}


#Raja-Vizier Bff event chain start
country_event = { 
	id = rahenraj.2104
	title = rahenraj.2104.t
	desc = rahenraj.2104.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2104.a
		raj_vizier_sway_change = { amount = 5 }
	}
}

#Raja-Vizier Bff event chain middle
country_event = { 
	id = rahenraj.2105
	title = rahenraj.2105.t
	desc = rahenraj.2105.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2105.a
		
	}
}

#Raja-Vizier Bff event chain end
country_event = { 
	id = rahenraj.2106
	title = rahenraj.2106.t
	desc = rahenraj.2106.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2106.a
		
	}
}

#Vizier has Swayed Senaptia
country_event = { 
	id = rahenraj.2107
	title = rahenraj.2107.t
	desc = rahenraj.2107.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2107.a
		tooltip = {
			raj_vizier_sway_change = { amount = 5 }
			add_opinion = { who = FROM modifier = raj_swayed_senaptia_opinion }
		}
	}
}

#Ministries support Vizier
country_event = { 
	id = rahenraj.2108
	title = rahenraj.2108.t
	desc = rahenraj.2108.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2108.a
		tooltip = { raj_vizier_sway_change = { amount = 5 } }
	}
}

#Outmanoeuvred by the Vizier
country_event = { 
	id = rahenraj.2109
	title = rahenraj.2109.t
	desc = rahenraj.2109.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2109.a
		tooltip = {
			raj_vizier_sway_change = { amount = 5 }
			add_opinion = { who = FROM modifier = raj_outmaneuvered_by_vizier_opinion }
			add_country_modifier = { name = raj_was_outmaneuvered duration = 3650 }
		}
	}
}

#Discredited by the Vizier
country_event = { 
	id = rahenraj.2110
	title = rahenraj.2110.t
	desc = rahenraj.2110.d
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = rahenraj.2110.a
		tooltip = {
			raj_vizier_sway_change = { amount = 5 }
			raj_cohesion_change_absolute = { amount = -5 }
			add_opinion = { who = FROM modifier = raj_discredited_by_vizier_opinion }
			add_spy_network_from = { who = FROM value = -60 }
		}
	}
}


#--------# Menus #--------#

#Raj menu vassal
country_event = {
	id = rahenraj.3000
	title = rahenraj.3000.t
	desc = rahenraj.3000.d
	picture = RAJ_COUNTRY_SHIELD_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			raj_rounding_variables = yes
			4411 = {
				set_variable = { which = rajNbPrabhi value = 0 }
				set_variable = { which = rajNbSenapti value = 0 }
				owner = {
					save_global_event_target_as = raja_global_target
					capital_scope = { save_event_target_as = raja_capital_target }
					every_subject_country = {
						if = { limit = { has_country_flag = raj_vizier }
							save_global_event_target_as = raj_vizier_global_target
							capital_scope = { save_event_target_as = raj_vizier_capital_target }
						}
						if = { limit = { is_subject_of_type = daimyo_vassal }
							4411 = { change_variable = { which = rajNbPrabhi value = 1 } }
						}
						else_if = { limit = { is_subject_of_type = great_daimyo_vassal }
							4411 = { change_variable = { which = rajNbSenapti value = 1 } }
						}
					}
				}
			}
			raj_calc_max_allowed_senaptia = yes
			raj_calc_vizier_ranking = yes
		}
	}
	
	#Manage Ministries Menu
	option = {
		name = rahenraj.3000.a
		goto = raja_capital_target
		trigger = { has_reform = raja_reform }
		hidden_effect = { country_event = { id = rahenraj.3002 } }
	}
	#Request mandate
	option = {
		name = rahenraj.3000.b
		goto = raja_capital_target
		trigger = {
			NOT = { has_reform = raja_reform }
			dip_power = 50
			NOT = { has_raj_mandate = yes }
			NOT = { has_country_modifier = raj_mandate_denied }
			hidden_trigger = { NOT = { has_country_flag = raj_requested_mandate } }
		}
		custom_tooltip = raj_open_mandate_menu_tt
		add_dip_power = -50
		hidden_effect = {
			set_country_flag = raj_requested_mandate
			country_event = { id = rahenraj.1002 }
			overlord = { add_country_modifier = { name = raj_administration_is_busy duration = 10 hidden = yes } }
		}
	}
	#Request mandate (unavailable)
	option = {
		name = rahenraj.3000.c
		goto = raja_capital_target
		trigger = {
			NOT = { has_reform = raja_reform }
			OR = {
				NOT = { dip_power = 50 }
				has_raj_mandate = yes
				has_country_modifier = raj_mandate_denied
				has_country_flag = raj_requested_mandate
			}
		}
		custom_tooltip = raj_option_unavailable_tt
		if = { limit = { NOT = { dip_power = 50 } }
			custom_tooltip = raj_not_50_dip_tt
		}
		if = { limit = { has_raj_mandate = yes }
			custom_tooltip = raj_already_has_mandate_tt
		}
		if = { limit = { has_country_modifier = raj_mandate_denied }
			custom_tooltip = raj_got_denied_mandate_tt
		}
		if = { limit = { has_country_flag = raj_requested_mandate }
			custom_tooltip = raj_request_pending_tt
		}
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	
	#Mandate Settings
	option = {
		name = rahenraj.3000.dd
		goto = raj_vizier_capital_target
		trigger = { has_reform = raja_reform }
		hidden_effect = { country_event = { id = rahenraj.3003 } }
	}
	#Request Senapti Rank
	option = {
		name = rahenraj.3000.e
		goto = raj_vizier_capital_target
		trigger = {
			is_subject_of_type = daimyo_vassal
			hidden_trigger = { NOT = { has_country_flag = potential_senapti } }
			dip_power = 25
			if = {
				limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks } }
				if = {
					limit = { overlord = { culture_group = harimari } }
					ruler_is_harimari = yes
				}
				else = {
					ruler_is_human = yes
				}
			}
			NOT = { has_country_modifier = prabhi_promotion_rejected }
			NOT = { has_country_modifier = senapti_recently_demoted }
			NOT = { has_country_modifier = raj_mandate_extended_prabhi_privileges }
			num_of_cities = 2
			raj_below_allowed_senaptia = yes
		}
		add_dip_power = -25
		hidden_effect = {
			set_country_flag = potential_senapti
			save_global_event_target_as = potential_senapti_target
			country_event = { id = rahenraj.3001 }
		}
		overlord = { country_event = { id = rahenraj.4 } }
	}
	#Request Senapti(Unavailable)
	option = {
		name = rahenraj.3000.f
		goto = raj_vizier_capital_target
		trigger = {
			NOT = { has_reform = raja_reform }
			OR = {
				NOT = { dip_power = 25 }
				NOT = { is_subject_of_type = daimyo_vassal }
				has_country_flag = potential_senapti
				if = {
					limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks } }
					if = {
						limit = { overlord = { culture_group = harimari } }
						NOT = { ruler_is_harimari = yes }
					}
					else = {
						NOT = { ruler_is_human = yes }
					}
				}
				has_country_modifier = prabhi_promotion_rejected
				has_country_modifier = senapti_recently_demoted
				has_country_modifier = raj_mandate_extended_prabhi_privileges
				NOT = { num_of_cities = 2 }
				NOT = { raj_below_allowed_senaptia = yes }
			}
		}
		if = { limit = { is_subject_of_type = great_daimyo_vassal }
			custom_tooltip = raj_already_senapti_tt
		}
		else = {
			custom_tooltip = raj_option_unavailable_tt
			if = { limit = { NOT = { raj_below_allowed_senaptia = yes } }
				custom_tooltip = raj_no_senaptia_available_tt
			}
			if = { limit = { NOT = { dip_power = 25 } }
				custom_tooltip = raj_not_25_dip_tt
			}
			if = { limit = { NOT = { is_subject_of_type = daimyo_vassal } }
				custom_tooltip = raj_not_prabhi_tt
			}
			if = { limit = { overlord = { has_country_modifier = raj_closed_senapti_ranks } }
				if = {
					limit = {
						overlord = { culture_group = harimari }
						NOT = { ruler_is_harimari = yes }
					}
					custom_tooltip = raj_not_ruler_harimari_tt
				}
				else_if = { limit = { NOT = { ruler_is_human = yes } }
					custom_tooltip = raj_not_ruler_human_tt
				}
			}
			if = { limit = { has_country_modifier = prabhi_promotion_rejected }
				custom_tooltip = raj_promotion_rejection_tt
			}
			if = { limit = { has_country_modifier = senapti_recently_demoted }
				custom_tooltip = raj_recently_demoted_tt
			}
			if = { limit = { has_country_modifier = raj_mandate_extended_prabhi_privileges }
				custom_tooltip = raj_extended_prabhi_privileges_modifier_tt
			}
			if = { limit = { NOT = { num_of_cities = 2 } }
				custom_tooltip = raj_not_2_provinces_tt
			}
		}
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	
	#Vizier Action (raja)
	option = {
		name = rahenraj.3000.g
		trigger = {
			has_reform = raja_reform
			4411 = { check_variable = { which = raj_cohesion which = vizierSway } }
		}
		hidden_effect = { country_event = { id = rahenraj.3004 } }
	}
	#Vizier Action (raja - unavailable)
	option = {
		name = rahenraj.3000.h
		trigger = {
			has_reform = raja_reform
			4411 = { NOT = { check_variable = { which = raj_cohesion which = vizierSway } } }
		}
		custom_tooltip = raj_option_unavailable_tt
		custom_tooltip = raj_cohesion_lower_than_sway_tt
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	#Vizier Action
	option = {
		name = rahenraj.3000.i
		trigger = { has_country_flag = raj_vizier }
		hidden_effect = { country_event = { id = rahenraj.3005 } }
	}
	#Sabotage Raj
	option = {
		name = rahenraj.3000.j
		trigger = {
			NOT = { has_reform = raja_reform }
			NOT = { has_country_flag = raj_vizier }
			overlord = { has_spy_network_from = { who = ROOT value = 30 } }
		}
		raj_cohesion_change_absolute = { amount = -1 }
		overlord = {
			add_spy_network_from = { who = ROOT value = -30 }
			country_event = { id = rahenraj.1105 }
		}
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	#Sabotage Raj (unavailable)
	option = {
		name = rahenraj.3000.k
		trigger = {
			NOT = { has_reform = raja_reform }
			NOT = { has_country_flag = raj_vizier }
			NOT = { overlord = { has_spy_network_from = { who = ROOT value = 30 } } }
		}
		custom_tooltip = raj_option_unavailable_tt
		custom_tooltip = raj_need_30_spy_network_tt
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	
	#Refresh Menu
	option = {
		name = rahenraj.3000.l
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	
	#Hide info window
	option = {
		name = rahenraj.3000.m
		trigger = { NOT = { has_country_flag = raj_info_window_hidden } }
		set_country_flag = raj_info_window_hidden
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	
	#Show info window
	option = {
		name = rahenraj.3000.n
		trigger = { has_country_flag = raj_info_window_hidden }
		clr_country_flag = raj_info_window_hidden
		hidden_effect = { country_event = { id = rahenraj.3001 } }
	}
	
	#Close Menu
	option = {
		name = rahenraj.3000.o
		clr_country_flag = raj_menu_open
	}
}

country_event = {
	id = rahenraj.3001
	title = rahenraj.3001.t
	desc = rahenraj.3001.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = rahenraj.3001.a
		country_event = { id = rahenraj.3000 }
	}
}

#Manage Ministries Menu
country_event = {
	id = rahenraj.3002
	title = rahenraj.3002.t
	desc = rahenraj.3002.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = rahenraj.1002.z
	}
	
	after = {
		country_event = { id = rahenraj.3000 }
	}
}

#Mandate Settings Menu
country_event = {
	id = rahenraj.3003
	title = rahenraj.3003.t
	desc = rahenraj.3003.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = rahenraj.1002.z
	}
	
	after = {
		country_event = { id = rahenraj.3000 }
	}
}

#Fire Vizier
country_event = {
	id = rahenraj.3004
	title = rahenraj.3004.t
	desc = rahenraj.3004.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	#I'm sure
	option = {
		name = rahenraj.3004.a
		random_subject_country = {
			limit = { has_country_flag = raj_vizier }
			raj_clear_vizier = yes
			add_opinion = { who = ROOT modifier = raj_dismissed_vizier_opinion }
		}
		4411 = {
			subtract_variable = { which = raj_cohesion which = vizierSway }
			hidden_effect = {
				if = { limit = { NOT = { check_variable = { raj_cohesion = 0 } } }
					set_variable = { which = raj_cohesion value = 0 }
				}
			}
		}
		country_event = { id = rahenraj.2100 }
	}
	
	#Nevermind
	option = {
		name = rahenraj.3004.b
	}
	
	after = {
		country_event = { id = rahenraj.3000 }
	}
}

#Vizier Actions
country_event = {
	id = rahenraj.3005
	title = rahenraj.3005.t
	desc = rahenraj.3005.d
	picture = RAJ_SUBMENU_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_variable = { which = numSwayedSenaptia value = 0 }
			set_variable = { which = rajNbSenapti value = 0 }
			export_to_variable = { which = vizierDipRepDiff value = modifier:diplomatic_reputation }
			overlord = {
				save_event_target_as = raja_target
				every_subject_country = {
					limit = { is_subject_of_type = great_daimyo_vassal }
					ROOT = {
						change_variable = { which = rajNbSenapti value = 1 }
						export_to_variable = { which = vizierOpinion value = opinion who = PREV }
					}
					set_variable = { which = vizierOpinion which = ROOT }
					
					PREV = { export_to_variable = { which = rajaOpinion value = opinion who = PREV } }
					set_variable = { which = rajaOpinion which = PREV }
					if = {
						limit = {
							has_opinion = { value = 150 who = ROOT }
							NOT = { check_variable = { which = rajaOpinion which = vizierOpinion } }
						}
						ROOT = { change_variable = { which = numSwayedSenaptia value = 1 } }
					}
				}
				ROOT = { export_to_variable = { which = rajaDipRep value = modifier:diplomatic_reputation who = PREV } }
			}
			set_variable = { which = rajNbSenaptiHalf which = rajNbSenapti }
			divide_variable = { which = rajNbSenaptiHalf value = 2000 }
			multiply_variable = { which = rajNbSenaptiHalf value = 1000 }
			subtract_variable = { which = vizierDipRepDiff which = rajaDipRep }
		}
	}
	
	#Sway the Senaptia
	option = {
		name = rahenraj.3005.a
		trigger = {
			check_variable = { which = rajNbSenaptiHalf value = 1 }
			check_variable = { which = numSwayedSenaptia which = rajNbSenaptiHalf }
			mil_power = 250
			NOT = { has_country_flag = raj_swayed_senaptia }
		}
		raj_vizier_sway_change = { amount = 5 }
		add_mil_power = -250
		overlord = {
			country_event = { id = rahenraj.2107 }
			add_opinion = { who = ROOT modifier = raj_swayed_senaptia_opinion }
			every_subject_country = {
				limit = {
					is_subject_of_type = great_daimyo_vassal
					has_opinion = { value = 150 who = ROOT }
					NOT = { check_variable = { which = rajaOpinion which = vizierOpinion } }
				}
				add_opinion = { who = ROOT modifier = raj_swayed_senapti_opinion }
			}
		}
		set_country_flag = raj_swayed_senaptia
		custom_tooltip = raj_option_available_tt
		custom_tooltip = raj_has_250_mil_tt
		custom_tooltip = raj_more_than_half_senaptia_tt
		custom_tooltip = raj_vizier_action_not_used_before_tt
		hidden_effect = { country_event = { id = rahenraj.3000 } }
	}
	#Sway the Senaptia (unavailable)
	option = {
		name = rahenraj.3005.b
		trigger = {
			OR = {
				NOT = { check_variable = { which = rajNbSenaptiHalf value = 1 } }
				NOT = { check_variable = { which = numSwayedSenaptia which = rajNbSenaptiHalf } }
				NOT = { mil_power = 250 }
				has_country_flag = raj_swayed_senaptia
			}
		}
		custom_tooltip = raj_option_unavailable_tt
		if = { limit = { mil_power = 250 }
			custom_tooltip = raj_has_250_mil_tt
		}
		else = {
			custom_tooltip = raj_not_250_mil_tt
		}
		if = { limit = { check_variable = { which = numSwayedSenaptia which = rajNbSenaptiHalf } }
			custom_tooltip = raj_more_than_half_senaptia_tt
		}
		else = {
			custom_tooltip = raj_not_more_than_half_senaptia_tt
		}
		if = { limit = { NOT = { has_country_flag = raj_swayed_senaptia } }
			custom_tooltip = raj_vizier_action_not_used_before_tt
		}
		else = {
			custom_tooltip = raj_vizier_action_used_before_tt
		}
		hidden_effect = { country_event = { id = rahenraj.3006 } }
	}
	
	#Gather The Ministries Support
	option = {
		name = rahenraj.3005.c
		trigger = {
			estate_loyalty = { estate = estate_raj_ministries loyalty = 60 }
			estate_influence = { estate = estate_raj_ministries influence = 60 }
			adm_power = 250
			NOT = { has_country_flag = raj_gathered_ministries }
		}
		raj_vizier_sway_change = { amount = 5 }
		overlord = { country_event = { id = rahenraj.2108 } }
		add_adm_power = -250
		add_estate_influence_modifier = { estate = estate_raj_ministries desc = raj_ministries_support_vizier influence = 10 duration = 7300 }
		set_country_flag = raj_gathered_ministries
		custom_tooltip = raj_option_available_tt
		custom_tooltip = raj_has_250_mil_tt
		custom_tooltip = raj_more_than_half_senaptia_tt
		custom_tooltip = raj_vizier_action_not_used_before_tt
		hidden_effect = { country_event = { id = rahenraj.3000 } }
	}
	#Gather The Ministries Support (unavailable)
	option = {
		name = rahenraj.3005.dd
		trigger = {
			OR = {
				NOT = { estate_loyalty = { estate = estate_raj_ministries loyalty = 60 } }
				NOT = { estate_influence = { estate = estate_raj_ministries influence = 60 } }
				NOT = { adm_power = 250 }
				has_country_flag = raj_gathered_ministries
			}
		}
		custom_tooltip = raj_option_unavailable_tt
		if = { limit = { adm_power = 250 }
			custom_tooltip = raj_has_250_adm_tt
		}
		else = {
			custom_tooltip = raj_not_250_adm_tt
		}
		if = { limit = { estate_loyalty = { estate = estate_raj_ministries loyalty = 60 } }
			custom_tooltip = raj_ministries_loyalty_60_tt
		}
		else = {
			custom_tooltip = raj_ministries_loyalty_not_60_tt
		}
		if = { limit = { estate_influence = { estate = estate_raj_ministries influence = 60 } }
			custom_tooltip = raj_ministries_influence_60_tt
		}
		else = {
			custom_tooltip = raj_ministries_influence_not_60_tt
		}
		if = { limit = { NOT = { has_country_flag = raj_gathered_ministries } }
			custom_tooltip = raj_vizier_action_not_used_before_tt
		}
		else = {
			custom_tooltip = raj_vizier_action_used_before_tt
		}
		hidden_effect = { country_event = { id = rahenraj.3006 } }
	}
	
	#Outmaneuver the Raja
	option = {
		name = rahenraj.3005.e
		trigger = {
			dip_power = 250
			diplomatic_reputation = 4
			check_variable = { which = vizierDipRepDiff value = 2 }
			NOT = { has_country_flag = raj_outmaneuvered_raja }
		}
		raj_vizier_sway_change = { amount = 5 }
		overlord = {
			country_event = { id = rahenraj.2109 }
			add_opinion = { who = ROOT modifier = raj_outmaneuvered_by_vizier_opinion }
			add_country_modifier = { name = raj_was_outmaneuvered duration = 3650 }
		}
		add_dip_power = -250
		set_country_flag = raj_outmaneuvered_raja
		custom_tooltip = raj_option_available_tt
		custom_tooltip = raj_has_250_dip_tt
		custom_tooltip = raj_has_4_diprep_tt
		custom_tooltip = raj_more_diprep_than_raja_tt
		custom_tooltip = raj_vizier_action_not_used_before_tt
		hidden_effect = { country_event = { id = rahenraj.3000 } }
	}
	#Outmaneuver the Raja (unavailable)
	option = {
		name = rahenraj.3005.f
		trigger = {
			OR = {
				NOT = { dip_power = 250 }
				NOT = { diplomatic_reputation = 4 }
				NOT = { check_variable = { which = vizierDipRepDiff value = 2 } }
				has_country_flag = raj_outmaneuvered_raja
			}
		}
		custom_tooltip = raj_option_unavailable_tt
		if = { limit = { dip_power = 250 }
			custom_tooltip = raj_has_250_dip_tt
		}
		else = {
			custom_tooltip = raj_not_250_dip_tt
		}
		if = { limit = { diplomatic_reputation = 4 }
			custom_tooltip = raj_has_4_diprep_tt
		}
		else = {
			custom_tooltip = raj_not_has_4_diprep_tt
		}
		if = { limit = { check_variable = { which = vizierDipRepDiff value = 2 } }
			custom_tooltip = raj_more_diprep_than_raja_tt
		}
		else = {
			custom_tooltip = raj_not_more_diprep_than_raja_tt
		}
		if = { limit = { NOT = { has_country_flag = raj_outmaneuvered_raja } }
			custom_tooltip = raj_vizier_action_not_used_before_tt
		}
		else = {
			custom_tooltip = raj_vizier_action_used_before_tt
		}
		hidden_effect = { country_event = { id = rahenraj.3006 } }
	}
	
	#Discredit the Raja
	option = {
		name = rahenraj.3005.g
		trigger = {
			treasury = 500
			overlord = { has_spy_network_from = { who = ROOT value = 60 } }
			NOT = { has_country_flag = raj_discredited_raja }
		}
		raj_vizier_sway_change = { amount = 5 }
		overlord = {
			country_event = { id = rahenraj.2110 }
			add_opinion = { who = ROOT modifier = raj_discredited_by_vizier_opinion }
			add_spy_network_from = { who = ROOT value = -60 }
		}
		raj_cohesion_change_absolute = { amount = -5 }
		add_treasury = -500
		set_country_flag = raj_discredited_raja
		custom_tooltip = raj_option_available_tt
		custom_tooltip = raj_has_1_year_of_income_tt
		custom_tooltip = raj_has_60_spy_network_on_raja_tt
		custom_tooltip = raj_vizier_action_not_used_before_tt
		hidden_effect = { country_event = { id = rahenraj.3000 } }
	}
	#Discredit the Raja (unavailable)
	option = {
		name = rahenraj.3005.h
		trigger = {
			OR = {
				NOT = { treasury = 500 }
				NOT = { overlord = { has_spy_network_from = { who = ROOT value = 60 } } }
				has_country_flag = raj_discredited_raja
			}
		}
		custom_tooltip = raj_option_unavailable_tt
		if = { limit = { treasury = 500 }
			custom_tooltip = raj_has_1_year_of_income_tt
		}
		else = {
			custom_tooltip = raj_not_1_year_of_income_tt
		}
		if = { limit = { overlord = { has_spy_network_from = { who = ROOT value = 60 } } }
			custom_tooltip = raj_has_60_spy_network_on_raja_tt
		}
		else = {
			custom_tooltip = raj_not_60_spy_network_on_raja_tt
		}
		if = { limit = { NOT = { has_country_flag = raj_discredited_raja } }
			custom_tooltip = raj_vizier_action_not_used_before_tt
		}
		else = {
			custom_tooltip = raj_vizier_action_used_before_tt
		}
		hidden_effect = { country_event = { id = rahenraj.3006 } }
	}
	
	#Become the Raja confident
	option = {
		name = rahenraj.3005.i
		trigger = {
			reverse_has_opinion = { who = event_target:raja_target value = 150 }
			prestige = event_target:raja_target
			marriage_with = event_target:raja_target
			NOT = { has_country_flag = raj_became_raja_confident }
		}
		custom_tooltip = raj_confident_event_chain_start_tt
		hidden_effect = { country_event = { id = rahenraj.2104 } }
		set_country_flag = raj_became_raja_confident
		custom_tooltip = raj_option_available_tt
		custom_tooltip = raj_has_150_relations_with_raja_tt
		custom_tooltip = raj_has_more_prestige_than_raja_tt
		custom_tooltip = raj_has_marriage_with_raja_tt
		custom_tooltip = raj_vizier_action_not_used_before_tt
		hidden_effect = { country_event = { id = rahenraj.3000 } }
	}
	#Become the Raja confident (unavailable)
	option = {
		name = rahenraj.3005.j
		trigger = {
			OR = {
				NOT = { reverse_has_opinion = { who = event_target:raja_target value = 150 } }
				NOT = { prestige = event_target:raja_target }
				NOT = { marriage_with = event_target:raja_target }
				has_country_flag = raj_became_raja_confident
			}
		}
		custom_tooltip = raj_option_unavailable_tt
		if = { limit = { reverse_has_opinion = { who = event_target:raja_target value = 150 } }
			custom_tooltip = raj_has_150_relations_with_raja_tt
		}
		else = {
			custom_tooltip = raj_not_150_relations_with_raja_tt
		}
		if = { limit = { prestige = event_target:raja_target }
			custom_tooltip = raj_has_more_prestige_than_raja_tt
		}
		else = {
			custom_tooltip = raj_not_more_prestige_than_raja_tt
		}
		if = { limit = { marriage_with = event_target:raja_target }
			custom_tooltip = raj_has_marriage_with_raja_tt
		}
		else = {
			custom_tooltip = raj_not_marriage_with_raja_tt
		}
		if = { limit = { NOT = { has_country_flag = raj_became_raja_confident } }
			custom_tooltip = raj_vizier_action_not_used_before_tt
		}
		else = {
			custom_tooltip = raj_vizier_action_used_before_tt
		}
		hidden_effect = { country_event = { id = rahenraj.3006 } }
	}
	
	#Close
	option = {
		name = rahenraj.1002.z
		hidden_effect = { country_event = { id = rahenraj.3000 } }
	}
}

country_event = {
	id = rahenraj.3006
	title = rahenraj.3006.t
	desc = rahenraj.3006.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = rahenraj.3001.a
		country_event = { id = rahenraj.3005 }
	}
}

country_event = {
	id = rahenraj.3007
	title = rahenraj.3007.t
	desc = rahenraj.3007.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = rahenraj.3001.a
		country_event = { id = rahenraj.1002 }
	}
}

#Debug
country_event = {
	id = rahenraj.4000
	title = rahenraj.4000.t
	desc = rahenraj.4000.d
	picture = EMPTY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = rahenraj.4000.z
	}
}

