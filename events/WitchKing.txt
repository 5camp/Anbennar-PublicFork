namespace = witch_king

# Activation
country_event = {
	id =  witch_king.0
	title =  witch_king.0.t
	desc =  witch_king.0.d
	picture = COMET_SIGHTED_eventPicture
	
	trigger = {
		check_variable = {
			which = pointsWitchKing
			value = 13
		}
	}
	
	mean_time_to_happen = {
		months = 2400
		modifier = {
			factor = 0.75
			check_variable = {
				which = pointsWitchKing
				value = 26
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				which = pointsWitchKing
				value = 39
			}
		}
		modifier = {
			factor = 0.7
			has_ruler_flag = necromancy_1
		}
		modifier = {
			factor = 0.5
			has_ruler_flag = necromancy_2
		}
		modifier = {
			factor = 0.2
			has_ruler_flag = necromancy_3
		}
		modifier = {
			factor = 0.2
			has_ruler_flag = necromancy_3
		}
	}

	option = {
		name = witch_king.0.a
		
		add_ruler_modifier = {
			name = witch_king_modifier
			duration = -1
		}
		
		set_country_flag = witch_king_flag
	}
}

# Death of Witch King - Collapse
country_event = {
	id =  witch_king.1
	title =  witch_king.1.t
	desc =  witch_king.1.d
	picture = DEATH_OF_HEIR_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		#had_ruler_flag = { flag = witch_king_flag days = 12 }
		has_country_flag = witch_king_flag
	}

	option = {
		name = witch_king.1.a
		trigger = {
			heir_has_personality = mage_personality
		}
		
		add_ruler_modifier = {
			name = witch_king_modifier
			duration = -1
		}
		
		set_country_flag = witch_king_flag
		
		add_country_modifier = {
			name = death_of_a_witch_king
			duration = 1825
		}
	}
	
	option = {
		name = witch_king.1.b
		trigger = {
			NOT = { heir_has_personality = mage_personality }
		}
		
		add_country_modifier = {
			name = death_of_a_witch_king
			duration = 1825
		}
	}
}

# Dark Lord - Make em EVIL
country_event = {
	id =  `
	title =  witch_king.2.t
	desc =  witch_king.2.d
	picture = COMET_SIGHTED_eventPicture
	
	trigger = {
		check_variable = {
			which = pointsWitchKing
			value = 39
		}
		has_ruler_modifier = witch_king_modifier
	}
	
	mean_time_to_happen = {
		months = 2400
	}

	option = {
		name = witch_king.2.a
		
		add_ruler_modifier = {
			name = evil_modifier
			duration = -1
		}

	}
}