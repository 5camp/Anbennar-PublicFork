
namespace = verkalskomdhir

#The Ranger's Captain Logbook
country_event = {
	id = verkalskomdhir.1
	title = verkalskomdhir.1.t
	desc = verkalskomdhir.1.d
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.1.a
		add_prestige = 5
	}
}

#Rangers are ready
country_event = {
	id = verkalskomdhir.2
	title = verkalskomdhir.2.t
	desc = verkalskomdhir.2.d
	picture = SCOTTISH_MERCENARIES_eventPicture_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.2.a
		define_conquistador = {
			name = "Frandhi Flintstone"
			fire = 4
			shock = 1
			maneuver = 5
			siege = 1
		}
		add_army_tradition = 10
		remove_country_modifier = verkalskomdhir_ranger_training
	}
}

# The Carpenters Guild
country_event = {
	id = verkalskomdhir.3
	title = verkalskomdhir.3.t
	desc = verkalskomdhir.3.d
	picture = GREAT_BUILDING_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.3.a
		add_country_modifier = {
			name = verkalskomdhir_carpenter_guild
			duration = -1
		}
		define_advisor = {
			type = artist
			skill = 3
			discount = yes
			culture = flint_dwarf
			religion = ancestor_worship
		}
	}
}

# End of the Reforestation Decree
country_event = {
	id = verkalskomdhir.4
	title = verkalskomdhir.4.t
	desc = verkalskomdhir.4.d
	picture = WESTERNISATION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.4.a
		every_owned_province = {
			limit = {
				trade_goods = tropical_wood
			}
			remove_province_modifier = verkalskomdhir_anti_deforestation
			add_province_modifier = {
				name = verkalskomdhir_reforestation
				duration = -1
			}
		}
	}
}

# Exotic wood monopoly
country_event = {
	id = verkalskomdhir.5
	title = verkalskomdhir.5.t
	desc = verkalskomdhir.5.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.5.a
		change_price = {
			trade_goods = tropical_wood
			key = verkalskomdhir_exotic_wood_monopoly
			value = 0.5
			duration = 3650
		}
	}
}

# The Wooden Halls
country_event = {
	id = verkalskomdhir.6
	title = verkalskomdhir.6.t
	desc = verkalskomdhir.6.d
	picture = UNIVERSITY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.6.a
		4100 = {
			remove_province_modifier = verkalskomdhir_halls_construction
			add_province_modifier = {
				name = verkalskomdhir_the_wooden_halls
				duration = -1
			}
		}
	}
}

##########################
##Expedition Event Chain
##########################

#Expedition launch
country_event = {
	id = verkalskomdhir.7
	title = verkalskomdhir.7.t
	desc = verkalskomdhir.7.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.7.a
		treasury = -200
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.8 days = 60 random = 15
			}
			set_variable = {
				which = verkalskomdhir_expedition_manpower
				value = 20000
			}
		}
	}
}

#Goblin Ambush
country_event = {
	id = verkalskomdhir.8
	title = verkalskomdhir.8.t
	desc = verkalskomdhir.8.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	#Fight like a Dwarf
	option = {
		name = verkalskomdhir.8.a
		add_prestige = 5
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 4000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.9 days = 60
			}
		}
	}
	
	#Flee lika a pussy
	option = {
		name = verkalskomdhir.8.b
		add_prestige = -10
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 2000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.9 days = 90
			}
		}
	}
}

#Fey Misdirection
country_event = {
	id = verkalskomdhir.9
	title = verkalskomdhir.9.t
	desc = verkalskomdhir.9.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	#Wrong direction
	option = {
		name = verkalskomdhir.9.a
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 1000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.10 days = 90
			}
		}
	}
	
	#Very wrong direction
	option = {
		name = verkalskomdhir.9.b
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 2000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.10 days = 120
			}
		}
	}
	
	#Good direction
	option = {
		name = verkalskomdhir.9.c
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.10 days = 60
			}
		}
	}
}

#Elven Attack : the fight
country_event = {
	id = verkalskomdhir.10
	title = verkalskomdhir.10.t
	desc = verkalskomdhir.10.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		kill_leader = {
			type = "Frandhi Flintstone"
		}
	}
	
	#Fight like a Dwarf
	option = {
		name = verkalskomdhir.10.a
		add_prestige = 5
		set_country_flag = verkalskomdhir_fought_elves
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 6000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.11
			}
		}
	}
	
	#Flee lika a pussy
	option = {
		name = verkalskomdhir.10.b
		add_prestige = -10
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 3000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.13 days = 120
			}
		}
	}
}

#Elven Attack : Aftermath
country_event = {
	id = verkalskomdhir.11
	title = verkalskomdhir.11.t
	desc = verkalskomdhir.11.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	#Continue expedition
	option = {
		name = verkalskomdhir.11.a
		set_country_flag = verkalskomdhir_continue
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.12 days = 60
			}
		}
	}
	
	#Go back home
	option = {
		name = verkalskomdhir.11.b
		add_prestige = -10
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 1000
		}
		set_country_flag = verkalskomdhir_go_back
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.13 days = 120
			}
		}
	}
}

#Elven Town
country_event = {
	id = verkalskomdhir.12
	title = verkalskomdhir.12.t
	desc = verkalskomdhir.12.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	#Attack it
	option = {
		name = verkalskomdhir.12.a
		add_prestige = 5
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 6000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.13 days = 60
			}
		}
	}
	
	#Infiltrate it
	option = {
		name = verkalskomdhir.12.b
		substract_variable = {
			which = verkalskomdhir_expedition_manpower
			value = 1000
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.13 days = 60
			}
		}
	}
	
	#Ignore it
	option = {
		name = verkalskomdhir.12.c
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.13 days = 60
			}
		}
	}
	set_country_flag = verkalskomdhir_town_ignored
}

#Fey Misdirection 2 : It's a Trap !
country_event = {
	id = verkalskomdhir.13
	title = verkalskomdhir.13.t
	desc = verkalskomdhir.13.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	#Good Direction
	option = {
		name = verkalskomdhir.13.a
		trigger = {
			has_country_flag = verkalskomdhir_town_ignored
		}
		clr_country_flag = verkalskomdhir_town_ignored
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.15 days = 120
			}
		}
	}
	
	#Worse direction
	option = {
		name = verkalskomdhir.13.b
		set_country_flag = verkalskomdhir_orc_worse
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.14 days = 60
			}
		}
	}
	
	#Bad direction
	option = {
		name = verkalskomdhir.13.c
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.14 days = 60
			}
		}
	}
}

#Emerald orc ambush
country_event = {
	id = verkalskomdhir.14
	title = verkalskomdhir.14.t
	desc = verkalskomdhir.14.d
	picture = EXPLORERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	#Fight like a Dwarf
	option = {
		name = verkalskomdhir.14.a
		if = {
			limit = { has_country_flag = verkalskomdhir_orc_worse }
			substract_variable = {
				which = verkalskomdhir_expedition_manpower
				value = 4000
			}
		}
		else = {
			substract_variable = {
				which = verkalskomdhir_expedition_manpower
				value = 2000
			}
		}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.15 days = 90
			}
		}
	}
	
	#Flee lika a pussy
	option = {
		name = verkalskomdhir.14.b
		trigger = {
			NOT = { has_country_flag = verkalskomdhir_orc_worse }
		}
		substract_variable = {
				which = verkalskomdhir_expedition_manpower
				value = 2000
			}
		hidden_effect = {
			country_event = {
				id = verkalskomdhir.15 days = 120
			}
		}
	}
	
	after = {
		if = {
			limit = { has_country_flag = verkalskomdhir_orc_worse }
			clr_country_flag = verkalskomdhir_orc_worse
		}
	}
}

#Expedition end
country_event = {
	id = verkalskomdhir.15
	title = verkalskomdhir.15.t
	desc = verkalskomdhir.15.d
	picture = WOUNDED_SOLDIERS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
		name = verkalskomdhir.15.a
		deepwoods_superregion = {
			discover_country = ROOT
		}
		if = {
			limit = { has_country_flag = verkalskomdhir_continue }
			define_conquistador = {
				name = "Chad Showmustgoon"
				fire = 2
				shock = 3
				maneuver = 6
				siege = 2
			}
		}
		if = {
			limit = { has_country_flag = verkalskomdhir_go_back }
			define_conquistador = {
				name = "Virgil Gobackhome"
				fire = 4
				shock = 2
				maneuver = 2
				siege = 3
			}
		}
		if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 13000
				}
			}
			add_manpower = 13
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 12000
				}
			}
			add_manpower = 12
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 11000
				}
			}
			add_manpower = 11
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 10000
				}
			}
			add_manpower = 10
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 9000
				}
			}
			add_manpower = 9
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 8000
				}
			}
			add_manpower = 8
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 7000
				}
			}
			add_manpower = 7
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 6000
				}
			}
			add_manpower = 6
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 5000
				}
			}
			add_manpower = 5
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 4000
				}
			}
			add_manpower = 4
		}
		else_if = {
			limit = {
				check_variable = {
					which = verkalskomdhir_expedition_manpower
					value = 3000
				}
			}
			add_manpower = 3
		}
		else = {
			add_manpower = 2
		}
		lonfarch_area = {
			limit = {
				NOT = { owned_by = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		ayeth_area = {
			limit = {
				NOT = { owned_by = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
	}
	
	after = {
		set_country_flag = verkalskomdhir_expedition_end
		clr_country_flag = verkalskomdhir_continue
		clr_country_flag = verkalskomdhir_go_back
	}
}
