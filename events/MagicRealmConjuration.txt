namespace = magic_realm_conjuration


#Conjuration - Menu
country_event = {
	id = magic_realm_conjuration.0
	title = magic_realm_conjuration.0.t	
	desc = magic_realm_conjuration.0.d
	picture = BIG_BOOK_eventPicture
	
	is_triggered_only = yes
	
	option = {	
		name = magic_realm_nospells.0.a
		trigger = {
			AND = {
				NOT = { has_ruler_flag = conjuration_1 }
				NOT = { has_ruler_flag = conjuration_2 }
				NOT = { has_ruler_flag = conjuration_3 }
			}
		}
		ai_chance = {
			factor = 50
		}
		
		country_event = { id = magic_realm.0 days = 0 }
	}
	
	option = {	#Host Magnificent Feast
		name = magic_realm_conjuration.1.t
		trigger = {
			has_ruler_flag = conjuration_1
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				personality = ai_diplomat
			}
		}
		
		country_event = { id = magic_realm_conjuration.1 days = 0 }
	}
	
	
	
	option = {	#Conjure Magical Fortress 3
		name = magic_realm_conjuration.3.t
		trigger = {
			has_ruler_flag = conjuration_3
		}
		ai_chance = {
			factor = 50
		}
		
		add_years_of_income = -0.5
		
		add_ruler_modifier = {
			name = ruler_studying_magic
			duration = 3650	#3650
			
		}
		
		set_ruler_flag = ruler_studying_abjuration
	}
	
	option = {
		name = magic_siege.goback
		ai_chance = {
			factor = 50
		}
		country_event = { id = magic_realm.0 days = 0 }
	}
}

#Host Magical Feast
country_event = {
	id = magic_realm_conjuration.1
	title = magic_realm_conjuration.1.t
	desc = magic_realm_conjuration.1.d
	picture = KING_DOING_GREAT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = magic_realm_unavailable.0.a
		trigger = {
			OR = {
				has_ruler_flag = conjuration_1
				has_ruler_flag = conjuration_2
			}
			OR = {
				has_ruler_modifier = magic_realm_conjuration_magnificent_feast_1
				has_ruler_modifier = magic_realm_conjuration_magnificent_feast_2
			}
		}
		custom_tooltip = tooltip_magic_realm_unavailable_cooldown
		country_event = { id = magic_realm_conjuration.0 days = 0 }
	}
	
	option = {	#level 1
		name = magic_realm_conjuration.1.a
		trigger = {
			has_ruler_flag = conjuration_1
			AND = {
				NOT = { has_ruler_modifier = magic_realm_conjuration_magnificent_feast_1 }
				NOT = { has_ruler_modifier = magic_realm_conjuration_magnificent_feast_2 }
			}
		}
		ai_chance = {
			factor = 50
		}
		
		#Costs
		adm_power = -20
		dip_power = -15
		
		magic_casted_spell = yes
		
		
		add_ruler_modifier = {
			name = magic_realm_conjuration_magnificent_feast_1
			duration = 365
		}
	}
	
	option = {	#level 2 - magnificent mansion
		name = magic_realm_conjuration.1.b
		highlight = yes
		custom_tooltip = tooltip_option_conjuration_2
		trigger = {
			has_ruler_flag = conjuration_2
			AND = {
				NOT = { has_ruler_modifier = magic_realm_conjuration_magnificent_feast_1 }
				NOT = { has_ruler_modifier = magic_realm_conjuration_magnificent_feast_2 }
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				num_of_free_diplomatic_relations  = 0
			}
		}
		
		#Costs
		adm_power = -20
		dip_power = -25
		
		magic_casted_spell = yes
		
		#Effect
		add_ruler_modifier = {
			name = magic_realm_conjuration_magnificent_feast_2
			duration = 365
		}
	}
	
	option = {	#Option B: Go back
		name = magic_realm_conjuration.goback
		ai_chance = {
			factor = 50
		}
		country_event = { id = magic_realm_conjuration.0 days = 0 }
	}
	
}