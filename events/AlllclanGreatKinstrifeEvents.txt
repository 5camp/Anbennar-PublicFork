namespace = allclan

#great kinstrife events

country_event = { #start
	id = allclan.800
	title = allclan.800.t #something went wrong
	desc = allclan.800.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	immediate = {
		set_global_flag = allclan_civil_war

		set_variable = {
			which = MonthsSinceKinstrife
			value = 0
		}

		great_kinstrife_setup = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.800.a #how could this have possibly happened

		add_country_modifier = {
			name = allclan_split
			duration = -1
		}
		swap_non_generic_missions = yes

		add_country_modifier = {
			name = allclan_military_disarray
			duration = -1
		}
		add_country_modifier = {
			name = allclan_looting_bureaucrats
			duration = -1
		}
		add_country_modifier = {
			name = allclan_economic_crisis
			duration = -1
		}
		add_stability = -6
		every_owned_province = {
			limit = {
				any_core_country = {
					culture_group = goblin
					NOT = { tag = I98 }
				}
			}
			if = {
				limit = {
					check_variable = {
						which = AllclanTensionVariable
						value = 0
					}
				}
				add_nationalism = 5
			}
			else_if = {
				limit = {
					check_variable = {
						which = AllclanTensionVariable
						value = 100
					}
				}
				add_nationalism = 5
			}
			else_if = {
				limit = {
					check_variable = {
						which = AllclanTensionVariable
						value = 200
					}
				}
				add_nationalism = 10
			}
			else_if = {
				limit = {
					check_variable = {
						which = AllclanTensionVariable
						value = 300
					}
				}
				add_nationalism = 15
			}
			else_if = {
				limit = {
					check_variable = {
						which = AllclanTensionVariable
						value = 400
					}
				}
				add_nationalism = 20
			}
			else_if = {
				limit = {
					check_variable = {
						which = AllclanTensionVariable
						value = 500
					}
				}
				add_nationalism = 25
			}
		}
		ai_chance = { factor = 25 }
	}
}

country_event = { #end
	id = allclan.899
	title = allclan.899.t #we fixed it
	desc = allclan.899.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.899.a #all it needed was some tape

		add_country_modifier = {
			name = allclan_the_united_allclan
			duration = -1
		}
		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.898
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.897
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.896
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.895
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.894
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.893
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.892
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.891
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.890
	title = allclan.898.t
	desc = allclan.898.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.898.a

		ai_chance = { factor = 25 }
	}
}


country_event = { #event for the AI to declare war
	id = allclan.801
	title = allclan.802.t #we fixed it
	desc = allclan.802.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	#hidden = yes
	
	option = {
		name = allclan.899.a #all it needed was some tape

		declare_war_with_cb = {
			who = I98 
			casus_belli = cb_great_kinstrife
		}
		I98 = {
			country_event = {
				id = allclan.802
				days = 0
			}
		}
		ai_chance = { factor = 25 }
	}
}

country_event = { #event telling you the AI declared war
	id = allclan.802
	title = allclan.802.t #we fixed it
	desc = allclan.802.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.802.a #We will fight!

		if = {
			limit = {
				check_variable = {
					which = AllclanTensionVariable
					value = 500
				}
			}
			add_country_modifier = {
				name = allclan_great_kinstrife_fervor_2
				duration = 1460
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = AllclanTensionVariable
					value = 300
				}
			}
			add_country_modifier = {
				name = allclan_great_kinstrife_fervor_1
				duration = 1460
			}
		}
		else = {
			add_country_modifier = {
				name = allclan_great_kinstrife_fervor_0
				duration = 1460
			}
		}

		ai_chance = { factor = 25 }
	}
}

country_event = { #our newly released country is likely planning to attack us
	id = allclan.803
	title = allclan.803.t
	desc = allclan.803.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.802.a #We will fight!

		ai_chance = { factor = 25 }
	}
}


#orc uprising
country_event = { #orcs rise up and cut off the food supply
	id = allclan.805
	title = allclan.803.t
	desc = allclan.803.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		has_country_modifier = ghettoized_orcs
		check_variable = {
			which = MonthsSinceKinstrife
			value = 48 # 4 years
		}
		serpents_vale_region = {
			has_orcish_majority_trigger = yes
		}
	}


	immediate = {
		add_country_modifier = {
			name = allclan_orc_uprising_food_shortage
			duration = -1
		}
		serpents_vale_region = {
			limit = {
				owned_by = ROOT
				has_orcish_majority_trigger = yes
			}
			spawn_rebels = {
				type = allclan_orc_insurgents_rebels
				size = 300
				win = yes
			}
			spawn_rebels = {
				type = allclan_orc_insurgents_rebels
				size = 150
			}
			spawn_rebels = {
				type = allclan_orc_insurgents_rebels
				size = 150
			}
		}
	}

	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = allclan.805.a #oh no

		swap_non_generic_missions = yes
		ai_chance = { factor = 25 }
	}
}

country_event = { #our newly released country is likely planning to attack us
	id = allclan.806
	title = allclan.803.t
	desc = allclan.803.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.802.a #We will fight!

		ai_chance = { factor = 25 }
	}
}

country_event = { #reserved
	id = allclan.807
	title = allclan.803.t
	desc = allclan.803.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.802.a #We will fight!

		ai_chance = { factor = 25 }
	}
}


#dwarf uprising

country_event = { #dwarf intifada
	id = allclan.811
	title = allclan.811.t
	desc = allclan.811.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		has_country_modifier = ghettoized_dwarves
		any_owned_province = {
			OR = {
				has_dwarven_majority_trigger = yes
				has_dwarven_minority_trigger = yes
			}
		}
	}

	immediate = {
		every_owned_province = {
			limit = {
				OR = {
					has_dwarven_majority_trigger = yes
					has_dwarven_minority_trigger = yes
				}
			}
			add_unrest = 5
			add_devastation = 50
			add_province_modifier = {
				name = allclan_dwarven_uprising
				duration = -1
			}
		}
		set_country_flag = dwarf_intifada
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.802.a #We will fight!



		ai_chance = { factor = 25 }
	}
}

country_event = { #small uprising
	id = allclan.812
	title = allclan.812.t
	desc = allclan.812.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		any_owned_province = {
			OR = {
				has_dwarven_majority_trigger = yes
				has_dwarven_minority_trigger = yes
			}
		}
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.812.a #We will fight!

		random_owned_province = {
			limit = {
				OR = {
					has_dwarven_majority_trigger = yes
					has_dwarven_minority_trigger = yes
				}
			}
			add_unrest = 5
			add_devastation = 100
			add_province_modifier = {
				name = allclan_dwarven_uprising
				duration = -1
			}
			spawn_rebels = {
				type = allclan_dwarf_insurgents_rebels
				size = 50
			}
		}
		ai_chance = { factor = 25 }
	}

	option = {
		name = allclan.812.b #tae the chance to quell the rebellion here

		trigger = {
			any_owned_province = {
				has_province_modifier = allclan_dwarven_uprising
			}
		}
		add_manpower = -15
		random_owned_province = {
			limit = {
				has_province_modifier = allclan_dwarven_uprising
			}
			add_unrest = 5
			add_devastation = 100
			random = {
				chance = 50

				remove_province_modifier = allclan_dwarven_uprising
			}
			spawn_rebels = {
				type = allclan_dwarf_insurgents_rebels
				size = 100
			}
		}
		ai_chance = { factor = 25 }
	}
}

country_event = { #big uprising
	id = allclan.812
	title = allclan.812.t
	desc = allclan.812.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		any_owned_province = {
			has_province_modifier = allclan_dwarven_uprising
		}
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.812.a #We will fight!

		random_owned_province = {
			limit = {
				has_province_modifier = allclan_dwarven_uprising
			}
			add_unrest = 5
			add_devastation = 100
			spawn_rebels = {
				type = allclan_dwarf_insurgents_rebels
				size = 100
			}
			random = {
				chance = 50

				spawn_rebels = {
					type = allclan_dwarf_insurgents_rebels
					size = 50
				}
			}
			random = {
				chance = 50

				spawn_rebels = {
					type = allclan_dwarf_insurgents_rebels
					size = 50
				}
			}
			random = {
				chance = 50

				spawn_rebels = {
					type = allclan_dwarf_insurgents_rebels
					size = 50
				}
			}
		}

		option = {
			name = allclan.812.b #tae the chance to quell the rebellion here
	
			trigger = {
				any_owned_province = {
					has_province_modifier = allclan_dwarven_uprising
				}
			}
			add_manpower = -15
			random_owned_province = {
				limit = {
					has_province_modifier = allclan_dwarven_uprising
				}
				add_unrest = 5
				add_devastation = 100
				random = {
					chance = 75
	
					remove_province_modifier = allclan_dwarven_uprising
				}
				spawn_rebels = {
					type = allclan_dwarf_insurgents_rebels
					size = 100
				}
				spawn_rebels = {
					type = allclan_dwarf_insurgents_rebels
					size = 100
				}
				spawn_rebels = {
					type = allclan_dwarf_insurgents_rebels
					size = 100
				}
			}
			ai_chance = { factor = 25 }
		}

		ai_chance = { factor = 25 }
	}
}

country_event = { #rebels quelled
	id = allclan.814
	title = allclan.814.t
	desc = allclan.814.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		any_owned_province = {
			has_province_modifier = allclan_dwarven_uprising
		}
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.814.a #We will fight!

		random_owned_province = {
			limit = {
				has_province_modifier = allclan_dwarven_uprising
			}
			remove_province_modifier = allclan_dwarven_uprising
		}
		ai_chance = { factor = 25 }
	}
}

#glf uprising

country_event = { #our newly released country is likely planning to attack us
	id = allclan.821
	title = allclan.803.t
	desc = allclan.803.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		#has_reform = nezkaru_council_reform
		always = yes
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.802.a #We will fight!

		ai_chance = { factor = 25 }
	}
}

#bad shit from tension

country_event = { #mass agitation
	id = allclan.851
	title = allclan.851.t
	desc = allclan.851.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		check_variable = {
			which = AllclanTensionVariable
			value = 400
		}
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.851.a #We will fight!

		every_owned_province = {
			add_nationalism = 5
		}
		ai_chance = { factor = 25 }
	}
}

country_event = { #rebels in your capital slums
	id = allclan.852
	title = allclan.852.t
	desc = allclan.852.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		check_variable = {
			which = AllclanTensionVariable
			value = 200
		}
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.851.a #We will fight!

		capital_scope = {
			spawn_rebels = {
				type = anti_tax
				size = 100
			}
		}
		ai_chance = { factor = 25 }
	}
}

country_event = { #politicial violence on the rise
	id = allclan.853
	title = allclan.853.t
	desc = allclan.853.d
	picture = TRADEGOODS_eventPicture
	
	major = no

	trigger = {
		check_variable = {
			which = AllclanTensionVariable
			value = 100
		}
	}

	is_triggered_only = yes
	
	option = {
		name = allclan.851.a #We will fight!

		random_owned_province = {
			limit = {
				nationalism = 1
				culture = cave_goblin
			}
			add_nationalism = 5
			add_devastation = 10
		}
		ai_chance = { factor = 25 }
	}
}