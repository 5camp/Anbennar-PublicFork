namespace = diggy
### Events to dig
#Done
country_event = {
	id = diggy.1
	title = diggy.1.t
	desc = diggy.1.d
	picture = INCA_CITY_eventPicture
	
	mean_time_to_happen = {
		years = 15
		
		modifier = {
			factor = 0.9
			has_country_modifier = dig_manpower
		}
		modifier = {
			factor = 0.9
			has_country_modifier = dig_prod
		}
		modifier = {
			factor = 0.8
			has_country_modifier = dig_explosive
		}
		
		modifier = {
			factor = 1.1
			has_country_flag = dig_culture
		}
		
		modifier = {
			factor = 0.8
			has_country_modifier = dig_through
		}
		
		modifier = {
			factor = 1.2
			has_country_modifier = not_dig_through
		}
		modifier = {
			factor = 0.8
			capital_scope = {
				superregion = west_serpentspine_superregion
				has_terrain = dwarven_hold
			}
		}
		modifier = {
			factor = 0.95
			capital_scope = {
				has_province_modifier = easy_rock
			}
		}
		
		modifier = {
			factor = 2.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = {
			has_terrain = dwarven_hold
			OR = {
				has_province_modifier = dig_1
				has_province_modifier = dig_2
				has_province_modifier = dig_3
				has_province_modifier = dig_4
				has_province_modifier = dig_5
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
				has_province_modifier = dig_10
			}
		}
	}
	
	option = {
        name = diggy.1.a
        ai_chance = { factor = 100 }
		
		if = {
			limit = { capital_scope = { has_province_modifier = dig_1 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_2
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_1 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_2 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_3
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_2 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_3 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_4
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_3 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_4 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_5
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_4 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_5 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_6
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_5 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_6 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_7
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_6 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_7 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_8
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_7 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_8 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_9
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_8 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_9 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_10
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_9 }
			}
		}
		else_if = {
			limit = { capital_scope = { has_province_modifier = dig_10 } }
			capital_scope = {
				add_permanent_province_modifier = {
					name = dig_11
					duration = -1
				}
				hidden_effect = { remove_province_modifier = dig_10 }
			}
		}
		hidden_effect = {
			clr_country_flag = is_digging
			clr_country_flag = dig_prod
			clr_country_flag = dig_manpower
			clr_country_flag = dig_culture
			clr_country_flag = dig_explosive
		}
		remove_country_modifier = dig_prod
		remove_country_modifier = dig_manpower
		remove_country_modifier = dig_explosive
		capital_scope = { 
			remove_province_modifier = dig_deeper
			remove_province_modifier = dig_deeper_ai
		}
	}
}

##Event dig production
country_event = {
	id = diggy.2
	title = diggy.2.t
	desc = diggy.2.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_prod }
	}
	
	immediate = {
		set_country_flag = dig_prod
	}
	
	option = {
        name = diggy.2.a
        ai_chance = { factor = 100 }
		add_adm_power = -50
		add_country_modifier = {
			name = dig_prod
			duration = -1
		}
	}
	
	option = {
		name = diggy.2.b
		ai_chance = { factor = 100 }
	}
}

##Do Cultural shit while dig
country_event = {
	id = diggy.3
	title = diggy.3.t
	desc = diggy.3.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 8
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_culture }
	}
	
	immediate = {
		set_country_flag = dig_culture
	}
	
	option = {
        name = diggy.3.a
        ai_chance = { factor = 90 }
		add_adm_power = -80
		add_dip_power = -35
		add_mil_power = -25
		add_prestige = 20
		random = {
			chance = 30
			add_stability = 1
		}
	}
	
	option = {
		name = diggy.3.b
		ai_chance = { factor = 10 }
		add_prestige = -15
		random = {
			chance = 15
			add_stability = -1
		}
		random = {
			chance = 5
			add_country_modifier = {
				name = dig_not_culture
				duration = 1460
			}
		}
	}
}

##Use the army
country_event = {
	id = diggy.4
	title = diggy.4.t
	desc = diggy.4.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_manpower }
	}
	
	immediate = {
		set_country_flag = dig_manpower
	}
	
	option = {
        name = diggy.4.a
        ai_chance = { factor = 100 }
		add_mil_power = -50
		add_country_modifier = {
			name = dig_manpower
			duration = -1
		}
	}
	
	option = {
		name = diggy.4.b
		ai_chance = { factor = 100 }
	}
}

### Dig through rock
#Apatite 5Mohs
country_event = {
	id = diggy.5
	title = diggy.5.t
	desc = diggy.5.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = dig_apatite }
		capital_scope = {
			OR = {
				has_province_modifier = dig_3
				has_province_modifier = dig_4
				has_province_modifier = dig_5
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_apatite
	}
	#Dig through
	option = {
        name = diggy.5.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { ai = no }
			add_years_of_income = -0.5
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
	}
	#Make detour
	option = {
		name = diggy.5.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability = 1
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
	}
}

#orthoclase 6Mohs
country_event = {
	id = diggy.6
	title = diggy.6.t
	desc = diggy.6.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_apatite
		NOT = { has_country_flag = dig_ortho }
		capital_scope = {
			OR = {
				has_province_modifier = dig_4
				has_province_modifier = dig_5
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_ortho
	}
	#Dig through
	option = {
        name = diggy.6.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { ai = no }
			add_years_of_income = -1.5
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
	}
	#Make detour
	option = {
		name = diggy.6.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability = 1
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
	}
}

#(iron) Pyrite 6-7Mohs
country_event = {
	id = diggy.7
	title = diggy.7.t
	desc = diggy.7.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_ortho
		NOT = { has_country_flag = dig_pyrite }
		capital_scope = {
			OR = {
				has_province_modifier = dig_6
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_pyrite
	}
	#Dig through
	option = {
        name = diggy.7.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { ai = no }
			add_years_of_income = -2.5
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
	}
	#Make detour
	option = {
		name = diggy.7.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability = 1
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
	}
}

#Spinel 7.5-8Mohs
country_event = {
	id = diggy.8
	title = diggy.8.t
	desc = diggy.8.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_pyrite
		NOT = { has_country_flag = dig_spinel }
		capital_scope = {
			OR = {
				has_province_modifier = dig_7
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_spinel
	}
	#Dig through
	option = {
        name = diggy.8.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { ai = no }
			add_years_of_income = -3.75
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
	}
	#Make detour
	option = {
		name = diggy.8.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability = 1
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
	}
}

#Corundum 9Mohs
country_event = {
	id = diggy.9
	title = diggy.9.t
	desc = diggy.9.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_spinel
		NOT = { has_country_flag = dig_corundum }
		capital_scope = {
			OR = {
				has_province_modifier = dig_8
				has_province_modifier = dig_9
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_corundum
	}
	#Dig through
	option = {
        name = diggy.9.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { ai = no }
			add_years_of_income = -4
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
	}
	#Make detour
	option = {
		name = diggy.9.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability = 1
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
	}
}

#Carbonado 10Mohs
country_event = {
	id = diggy.10
	title = diggy.10.t
	desc = diggy.10.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_flag = dig_corundum
		NOT = { has_country_flag = dig_carbonado }
		capital_scope = {
			OR = {
				has_province_modifier = dig_9
				has_province_modifier = dig_10
			}
		}
	}
	
	immediate = {
		set_country_flag = dig_carbonado
	}
	#Dig through
	option = {
        name = diggy.10.a
        ai_chance = { factor = 100 }
		custom_tooltip = dig_through_tooltip
		add_adm_power = -50
		if = {
			limit = { ai = no }
			add_years_of_income = -5
		}
		hidden_effect = {
			set_country_flag = dig_through
			clr_country_flag = not_dig_through
		}
	}
	#Make detour
	option = {
		name = diggy.10.b
		ai_chance = { factor = 0 }
		custom_tooltip = not_dig_through_tooltip
		add_stability = 1
		hidden_effect = {
			set_country_flag = not_dig_through
			clr_country_flag = dig_through
		}
	}
}

#Using explosive
country_event = {
	id = diggy.11
	title = diggy.11.t
	desc = diggy.11.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_country_flag = is_digging
		is_year = 1500
		NOT = { has_country_flag = dig_explosive }
	}
	
	immediate = {
		set_country_flag = dig_explosive
	}
	option = {
        name = diggy.11.a
        ai_chance = { factor = 100 }
		add_adm_power = -35
		add_dip_power = -15
		add_country_modifier = {
			name = dig_explosive
			duration = -1
		}
	}
	
	option = {
		name = diggy.11.b
		ai_chance = { factor = 100 }
	}
}

### Hold Restoration
country_event = {
	id = diggy.12
	title = diggy.12.t
	desc = diggy.12.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.001
			NOT = { any_owned_province = { has_province_modifier = hold_being_restored } }
		}
	}
	
	trigger = {
		has_country_flag = restoring_hold
	}
	
	immediate = {
		clr_country_flag = restoring_hold
	}
	option = {
        name = diggy.12.a
        ai_chance = { factor = 100 }
		trigger = { any_owned_province = { has_province_modifier = hold_being_restored } }
		add_prestige = 35
		custom_tooltip = hold_restored_tooltip
		hidden_effect = {
			random_owned_province = {
				limit = { has_province_modifier = hold_being_restored }
				if = {
					limit = { 
						development = 3
						NOT = { development = 30 }
					}
					random_list = {
						66 = {
							add_permanent_province_modifier = {
								name = dig_1
								duration = -1
							}
						}
						33 = {
							add_permanent_province_modifier = {
								name = dig_2
								duration = -1
							}
						}
					}
					remove_province_modifier = ruined_hold
					remove_province_modifier = hold_being_restored
				}
				else_if = {
					limit = { 
						development = 30
						NOT = { development = 60 }
					}
					random_list = {
						50 = {
							add_permanent_province_modifier = {
								name = dig_2
								duration = -1
							}
						}
						30 = {
							add_permanent_province_modifier = {
								name = dig_3
								duration = -1
							}
						}
						20 = {
							add_permanent_province_modifier = {
								name = dig_4
								duration = -1
							}
						}
					}
					remove_province_modifier = ruined_hold
					remove_province_modifier = hold_being_restored
				}
				else_if = {
					limit = { 
						development = 60
						NOT = { development = 90 }
					}
					random_list = {
						50 = {
							add_permanent_province_modifier = {
								name = dig_4
								duration = -1
							}
						}
						30 = {
							add_permanent_province_modifier = {
								name = dig_5
								duration = -1
							}
						}
						20 = {
							add_permanent_province_modifier = {
								name = dig_6
								duration = -1
							}
						}
					}
					remove_province_modifier = ruined_hold
					remove_province_modifier = hold_being_restored
				}
				else_if = {
					limit = { 
						development = 90
					}
					random_list = {
						50 = {
							add_permanent_province_modifier = {
								name = dig_6
								duration = -1
							}
						}
						30 = {
							add_permanent_province_modifier = {
								name = dig_7
								duration = -1
							}
						}
						20 = {
							add_permanent_province_modifier = {
								name = dig_8
								duration = -1
							}
						}
					}
					remove_province_modifier = ruined_hold
					remove_province_modifier = hold_being_restored
				}
			}
		}
	}
	option = {
		name = diggy.12.b
		trigger = { NOT = { any_owned_province = { has_province_modifier = hold_being_restored } } }
		ai_chance = { factor = 100 }
		add_prestige = -30
	}
}

#Capturing a Hold
province_event = {
	id = diggy.13
	title = diggy.13.t
	desc = diggy.13.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	
	
	trigger = {
		has_terrain = dwarven_hold
		NOT = { has_province_modifier = ruined_hold }
		NOT = { has_province_modifier = infested_hold }
		NOT = { is_core = ROOT }
	}
	
	option = {
        name = diggy.13.a
        ai_chance = { factor = 100 }
		remove_province_modifier = dig_1
		remove_province_modifier = dig_2
		remove_province_modifier = dig_3
		remove_province_modifier = dig_4
		remove_province_modifier = dig_5
		remove_province_modifier = dig_6
		remove_province_modifier = dig_7
		remove_province_modifier = dig_8
		remove_province_modifier = dig_9
		remove_province_modifier = dig_10
		remove_province_modifier = dig_11
		add_base_tax = -5
		add_base_manpower = -5
		add_base_production = -5
		add_permanent_province_modifier = {
			name = ruined_hold
			duration = -1
		}
	}
}

###Flavours Events
#Gaz an explosion
country_event = {
	id = diggy.14
	title = diggy.14.t
	desc = diggy.14.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		has_country_modifier = dig_explosive
	}
	
	option = {
        name = diggy.14.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_base_manpower = -1
			add_base_production = -1
			add_base_tax = -1
			random = {
				chance = 50
				
				add_base_manpower = -1
				add_base_production = -1
				add_base_tax = -1
			}
			
			random = {
				chance = 5
				
				add_base_manpower = -1
				add_base_production = -1
				add_base_tax = -1
			}
		}
	}
}
##Lead to Fallen Dwarf disaster, found treasure
country_event = {
	id = diggy.15
	title = diggy.15.t
	desc = diggy.15.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 40
		
		modifier = {
			factor = 0.9
			
			capital_scope = { has_province_modifier = dig_5 }
		}
		
		modifier = {
			factor = 0.8
			
			capital_scope = { has_province_modifier = dig_6 }
		}
		
		modifier = {
			factor = 0.7
			
			capital_scope = { has_province_modifier = dig_7 }
		}
		
		modifier = {
			factor = 0.6
			
			capital_scope = { has_province_modifier = dig_8 }
		}
		
		modifier = {
			factor = 0.5
			
			capital_scope = { has_province_modifier = dig_9 }
		}
		
		modifier = {
			factor = 0.4
			
			capital_scope = { has_province_modifier = dig_10 }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { has_country_flag = fallen_treasure }
	}
	
	#Sell it
	option = {
        name = diggy.15.a
        ai_chance = { factor = 100 }
		add_years_of_income = 1
		hidden_effect = {
			random = { chance = 50 set_country_flag = fallen_treasure }
		}
	}
	#Create museum
	option = {
        name = diggy.15.b
        ai_chance = { factor = 100 }
		add_prestige = 30
		hidden_effect = {
			random = { chance = 50 set_country_flag = fallen_treasure }
		}
	}
	#dig deeper in this region
	option = {
        name = diggy.15.c
        ai_chance = { factor = 100 }
		add_years_of_income = 0.5
		add_prestige = 15
		hidden_effect = { set_country_flag = fallen_treasure }
	}
	#Do nothing
	option = {
        name = diggy.15.e
        ai_chance = { factor = 100 }
		add_legitimacy = 5
		add_prestige = -10
	}
}

#Discover old Hold
country_event = {
	id = diggy.16
	title = diggy.16.t
	desc = diggy.16.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 15
	}
	
	trigger = {
		has_country_flag = fallen_treasure
	}
	
	#Such a great discovery, we need to explore it
	option = {
        name = diggy.16.a
        ai_chance = { factor = 90 }
		add_prestige = 50
		add_legitimacy = 10
		capital_scope = {
			add_permanent_province_modifier = {
				name = old_hold
				duration = -1
			}
		}
	}
	#Seal it, i don't want to hear about it ever again.
	option = {
		name = diggy.16.b
        ai_chance = { factor = 10 }
		highlight = yes
		trigger = { ruler_age = 150 }
		add_prestige = -10
		random = {
			chance = 75
			add_stability = -1
		}
		hidden_effect = { clr_country_flag = fallen_treasure }
	}
}

#Cave Collapse
country_event = {
	id = diggy.17
	title = diggy.17.t
	desc = diggy.17.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
	}
	
	option = {
        name = diggy.17.a
        ai_chance = { factor = 90 }
		add_prestige = -5
		capital_scope = {
			random = {
				chance = 50
				add_base_manpower = -1
			}
			random = {
				chance = 50
				add_base_tax = -1
			}
			random = {
				chance = 50
				add_base_production = -1
			}
		}
	}
}
##Easily diggable rock
country_event = {
	id = diggy.18
	title = diggy.18.t
	desc = diggy.18.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 20
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = easy_rock } }
		NOT = { capital_scope = { has_province_modifier = hard_rock } }
	}
	
	option = {
        name = diggy.17.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_province_modifier = {
				name = easy_rock
				duration = 1800
			}
		}
	}
}

##Hard rock to dig
country_event = {
	id = diggy.19
	title = diggy.19.t
	desc = diggy.19.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 30
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = easy_rock } }
		NOT = { capital_scope = { has_province_modifier = hard_rock } }
	}
	
	option = {
        name = diggy.19.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_province_modifier = {
				name = hard_rock
				duration = 1800
			}
		}
	}
}

##Discover Damestear
country_event = {
	id = diggy.20
	title = diggy.20.t
	desc = diggy.20.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 150
		modifier = {
			factor = 0.9
			capital_scope = { has_province_modifier = dig_4 }
		}
		modifier = {
			factor = 0.8
			capital_scope = { has_province_modifier = dig_5 }
		}
		modifier = {
			factor = 0.7
			capital_scope = { has_province_modifier = dig_6 }
		}
		modifier = {
			factor = 0.5
			capital_scope = { has_province_modifier = dig_7 }
		}
		modifier = {
			factor = 0.4
			capital_scope = { has_province_modifier = dig_8 }
		}
		modifier = {
			factor = 0.4
			capital_scope = { has_province_modifier = dig_9 }
		}
		modifier = {
			factor = 0.35
			capital_scope = { has_province_modifier = dig_10 }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { trade_goods = damestear } }
	}
	
	#Exploit it
	option = {
        name = diggy.20.a
        ai_chance = { factor = 50 }
		add_prestige = 15
		capital_scope = {
			hidden_effect = { set_province_flag = permanent_damestear }
			change_trade_goods = damestear
			remove_province_modifier = hold_city
			remove_province_modifier = hold_artisan
			remove_province_modifier = hold_farm
			random = {
				chance = 50
				add_permanent_province_modifier = {
					name = huge_damestear
					duration = -1
				}
			}
		}
	}
	#Leave it
	option = {
        name = diggy.20.a
        ai_chance = { factor = 50 }
		add_prestige = -15
		random = {
			chance = 75
			add_stability = -1
		}
	}
}

##Damestear Explosion
country_event = {
	id = diggy.21
	title = diggy.21.t
	desc = diggy.21.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 150
		modifier = {
			factor = 0.5
			capital_scope = { has_province_modifier = huge_damestear }
		}
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		capital_scope = { 
			trade_goods = damestear 
			has_terrain = dwarven_hold 
			development = 80
		}
	}
	
	#Such horror...
	option = {
        name = diggy.21.a
        ai_chance = { factor = 100 }
		add_prestige = -10
		add_legitimacy = -10
		add_stability = -2
		capital_scope = {
			add_base_manpower = -3
			add_base_tax = -3
			add_base_production = -3
			change_trade_goods = unknown
			if = {
				limit = { has_province_modifier = dig_6 }
				remove_province_modifier = dig_6
				add_permanent_province_modifier = {
					name = dig_5
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_7 }
				remove_province_modifier = dig_7
				add_permanent_province_modifier = {
					name = dig_6
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_8 }
				remove_province_modifier = dig_8
				add_permanent_province_modifier = {
					name = dig_7
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_9 }
				remove_province_modifier = dig_9
				add_permanent_province_modifier = {
					name = dig_8
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_10 }
				remove_province_modifier = dig_10
				add_permanent_province_modifier = {
					name = dig_9
					duration = -1
				}
			}
			else_if = {
				limit = { has_province_modifier = dig_11 }
				remove_province_modifier = dig_11
				add_permanent_province_modifier = {
					name = dig_10
					duration = -1
				}
			}
		}
	}
}

##Cave Goblin cavern found
country_event = {
	id = diggy.22
	title = diggy.22.t
	desc = diggy.22.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 25
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
	}
	
	trigger = {
		NOT = { culture_group = goblin }
		has_country_flag = is_digging
		capital_scope = {  has_terrain = dwarven_hold  }
	}
	
	#Prepare yourself
	option = {
        name = diggy.22.a
        ai_chance = { factor = 100 }
		capital_scope = {
			spawn_rebels = {
				type = cave_goblin_rebel
				culture = cave_goblin
				size = 1.5
			}
		}
	}
}

##Cave Orc cavern found
country_event = {
	id = diggy.23
	title = diggy.23.t
	desc = diggy.23.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 30
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { culture = black_orc }
		capital_scope = {  has_terrain = dwarven_hold  }
	}
	
	#Prepare yourself
	option = {
        name = diggy.23.a
        ai_chance = { factor = 100 }
		capital_scope = {
			spawn_rebels = {
				type = cave_orc_rebel
				culture = black_orc
				size = 1
			}
		}
	}
}

#Beautiful cavern
country_event = {
	id = diggy.24
	title = diggy.24.t
	desc = diggy.24.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 35
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		NOT = { capital_scope = { has_province_modifier = beautiful_cave } }
	}
	
	#Sell everything
	option = {
        name = diggy.24.a
        ai_chance = { factor = 10 }
		add_prestige = -5
		add_legitimacy = -5
		add_years_of_income = 2
	}
	
	#Make it a touristic shit
	option = {
        name = diggy.24.b
        ai_chance = { factor = 90 }
		add_prestige = 5
		capital_scope = {
			add_permanent_province_modifier = {
				name = beautiful_cave
				duration = -1
			}
		}
	}
}

#Cavern benefit
country_event = {
	id = diggy.25
	title = diggy.25.t
	desc = diggy.25.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 0.9
			capital_scope = { superregion = west_serpentspine_superregion }
		}
	}
	
	trigger = {
		capital_scope = { has_province_modifier = beautiful_cave }
	}
	
	#Profit
	option = {
        name = diggy.25.a
        ai_chance = { factor = 1 }
		add_prestige = 5
		add_legitimacy = 5
		add_years_of_income = 0.2
	}
	
	#Leader has a genius spark, partially creating fear in the nation
	option = {
        name = diggy.25.b
        ai_chance = { factor = 100 }
		highlight = yes
		trigger = {
			OR = {
				NOT = { adm = 1 }
				NOT = { dip = 1 }
				NOT = { mil = 1 }
			}
		}
		custom_tooltip = spark_tooltip
		random_list = {
			50 = { add_legitimacy = 50 }
			50 = { add_legitimacy = -50 }
		}
		change_adm = 6
		change_mil = 6
		change_dip = 6
	}
}

#Cave collapse
country_event = {
	id = diggy.26
	title = diggy.26.t
	desc = diggy.26.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 30
		
		modifier = {
			factor = 0.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_country_flag = is_digging
		capital_scope = { has_province_modifier = beautiful_cave }
	}
	
	#Profit
	option = {
        name = diggy.26.a
        ai_chance = { factor = 100 }
		capital_scope = {
			random = {
				chance = 50
				add_base_manpower = -1
			}
			random = {
				chance = 50
				add_base_tax = -1
			}
			random = {
				chance = 50
				add_base_production = -1
			}
			add_devastation = 15
		}
		random_list = {
			10 = { add_stability = -2 }
			30 = { }
			60 = { add_stability = -1 }
		}
	}
}
###Hold Specialization
#Hold Specialization
province_event = {
	id = diggy.27
	title = diggy.27.t
	desc = diggy.27.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 10
	}
	
	trigger = {
		has_terrain = dwarven_hold
		OR = {
			has_province_modifier = dig_5
			has_province_modifier = dig_6
			has_province_modifier = dig_7
			has_province_modifier = dig_8
			has_province_modifier = dig_9
			has_province_modifier = dig_10
		}
		NOT = { has_province_flag = specialized_hold }
	}
	
	#Foundry
	option = {
        name = diggy.27.a
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = iron
				trade_goods = damestear
				trade_goods = mithril
				trade_goods = copper
			}
		}
		add_permanent_province_modifier = {
			name = hold_foundry
			duration = -1
		}
		hidden_effect = { set_province_flag = specialized_hold }
	}
	#city hub
	option = {
        name = diggy.27.b
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = glass
				trade_goods = cloth
				trade_goods = gold
				trade_goods = paper
				trade_goods = wine
				trade_goods = precursor_relics
				trade_goods = gems
			}
		}
		add_permanent_province_modifier = {
			name = hold_city
			duration = -1
		}
		hidden_effect = { set_province_flag = specialized_hold }
	}
	#Artisan District
	option = {
        name = diggy.27.c
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = gems
				trade_goods = wine
				trade_goods = gold
				trade_goods = mithril
			}
		}
		add_permanent_province_modifier = {
			name = hold_artisan
			duration = -1
		}
		hidden_effect = { set_province_flag = specialized_hold }
	}
	#Vertical Farm
	option = {
        name = diggy.27.e
        ai_chance = { factor = 100 }
		trigger = {
			OR = {
				trade_goods = fungi
				trade_goods = livestock
			}
		}
		add_permanent_province_modifier = {
			name = hold_farm
			duration = -1
		}
		hidden_effect = { set_province_flag = specialized_hold }
	}
}

#Orc Warband
country_event = {
	id = diggy.28
	title = diggy.28.t
	desc = diggy.28.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 30
	}
	
	trigger = {
		any_owned_province = {
			superregion = west_serpentspine_superregion
		}
		NOT = { is_year = 1600 }
		NOT = { culture = black_orc }
	}
	
	#Profit
	option = {
        name = diggy.28.a
        ai_chance = { factor = 100 }
		custom_tooltip = orc_warband_tooltip
		hidden_effect = { country_event = { id = diggy.29 days = 150 random = 100 } }
	}
}

country_event = {
	id = diggy.29
	title = diggy.29.t
	desc = diggy.29.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		any_owned_province = {
			has_empty_adjacent_province = yes
			superregion = west_serpentspine_superregion
			NOT = { has_terrain = dwarven_hold }
		}
	}
	
	option = {
        name = diggy.29.a
        ai_chance = { factor = 100 }
		hidden_effect = {
			random_owned_province = {
				limit = {
					superregion = west_serpentspine_superregion
					has_empty_adjacent_province = yes
					NOT = { has_terrain = dwarven_hold }
				}
				spawn_rebels = {
					type = cave_orc_rebel
					culture = black_orc
					size = 5
				}
			}
		}
	}
}

#Serpentsmite
province_event = {
	id = diggy.30
	title = diggy.30.t
	desc = diggy.30.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 75
	}
	
	trigger = {
		has_terrain = dwarven_hold
		has_province_modifier = dig_deeper
		NOT = { has_province_flag = serpentsmited }
		continent = serpentspine
	}
	
	immediate = {
		add_base_manpower = -3
		add_base_tax = -3
		add_base_production = -3
		change_trade_goods = unknown
		if = {
			limit = { has_province_modifier = dig_6 }
			remove_province_modifier = dig_6
			add_permanent_province_modifier = {
				name = dig_5
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_7 }
			remove_province_modifier = dig_7
			add_permanent_province_modifier = {
				name = dig_6
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_8 }
			remove_province_modifier = dig_8
			add_permanent_province_modifier = {
				name = dig_7
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_9 }
			remove_province_modifier = dig_9
			add_permanent_province_modifier = {
				name = dig_8
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_10 }
			remove_province_modifier = dig_10
			add_permanent_province_modifier = {
				name = dig_9
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = dig_11 }
			remove_province_modifier = dig_11
			add_permanent_province_modifier = {
				name = dig_10
				duration = -1
			}
		}
		set_province_flag = serpentsmited
	}
	
	#Untaped Ore
	option = {
        name = diggy.30.a
        ai_chance = { factor = 90 }
		add_stability = -1
		random_list = {
			20 = { change_trade_goods = mithril }
			35 = { change_trade_goods = iron }
			45 = { change_trade_goods = copper }
		}
		add_permanent_province_modifier = {
			name = pristine_deposit
			duration = 29200
		}
		remove_province_modifier = hold_city
		remove_province_modifier = hold_artisan
		remove_province_modifier = hold_farm
	}
	
	option = {
        name = diggy.30.b
        ai_chance = { factor = 10 }
		add_stability = 1
		change_trade_goods = unknown
	}
}

#A Hold develop
province_event = {
	id = diggy.31
	title = diggy.31.t
	desc = diggy.31.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 100
		
		modifier = {
			factor = 0.9
			superregion = west_serpentspine_superregion
		}
		modifier = {
			factor = 1.5
			NOT = { has_country_modifier = dwarven_administration }
		}
	}
	
	trigger = {
		has_terrain = dwarven_hold
		culture_group = dwarven
		culture_group = kobold
		culture_group = goblin
		is_capital = no
		OR = {
			AND = { development = 40 has_province_modifier = dig_1 }
			AND = { development = 50  has_province_modifier = dig_2 }
			AND = { development = 60  has_province_modifier = dig_3 }
			AND = { development = 70  has_province_modifier = dig_4 }
			AND = { development = 80  has_province_modifier = dig_5 }
			AND = { development = 90  has_province_modifier = dig_6 }
			AND = { development = 100  has_province_modifier = dig_7 }
			AND = { development = 110  has_province_modifier = dig_8 }
			AND = { development = 120  has_province_modifier = dig_9 }
		}
	}
	
	#Developing Hold
	option = {
        name = diggy.31.a
        ai_chance = { factor = 100 }
		add_prestige = 10
		if = {
			limit = { has_province_modifier = dig_1 }
			add_permanent_province_modifier = {
				name = dig_2
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_1 }
		}
		else_if = {
			limit = { has_province_modifier = dig_2 }
			add_permanent_province_modifier = {
				name = dig_3
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_2 }
		}
		else_if = {
			limit = { has_province_modifier = dig_3 }
			add_permanent_province_modifier = {
				name = dig_4
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_3 }
		}
		else_if = {
			limit = { has_province_modifier = dig_4 }
			add_permanent_province_modifier = {
				name = dig_5
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_4 }
		}
		else_if = {
			limit = { has_province_modifier = dig_5 }
			add_permanent_province_modifier = {
				name = dig_6
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_5 }
		}
		else_if = {
			limit = { has_province_modifier = dig_7 }
			add_permanent_province_modifier = {
				name = dig_8
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_7 }
		}
		else_if = {
			limit = { has_province_modifier = dig_8 }
			add_permanent_province_modifier = {
				name = dig_9
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_8 }
		}
		else_if = {
			limit = { has_province_modifier = dig_9 }
			add_permanent_province_modifier = {
				name = dig_10
				duration = -1
			}
			hidden_effect = { remove_province_modifier = dig_9 }
		}
	}
}





#####################################################################
##### AI helps & Debug Event
#####################################################################
country_event = {
	id = diggy.100
	title = diggy.100.t
	desc = diggy.100.d
	picture = ARTWORK_eventPicture
	
	mean_time_to_happen = {
		years = 5
	}
	
	hidden = yes
	
	trigger = {
		ai = yes
		has_country_modifier = dwarven_administration
		OR = {
			capital_scope = { NOT = { development = 40 } has_province_modifier = dig_1 }
			capital_scope = { NOT = { development = 50 } has_province_modifier = dig_2 }
			capital_scope = { NOT = { development = 60 } has_province_modifier = dig_3 }
			capital_scope = { NOT = { development = 70 } has_province_modifier = dig_4 }
			capital_scope = { NOT = { development = 80 } has_province_modifier = dig_5 }
			capital_scope = { NOT = { development = 90 } has_province_modifier = dig_6 }
			capital_scope = { NOT = { development = 100 } has_province_modifier = dig_7 }
			capital_scope = { NOT = { development = 110 } has_province_modifier = dig_8 }
			capital_scope = { NOT = { development = 120 } has_province_modifier = dig_9 }
		}
	}
	
	#Profit
	option = {
        name = diggy.100.a
        ai_chance = { factor = 100 }
		capital_scope = {
			add_base_manpower = 1
			add_base_tax = 1
			add_base_production = 1
		}
	}
}
