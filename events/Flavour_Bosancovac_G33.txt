
namespace = flavour_bosancovac

country_event = {
	id = flavour_bosancovac.000
	title = flavour_bosancovac.000.t
	desc = flavour_bosancovac.000.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		NOT = { has_country_flag = bosancovac_no_notification }
	}

	option = {
		name = flavour_bosancovac.1.a
		add_mercantilism = 1
		add_opinion = {
			who = FROM
			modifier = g33_accepted_port
		}
		if = {
			limit = { FROM = { is_subject_of = ROOT } }
			FROM = { add_liberty_desire = -5 }
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = flavour_bosancovac.1.b
		custom_tooltip = "You will stop receiving notifications about this."
		hidden_effect = { set_country_flag = bosancovac_no_notification }
		ai_chance = {
			factor = 0
		}
	}
}

country_event = {
	id = flavour_bosancovac.001
	title = flavour_bosancovac.001.t
	desc = flavour_bosancovac.001.d
	picture = CAVE_eventPicture

	is_triggered_only = yes
	hidden = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		has_country_flag = bosancovac_no_notification
	}

	option = {
		name = flavour_bosancovac.001.a
		add_mercantilism = 1
		add_opinion = {
			who = FROM
			modifier = g33_accepted_port
		}
		if = {
			limit = { FROM = { is_subject_of = ROOT } }
			FROM = { add_liberty_desire = -5 }
		}
		ai_chance = {
			factor = 100
		}
	}
}

#Bosancovac Overloaded
country_event = {
	id = flavour_bosancovac.010
	title = flavour_bosancovac.010.t
	desc = flavour_bosancovac.010.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		NOT = { has_country_flag = bosancovac_no_overload }
		1165 = {
			OR = {
				AND = {
					development = 11
					NOT = { has_province_modifier = bosancovac_foundations_1 }
				}
				AND = {
					development = 16
					NOT = { has_province_modifier = bosancovac_foundations_2 }
				}
				AND = {
					development = 21
					NOT = { has_province_modifier = bosancovac_foundations_3 }
				}
				AND = {
					development = 31
					NOT = { has_province_modifier = bosancovac_foundations_4 }
				}
				development = 41
			}
		}
	}

	option = {
		name = flavour_bosancovac.010.a
		add_stability = -1
		1165 = {
			random_list = {
				60 = {

				}
				10 = {
					add_base_tax = -1
				}
				10 = {
					add_base_production = -1
				}
				10 = {
					add_base_manpower = -1
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

#Foundation completed
country_event = {
	id = flavour_bosancovac.011
	title = flavour_bosancovac.011.t
	desc = flavour_bosancovac.011.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		1165 = { NOT = { has_province_modifier = bosancovac_building_project } }
	}

	option = {
		name = flavour_bosancovac.011.a
		add_stability_or_adm_power = yes
		1165 = {
			if = {
				limit = { has_province_modifier = bosancovac_foundations_1 }
				remove_province_modifier = bosancovac_foundations_1
				add_province_modifier = {
					name = bosancovac_foundations_2
					duration = -1
				}
				custom_tooltip = bosancovac_foundation_2_tt
			}
			else_if = {
				limit = { has_province_modifier = bosancovac_foundations_2 }
				remove_province_modifier = bosancovac_foundations_1
				add_province_modifier = {
					name = bosancovac_foundations_3
					duration = -1
				}
				custom_tooltip = bosancovac_foundation_3_tt
			}
			else_if = {
				limit = { has_province_modifier = bosancovac_foundations_3 }
				remove_province_modifier = bosancovac_foundations_1
				add_province_modifier = {
					name = bosancovac_foundations_4
					duration = -1
				}
				custom_tooltip = bosancovac_foundation_4_tt
			}
			else = {
				add_province_modifier = {
					name = bosancovac_foundations_1
					duration = -1
				}
				custom_tooltip = bosancovac_foundation_1_tt
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

#Water Serpents Attack
country_event = {
	id = flavour_bosancovac.012
	title = flavour_bosancovac.012.t
	desc = flavour_bosancovac.012.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			OR = {
				has_personal_deity = ynn_zodiac_deity_6		#Giant Beaver
				has_personal_deity = ynn_zodiac_deity_11	#Poskawa Whale
				has_country_modifier = ynn_bad_stuir_balia
			}
		}
	}

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		1165 = { has_province_modifier = bosancovac_building_project }
	}

	option = {
		name = flavour_bosancovac.012.a
		add_stability = -1
		1165 = { add_devastation = 30 }
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = flavour_bosancovac.012.b
		add_mil_power = -50
		add_manpower = -1.5
		ai_chance = {
			factor = 100
		}
	}
}

#Heavy Rains
country_event = {
	id = flavour_bosancovac.013
	title = flavour_bosancovac.013.t
	desc = flavour_bosancovac.013.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			OR = {
				has_personal_deity = ynn_zodiac_deity_6		#Giant Beaver
				has_personal_deity = ynn_zodiac_deity_11	#Poskawa Whale
				has_country_modifier = ynn_bad_stuir_balia
			}
		}
	}

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		1165 = { has_province_modifier = bosancovac_building_project }
	}

	option = {
		name = flavour_bosancovac.013.a
		custom_tooltip = "The progress towards building the foundations will be reset"
		1165 = { add_devastation = 20 }
		hidden_effect = {
			1165 = {
				remove_province_modifier = bosancovac_building_project
				add_province_modifier = {
					name = bosancovac_building_project
					duration = 1095
				}
			}
			country_event = {
				id = bosancovac.011
				days = 1096
			}
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = flavour_bosancovac.013.b
		add_treasury = -50
		ai_chance = {
			factor = 100
		}
	}
}

#Patricians Cover Costs
country_event = {
	id = flavour_bosancovac.014
	title = flavour_bosancovac.014.t
	desc = flavour_bosancovac.014.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		1165 = { has_province_modifier = bosancovac_building_project }
	}

	option = {
		name = flavour_bosancovac.014.a
		add_treasury = 25
		ai_chance = {
			factor = 100
		}
	}
}

#Water Serpents Allow Construction
country_event = {
	id = flavour_bosancovac.015
	title = flavour_bosancovac.015.t
	desc = flavour_bosancovac.015.d
	picture = CAVE_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 3
			OR = {
				has_personal_deity = ynn_zodiac_deity_10	#Whitetail Fox
				has_personal_deity = ynn_zodiac_deity_2		#Snapping Otter
				has_personal_deity = ynn_zodiac_deity_7		#Ynnea Pig
				has_country_modifier = ynn_good_stuir_balia
			}
		}
	}

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
		1165 = { has_province_modifier = bosancovac_building_project }
	}

	option = {
		name = flavour_bosancovac.015.a
		add_stability_or_adm_power = yes
		ai_chance = {
			factor = 100
		}
	}
}

#A Timely Offer
country_event = {
	id = flavour_bosancovac.210
	title = flavour_bosancovac.210.t
	desc = flavour_bosancovac.210.d
	picture = CAVE_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
	}

	option = {
		name = flavour_bosancovac.210.a
		G26 = { country_event = { id = flavour_bosancovac.211 } }
		custom_tooltip = bosancovac_offer_amacimst_tt
		hidden_effect = { set_country_flag = bosancovac_chose_amacimst }
	}

	option = {
		name = flavour_bosancovac.210.b
		G32 = { country_event = { id = flavour_bosancovac.211 } }
		custom_tooltip = bosancovac_offer_malacnar_tt
		hidden_effect = { set_country_flag = bosancovac_chose_malacnar }
	}

	option = {
		name = flavour_bosancovac.210.c
		add_power_projection = {
			type = mission_rewards_power_projection
			amount = 10
		}
		add_country_modifier = {
			name = bosancovac_triumph_over_rivals
			duration = 5475
		}
	}
}

#Accepting the Call
country_event = {
	id = flavour_bosancovac.211
	title = flavour_bosancovac.211.t
	desc = flavour_bosancovac.211.d
	picture = CAVE_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			tag = G26
			tag = G32
		}
	}

	option = {
		name = flavour_bosancovac.211.a
		trigger = { tag = G26 }
		custom_tooltip = bosancovac_amacimst_offer_tt
		hidden_effect = {
			G33 = {
				declare_war_with_cb = {
					casus_belli = cb_iosahar_annex
					who = G32
				}
			}
			join_all_offensive_wars_of = G33
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = flavour_bosancovac.211.b
		trigger = { tag = G32 }
		custom_tooltip = bosancovac_malacnar_offer_tt
		hidden_effect = {
			G33 = {
				declare_war_with_cb = {
					casus_belli = cb_iosahar_annex
					who = G26
				}
			}
			join_all_offensive_wars_of = G33
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {
		name = flavour_bosancovac.211.c
		add_trust = {
			who = G33
			value = -30
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Honoring the deal
country_event = {
	id = flavour_bosancovac.212
	title = flavour_bosancovac.212.t
	desc = flavour_bosancovac.212.d
	picture = CAVE_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = bosancovac_chose_amacimst }
				every_owned_province = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { area = malacnar_area }
						NOT = { area = drevkenuc_area }
					}
					if = {
						limit = { any_core_country = { exists = no } }
						random_core_country = {
							limit = { exists = no }
							PREV = { cede_province = PREV }
							G26 = { create_iosahar = { tag = PREV } }
						}
					}
					else_if = {
						limit = { any_core_country = { is_subject_of = G26 } }
						random_core_country = {
							limit = { is_subject_of = G26 }
							PREV = { cede_province = PREV }
						}
					}
					else = { cede_province = G26 }
				}
				G32 = {
					if = {
						limit = {
							is_subject_of = G33
						}
						every_owned_province = {
							limit = {
								NOT = { area = malacnar_area }
								NOT = { area = drevkenuc_area }
							}
							if = {
								limit = { any_core_country = { exists = no } }
								random_core_country = {
									limit = { exists = no }
									PREV = { cede_province = PREV }
									G26 = { create_iosahar = { tag = PREV } }
								}
							}
							else_if = {
								limit = { any_core_country = { is_subject_of = G26 } }
								random_core_country = {
									limit = { is_subject_of = G26 }
									PREV = { cede_province = PREV }
								}
							}
							else = { cede_province = G26 }
						}
					}
				}
			}
			else_if = {
				limit = { has_country_flag = bosancovac_chose_malacnar }
				every_owned_province = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { area = bosancovac_area }
						NOT = { area = amacimst_area }
					}
					if = {
						limit = { any_core_country = { exists = no } }
						random_core_country = {
							limit = { exists = no }
							PREV = { cede_province = PREV }
							G32 = { create_iosahar = { tag = PREV } }
						}
					}
					else_if = {
						limit = { any_core_country = { is_subject_of = G32 } }
						random_core_country = {
							limit = { is_subject_of = G32 }
							PREV = { cede_province = PREV }
						}
					}
					else = { cede_province = G32 }
				}
				G26 = {
					if = {
						limit = {
							is_subject_of = G33
						}
						every_owned_province = {
							limit = {
								NOT = { area = malacnar_area }
								NOT = { area = drevkenuc_area }
							}
							if = {
								limit = { any_core_country = { exists = no } }
								random_core_country = {
									limit = { exists = no }
									PREV = { cede_province = PREV }
									G32 = { create_iosahar = { tag = PREV } }
								}
							}
							else_if = {
								limit = { any_core_country = { is_subject_of = G32 } }
								random_core_country = {
									limit = { is_subject_of = G32 }
									PREV = { cede_province = PREV }
								}
							}
							else = { cede_province = G32 }
						}
					}
				}
			}
		}
	}

	option = {
		name = flavour_bosancovac.212.a
		add_prestige = 5
		add_opinion = { who = THIS modifier = g33_hasty_occupation }
		hidden_effect = { clr_country_flag = bosancovac_chose_amacimst clr_country_flag = bosancovac_chose_malacnar }
	}
}

#First Impressions
country_event = {
	id = flavour_bosancovac.320
	title = flavour_bosancovac.320.t
	desc = flavour_bosancovac.320.d
	picture = CAVE_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
	}

	option = {
		name = flavour_bosancovac.320.a
		trigger = { treasury = 100 }
		add_treasury = -5
		hidden_effect = { set_country_flag = bosancovac_splashed_cash }
		country_event = {
			id = flavour_bosancovac.321
		}
	}

	option = {
		name = flavour_bosancovac.320.b
		add_treasury = -25
		trigger = { NOT = { prestige = 15 } }
		country_event = {
			id = flavour_bosancovac.321
		}
	}

	option = {
		name = flavour_bosancovac.320.c
		trigger = { prestige = 15 }
		country_event = {
			id = flavour_bosancovac.321
		}
	}
}

#Successful Display
country_event = {
	id = flavour_bosancovac.321
	title = flavour_bosancovac.321.t
	desc = flavour_bosancovac.321.d
	picture = CAVE_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			tag = G33
			AND = {
				tag = U70
				was_tag = G33
			}
			AND = {
				tag = H27
				was_tag = G33
			}
		}
	}

	option = {
		name = flavour_bosancovac.321.a
		trigger = { has_country_flag = bosancovac_splashed_cash }
		hidden_effect = { clr_country_flag = bosancovac_splashed_cash }
		define_advisor = {
			type = artist
			culture = dolindhan
		}
		hidden_effect = { set_country_flag = bosancovac_foundations_unlocked }
		custom_tooltip = bosancovac_foundations_unlock_tt
	}

	option = {
		name = flavour_bosancovac.321.b
		trigger = { NOT = { has_country_flag = bosancovac_splashed_cash } }
		define_advisor = {
			type = artist
			culture = dolindhan
			discount = yes
		}
		hidden_effect = { set_country_flag = bosancovac_foundations_unlocked }
		custom_tooltip = bosancovac_foundations_unlock_tt
	}
}
