
namespace = flavor_cestirmark

#Special Election
country_event = {
    id = flavor_cestirmark.1
    title = flavor_cestirmark.1.t
    desc = flavor_cestirmark.1.d
    picture = ELECTION_REPUBLICAN_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        has_reform = trollsbayer_pluralism_reform
        NOT = { has_country_flag = in_concord_election }
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = in_concord_election
			H33 = { save_event_target_as = cestirmark_origin }
			set_saved_name = {
				key = cestirmarker_name
				type = advisor
				scope = event_target:cestirmark_origin
			}
			G95= { save_event_target_as = marlliande_origin }
			set_saved_name = {
				key = marlliander_name
				type = advisor
				scope = event_target:marlliande_origin
			}
			H38 = { save_event_target_as = zanlib_origin }
			set_saved_name = {
				key = zanlibi_name
				type = advisor
				scope = event_target:zanlib_origin
			}
			G91 = { save_event_target_as = isobelin_origin }
			set_saved_name = {
				key = isobeliner_name
				type = advisor
				scope = event_target:isobelin_origin
			}
			G96 = { save_event_target_as = thilvis_origin }
			set_saved_name = {
				key = towerfoot_name
				type = advisor
				scope = event_target:thilvis_origin
			}
			H36 = { save_event_target_as = valorpoint_origin }
			set_saved_name = {
				key = valorman_name
				type = advisor
				scope = event_target:valorpoint_origin
			}
        }
    }
	
	after = {
		hidden_effect = {
			clear_saved_name = cestirmarker_name
			clear_saved_name = marlliander_name
			clear_saved_name = zanlibi_name
			clear_saved_name = isobeliner_name
			clear_saved_name = towerfoot_name
			clear_saved_name = valorman_name
            clr_country_flag = in_concord_election
        }
	}
	
	#Keep Current Ruler
	option = {
		name = flavor_cestirmark.1.a
		#trigger = { NOT = { months_of_ruling = 90 } } #Only 2 terms
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 0
				NOT = { republican_tradition = 25 }
			}
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 50 }
			}
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 75 }
			}
			modifier = {
				factor = 2.0
				republican_tradition = 90
			}
			
			#Anbennar
			modifier = {
				factor = 2.0
				ruler_has_personality = mage_personality
			}	
		}
		custom_tooltip = remains_ruler
		change_adm = 1
		change_dip = 1
		change_mil = 1
		if = {
			limit = {
				is_tribal = no 
				government = republic
				NOT = { republican_tradition = 20 }				
				NOT = { is_revolutionary_republic_trigger = yes }
				has_dlc = "Res Publica"
				NOT = { has_government_attribute = cannot_become_dictatorship }
			}
			add_government_reform = presidential_despot_reform
		}
		add_scaled_republican_tradition = -10
		random_list = {
			10 = {
				add_adm_power = 50
			}
			10 = {
				add_dip_power = 50
			}
			10 = {
				add_mil_power = 50
			}
		}
		if = {
			limit = {
				has_government_attribute = reelection_depowers_estates
			}
			add_estate_influence_modifier = {
				estate = all
				influence = -10
				duration = 1460
				desc = REELCTION_DEPOWER_ESTATES
			}
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			add_estate_loyalty = {
				estate = all
				loyalty = 5
			}
		}
		if = {
			limit = { has_government_attribute = reelection_increases_absolutism }
			tooltip = {
				add_absolutism = 10
			}
			custom_tooltip = ADD_ABSOLUTISM_BASED_ON_ELECTION_TERM
			hidden_effect = {
				for_variable_amount = {
					variable = election_term
					effect = "
						add_absolutism = 10
					"
				}
			}
			hidden_effect = {
				change_variable = {
					which = election_term
					value = 1
				}
			}
		}
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_random_faction = {
				influence = 20
			}
		}
		add_karma = -5
	}
	
	#Cestirmarker Candidate - +dip, -mil
	option = {
		name = flavor_cestirmark.1.b
		#trigger = { accepted_culture = cestirmarker }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = cestirmarker_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 2
				change_mil = 0
				max_random_adm = 1
				max_random_dip = 2
				max_random_mil = 1
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = cestirmarker_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 2
				change_mil = 0
				max_random_adm = 1
				max_random_dip = 2
				max_random_mil = 1
				culture = cestirmarker
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_dip_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			add_estate_adventurers_loyalty_effect = yes
		}
		add_karma = 10
	}
	
	#Marlliander Candidate - +dip, -adm
	option = {
		name = flavor_cestirmark.1.c
		#trigger = { accepted_culture = marlliander }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = marlliander_name
				min_age = 30
				max_age = 50
				change_adm = 0
				change_dip = 2
				change_mil = 1
				max_random_adm = 1
				max_random_dip = 2
				max_random_mil = 1
				culture = marlliander
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = marlliander_name
				min_age = 30
				max_age = 50
				change_adm = 0
				change_dip = 2
				change_mil = 1
				max_random_adm = 1
				max_random_dip = 2
				max_random_mil = 1
				culture = marlliander
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_mil_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_vampires }
				add_estate_vampires_loyalty_effect = yes
			} else = {
				add_estate_loyalty_by_class_mil = { loyalty = 10 }
			}
		}
		add_karma = 10
	}
	
	#Zanlibi Candidate - +adm, -dip
	option = {
		name = flavor_cestirmark.1.d
		#trigger = { accepted_culture = zanlibi }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = zanlibi_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 0
				change_mil = 1
				max_random_adm = 2
				max_random_dip = 1
				max_random_mil = 1
				culture = zanlibi
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = zanlibi_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 0
				change_mil = 1
				max_random_adm = 2
				max_random_dip = 1
				max_random_mil = 1
				culture = zanlibi
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_adm_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_mages }
				add_estate_mages_loyalty_effect = yes
			}
		}
		add_karma = 10
	}
	
	#Isobeliner Candidate - +adm - mil
	option = {
		name = flavor_cestirmark.1.e
		#trigger = { accepted_culture = isobeliner }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = isobeliner_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 1
				change_mil = 0
				max_random_adm = 2
				max_random_dip = 1
				max_random_mil = 1
				culture = isobeliner
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = isobeliner_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 1
				change_mil = 0
				max_random_adm = 2
				max_random_dip = 1
				max_random_mil = 1
				culture = isobeliner
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_adm_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			add_estate_loyalty_by_class_dip = { loyalty = 10 }
		}
		add_karma = 10
	}
	
	#Towerfoot Candidate - +mil, -dip
	option = {
		name = flavor_cestirmark.1.f
		#trigger = { accepted_culture = towerfoot_halfling }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = towerfoot_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 0
				change_mil = 2
				max_random_adm = 1
				max_random_dip = 1
				max_random_mil = 2
				culture = towerfoot_halfling
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = towerfoot_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 0
				change_mil = 2
				max_random_adm = 1
				max_random_dip = 1
				max_random_mil = 2
				culture = towerfoot_halfling
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_mil_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_artificers }
				add_estate_artificers_loyalty_effect = yes
			} else = {
				add_estate_loyalty_by_class_mil = { loyalty = 10 }
			}
		}
		add_karma = 10
		small_increase_of_halfling_tolerance_effect = yes
	}
	
	#Valorman Candidate - +mil, -adm
	option = {
		name = flavor_cestirmark.1.g
		#trigger = { accepted_culture = valorman }
		ai_chance = { factor = 20 }
		define_ruler = {
			name = valorman_name
			min_age = 30
			max_age = 50
			change_adm = 0
			change_dip = 1
			change_mil = 2
			max_random_adm = 1
			max_random_dip = 1
			max_random_mil = 2
			culture = valorman
			random_gender = yes # Can always generate female rulers
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_dip_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_adventurers }
				add_estate_adventurers_loyalty_effect = yes
			}
		}
		add_karma = 10
	}
}

#Death elections
country_event = {
    id = flavor_cestirmark.2
    title = flavor_cestirmark.2.t
    desc = flavor_cestirmark.2.d
    picture = ELECTION_REPUBLICAN_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        has_reform = trollsbayer_pluralism_reform
        NOT = { has_country_flag = in_concord_election }
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = in_concord_election
			H33 = { save_event_target_as = cestirmark_origin }
			set_saved_name = {
				key = cestirmarker_name
				type = advisor
				scope = event_target:cestirmark_origin
			}
			G95= { save_event_target_as = marlliande_origin }
			set_saved_name = {
				key = marlliander_name
				type = advisor
				scope = event_target:marlliande_origin
			}
			H38 = { save_event_target_as = zanlib_origin }
			set_saved_name = {
				key = zanlibi_name
				type = advisor
				scope = event_target:zanlib_origin
			}
			G91 = { save_event_target_as = isobelin_origin }
			set_saved_name = {
				key = isobeliner_name
				type = advisor
				scope = event_target:isobelin_origin
			}
			G96 = { save_event_target_as = thilvis_origin }
			set_saved_name = {
				key = towerfoot_name
				type = advisor
				scope = event_target:thilvis_origin
			}
			H36 = { save_event_target_as = valorpoint_origin }
			set_saved_name = {
				key = valorman_name
				type = advisor
				scope = event_target:valorpoint_origin
			}
        }
    }
	
	after = {
		hidden_effect = {
			clear_saved_name = cestirmarker_name
			clear_saved_name = marlliander_name
			clear_saved_name = zanlibi_name
			clear_saved_name = isobeliner_name
			clear_saved_name = towerfoot_name
			clear_saved_name = valorman_name
            clr_country_flag = in_concord_election
        }
	}
	
	#Cestirmarker Candidate - +dip, -mil
	option = {
		name = flavor_cestirmark.1.b
		#trigger = { accepted_culture = cestirmarker }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = cestirmarker_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 2
				change_mil = 0
				max_random_adm = 2
				max_random_dip = 3
				max_random_mil = 2
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = cestirmarker_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 2
				change_mil = 0
				max_random_adm = 2
				max_random_dip = 3
				max_random_mil = 2
				culture = cestirmarker
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_dip_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			add_estate_adventurers_loyalty_effect = yes
		}
		add_karma = 10
	}
	
	#Marlliander Candidate - +dip, -adm
	option = {
		name = flavor_cestirmark.1.c
		#trigger = { accepted_culture = marlliander }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = marlliander_name
				min_age = 30
				max_age = 50
				change_adm = 0
				change_dip = 2
				change_mil = 1
				max_random_adm = 2
				max_random_dip = 3
				max_random_mil = 2
				culture = marlliander
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = marlliander_name
				min_age = 30
				max_age = 50
				change_adm = 0
				change_dip = 2
				change_mil = 1
				max_random_adm = 2
				max_random_dip = 3
				max_random_mil = 2
				culture = marlliander
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_mil_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_vampires }
				add_estate_vampires_loyalty_effect = yes
			} else = {
				add_estate_loyalty_by_class_mil = { loyalty = 10 }
			}
		}
		add_karma = 10
	}
	
	#Zanlibi Candidate - +adm, -dip
	option = {
		name = flavor_cestirmark.1.d
		#trigger = { accepted_culture = zanlibi }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = zanlibi_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 0
				change_mil = 1
				max_random_adm = 3
				max_random_dip = 2
				max_random_mil = 2
				culture = zanlibi
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = zanlibi_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 0
				change_mil = 1
				max_random_adm = 3
				max_random_dip = 2
				max_random_mil = 2
				culture = zanlibi
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_adm_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_mages }
				add_estate_mages_loyalty_effect = yes
			}
		}
		add_karma = 10
	}
	
	#Isobeliner Candidate - +adm - mil
	option = {
		name = flavor_cestirmark.1.e
		#trigger = { accepted_culture = isobeliner }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = isobeliner_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 1
				change_mil = 0
				max_random_adm = 3
				max_random_dip = 2
				max_random_mil = 2
				culture = isobeliner
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = isobeliner_name
				min_age = 30
				max_age = 50
				change_adm = 2
				change_dip = 1
				change_mil = 0
				max_random_adm = 3
				max_random_dip = 2
				max_random_mil = 2
				culture = isobeliner
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_adm_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			add_estate_loyalty_by_class_dip = { loyalty = 10 }
		}
		add_karma = 10
	}
	
	#Towerfoot Candidate - +mil, -dip
	option = {
		name = flavor_cestirmark.1.f
		#trigger = { accepted_culture = towerfoot_halfling }
		ai_chance = { factor = 20 }
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				name = towerfoot_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 0
				change_mil = 2
				max_random_adm = 2
				max_random_dip = 2
				max_random_mil = 3
				culture = towerfoot_halfling
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				name = towerfoot_name
				min_age = 30
				max_age = 50
				change_adm = 1
				change_dip = 0
				change_mil = 2
				max_random_adm = 2
				max_random_dip = 2
				max_random_mil = 3
				culture = towerfoot_halfling
			}
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_mil_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_artificers }
				add_estate_artificers_loyalty_effect = yes
			} else = {
				add_estate_loyalty_by_class_mil = { loyalty = 10 }
			}
		}
		add_karma = 10
		small_increase_of_halfling_tolerance_effect = yes
	}
	
	#Valorman Candidate - +mil, -adm
	option = {
		name = flavor_cestirmark.1.g
		#trigger = { accepted_culture = valorman }
		ai_chance = { factor = 20 }
		define_ruler = {
			name = valorman_name
			min_age = 30
			max_age = 50
			change_adm = 0
			change_dip = 1
			change_mil = 2
			max_random_adm = 2
			max_random_dip = 2
			max_random_mil = 3
			culture = valorman
			random_gender = yes # Can always generate female rulers
		}
		#Edge cases (no one will ever see them but if someone does, kudos)
		if = {
			limit = { has_government_attribute = elections_increase_factions_influence }
			add_influence_to_dip_faction = { influence = 20 }
		}
		if = {
			limit = { has_government_attribute = elections_influence_estates }
			if = {
				limit = { has_estate = estate_adventurers }
				add_estate_adventurers_loyalty_effect = yes
			}
		}
		add_karma = 10
	}
}

#Guarantee a veridical exists in the province with "The Trollsbay's Dual Archprovosts"
province_event = {
	id = flavor_cestirmark.3
	title = none
	desc = none
	picture = none
	hidden = yes

	trigger = {
		papacy_active = yes
		has_active_triggered_province_modifier = H33_dual_archprovosts
		has_cardinal = no
		owner = { NOT = { num_of_cardinals = 7 } } #will never happen in the new world but you never know
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		add_cardinal = yes

		ai_chance = {
			factor = 1
		}
	}
}

#1XX: flavor events

#Welcome to Cestirmark
country_event = {
	id = flavor_cestirmark.100
	title = flavor_cestirmark.100.t
	desc = flavor_cestirmark.10.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_cestirmark.100.a
		ai_chance = { factor = 100 }
	}
}


#2XX: Concord-related events

#Founding
country_event = {
	id = flavor_cestirmark.200
	title = flavor_cestirmark.200.t
	desc = flavor_cestirmark.200.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { tag = H33 }

	major = yes
	major_trigger = { capital_scope = { colonial_region = colonial_noruin } }

	option = {
		name = flavor_cestirmark.200.a
		ai_chance = { factor = 100 }
		custom_tooltip = H33_concord_founding_member_tt
		set_country_flag = trollsbay_concord_member
		every_known_country = {
			limit = {
				capital_scope = {
					region = trollsbay_region
				}
				OR = { #to make obvious who counts
					technology_group = tech_cannorian
					technology_group = tech_halfling
					technology_group = tech_bulwari
				}
				hidden_trigger = {
					is_subject = no #can't ally nor have spy network in subjects
				}
			}
			custom_tooltip = H33_concord_founding_member_tt
			set_country_flag = trollsbay_concord_member
			if = {
				limit = {
					NOT = { alliance_with = ROOT }
				}
				add_spy_network_from = {
					who = ROOT
					value = -50
				}
			}
			force_remove_rival = ROOT
			ROOT = { force_remove_rival = THIS }
			add_historical_friend = ROOT
			ROOT = { add_historical_friend = THIS }
			hidden_effect = {
				country_event = {
					id = flavor_cestirmark.201
				}
			}
		}
	}
}

#Congrats, you're a member now
country_event = {
	id = flavor_cestirmark.201
	title = flavor_cestirmark.201.t
	desc = flavor_cestirmark.201.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_flag = trollsbay_concord_member
	}

	option = {
		name = flavor_cestirmark.201.a
		ai_chance = { factor = 100 }
		custom_tooltip = H33_concord_founding_member_tt
		#happens in flavor_cestirmark.200, shown again to inform players
		force_remove_rival = H33
		H33 = { force_remove_rival = ROOT }
		add_historical_friend = H33
		H33 = { add_historical_friend = ROOT }
	}
}

#Pick your favorite
country_event = {
	id = flavor_cestirmark.202
	title = flavor_cestirmark.202.t
	desc = flavor_cestirmark.202.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { tag = H33 }

	option = { #Cestirmark
		name = flavor_cestirmark.202.a
		ai_chance = { factor = 10 }
		add_adm_power = 15
		add_dip_power = 15
		add_mil_power = 15
		every_known_country = {
			limit = { has_country_flag = trollsbay_concord_member }
			add_country_modifier = {
				name = H33_concord_cestirmark_influence
				duration = 1825
			}
		}
	}

	option = { #Marlliande
		name = flavor_cestirmark.202.b
		ai_chance = { factor = 20 }
		trigger = {
			G95 = {
				exists = yes
				has_country_flag = trollsbay_concord_member
			}
		}
		G95 = {
			add_trust = {
				who = ROOT
				value = 10
				mutual = yes
			}
			custom_tooltip = H33_concord_chosen_one_tt
			save_event_target_as = concord_influence_chosen_one
			every_known_country = {
				limit = { has_country_flag = trollsbay_concord_member }
				add_country_modifier = {
					name = H33_concord_marlliande_influence
					duration = 1825
				}
			}
		}
	}

	option = { #Zanlib
		name = flavor_cestirmark.202.c
		ai_chance = { factor = 20 }
		trigger = {
			H38 = {
				exists = yes
				has_country_flag = trollsbay_concord_member
			}
		}
		H38 = {
			add_trust = {
				who = ROOT
				value = 10
				mutual = yes
			}
			custom_tooltip = H33_concord_chosen_one_tt
			save_event_target_as = concord_influence_chosen_one
			every_known_country = {
				limit = { has_country_flag = trollsbay_concord_member }
				add_country_modifier = {
					name = H33_concord_zanlib_influence
					duration = 1825
				}
			}
		}
	}

	option = { #Isobelin
		name = flavor_cestirmark.202.d
		ai_chance = { factor = 20 }
		trigger = {
			G91 = {
				exists = yes
				has_country_flag = trollsbay_concord_member
			}
		}
		G91 = {
			add_trust = {
				who = ROOT
				value = 10
				mutual = yes
			}
			custom_tooltip = H33_concord_chosen_one_tt
			save_event_target_as = concord_influence_chosen_one
			every_known_country = {
				limit = { has_country_flag = trollsbay_concord_member }
				add_country_modifier = {
					name = H33_concord_isobelin_influence
					duration = 1825
				}
			}
		}
	}

	option = { #Thilvis
		name = flavor_cestirmark.202.e
		ai_chance = { factor = 20 }
		trigger = {
			G96 = {
				exists = yes
				has_country_flag = trollsbay_concord_member
			}
		}
		G96 = {
			add_trust = {
				who = ROOT
				value = 10
				mutual = yes
			}
			custom_tooltip = H33_concord_chosen_one_tt
			save_event_target_as = concord_influence_chosen_one
			every_known_country = {
				limit = { has_country_flag = trollsbay_concord_member }
				add_country_modifier = {
					name = H33_concord_thilvis_influence
					duration = 1825
				}
			}
		}
	}

	option = { #Valorpoint
		name = flavor_cestirmark.202.f
		ai_chance = { factor = 20 }
		trigger = {
			H36 = {
				exists = yes
				has_country_flag = trollsbay_concord_member
			}
		}
		H36 = {
			add_trust = {
				who = ROOT
				value = 10
				mutual = yes
			}
			custom_tooltip = H33_concord_chosen_one_tt
			save_event_target_as = concord_influence_chosen_one
			every_known_country = {
				limit = { has_country_flag = trollsbay_concord_member }
				add_country_modifier = {
					name = H33_concord_valorpoint_influence
					duration = 1825
				}
			}
		}
	}
}

#Common trade policy reward
country_event = {
	id = flavor_cestirmark.203
	title = flavor_cestirmark.203.t
	desc = flavor_cestirmark.203.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.203.a
		ai_chance = { factor = 100 }
		if = {
			limit = { tag = event_target:concord_influence_chosen_one }
			add_adm_power = 15
			add_dip_power = 15
			add_mil_power = 15
		}
		define_advisor = {
			type = trader
			skill = 3
			discount = yes
		}
	}

	option = { #No thanks
		name = flavor_cestirmark.203.b
		ai_chance = { 
			factor = 5
			modifier = { #free MP!
				factor = 0
				tag = event_target:concord_influence_chosen_one
			}
		}
		add_prestige = 5
	}
}

#No borders policy reward
country_event = {
	id = flavor_cestirmark.204
	title = flavor_cestirmark.204.t
	desc = flavor_cestirmark.204.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.204.a
		ai_chance = { 
			factor = 100
			modifier = {
				factor = 0
				NOT = { #human who doesn't want halflings
					culture_is_halfling = yes
					check_variable = {
						which = halfling_race_tolerance_ai
						value = 30
					}
				}
			}
			modifier = {
				factor = 0
				NOT = { #halfling who doesn't want humans
					culture_is_human = yes
					check_variable = {
						which = human_race_tolerance_ai
						value = 30
					}
				}
			}
		}
		if = {
			limit = { tag = event_target:concord_influence_chosen_one }
			add_adm_power = 15
			add_dip_power = 15
			add_mil_power = 15
		}
		if = {
			limit = { culture_is_human = yes }
			add_halfling_minority_size_effect = yes
			add_halfling_minority_size_effect = yes
		} else = {
			add_human_minority_size_effect = yes
			add_human_minority_size_effect = yes
		}
		set_country_flag = concord_no_borders
	}

	option = { #No thanks
		name = flavor_cestirmark.204.b
		ai_chance = { 
			factor = 5
			modifier = { #free MP!
				factor = 0
				tag = event_target:concord_influence_chosen_one
			}
		}
		add_prestige = 5
	}
}

#Universalism policy reward
country_event = {
	id = flavor_cestirmark.205
	title = flavor_cestirmark.205.t
	desc = flavor_cestirmark.205.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.205.a
		ai_chance = { factor = 100 }
		if = {
			limit = { tag = event_target:concord_influence_chosen_one }
			add_adm_power = 15
			add_dip_power = 15
			add_mil_power = 15
		}
		trollsbay_region = {
			#TODO: dlc bypass
			add_prosperity = 50
		}
	}

	option = { #No thanks
		name = flavor_cestirmark.205.b
		ai_chance = { 
			factor = 5
			modifier = { #free MP!
				factor = 0
				tag = event_target:concord_influence_chosen_one
			}
		}
		add_prestige = 5
	}
}

#Joint militias policy reward
country_event = {
	id = flavor_cestirmark.206
	title = flavor_cestirmark.206.t
	desc = flavor_cestirmark.206.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.206.a
		ai_chance = { factor = 100 }
		if = {
			limit = { tag = event_target:concord_influence_chosen_one }
			add_adm_power = 15
			add_dip_power = 15
			add_mil_power = 15
		}
		unlock_merc_company = { merc_company = merc_harmonist_militia }
	}

	option = { #No thanks
		name = flavor_cestirmark.206.b
		ai_chance = { 
			factor = 5
			modifier = { #free MP!
				factor = 0
				tag = event_target:concord_influence_chosen_one
			}
		}
		add_prestige = 5
	}
}

#Ynnic monopoly policy reward
country_event = {
	id = flavor_cestirmark.207
	title = flavor_cestirmark.207.t
	desc = flavor_cestirmark.207.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.207.a
		ai_chance = { factor = 100 }
		if = {
			limit = { tag = event_target:concord_influence_chosen_one }
			add_adm_power = 15
			add_dip_power = 15
			add_mil_power = 15
		}
		add_mercantilism = 5
	}

	option = { #No thanks
		name = flavor_cestirmark.207.b
		ai_chance = { 
			factor = 5
			modifier = { #free MP!
				factor = 0
				tag = event_target:concord_influence_chosen_one
			}
		}
		add_prestige = 5
	}
}

#Anti-colonial policy reward
country_event = {
	id = flavor_cestirmark.208
	title = flavor_cestirmark.208.t
	desc = flavor_cestirmark.208.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.208.a
		ai_chance = { factor = 100 }
		if = {
			limit = { tag = event_target:concord_influence_chosen_one }
			add_adm_power = 15
			add_dip_power = 15
			add_mil_power = 15
		}
		add_power_projection = {
			type = mission_rewards_power_projection
			amount = 20
		}
	}

	option = { #No thanks
		name = flavor_cestirmark.208.b
		ai_chance = { 
			factor = 5
			modifier = { #free MP!
				factor = 0
				tag = event_target:concord_influence_chosen_one
			}
		}
		add_prestige = 5
	}
}

#Centralization policy reward
country_event = {
	id = flavor_cestirmark.209
	title = flavor_cestirmark.209.t
	desc = flavor_cestirmark.209.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.209.a
		ai_chance = { factor = 100 }
		if = {
			limit = { NOT = { capital_scope = { has_building = courthouse } } }
			capital_scope = {add_building = courthouse }
		} else = {
			add_adm_power = 50
		}
	}

	option = { #No thanks
		name = flavor_cestirmark.209.b
		ai_chance = { factor = 5 }
		add_prestige = 5
	}
}

#Concord unification proposal
country_event = {
	id = flavor_cestirmark.210
	title = flavor_cestirmark.210.t
	desc = flavor_cestirmark.210.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = { has_country_flag = trollsbay_concord_member }

	option = {
		name = flavor_cestirmark.210.a
		ai_chance = { factor = 100 }
		#TODO: Concord unification
	}
}


#3XX: Bureau events

#9XX: debug events

#Give Union missions
country_event = {
	id = flavor_cestirmark.900
	title = flavor_cestirmark.900.t
	desc = flavor_cestirmark.900.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = {
		tag = H33
	}

	option = {
		name = flavor_cestirmark.900.a
		ai_chance = { factor = 100 }
		set_country_flag = united_concord
		swap_non_generic_missions = yes
	}
}

#Force the Concord
country_event = {
	id = flavor_cestirmark.901
	title = flavor_cestirmark.901.t
	desc = flavor_cestirmark.901.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = {
		tag = H33
	}

	option = {
		name = flavor_cestirmark.901.a
		ai_chance = { factor = 100 }
		set_country_flag = trollsbay_concord_member
		G91 = {
			set_country_flag = trollsbay_concord_member
		}
		H38 = {
			set_country_flag = trollsbay_concord_member
		}
		G96 = {
			set_country_flag = trollsbay_concord_member
		}
		H36 = {
			set_country_flag = trollsbay_concord_member
		}
		G95 = {
			set_country_flag = trollsbay_concord_member
		}
	}

	option = {
		name = flavor_cestirmark.901.b
		ai_chance = { factor = 100 }
		set_country_flag = trollsbay_concord_member
		G91 = {
			set_country_flag = trollsbay_concord_member
			add_historical_friend = ROOT
			ROOT = { add_historical_friend = G91 }
			force_remove_rival = ROOT
			ROOT = { force_remove_rival = G91 }
		}
		H38 = {
			set_country_flag = trollsbay_concord_member
			add_historical_friend = ROOT
			ROOT = { add_historical_friend = H38 }
			force_remove_rival = ROOT
			ROOT = { force_remove_rival = H38 }
		}
		G96 = {
			set_country_flag = trollsbay_concord_member
			add_historical_friend = ROOT
			ROOT = { add_historical_friend = G96 }
			force_remove_rival = ROOT
			ROOT = { force_remove_rival = G96 }
		}
		H36 = {
			set_country_flag = trollsbay_concord_member
			add_historical_friend = ROOT
			ROOT = { add_historical_friend = H36 }
			force_remove_rival = ROOT
			ROOT = { force_remove_rival = H36 }
		}
		G95 = {
			set_country_flag = trollsbay_concord_member
			add_historical_friend = ROOT
			ROOT = { add_historical_friend = G95 }
			force_remove_rival = ROOT
			ROOT = { force_remove_rival = G95 }
		}
		set_country_flag = concord_no_borders
		unlock_merc_company = { merc_company = merc_harmonist_militia }
	}
}

#Grant special gov
country_event = {
	id = flavor_cestirmark.902
	title = flavor_cestirmark.902.t
	desc = flavor_cestirmark.902.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = {
		tag = H33
	}

	option = {
		name = flavor_cestirmark.902.a
		ai_chance = { factor = 100 }
		add_government_reform = concord_administration_reform
		add_government_reform = trollsbayer_pluralism_reform
		add_government_reform = rectors_in_the_bureau_reform
	}
}

#Fully upgrades the Bureau
country_event = {
	id = flavor_cestirmark.903
	title = flavor_cestirmark.903.t
	desc = flavor_cestirmark.903.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = {
		tag = H33
	}

	option = {
		name = flavor_cestirmark.903.a
		ai_chance = { factor = 100 }
		set_estate_privilege = estate_adventurers_organization_scp_bureau
		set_country_flag = monster_hunters_no_penalty
		set_country_flag = scp_bureau_containment_unlocked
		set_estate_privilege = estate_adventurers_contain_dangerous_artefacts
		
		1019 = {
			set_province_flag = vincenton_warehouse
			add_great_project = {
				type = scp_bureau_hq
				instant = yes
			}
		}
	}
}

#Add permanent veridicals
country_event = {
	id = flavor_cestirmark.904
	title = flavor_cestirmark.904.t
	desc = flavor_cestirmark.904.d
	picture = EMPTY_eventPicture

	is_triggered_only = yes

	trigger = {
		tag = H33
	}

	option = {
		name = flavor_cestirmark.904.a
		ai_chance = { factor = 100 }
		change_religion = ravelian
		1019 = {
			create_colony = 1000
			change_religion = ravelian
			add_cardinal = yes
			add_province_triggered_modifier = H33_dual_archprovosts
		}
		1036 = {
			create_colony = 1000
			change_religion = ravelian
			add_cardinal = yes
			add_province_triggered_modifier = H33_dual_archprovosts
		}
	}
}