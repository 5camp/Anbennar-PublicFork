
namespace = fed_politics

#PoliticalMenu
country_event = {
	id = fed_politics.1
	title = fed_politics.1.t
	desc = fed_politics.1.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = lake_federation_member
	}
	
	immediate = {
		hidden_effect = { set_country_flag = federation_politics_menu_open }
	}
	
	#Influence Rival
	option = {
		name = fed_politics.1.a
		ai_chance = { 
			factor = 50
			
			modifier = {
				factor = 5
				is_lake_federation_leader = yes
			}
			
			modifier = {
				factor = 2
				federation_has_very_high_standing = yes
				NOT = { is_lake_federation_leader = yes }
			}
			
			modifier = {
				factor = 1.5
				federation_has_high_standing = yes
				NOT = { federation_has_very_high_standing = yes }
			}
		}
		trigger = { 
			any_known_country = {
				has_country_modifier = lake_federation_member
				is_rival = FROM
			}
		}
		country_event = { id = fed_politics.2 }
	}
	#InvestInNeighboor
	option = {
		name = fed_politics.1.b
		ai_chance = { 
			factor = 75
			
			modifier = {
				factor = 0.1
				is_lake_federation_leader = yes
			}
			
			modifier = {
				factor = 5
				federation_has_normal_standing = yes
				NOT = { federation_has_high_standing = yes }
			}
			
			modifier = {
				factor = 10
				federation_has_low_standing = yes
				NOT = { federation_has_normal_standing = yes }
			}
		}
		trigger = { 
			any_neighbor_country = {
				has_country_modifier = lake_federation_member
				NOT = { is_rival = FROM }
				num_of_cities = 2
			}
		}
		random_neighbor_country = {
			limit = {
				has_country_modifier = lake_federation_member
				NOT = { is_rival = FROM }
				num_of_cities = 2
			}
			random_owned_province = {
				limit = { is_capital = no }
				random_list = {
					33 = { add_base_tax = 1 }
					33 = { add_base_manpower = 1 }
					33 = { add_base_production = 1 }
				}
			}
		}
		#############
		###   If Dev of the Federation is too low, comment that
		#############
		random_owned_province = {
			limit = { is_capital = no }
			random_list = {
				33 = { add_base_tax = -1 }
				33 = { add_base_manpower = -1 }
				33 = { add_base_production = -1 }
			}
		}
		lake_federation_gain_1_points = yes
		lake_federation_lose_1_politics = yes
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
		hidden_effect = { set_country_flag = recent_federation_politic }
	}
	
	#Prestige options
	option = {
		name = fed_politics.1.c
		ai_chance = { 
			factor = 5
			
			modifier = {
				factor = 50
				is_lake_federation_leader = yes
				NOT = { prestige = 50 }
			}
		}
		add_prestige = 7.5
		lake_federation_lose_1_politics = yes
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
		hidden_effect = { set_country_flag = recent_federation_politic }
	}
	#Stability
	option = {
		name = fed_politics.1.e
		ai_chance = { 
			factor = 5
			
			modifier = {
				factor = 50
				NOT = { stability = 1 }
			}
		}
		trigger = { NOT = { stability = 3 } }
		add_stability = 1
		lake_federation_lose_1_politics = yes
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
		hidden_effect = { set_country_flag = recent_federation_politic }
	}
	#Go Back
	option = {
		name = fed_politics.1.f
		ai_chance = { factor = 0 }
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
	}
}

#Shit on Rival
country_event = {
	id = fed_politics.2
	title = fed_politics.2.t
	desc = fed_politics.2.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = lake_federation_member
	}
	
	immediate = {
		random_known_country = {
			limit = { ROOT = { is_rival = PREV } has_country_modifier = lake_federation_member NOT = { has_country_flag = rival@ROOT } }
			set_country_flag = option_1_@ROOT
			set_country_flag = rival@ROOT
			save_event_target_as = rival1
		}
		random_known_country = {
			limit = { ROOT = { is_rival = PREV } has_country_modifier = lake_federation_member NOT = { has_country_flag = rival@ROOT } }
			set_country_flag = option_2_@ROOT
			set_country_flag = rival@ROOT
			save_event_target_as = rival2
		}
		random_known_country = {
			limit = { ROOT = { is_rival = PREV } has_country_modifier = lake_federation_member NOT = { has_country_flag = rival@ROOT } }
			set_country_flag = option_3_@ROOT
			set_country_flag = rival@ROOT
			save_event_target_as = rival3
		}
	}
	
	#Influence Rival 1
	option = {
		name = fed_politics.2.a
		ai_chance = { 
			factor = 100
			
			modifier = {
				factor = 5
				any_known_country = {
					has_country_flag = option_1_@ROOT
					is_lake_federation_leader = yes
				}
			}
			
			modifier = {
				factor = 3
				any_known_country = {
					has_country_flag = option_1_@ROOT
					federation_has_very_high_standing = yes
					NOT = { is_lake_federation_leader = yes }
				}
			}
			
			modifier = {
				factor = 1.5
				any_known_country = {
					has_country_flag = option_1_@ROOT
					federation_has_high_standing = yes
					NOT = { federation_has_very_high_standing = yes }
				}
			}
		}
		trigger = {
			any_known_country = { has_country_flag = option_1_@ROOT }
		}
		random_known_country = {
			limit = { has_country_flag = option_1_@ROOT }
			lake_federation_lose_1_points = yes
		}
		lake_federation_lose_1_politics = yes
		hidden_effect = {
			every_known_country = {
				limit = { has_country_flag = rival@ROOT }
				clr_country_flag = rival@ROOT
				clr_country_flag = option_1_@ROOT
				clr_country_flag = option_2_@ROOT
				clr_country_flag = option_3_@ROOT
				clr_country_flag = option_4_@ROOT
			}
		}
		hidden_effect = { set_country_flag = recent_federation_politic }
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
	}
	
	#Influence Rival 2
	option = {
		name = fed_politics.2.b
		ai_chance = { 
			factor = 100
			
			modifier = {
				factor = 5
				any_known_country = {
					has_country_flag = option_2_@ROOT
					is_lake_federation_leader = yes
				}
			}
			
			modifier = {
				factor = 3
				any_known_country = {
					has_country_flag = option_2_@ROOT
					federation_has_very_high_standing = yes
					NOT = { is_lake_federation_leader = yes }
				}
			}
			
			modifier = {
				factor = 1.5
				any_known_country = {
					has_country_flag = option_2_@ROOT
					federation_has_high_standing = yes
					NOT = { federation_has_very_high_standing = yes }
				}
			}
		}
		trigger = {
			any_known_country = { has_country_flag = option_2_@ROOT }
		}
		random_known_country = {
			limit = { has_country_flag = option_2_@ROOT }
			lake_federation_lose_1_points = yes
		}
		lake_federation_lose_1_politics = yes
		hidden_effect = {
			every_known_country = {
				limit = { has_country_flag = rival@ROOT }
				clr_country_flag = rival@ROOT
				clr_country_flag = option_1_@ROOT
				clr_country_flag = option_2_@ROOT
				clr_country_flag = option_3_@ROOT
				clr_country_flag = option_4_@ROOT
			}
		}
		hidden_effect = { set_country_flag = recent_federation_politic }
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
	}
	
	#Influence Rival 3
	option = {
		name = fed_politics.2.c
		ai_chance = { 
			factor = 100
			
			modifier = {
				factor = 5
				any_known_country = {
					has_country_flag = option_3_@ROOT
					is_lake_federation_leader = yes
				}
			}
			
			modifier = {
				factor = 3
				any_known_country = {
					has_country_flag = option_3_@ROOT
					federation_has_very_high_standing = yes
					NOT = { is_lake_federation_leader = yes }
				}
			}
			
			modifier = {
				factor = 1.5
				any_known_country = {
					has_country_flag = option_3_@ROOT
					federation_has_high_standing = yes
					NOT = { federation_has_very_high_standing = yes }
				}
			}
		}
		trigger = {
			any_known_country = { has_country_flag = option_3_@ROOT }
		}
		random_known_country = {
			limit = { has_country_flag = option_3_@ROOT }
			lake_federation_lose_1_points = yes
		}
		lake_federation_lose_1_politics = yes
		hidden_effect = {
			every_known_country = {
				limit = { has_country_flag = rival@ROOT }
				clr_country_flag = rival@ROOT
				clr_country_flag = option_1_@ROOT
				clr_country_flag = option_2_@ROOT
				clr_country_flag = option_3_@ROOT
				clr_country_flag = option_4_@ROOT
			}
		}
		hidden_effect = { set_country_flag = recent_federation_politic }
		hidden_effect = { clr_country_flag = federation_politics_menu_open }
	}
	#Go Back
	option = {
		name = fed_politics.2.f
		ai_chance = { factor = 0 }
		hidden_effect = {
			every_known_country = {
				limit = { has_country_flag = rival@ROOT }
				clr_country_flag = rival@ROOT
				clr_country_flag = option_1_@ROOT
				clr_country_flag = option_2_@ROOT
				clr_country_flag = option_3_@ROOT
				clr_country_flag = option_4_@ROOT
			}
		}
		country_event = { id = fed_politics.1 }
	}
}

#FederationReunion
country_event = {
	id = fed_politics.3
	title = fed_politics.3.t
	desc = fed_politics.3.d
	picture = FORT_eventPicture
	
	hidden = yes
	
	immediate = {
		set_global_flag = federation_assembly_reunion
	}
	
	trigger = {
		has_country_modifier = lake_federation_member
		has_global_flag = federation_assembly_house_build
		NOT = { has_disaster = lake_federation_crisis }
		OR = {
			NOT = { has_global_flag = federation_assembly_reunion }
			had_global_flag = {
				flag = federation_assembly_reunion
				days = 1825
			}
		}
		any_owned_province = {
			has_province_modifier = federation_assembly_house
		}
	}
	
	option = {
		name = fed_politics.3.a
		ai_chance = { factor = 50 }
		every_known_country = {
			limit = { has_country_modifier = lake_federation_member }
			country_event = { id = fed_politics.4 }
		}
		country_event = { id = fed_politics.4 }
	}
}

#Sending a Delegation
country_event = {
	id = fed_politics.4
	title = fed_politics.4.t
	desc = fed_politics.4.d
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_modifier = lake_federation_member
	}
	
	#Go
	option = {
		name = fed_politics.4.a
		ai_chance = { factor = 95 }
		add_country_modifier = {
			name = fed_politically_invested
			duration = 730
		}
		lake_federation_gain_politics = yes
	}
	#Don't go
	option = {
		name = fed_politics.4.b
		ai_chance = { factor = 5 }
	}
}
