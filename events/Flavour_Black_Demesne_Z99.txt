namespace = black_demesne

##A new acolyte take the throne
country_event = {
	id = black_demesne.1
	title = black_demesne.1.t
	desc = black_demesne.1.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = Z99
	}
	
	immediate = {
		hidden_effect = {
			random_subject_country = {
				limit = { 
					is_subject_of_type = acolyte_dominion
					NOT = {
						calc_true_if = {
							all_known_country = {
								check_variable = {
									which = aInfluence
									which = PREV
								}
							}
							amount = 1
						}
					}
				}
				save_event_target_as = country
				set_country_flag = old_dominion
				exile_ruler_as = black_heir
			}
		}
	}
	
	option = {
		name = black_demesne.1.a
		ai_chance = { factor = 40 }
		set_ruler = black_heir
		add_ruler_modifier = {
			name = new_sorcerer_king
			duration = 3650
		}
	}
}




##################
#DEBUG EVENT
##################

#Influence Counter
country_event = {
	id = black_demesne.100
	title = black_demesne.100.t
	desc = black_demesne.100.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	# hidden = yes
	
	trigger = {
		tag = Z99
	}
	
	option = {		
		name = "black_demesne.1.a"
		ai_chance = { factor = 40 }
		REB = { set_variable = { aInfluence = 0 } }
		REB = { set_variable = { totalInfluence = 0 } }
		every_subject_country = {
			limit = { is_subject_of_type = acolyte_dominion }
			REB = {
				set_variable = {
					which = aInfluence
					which = PREV
				}
				change_variable = {
					which = totalInfluence
					which = aInfluence
				}
			}
		}
		if = {
			limit = { Z75 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z75 = {
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z76 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z76 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z77 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z77 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z78 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z78 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z79 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z79 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z80 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z80 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z81 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z81 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z82 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z82 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z83 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z83 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z84 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z84 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z85 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z85 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
		if = {
			limit = { Z86 = { exists = yes is_subject_of_type = acolyte_dominion is_subject_of = Z99 } }
			REB = {
				Z86 = { 
					set_variable = { which = percInfluence which = aInfluence }
					set_variable = { which = totalInfluence which = PREV }
					divide_variable = { which = percInfluence which = totalInfluence }
					multiply_variable = { percInfluence = 100 }
				}
			}
		}
	}
}