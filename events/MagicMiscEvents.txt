namespace = magic_misc_events


# Enchantment - Too much enchanting malus accusation
country_event = {
	id =  magic_misc_events.1
	title =  magic_misc_events.1.t
	desc =  magic_misc_events.1.d
	picture = ACCUSATION_eventPicture
	
	#fire_only_once = yes
	#is_triggered_only = yes
	
	#hidden = yes
	
	trigger = {
		ruler_has_personality = mage_personality
		has_ruler_flag = enchantment_1
		
		OR = {
			has_ruler_modifier = magic_realm_enchantment_modify_memories_overlook_national_blunders
			has_ruler_modifier = magic_realm_enchantment_modify_memories_encourage_subservience
			has_ruler_modifier = magic_realm_enchantment_modify_memories_forget_atrocities
			has_ruler_modifier = magic_cooldown_enchantment_dominate_surrender
		}
	}
	
	mean_time_to_happen = {
		months = 7300
		modifier = {
			factor = 0.9
			OR = {
				has_ruler_modifier = magic_realm_enchantment_charm_impress_foreign_diplomats_1
				has_ruler_modifier = magic_realm_enchantment_charm_impress_foreign_diplomats_2
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				has_ruler_modifier = magic_realm_enchantment_charm_inspire_military_1
				has_ruler_modifier = magic_realm_enchantment_charm_inspire_military_2
			}
		}
		modifier = {
			factor = 0.9
			OR = {
				has_ruler_modifier = magic_realm_enchantment_charm_assuage_subjects_1
				has_ruler_modifier = magic_realm_enchantment_charm_assuage_subjects_2
			}
		}
		modifier = {
			factor = 0.75
			has_ruler_modifier = magic_realm_enchantment_modify_memories_overlook_national_blunders
		}
		modifier = {
			factor = 0.75
			has_ruler_modifier = magic_realm_enchantment_modify_memories_encourage_subservience
		}
		modifier = {
			factor = 0.66
			has_ruler_modifier = magic_realm_enchantment_modify_memories_forget_atrocities
		}
		modifier = {
			factor = 0.75
			has_ruler_modifier = magic_cooldown_enchantment_dominate_surrender
		}
		modifier = {
			factor = 0.66
			NOT = { stability = 1 }
		}
	}

	
	option = {	#Maintain the Masquerade
		name = "magic_misc_events.1.a"
		trigger = {
			has_ruler_flag = enchantment_3
		}
		
		add_dip_power = -100
		
		increase_witch_king_points_large
		
	}
	
	option = {	#Deny such accusations!
		name = "magic_misc_events.1.b"
		
		add_prestige = -20
		
		increase_witch_king_points_small
		
		add_country_modifier = {
			name = magic_enchantment_hysteria
			duration = 3650
		}
		
	}
}


# Enchantment - Disloyal mages estate blackmails over enchantment
country_event = {
	id =  magic_misc_events.2
	title =  magic_misc_events.2.t
	desc =  magic_misc_events.2.d
	picture = ACCUSATION_eventPicture
	
	#fire_only_once = yes
	#is_triggered_only = yes
	
	#hidden = yes
	
	trigger = {
		ruler_has_personality = mage_personality
		has_ruler_flag = enchantment_1
		
		OR = {
			has_ruler_modifier = magic_realm_enchantment_modify_memories_overlook_national_blunders
			has_ruler_modifier = magic_realm_enchantment_modify_memories_encourage_subservience
			has_ruler_modifier = magic_realm_enchantment_modify_memories_forget_atrocities
			has_ruler_modifier = magic_cooldown_enchantment_dominate_surrender
		}
		
		has_estate = estate_mages
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_mages
				modifier = EST_VAL_MAGES_PUNISHED
			}
		}
	}
	
	mean_time_to_happen = {
		months = 7300
		modifier = {
			factor = 0.5
			NOT = {
				estate_loyalty = {
					estate = estate_burghers
					loyalty = 50
				}
			}
		}
		modifier = {
			factor = 0.75
			has_ruler_modifier = magic_realm_enchantment_modify_memories_overlook_national_blunders
		}
		modifier = {
			factor = 0.75
			has_ruler_modifier = magic_realm_enchantment_modify_memories_encourage_subservience
		}
		modifier = {
			factor = 0.75
			has_ruler_modifier = magic_cooldown_enchantment_dominate_surrender
		}
	}

	
	option = {	#Bribe the Mages
		name = "magic_misc_events.2.a"
		trigger = {
			has_ruler_flag = enchantment_3
		}
		
		add_years_of_income = -1.5
		
		increase_witch_king_points_small
		
	}
	
	option = {	#Refuse
		name = "magic_misc_events.2.b"
		trigger = {
			has_ruler_flag = enchantment_3
		}
		
		add_prestige = -15
		
		increase_witch_king_points_small
		
		add_country_modifier = {
			name = magic_enchantment_hysteria
			duration = 3650
		}
		
	}
	
	option = {	#Punish the Mages Estate for disloyalty
		name = "magic_misc_events.2.c"

		add_mil_power = -50
		
		increase_witch_king_points_medium
		
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_VAL_MAGES_PUNISHED
			influence = -20
			duration = 5475
		}
	}
}