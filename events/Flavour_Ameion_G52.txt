namespace = flavor_ameion

#Events 1-10 Concern Laskaris
#Events 11-? Are from missions

#Start event 
country_event = { #Start with low republican tradition
	id = flavor_ameion.1
	title = flavor_ameion.1.t
	desc = flavor_ameion.1.d
	picture = NAVAL_MILITARY_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = G52
	}
	
	immediate = {
		hidden_effect = {
			add_ruler_modifier = {
				name = G52_destiny
				duration = 6205
			}
			country_event = { 
				id = flavor_ameion.2
				days = 1440
				random = 40 #Late 1448
			}
		}
	}
	
	option = {
		name = flavor_ameion.1.a
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 15
		}
		add_republican_tradition = -30
		tooltip = {
			add_country_modifier = {
				name = G52_destiny
				duration = 6205
			}
		}
		custom_tooltip = ameion_exempt
		custom_tooltip = ameion_destiny
	}
}

#Avoid or accept Destiny
country_event = {
	id = flavor_ameion.2
	title = flavor_ameion.2.t
	desc = flavor_ameion.2.d
	picture = ECONOMY_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = G52
	}
	
	immediate = {
		hidden_effect = {
			country_event = { 
				id = flavor_ameion.3
				days = 4153
				random = 192 #While Laskaris is 61
			}
		}
	}
	
	option = {
		name = flavor_ameion.2.a
		change_adm = 1
		change_dip = 1
		change_mil = 1
	}
	option = {
		name = flavor_ameion.2.b
		set_country_flag = ameion_evading_destiny
		custom_tooltip = ameion_destiny_2
	}
}

#Death of Laskaris
country_event = {
	id = flavor_ameion.3
	title = flavor_ameion.3.t
	desc = flavor_ameion.3.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = G52
	}
	
	immediate = {
		hidden_effect = {
			add_government_reform = noble_elite_reform
			kill_ruler = yes
		}
	}
	
	option = {
		name = flavor_ameion.3.a
		country_event = { id = flavor_ameion.4 days = 10 }
	}
}

#Legacy of Laskaris
country_event = {
	id = flavor_ameion.4
	title = flavor_ameion.4.t
	desc = flavor_ameion.4.d
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = G52
	}
	
	option = {
		name = flavor_ameion.4.a
		add_stability = 1
		add_country_modifier = {
			name = G52_laskaris_legacy
			duration = 7300
		}
		custom_tooltip = ameion_exempt
		change_estate_land_share = {
			estate = estate_nobles
			share = 5
		}
	}
	
	option = {
		name = flavor_ameion.4.b
		add_republican_tradition = 12
		change_estate_land_share = {
			estate = estate_nobles
			share = -5
		}
	}
}

#Laskaris Wins a Siege
country_event = {
	id = flavor_ameion.5
	title = flavor_ameion.5.t
	desc = flavor_ameion.5.d
	picture = SIEGE_eventPicture
	goto = from
	
	is_triggered_only = yes
	
	trigger = {
		tag = G52
		has_ruler_modifier = G52_destiny
		FROM = {
			development = 10
			fort_level = 1
			has_ruler_leader_from = ROOT
		}
	}
	
	option = {
		name = flavor_ameion.5.a
		add_army_tradition = 10
	}
	
	option = {
		name = flavor_ameion.5.b
		add_army_professionalism = 0.02
	}
}

#Laskaris Regrets Deaths
country_event = {
	id = flavor_ameion.6
	title = flavor_ameion.6.t
	desc = flavor_ameion.6.d
	picture = WOUNDED_SOLDIERS_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_ruler_modifier = G52_destiny
		NOT = { manpower_percentage = 0.33 }
	}
	
	mean_time_to_happen = {
		months = 24
		modifier = {
			factor = 2
			max_manpower = 20
		}
		modifier = {
			factor = 3
			is_at_war = yes
		}
		modifier = {
			factor = 0.5
			NOT = { manpower_percentage = 0.25 }
		}
		modifier = {
			factor = 0.5
			NOT = { manpower_percentage = 0.17 }
		}
	}
	
	option = {
		name = flavor_ameion.6.a
		add_war_exhaustion = 3
	}
}




#Meeting Mteibhara
country_event = {
	id = flavor_ameion.11
	title = flavor_ameion.11.t
	desc = {
		trigger = { NOT = { has_ruler_modifier = G52_destiny } }
		desc = "flavor_ameion.11.d1"
	}
	desc = {
		trigger = { has_ruler_modifier = G52_destiny }
		desc = "flavor_ameion.11.d2"
	}
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_ameion.11.a
		add_dip_power = 5
	}
}

#Meeting Chendhyans
country_event = {
	id = flavor_ameion.12
	title = flavor_ameion.12.t
	desc = {
		trigger = { NOT = { has_ruler_modifier = G52_destiny } }
		desc = "flavor_ameion.12.d2"
	}
	desc = {
		trigger = { has_ruler_modifier = G52_destiny }
		desc = "flavor_ameion.12.d2"
	}
	picture = CIVIL_WAR_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			kill_ruler = yes
		}
	}
	
	option = {
		name = flavor_ameion.12.a
		trigger = {
			NOT = { has_ruler_modifier = G52_destiny }
		}
		add_prestige = -10
		add_army_tradition = 5
	}
	
	option = {
		name = flavor_ameion.12.b
		highlight = yes
		trigger = {
			has_ruler_modifier = G52_destiny
		}
		if = {
			limit = { exists = H29 }
			vassalize = H29
			H29 = { add_liberty_desire = -50 }
		}
		else = {
			if = {
				limit = { 
					2579 = {
						NOT = { is_colony = yes }
						NOT = { is_city = yes }
					}
				}
				2579 = { add_colonysize = 999 add_base_tax = 2 }
			}
			else_if = {
				limit = { 
					2579 = {
						owned_by = ROOT
						NOT = { is_city = yes }
					}
				}
				2579 = { add_colonysize = 900 }
			}
			else_if = {
				limit = { 
					2579 = {
						owned_by = ROOT
						is_city = yes
					}
				}
				2579 = { add_base_tax = 2 }
			}
			else_if = {
				limit = { 
					2579 = {
						NOT = { owned_by = ROOT }
						OR = {
							is_city = yes
							is_colony = yes
						}
					}
				}
				2579 = { add_core = ROOT }
			}
		}
		add_prestige = 10
		add_dip_power = 50
	}
}

#Deyeion independance
country_event = {
	id = flavor_ameion.13
	title = flavor_ameion.13.t
	desc = flavor_ameion.13.d
	picture = CONQUEST_eventPicture
	
	major = yes
	major_trigger = { culture_group = kheionai_ruinborn_elf }
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			G56 = { overlord = { save_event_target_as = G52_G56_overlord } }
		}
	}
	
	option = {
		name = flavor_ameion.13.a
		G56 = {
			declare_war_with_cb = {
				who = event_target:G52_G56_overlord
				casus_belli = cb_independence_war
			}
		}
		join_all_offensive_wars_of = G56
		create_alliance = G56
		G62 = { 
			join_all_offensive_wars_of = G56 
			create_alliance = G56
		}
	}
}

#Echate League Borders
country_event = {
	id = flavor_ameion.14
	title = flavor_ameion.14.t
	desc = flavor_ameion.14.d
	picture = DIPLOMACY_eventPicture
	
	major = yes
	major_trigger = {
		OR = {
			tag = G56
			tag = G62
		}
	}
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			G56 = { overlord = { save_event_target_as = G52_G56_overlord } }
		}
	}
	
	option = {
		name = flavor_ameion.14.a
		add_splendor = 200
		add_country_modifier = {
			name = G52_organized_settling
			duration = 9125
		}
		G56 = {
			add_splendor = 200
			add_country_modifier = {
				name = G52_organized_settling
				duration = 9125
			}
		}
		G62 = {
			add_splendor = 200
			add_country_modifier = {
				name = G52_organized_settling
				duration = 9125
			}
		}
		kankotrund_area = {
			limit = { NOT = { is_core = ROOT } }
			add_core = ROOT
		}
		takothein_area = {
			limit = { NOT = { is_core = ROOT } }
			add_core = ROOT
		}
		deyeion_area = {
			limit = { NOT = { is_core = G56 } }
			add_core = G56
		}
		sotophadi_area = {
			limit = { NOT = { is_core = G56 } }
			add_core = G56
		}
		eiongremos_area = {
			limit = { NOT = { is_core = G56 } }
			add_core = G56
		}
		amgremos_area = {
			limit = { NOT = { is_core = G62 } }
			add_core = G62
		}
		eltibas_area = {
			limit = { NOT = { is_core = G62 } }
			add_core = G62
		}
		serigthan_area = {
			limit = { NOT = { is_core = G62 } }
			add_core = G62
		}
		idziydir_area = {
			limit = { NOT = { is_core = G62 } }
			add_core = G62
		}
	}
}