namespace = xhazobkult_events



country_event = {
	id = xhazobkult_events.0
	title = xhazobkult_events.1.t
	desc = xhazobkult_events.1.d
	picture = MILITARY_CAMP_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	fire_only_once = yes
	
	trigger = {
		religion = xhazobkult
	}
	
	option = {
		every_owned_province = {
			xhazobkult_set_appropriate_modifier = yes
		}
	}
}

#Sanquine Ritual
country_event = { #Select province pool
	id = xhazobkult_events.1
	title = xhazobkult_events.1.t
	desc = xhazobkult_events.1.d
	picture = MILITARY_CAMP_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			xhazobkult_define_sanguine_ritual_pool = yes
			set_country_flag = xhazobkult_sacrifice_menu_flag
		}
	}
	
	after = {
		hidden_effect = {
			event_target:sanguine_ritual1 = {
				clr_province_flag = sanguine_ritual_@ROOT
			}
			event_target:sanguine_ritual2 = {
				clr_province_flag = sanguine_ritual_@ROOT
			}
			event_target:sanguine_ritual3 = {
				clr_province_flag = sanguine_ritual_@ROOT
			}
			event_target:sanguine_ritual4 = {
				clr_province_flag = sanguine_ritual_@ROOT
			}
			clr_country_flag = xhazobkult_sacrifice_menu_flag
		}
	}
	
	option = {
		name = xhazobkult_events.1.a
        ai_chance = { factor = 1 }
		trigger = { has_saved_event_target = sanguine_ritual1 event_target:sanguine_ritual1 = { NOT = { has_province_modifier = xhazobkult_sanguine_ritual_pool } } }
		goto = sanguine_ritual1
		event_target:sanguine_ritual1 = {
			add_province_modifier = {
				name = xhazobkult_sanguine_ritual_pool
				duration = 3650
			}
		}
		hidden_effect = {
			country_event = {
				id = xhazobkult_events.2
			}
		}
	}
	option = {
		name = xhazobkult_events.1.b
        ai_chance = { factor = 1 }
		trigger = { has_saved_event_target = sanguine_ritual2 event_target:sanguine_ritual2 = { NOT = { has_province_modifier = xhazobkult_sanguine_ritual_pool } } }
		goto = sanguine_ritual2
		event_target:sanguine_ritual2 = {
			add_province_modifier = {
				name = xhazobkult_sanguine_ritual_pool
				duration = 3650
			}
		}
		hidden_effect = {
			country_event = {
				id = xhazobkult_events.2
			}
		}
	}
	option = {
		name = xhazobkult_events.1.c
        ai_chance = { factor = 1 }
		trigger = { has_saved_event_target = sanguine_ritual3 event_target:sanguine_ritual3 = { NOT = { has_province_modifier = xhazobkult_sanguine_ritual_pool } } }
		goto = sanguine_ritual3
		event_target:sanguine_ritual3 = {
			add_province_modifier = {
				name = xhazobkult_sanguine_ritual_pool
				duration = 3650
			}
		}
		hidden_effect = {
			country_event = {
				id = xhazobkult_events.2
			}
		}
	}
	option = {
		name = xhazobkult_events.1.dd
        ai_chance = { factor = 1 }
		trigger = { has_saved_event_target = sanguine_ritual4 event_target:sanguine_ritual4 = { NOT = { has_province_modifier = xhazobkult_sanguine_ritual_pool } } }
		goto = sanguine_ritual4
		event_target:sanguine_ritual4 = {
			add_province_modifier = {
				name = xhazobkult_sanguine_ritual_pool
				duration = 3650
			}
		}
		hidden_effect = {
			country_event = {
				id = xhazobkult_events.2
			}
		}
	}
	
	option = { #Commence the ritual
		name = xhazobkult_events.1.e
		ai_chance = { factor = 1 }
		trigger = { num_of_owned_provinces_with = { value = 1 has_province_modifier = xhazobkult_sanguine_ritual_pool } }
		
		xhazobkult_sanguine_ritual_sacrifice = yes
		add_country_modifier = {
			name = xhazobkult_performed_sanguine_ritual
			duration = 3650
		}
	}
	
	#Be able to remove provinces?
}

country_event = {
	id = xhazobkult_events.2
	title = xhazobkult_events.1.t
	desc = xhazobkult_events.1.d
	picture = MILITARY_CAMP_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		
	}
	
	after = {
		country_event = {
			id = xhazobkult_events.1
		}
	}
}
