namespace = bim_lau_flavour

country_event = { #Restore the necropolis?
	id =  bim_lau_flavour.1
	title = bim_lau_flavour.1.t
	desc = bim_lau_flavour.1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #restore
		name = bim_lau_flavour.1.a
		
		set_country_flag = restore_bim_lau_necropolis
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		
		ai_chance = {
			factor = 90
		}
	}
	
	option = { #exploit
		name = bim_lau_flavour.1.b
		
		set_country_flag = exploit_bim_lau_necropolis
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		
		ai_chance = {
			factor = 10
		}
	}
}

country_event = { #revolt for the necropolis
	id = bim_lau_flavour.2
	title = bim_lau_flavour.2.t
	desc = bim_lau_flavour.2.d
	picture =
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #make concessions
		name = bim_lau_flavour.2.a
		
		add_years_of_income = -3
		every_owned_province = {
			add_local_autonomy = 35
		}
		
		4565 = {
			remove_province_modifier = bim_lau_necropolis_derelict
			add_permanent_province_modifier = {
				name = bim_lau_necropolis_repairs
				duration = -1
			}
		}
		
		ai_chance = {
			factor = 10
		}
	}
	
	option = { #royal family is killed
		name = bim_lau_flavour.2.b
		
		kill_ruler = yes
		kill_heir = yes
		
		define_ruler = {
			culture = ranilau
			age = 53
			adm = 0
			dip = 0
			mil = 0
			max_random_adm = 6
			max_random_dip = 6
			max_random_mil = 6
			hide_skills = yes
			claim = 30
		}
		
		4565 = {
			remove_province_modifier = bim_lau_necropolis_derelict
			add_permanent_province_modifier = {
				name = bim_lau_necropolis_repairs
				duration = -1
			}
		}
		
		ai_chance = {
			factor = 1
		}
	}
	
	option = { #estates pay for restoration
		name = bim_lau_flavour.2.c
		
		trigger = {
			estate_loyalty = {
				estate = estate_church
				loyalty = 70
			}
			estate_influence = {
				estate = estate_church
				influence = 50
			}
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 70
			}
			estate_influence = {
				estate = estate_nobles
				influence = 50
			}
		}
		
		random_owned_province = {
			add_local_autonomy = 15
		}
		random_owned_province = {
			add_local_autonomy = 15
		}
		random_owned_province = {
			add_local_autonomy = 15
		}
		
		4565 = {
			remove_province_modifier = bim_lau_necropolis_derelict
			add_permanent_province_modifier = {
				name = bim_lau_necropolis_repairs
				duration = -1
			}
		}
		
		ai_chance = {
			factor = 1000
		}
	}
}

country_event = { #the succession
	id = bim_lau_flavour.3
	title = bim_lau_flavour.3.t 
	desc = bim_lau_flavour.3.d 
	picture =
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #harimari eldest son
		name = bim_lau_flavour.3.a 
		
		trigger = {
			ruler_culture = royal_harimari
		}
		
		ai_chance = {
			factor = 75
		}
		
		define_heir = {
			culture = royal_harimari
			dynasty = ROOT
			age = 23
			adm = 0
			dip = 0
			mil = 0
			max_random_adm = 6
			max_random_dip = 6
			max_random_mil = 6
			hide_skills = yes
		}
		
		set_country_flag = bim_lau_normal_missions
		swap_non_generic_missions = yes
	}
	
	option = { #harimari supremacy
		name = bim_lau_flavour.3.b 
		
		trigger = {
			ruler_culture = royal_harimari
		}
		
		ai_chance = {
			factor = 25
		}
		
		define_heir = {
			culture = royal_harimari
			dynasty = ROOT
			age = 16
			adm = 0
			dip = 0
			mil = 6
			max_random_adm = 6
			max_random_dip = 6
			hide_skills = yes
		}
		
		change_primary_culture = royal_harimari
		set_country_flag = harimari_supremacy_succession
		swap_non_generic_missions = yes
	}
	
	option = { #human option Ang Rang dynasty returns
		name = bim_lau_flavour.3.c 
		
		trigger = {
			primary_culture = ranilau
			ruler_culture = ranilau
		}
		
		ai_chance = {
			factor = 125
		}
	
		define_heir = {
			culture = ranilau
			dynasty = "Ang Rang"
			age = 14
			adm = 4
			dip = 5
			mil = 4
			hide_skills = yes
			claim = 30
		}
		set_country_flag = bim_lau_normal_missions
		set_country_flag = ang_rang_dynasty_returned
		swap_non_generic_missions = yes
	}
	
	option = { #human option refuse Ang Rang dynasty
		name = bim_lau_flavour.3.d 
		
		trigger = {
			primary_culture = ranilau
			ruler_culture = ranilau
		}
		
		ai_chance = {
			factor = 25
		}
		
		legitimacy = -20
		
		every_owned_province = {
			limit = {
				culture = ranilau
			}
			add_unrest = 5
		}
		
		define_heir = {
			culture = ranilau
			dynasty = ROOT
			age = 14
			adm = 0
			dip = 0
			mil = 0
			max_random_adm = 5
			max_random_dip = 5
			max_random_mil = 5
			hide_skills = yes
			claim = 60
		}
		
		set_country_flag = bim_lau_normal_missions
		swap_non_generic_missions = yes
	}
	
	option = { #in case something unexpected happened
		name = bim_lau_flavour.3.a
		
		trigger = {
			NOT = { ruler_culture = ranilau }
			NOT = { ruler_culture = royal_harimari }
		}
		
		define_heir = {
			dynasty = ROOT
			age = 14
			adm = 0
			dip = 0
			mil = 0
			max_random_adm = 3
			max_random_dip = 3
			max_random_mil = 3
		}
		
		set_country_flag = bim_lau_normal_missions
		swap_non_generic_missions = yes
	}
}

#Necropolis Setup event
country_event = {
	id = bim_lau_flavour.4
	title = bim_lau_flavour.4.t 
	desc = bim_lau_flavour.4.d 
	
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		4565 = {
			set_variable = {
				which = BimLauTombPower
				value = 0
			}
		}
	}
	
	option = {
		name = bim_lau_flavour.4.a
	}
}

#Great Necropolis Entombment
country_event = {
	id = bim_lau_flavour.5
	title = bim_lau_flavour.5.t
	desc = bim_lau_flavour.5.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 150
					}
				}
				4565 = {
					remove_province_modifier = Y51_tomb_power_high
				}
			}
			if = {
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 100
					}
				}
				4565 = {
					remove_province_modifier = Y51_tomb_power_medium
				}
			}
			if = {
				NOT = {
					check_variable = {
						which = BimLauTombPower
						value = 50
					}
				}
				4565 = {
					remove_province_modifier = Y51_tomb_power_low
				}
			}
		}
	}
	
	#Large Ceremony
	option = {
		name = bim_lau_flavour.5.a
		ai_chance = {
			factor = 15
		}
		add_years_of_income = -2
		add_prestige = 10
		4565 = {
			random_list = {
				33 = {
					add_base_tax = 2
				}
				33 = {
					add_base_production = 2
				}
				33 = {
					add_base_manpower = 2
				}
			}
		}
		every_province = {
			LIMIT = {
				owned_by = ROOT
				region = bomdan_region
			}
			add_province_modifier = {
				name = Y58_lot_dekkhang_ceremony
				duration = 1825
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					ruler_has_mage_personality = yes
				}
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 5
					}
				}
			}
			else = {
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 1
					}
				}
			}
		}
	}
	
	#Medium Ceremony
	option = {
		name = bim_lau_flavour.5.b
		ai_chance = {
			factor = 70
		}
		add_years_of_income = -1
		add_prestige = 5
		4565 = {
			random_list = {
				33 = {
					add_base_tax = 1
				}
				33 = {
					add_base_production = 1
				}
				33 = {
					add_base_manpower = 1
				}
			}
		}
		every_province = {
			LIMIT = {
				owned_by = ROOT
				region = bomdan_region
			}
			add_province_modifier = {
				name = Y58_lot_dekkhang_ceremony
				duration = 1095
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					ruler_has_mage_personality = yes
				}
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 5
					}
				}
			}
			else = {
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 1
					}
				}
			}
		}
	}
	
	#Only Family
	option = {
		name = bim_lau_flavour.5.c
		ai_chance = {
			factor = 15
		}
		add_years_of_income = -0.1
		every_province = {
			LIMIT = {
				owned_by = ROOT
				region = bomdan_region
			}
			add_province_modifier = {
				name = Y58_lot_dekkhang_ceremony
				duration = 365
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					ruler_has_mage_personality = yes
				}
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 5
					}
				}
			}
			else = {
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 1
					}
				}
			}
		}
	}
	
	#Tomb Power rising
	option = {
		name = bim_lau_flavour.5.d
		
		trigger = {
			check_variable = {
				which = BimLauTombPower
				value = 50
			}
			NOT = {
				check_variable = {
					which = BimLauTombPower
					value = 100
				}
			}
			4565 = {
				NOT = { has_province_modifier = Y51_tomb_power_low }
			}
		}
		
		ai_chance = {
			factor  = 1000
		}
		add_years_of_income = -2
		add_prestige = 10
		4565 = {
			random_list = {
				33 = {
					add_base_tax = 2
				}
				33 = {
					add_base_production = 2
				}
				33 = {
					add_base_manpower = 2
				}
			}
			add_permanent_province_modifier = Y51_tomb_power_low
			remove_province_modifier = Y51_tomb_power_medium
			remove_province_modifier = Y51_tomb_power_high
		}
		every_province = {
			LIMIT = {
				owned_by = ROOT
				region = bomdan_region
			}
			add_province_modifier = {
				name = Y58_lot_dekkhang_ceremony
				duration = 1825
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					ruler_has_mage_personality = yes
				}
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 5
					}
				}
			}
			else = {
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 1
					}
				}
			}
		}
	}
	
	option = {
		name = bim_lau_flavour.5.d
		
		trigger = {
			check_variable = {
				which = BimLauTombPower
				value = 100
			}
			NOT = {
				check_variable = {
					which = BimLauTombPower
					value = 150
				}
			}
			4565 = {
				NOT = { has_province_modifier = Y51_tomb_power_medium }
			}
		}
		
		ai_chance = {
			factor  = 1000
		}
		add_years_of_income = -2
		add_prestige = 10
		4565 = {
			random_list = {
				33 = {
					add_base_tax = 2
				}
				33 = {
					add_base_production = 2
				}
				33 = {
					add_base_manpower = 2
				}
			}
			add_permanent_province_modifier = Y51_tomb_power_medium
			remove_province_modifier = Y51_tomb_power_low
			remove_province_modifier = Y51_tomb_power_high
		}
		every_province = {
			LIMIT = {
				owned_by = ROOT
				region = bomdan_region
			}
			add_province_modifier = {
				name = Y58_lot_dekkhang_ceremony
				duration = 1825
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					ruler_has_mage_personality = yes
				}
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 5
					}
				}
			}
			else = {
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 1
					}
				}
			}
		}
	}
	
	option = {
		name = bim_lau_flavour.5.d
		
		trigger = {
			check_variable = {
				which = BimLauTombPower
				value = 150
			}
			4565 = {
				NOT = { has_province_modifier = Y51_tomb_power_low }
			}
		}
		
		ai_chance = {
			factor  = 1000
		}
		add_years_of_income = -2
		add_prestige = 10
		4565 = {
			random_list = {
				33 = {
					add_base_tax = 2
				}
				33 = {
					add_base_production = 2
				}
				33 = {
					add_base_manpower = 2
				}
			}
			add_permanent_province_modifier = Y51_tomb_power_high
			remove_province_modifier = Y51_tomb_power_medium
			remove_province_modifier = Y51_tomb_power_low
		}
		every_province = {
			LIMIT = {
				owned_by = ROOT
				region = bomdan_region
			}
			add_province_modifier = {
				name = Y58_lot_dekkhang_ceremony
				duration = 1825
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					ruler_has_mage_personality = yes
				}
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 5
					}
				}
			}
			else = {
				4565 = {
					change_variable = {
						which = BimLauTombPower
						value = 1
					}
				}
			}
		}
	}
}