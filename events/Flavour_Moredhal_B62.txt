
namespace = flavor_moredhal
  
country_event = {
	id = flavor_moredhal.1
	title = flavor_moredhal.1.t
	desc = flavor_moredhal.1.d
	picture = DIPLOMACY_eventPicture

	trigger = {
		OR = { 
			owns_core_province = 750
			owns_core_province = 727
			owns_core_province = 728
			owns_core_province = 248
			owns_core_province = 355
			owns_core_province = 358
			owns_core_province = 355
		}
		NOT = { has_adventurer_reform = yes }
		NOT = { has_reform = secret_societies_inf }
		NOT = { has_country_flag = moredhal_rejected }
		current_age = age_of_reformation
		culture_group = escanni
		NOT = { has_country_flag = feudal_escann_kingdom }
		NOT = { culture = white_reachman }
		NOT = { culture = half_orc }
		NOT = { culture = grombar_half_orc }
		NOT = { culture = black_castanorian }
		NOT = { culture = castanorian }
	}
	mean_time_to_happen = {
		months = 2
	}
	option = {
		name = flavor_moredhal.1.a
		ai_chance = { factor = 100 }
		add_government_reform = secret_societies_inf
	}	
	option = {
		name = flavor_moredhal.1.b
		set_country_flag = moredhal_rejected
	}
}
country_event = {
	id = flavor_moredhal.2
	title = flavor_moredhal.2.t
	desc = flavor_moredhal.2.d
	picture = DIPLOMACY_eventPicture

	trigger = {
		has_reform = secret_societies_inf
		has_dlc = "Rule Britannia"
	}
	mean_time_to_happen = {
		months = 12
	}
	option = {
		name = flavor_moredhal.2.a
		ai_chance = { factor = 50 }
		random_list = {
			50 = {
				change_innovativeness = 3
			}
			50 = {
				change_innovativeness = -1
			}
		}
	}
	option = {
		name = flavor_moredhal.2.b
		ai_chance = { factor = 50 }
	}
}
country_event = {
	id = flavor_moredhal.3
	title = flavor_moredhal.3.t
	desc = flavor_moredhal.3.d
	picture = DIPLOMACY_eventPicture

	trigger = {
		has_reform = secret_societies_inf
	}
	mean_time_to_happen = {
		months = 12
	}
	option = {
		name = flavor_moredhal.3.a
		ai_chance = { factor = 50 }
		trigger = {
			has_estate = estate_church
		}
		random_list = {
			25 = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = 5
				}
			}
			50 = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = 10
				}
			}
			25 = {
				add_estate_loyalty = {
					estate = estate_church
					loyalty = 20
				}
			}
		}
	}
	option = {
		name = flavor_moredhal.3.b
		ai_chance = { factor = 50 }
		trigger = {
			has_estate = estate_nobles
		}
		random_list = {
			25 = {
				add_estate_loyalty = {
					estate = estate_nobles
					loyalty = 5
				}
			}
			50 = {
				add_estate_loyalty = {
					estate = estate_nobles
					loyalty = 10
				}
			}
			25 = {
				add_estate_loyalty = {
					estate = estate_nobles
					loyalty = 20
				}
			}
		}
	}
	option = {
		name = flavor_moredhal.3.c
		ai_chance = { factor = 50 }
		trigger = {
			has_estate = estate_burghers
		}
		random_list = {
			25 = {
				add_estate_loyalty = {
					estate = estate_burghers
					loyalty = 5
				}
			}
			50 = {
				add_estate_loyalty = {
					estate = estate_burghers
					loyalty = 10
				}
			}
			25 = {
				add_estate_loyalty = {
					estate = estate_burghers
					loyalty = 20
				}
			}
		}
	}
	option = {
		name = flavor_moredhal.3.e
		ai_chance = { factor = 50 }
		trigger = {
			has_estate = estate_castonath_patricians
		}
		random_list = {
			25 = {
				add_estate_loyalty = {
					estate = estate_castonath_patricians
					loyalty = 5
				}
			}
			50 = {
				add_estate_loyalty = {
					estate = estate_castonath_patricians
					loyalty = 10
				}
			}
			25 = {
				add_estate_loyalty = {
					estate = estate_castonath_patricians
					loyalty = 20
				}
			}
		}
	}
	option = {
		name = flavor_moredhal.3.f
		ai_chance = { factor = 50 }
		trigger = {
			has_estate = estate_mages
		}
		random_list = {
			25 = {
				add_estate_loyalty = {
					estate = estate_mages
					loyalty = 5
				}
			}
			50 = {
				add_estate_loyalty = {
					estate = estate_mages
					loyalty = 10
				}
			}
			25 = {
				add_estate_loyalty = {
					estate = estate_mages
					loyalty = 20
				}
			}
		}
	}
	option = {
		name = flavor_moredhal.3.g
		ai_chance = { factor = 50 }
		trigger = {
			has_estate = estate_adventurers
		}
		random_list = {
			25 = {
				add_estate_loyalty = {
					estate = estate_adventurers
					loyalty = 5
				}
			}
			50 = {
				add_estate_loyalty = {
					estate = estate_adventurers
					loyalty = 10
				}
			}
			25 = {
				add_estate_loyalty = {
					estate = estate_adventurers
					loyalty = 20
				}
			}
		}
	}
}
country_event = {
	id = flavor_moredhal.4
	title = flavor_moredhal.4.t
	desc = flavor_moredhal.4.d
	picture = DIPLOMACY_eventPicture

	trigger = {
		has_reform = secret_societies_inf
	}
	mean_time_to_happen = {
		months = 12
	}
	option = {
		name = flavor_moredhal.4.a
		ai_chance = { factor = 50 }
		random_list = {
			33 = {
				add_legitimacy = 25
				add_republican_tradition = 10
				add_devotion = 25
			}
			33 = {
				add_corruption = 3
			}
			33 = {
				change_government_reform_progress = 100
			}
		}
	}
	option = {
		name = flavor_moredhal.4.b
		ai_chance = { factor = 50 }
		add_years_of_income = 0.5
	}
}
country_event = {
	id = flavor_moredhal.5
	title = flavor_moredhal.5.t
	desc = flavor_moredhal.5.d
	picture = DIPLOMACY_eventPicture

	trigger = {
		has_reform = secret_societies_inf
		has_heir = yes
	}
	mean_time_to_happen = {
		months = 12
	}
	option = {
		name = flavor_moredhal.5.a
		ai_chance = { factor = 50 }
		random_list = {
			25 = {
				change_heir_adm = 1
			}
			25 = {
				change_heir_dip = 1
			}
			25 = {
				change_heir_mil = 1
			}
			25 = {
				add_heir_claim = -10
			}
		}
	}
	option = {
		name = flavor_moredhal.5.b
		ai_chance = { factor = 50 }
		add_heir_claim = 5
	}
}

country_event = {
	id = flavor_moredhal.6
	title = flavor_moredhal.6.t
	desc = flavor_moredhal.6.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = flavor_moredhal.6.a
        ai_chance = { factor = 100 }
		escann_superregion = {
			add_core = B62
			cede_province = B62
		}
	}
}

country_event = {
	id = flavor_moredhal.7
	title = flavor_moredhal.7.t
	desc = flavor_moredhal.7.d
	picture = ARTWORK_eventPicture

	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	immediate = {
		hidden_effect = {
			whistlevale_area = {
				add_core = B60
				cede_province = B60
				change_culture = farrani
				change_religion = corinite
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				cavalry = B60
				cavalry = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
			}
			valefort_area = {
				add_core = B60
				cede_province = B60
				change_culture = farrani
				change_religion = corinite
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				cavalry = B60
				cavalry = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
			}
			rohibon_area = {
				add_core = B60
				cede_province = B60
				change_culture = farrani
				change_religion = corinite
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				cavalry = B60
				cavalry = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
			}
			verteben_area = {
				add_core = B60
				cede_province = B60
				change_culture = farrani
				change_religion = corinite
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				cavalry = B60
				cavalry = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
			}
			taran_plains_area = {
				add_core = B60
				cede_province = B60
				change_culture = farrani
				change_religion = corinite
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				cavalry = B60
				cavalry = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
			}
			cursewood_area = {
				add_core = B60
				cede_province = B60
				change_culture = farrani
				change_religion = corinite
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				infantry = B60
				cavalry = B60
				cavalry = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
				artillery = B60
			}
			B60 = {
				change_religion = corinite
				set_capital = 777
				define_general = {
					name = "Wystan"
					shock = 6
					fire = 4
					manuever = 3
					siege = 5
					trait = war_wizard_personality
				}
				define_leader_to_ruler = {
					name = "Wystan"
					adm = 6
					dip = 6
					mil = 6
					fixed = yes
					claim = 100
				}
				add_ruler_personality = mage_personality
				set_dynasty = "síl na Eán"
				add_ruler_modifier = { 
					name = last_hope_of_escann
					duration = -1
				}
				declare_war_with_cb = {
					who = B62
					casus_belli = cb_annex
				}
			}
			A32 = {
				country_event = { 
					id = flavor_moredhal.9
					days = 7
				}
			}
			A77 = {
				country_event = { 
					id = flavor_moredhal.9
					days = 7
				}
			}
			escann_superregion = {
				limit = {
					country_or_non_sovereign_subject_holds = B62
					NOT = { 
						OR = {
							culture = moredhalic
							religion = infernal_court }
					}
				}
				random = { 
					chance = 65
					spawn_rebels = {
						type = nationalist_rebels
						size = 1
					}
				}
			}
		}
	}

	option = {
        name = flavor_moredhal.7.a
        ai_chance = { factor = 100 }
		set_country_flag = farranni_revolt_debug_flag
	}
}

country_event = {
	id = flavor_moredhal.8
	title = flavor_moredhal.8.t
	desc = flavor_moredhal.8.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = flavor_moredhal.8.a
        ai_chance = { factor = 100 }
		set_country_flag = farrani_revolt_resolved
		remove_country_flag = moredhal_farrani_revolt_flag

		whistlevale_area = {
			remove_core = B60
			change_culture = moredhalic
			change_religion = infernal_court
		}
		valefort_area = {
			remove_core = B60
			change_culture = moredhalic
			change_religion = infernal_court
		}
		rohibon_area = {
			remove_core = B60
			change_culture = moredhalic
			change_religion = infernal_court
		}
		verteben_area = {
			remove_core = B60
			change_culture = moredhalic
			change_religion = infernal_court
		}
		taran_plains_area = {
			remove_core = B60
			change_culture = moredhalic
			change_religion = infernal_court
		}
		cursewood_area = {
			remove_core = B60
			change_culture = moredhalic
			change_religion = infernal_court
		}
	}
}

country_event = {
	id = flavor_moredhal.9
	title = flavor_moredhal.9.t
	desc = flavor_moredhal.9.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		always = yes
	}
	
	option = {
        name = flavor_moredhal.9.a
        ai_chance = { factor = 100 }
		ROOT = {
			join_all_offensive_wars_of = B60
			join_all_defensive_wars_of = B60
			add_historical_friend = B60
		}
		B60 = {
			add_historical_friend = ROOT
		}
	}

	option = {
        name = flavor_moredhal.9.b
        ai_chance = { factor = 0 }
	}
}