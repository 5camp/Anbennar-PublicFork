#hidden events for pulses

province_event = {
	id = beast_memory.1
	title = beast_memory.1.t
	desc = beast_memory.1.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        clr_global_flag = beast_memory_leopard
        clr_global_flag = beast_memory_elephant
        set_global_flag = beast_memory_mongoose
        every_country = {
            limit = {
                religion = beast_memory
            }
            country_event = { 
                id = beast_memory.4
            }
        }
        set_variable = {
            which = BeastMemoryCounter
            value = 0
        }
        set_variable = { # we use this for loc. It is separate because we might want to mess with it
            which = BeastMemoryYearsLeft
            value = 8
        }
    }

	option = {
		name = beast_memory.2.a
	}
}

province_event = {
	id = beast_memory.2
	title = beast_memory.2.t
	desc = beast_memory.2.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        set_global_flag = beast_memory_leopard
        clr_global_flag = beast_memory_elephant
        clr_global_flag = beast_memory_mongoose
        every_country = {
            limit = {
                religion = beast_memory
            }
            country_event = { 
                id = beast_memory.5
            }
        }
        set_variable = {
            which = BeastMemoryCounter
            value = 0
        }
        set_variable = { # we use this for loc. It is separate because we might want to mess with it
            which = BeastMemoryYearsLeft
            value = 8
        }
    }

	option = {
		name = beast_memory.2.a
	}
}

province_event = {
	id = beast_memory.3
	title = beast_memory.3.t
	desc = beast_memory.3.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        clr_global_flag = beast_memory_leopard
        clr_global_flag = beast_memory_elephant
        set_global_flag = beast_memory_mongoose
        every_country = {
            limit = {
                religion = beast_memory
            }
            country_event = { 
                id = beast_memory.6
            }
        }
        set_variable = {
            which = BeastMemoryCounter
            value = 0
        }
        set_variable = { # we use this for loc. It is separate because we might want to mess with it
            which = BeastMemoryYearsLeft
            value = 8
        }
    }

	option = {
		name = beast_memory.2.a
	}
}

country_event = {
	id = beast_memory.4
	title = beast_memory.4.t
	desc = beast_memory.4.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
        #has_global_flag = beast_memory_mongoose
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

#loc for tanizu
	option = {
		name = beast_memory.4.a
        trigger = {
            culture = tanizu
            NOT = { has_ruler_modifier = brave_mongoose_ruler }
        }
	}
    #loc for dakinshi
	option = {
		name = beast_memory.4.b
        trigger = {
            culture = dakinshi
            NOT = { has_ruler_modifier = brave_mongoose_ruler }
        }
	}
    #loc for having a mongoose shifter ruler
    option = {
		name = beast_memory.4.c
        trigger = {
            has_ruler_modifier = brave_mongoose_ruler
        }
	}
    #loc for converts
    option = {
		name = beast_memory.4.d
        trigger = {
            NOT = {
                culture = tanizu
                culture = dakinshi
            }
            NOT = { has_ruler_modifier = brave_mongoose_ruler }
        }
	}
}

country_event = {
	id = beast_memory.5
	title = beast_memory.5.t
	desc = beast_memory.5.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
        #has_global_flag = beast_memory_leopard
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

#loc for tanizu
	option = {
		name = beast_memory.5.a
        trigger = {
            culture = tanizu
            NOT = { has_ruler_modifier = wise_leopard_ruler }
        }
	}
    #loc for dakinshi
	option = {
		name = beast_memory.5.b
        trigger = {
            culture = dakinshi
            NOT = { has_ruler_modifier = wise_leopard_ruler }
        }
	}
    #loc for having a mongoose shifter ruler
    option = {
		name = beast_memory.5.c
        trigger = {
            has_ruler_modifier = wise_leopard_ruler
        }
	}
    #loc for converts
    option = {
		name = beast_memory.5.d
        trigger = {
            NOT = {
                culture = tanizu
                culture = dakinshi
            }
            NOT = { has_ruler_modifier = wise_leopard_ruler }
        }
	}
}

country_event = {
	id = beast_memory.6
	title = beast_memory.6.t
	desc = beast_memory.6.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
        #has_global_flag = beast_memory_elephant
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

#loc for tanizu
	option = {
		name = beast_memory.6.a
        trigger = {
            culture = tanizu
            NOT = { has_ruler_modifier = selfless_elephant_ruler }
        }
	}
    #loc for dakinshi
	option = {
		name = beast_memory.6.b
        trigger = {
            culture = dakinshi
            NOT = { has_ruler_modifier = selfless_elephant_ruler }
        }
	}
    #loc for having a mongoose shifter ruler
    option = {
		name = beast_memory.6.c
        trigger = {
            has_ruler_modifier = selfless_elephant_ruler
        }
	}
    #loc for converts
    option = {
		name = beast_memory.6.d
        trigger = {
            NOT = {
                culture = tanizu
                culture = dakinshi
            }
            NOT = { has_ruler_modifier = selfless_elephant_ruler }
        }
	}
}

#province event to handle the recursion
province_event = {
	id = beast_memory.7
	title = beast_memory.1.t
	desc = beast_memory.1.d
	picture = BURGHER_ESTATE_eventPicture

	is_triggered_only = yes

	trigger = {
		#religion = beast_memory
	}

	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        #first time
        if = {
            limit = {
                NOT = {
                    has_global_flag = beast_memory_setup_flag
                }
                set_variable = {
                    which = BeastMemoryCounter
                    value = 0 #1444 we increment this later
                }
                set_variable = { # we use this for loc. It is separate because we might want to mess with it
                    which = BeastMemoryYearsLeft
                    value = 8 #we decrement this later
                }
                set_global_flag = beast_memory_setup_flag
            }
        }

        if = { #if mongoose and eight years have passed, go to leopard
            limit = {
                has_global_flag = beast_memory_mongoose
                check_variable = {
                    which = BeastMemoryCounter
                    value = 7
                }
            }
            province_event = { 
                id = beast_memory.1 
                days = 70 #delays a little over two months so not to do on heavy load times
            }
            #set_variable = { #happens elsewhere
            #    which = BeastMemoryCounter
            #    value = 0
            #}
        }
        else_if = {
            limit = {
                has_global_flag = beast_memory_leopard
                check_variable = {
                    which = BeastMemoryCounter
                    value = 7
                }
            }
            province_event = { 
                id = beast_memory.2
                days = 70 #delays a little over two months so not to do on heavy load times
            }
            #set_variable = {
            #    which = BeastMemoryCounter
            #    value = 0
            #}
        }
        else_if = {
            limit = {
                has_global_flag = beast_memory_elephant
                check_variable = {
                    which = BeastMemoryCounter
                    value = 7
                }
            }
            province_event = { 
                id = beast_memory.2 
                days = 70 #delays a little over two months so not to do on heavy load times
            }
            #set_variable = {
            #    which = BeastMemoryCounter
            #    value = 0
            #}
        }
        else = { #if we don't change we increment
            change_variable = {
                which = BeastMemoryCounter
                value = 1
            }
            change_variable = {
                which = BeastMemoryYearsLeft
                value = -1
            }
        }
    }

	option = {
		name = beast_memory.2.a
	}
}