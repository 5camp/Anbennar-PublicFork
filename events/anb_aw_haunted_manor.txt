namespace = aw_haunted_manor

#The Adventurers Wanted uses a strict ID system to make the system easier to author content for
#The IDs below 100 are core utility systems that are usually straight copies or modifications of how the AW system works, such as monsters being able to migrate and be defeated by adventurers.
#The IDs above 100 are more unique situations for the specific encounter, but they should correlate with the numbers from above: if ID 10s deal with migration, then ID 110s should be the unique events to do with migration - for example bribing a Thieves Guild to GTFO your country
#Crazy and more uniques ones that dont conform to the utilities should be ID 200

#USE THE anb_aw_haunted_manor TO SEE A SIMPLE COPY-PASTABLE FORMAT IN ADDITION TO STUFF LIKE MIGRATION STYLES ETC
#Search for CHANGEABLE for the criteria you should change in that file and this one

#################################################################
# Welcome to the master file for the Adventurers Wanted System. In the comments below you'll see copy-pastable events for you to choose, different migration styles as well as prebuilt events to handle stuff like spawning rebellions
#################################################################

#0 - spawn in province
province_event = {
    id = aw_haunted_manor.0
    title = aw_haunted_manor.0.t
    desc = aw_haunted_manor.0.d
    picture = COMET_SIGHTED_eventPicture
    goto = ROOT
    
    is_triggered_only = yes
    #hidden = yes
    
    #yup thats happening
    option = {
        name = aw_basic.0.a
        ai_chance = { 
            factor = 1 
        }
        add_permanent_province_modifier  = {
            name = aw_haunted_manor_1
            duration = -1  
        }

        custom_tooltip = aw_how_to_get_more_adventurer_removal_chance_tooltip
    }
}


#1 - event manager, called by on_actions. This happens ONCE per pulse. If you have 7 of these, it still only fires the manager once
country_event = {
    id = aw_haunted_manor.1
    title = aw_haunted_manor.1.t
    desc = aw_haunted_manor.1.d
    picture = COMET_SIGHTED_eventPicture
    
    hidden = yes
    is_triggered_only = yes
    

    trigger = {
    }

    immediate = {
        random_owned_province = {
            limit = {
                OR = { 
                    has_province_modifier = aw_haunted_manor_1
                    has_province_modifier = aw_haunted_manor_2
                    has_province_modifier = aw_haunted_manor_3
                }
            }
            save_event_target_as = aw_target
        }
    }
    
	
	option = {
        event_target:aw_target = {
            random_list = {
                #10 - Base migration
				5 = {
					province_event = { id = aw_haunted_manor.10 }
				}
                #13 - Base propagation
                5 = {
                    province_event = { id = aw_haunted_manor.13 }
                }

                #15 - Migrate to non monstrous if monstrous nation is owner
                75 = {
                    modifier = {
                        #only want this to ever be part of the equation if you are monstrous
                        factor = 0
                        NOT = { owner = { has_country_modifier = monstrous_nation } }
                    }
                    province_event = { id = aw_haunted_manor.15 }    #Migrate out of monstrous. high just so it jumps out of there sooner rather than later
                }

                #20 - natural removal
                7 = {
                    province_event = { id = aw_haunted_manor.20 }    #Natural removal
                }

                #21 - adventurer removal
                7 = {
                    #Base modifiers

                    #more likely if generous quest rewards/adverturer nation
                    modifier = {
                        factor = 2
                        OR = {
                            owner = { has_estate_privilege = estate_adventurers_generous_quest_rewards }
                            owner = { has_adventurer_reform = yes }
                        }
                    }

                    #more likely if loyal
                    modifier = {
                        factor = 2
                        owner = {
                            estate_loyalty = {
                                estate = estate_adventurers
                                loyalty = 60
                            }
                        }
                    }

                    #more likely if high influence
                    modifier = {
                        factor = 2
                        owner = {
                            estate_influence = {
                                estate = estate_adventurers
                                influence = 60
                            }
                        }
                    }
                    province_event = { id = aw_haunted_manor.21 }
                }

                #22 - natural tier down
                10 = {
                    province_event = { id = aw_haunted_manor.22 } 
                }

                #23 - adventurer tier down
                7 = {
                    #Base modifiers

                    #more likely if generous quest rewards/adverturer nation
                    modifier = {
                        factor = 2
                        OR = {
                            owner = { has_estate_privilege = estate_adventurers_generous_quest_rewards }
                            owner = { has_adventurer_reform = yes }
                        }
                    }

                    #more likely if loyal
                    modifier = {
                        factor = 2
                        owner = {
                            estate_loyalty = {
                                estate = estate_adventurers
                                loyalty = 60
                            }
                        }
                    }

                    #more likely if high influence
                    modifier = {
                        factor = 2
                        owner = {
                            estate_influence = {
                                estate = estate_adventurers
                                influence = 60
                            }
                        }
                    }
                    province_event = { id = aw_haunted_manor.23 }
                }

                #24 - monstrous nation removal
                50 = {
                    modifier = {
                        #only want this to ever be part of the equation if you are monstrous
                        factor = 0
                        owner = { has_country_modifier = monstrous_nation }
                    }
                    #Base modifiers
                    province_event = { id = aw_haunted_manor.24 }
                }

                #25 - monstrous natural tier down.
                50 = {
                    #Base modifiers
                    province_event = { id = aw_haunted_manor.25 }    #Monstrous nation tier down
                }

                #30 - natural tier up
                10 = {
                    province_event = { id = aw_haunted_manor.30 }    #Natural tier up
                }
            }
        }
	}
    
}


#2 - notification of advanturers wanted spawning

############## 10s - Migration and Propagation ###################

#10 - Base migration - nah


#11 - migration target notification if it goes to other country - nah


#13 - Base propagation - nah

#14 - propagation target notification

#15 - Migrate to non monstrous if monstrous nation is owner (if its applicable to monsters, like wyverns etc, then this is fine to remove, else keep)

############## 20s - Removal/Tier Down ###################

#20 - natural removal
province_event = {
    id = aw_haunted_manor.20
    title = aw_haunted_manor.20.t
    desc = aw_haunted_manor.20.d
    picture = COMET_SIGHTED_eventPicture
    goto = ROOT
    
    hidden = no
    is_triggered_only = yes
    
    trigger = {
        OR = {
            has_province_modifier = aw_haunted_manor_1
            has_province_modifier = aw_haunted_manor_2
            has_province_modifier = aw_haunted_manor_3
        }
    }
    
    option = {
 
        name = aw_haunted_manor.20.a
        ai_chance = { factor = 100 }

        remove_province_modifier = aw_haunted_manor_1
        remove_province_modifier = aw_haunted_manor_2
        remove_province_modifier = aw_haunted_manor_3

    }
}

#21 - adventurer removal
province_event = {
    id = aw_haunted_manor.21
    title = aw_haunted_manor.21.t
    desc = aw_haunted_manor.21.d
    picture = COMET_SIGHTED_eventPicture
    goto = ROOT
    
    hidden = no
    is_triggered_only = yes
    
    trigger = {
        owner = { has_estate = estate_adventurers }
        OR = {
            has_province_modifier = aw_haunted_manor_1
            has_province_modifier = aw_haunted_manor_2
            has_province_modifier = aw_haunted_manor_3
        }
    }
    
    option = {
        # oh, thank goodness
        name = aw_haunted_manor.21.a
        ai_chance = { factor = 100 }

        remove_province_modifier = aw_haunted_manor_1
        remove_province_modifier = aw_haunted_manor_2
        remove_province_modifier = aw_haunted_manor_3

        owner = {
            add_estate_influence_modifier = {
                estate = estate_adventurers
                desc = successful_adventure
                duration = 3650
                influence = 5
            }
        }

    }
}

#22 - natural tier down - nah

#23 - adventurer tier down

#24 - monstrous nation removal - ransack house but bad juju
province_event = {
    id = aw_haunted_manor.24
    title = aw_haunted_manor.24.t
    desc = aw_haunted_manor.24.d
    picture = COMET_SIGHTED_eventPicture
    goto = ROOT
    
    hidden = no
    is_triggered_only = yes
    
    trigger = {
        owner = { has_country_modifier = monstrous_nation }

        OR = {
            has_province_modifier = aw_haunted_manor_1
            has_province_modifier = aw_haunted_manor_2
            has_province_modifier = aw_haunted_manor_3
        }
    }
    
    option = {
 
        name = aw_haunted_manor.20.a
        ai_chance = { factor = 100 }

        remove_province_modifier = aw_haunted_manor_1
        remove_province_modifier = aw_haunted_manor_2
        remove_province_modifier = aw_haunted_manor_3

        owner = { add_stability = -1 }

    }
}

#25 - monstrous natural tier down. keep if you want, or just rely on removal

############## 30s - Tier Up ###################

#30 - natural tier up
province_event = {
    id = aw_haunted_manor.30
    title = aw_haunted_manor.30.t
    desc = aw_haunted_manor.30.d
    picture = COMET_SIGHTED_eventPicture
    goto = ROOT
    
    hidden = no
    is_triggered_only = yes
    
    trigger = {
        OR = { 
            has_province_modifier = aw_haunted_manor_1 
        }
    }
    option = {
        name = aw_haunted_manor.30.a
        ai_chance = { factor = 100 }
        if = {
            limit = { 
                has_province_modifier = aw_haunted_manor_1
            }
            remove_province_modifier = aw_haunted_manor_1
            add_permanent_province_modifier  = {
                name = aw_haunted_manor_2
                duration = -1  
            }
        }
        else_if = {
            limit = { 
                has_province_modifier = aw_haunted_manor_2
            }
            remove_province_modifier = aw_haunted_manor_2
            add_permanent_province_modifier  = {
                name = aw_haunted_manor_3
                duration = -1  
            }
        }

        custom_tooltip = aw_how_to_get_more_adventurer_removal_chance_tooltip   #should be added for each increase of level
    }
}

############## 110s - Special Migration & Propagation ###################



############## 120s - Special Removal/Tier Down ###################

#120 - Family dies 1, downgrades to Dormant

#121 - Family dies 2, downgrades to Dormant

#122 - Family dies 3, downgrades to Dormant

#123 - Family dies 4, downgrades to Dormant

#121 - Priest tries to exorcise

#121 - Priest exorcise success

#123 - sike its actually a scooby doo villain



############## 130s - Special Tier Up ###################

#130 - New Family Moves in. Upgrades it to House of Evil, Active

#131 - Priest exorcise fail



############## 200s - Special Flavour ###################

#200 - Horrible Little Crops - crop miasma poisons nearby land

#201 - Adventurers lost, have to spend resources to rescue

#202 - spooky song screech makes people run away

#203 - poltergeists cause ruckus and move shit

#204 - family, possession sesh is spooky
