

namespace = flavor_honsai

# Handeling the lifespan of the Ghostemperor

#setup
country_event = {
	id = flavor_honsai.1
	title = flavor_honsai.1.t
	desc = flavor_honsai.1.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
		set_country_flag = honsai_ghostemperor_alive
		set_variable = { which = honsai_lifespan = 0 }
	}
	
	option = {
		name = "flavor_honsai.1.o"
	}
}

#yearly adjustment
country_event = {
	id = flavor_honsai.2
	title = flavor_honsai.2.t
	desc = flavor_honsai.2.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = honsai_ghostemperor_alive
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
	
	    change_variable = {
			which = honsai_lifespan
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = honsai_lifespan
					value = 40
				}
			}
    
			country_event = {
				id = flavor_honsai.4
				days = 365
			}
		}
		else = {
			country_event = {
				id = flavor_honsai.3
				days = 365
			}
		}
		
	}
	
	option = {
		name = "flavor_honsai.1.o"
	}
}

#yearly adjustment 2
country_event = {
	id = flavor_honsai.3
	title = flavor_honsai.3.t
	desc = flavor_honsai.3.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = honsai_ghostemperor_alive
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
	
	    change_variable = {
			which = honsai_lifespan
			value = 1
		}
		
		if = {
			limit = {
				check_variable = {
					which = honsai_lifespan
					value = 40
				}
			}
			country_event = {
				id = flavor_honsai.4
				days = 365
			}
		}
	}
	
	option = {
		name = "flavor_honsai.1.o"
	}
}

#death event
country_event = {
	id = flavor_honsai.4
	title = flavor_honsai.4.t
	desc = flavor_honsai.4.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = honsai_ghostemperor_alive
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
		kill_ruler = yes
	}
	
	option = {
		name = "flavor_honsai.1.o"
	}
	
	after = {
		clr_country_flag = honsai_ghostemperor_alive
		clr_country_flag = anchor_to_reality
		clr_country_flag = honsai_monarchy
		clr_country_flag = honsai_republic
	}
}

# MT (2.4) Damestear found
country_event = {
	id = flavor_honsai.5
	title = flavor_honsai.5.t
	desc = flavor_honsai.5.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = flavor_honsai.6
				days = 3650
			}
		}
	}
	
	option = {
		name = "flavor_honsai.5.a"
		4704 = { 
			change_trade_goods = damestear 
		}
	}
}

# Damestear depleted
country_event = {
	id = flavor_honsai.6
	title = flavor_honsai.6.t
	desc = flavor_honsai.6.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	option = {
		name = "flavor_honsai.6.a"
		4704 = { 
			change_trade_goods = grain 
		}
	}
	option = {
		name = "flavor_honsai.6.b"
		add_treasury = -100
		random_list = {
			40 = {
				4704 = {
					change_trade_goods = iron
				}
			}
			40 = {
				4704 = {
					change_trade_goods = copper
				}
			}
			20 = {
				4704 = {
					change_trade_goods = grain
				}
			}
		}
	}
}

# MT (3.3) The Spirit Network
country_event = {
	id = flavor_honsai.7
	title = flavor_honsai.7.t
	desc = flavor_honsai.7.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {

	}
	
	option = {
		name = "flavor_honsai.7.a"
		change_dip = 1
	}
}

# MT (3.4) Artefact for the Ghost emperor
country_event = {
	id = flavor_honsai.8
	title = flavor_honsai.8.t
	desc = flavor_honsai.8.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
		set_country_flag = anchor_to_reality
	}
	
	option = {
		name = "flavor_honsai.8.a"
	}
}

# MT (3.1) Event for HH, Do you want to be my vassal ai always accepts?
country_event = {
	id = flavor_honsai.9
	title = flavor_honsai.9.t
	desc = flavor_honsai.9.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = Y76
	}
		
	option = {
		name = "flavor_honsai.9.a"			# Accept vassalisation
		ai_chance = { factor = 100 }
		hidden_effect = {
			Y66 = {
				country_event = { 
					id = flavor_honsai.15 # they accepted
				}
			}
		}
	}
	
	option = {
		name = "flavor_honsai.9.b"			# reject
		ai_chance = { factor = 0 }
		hidden_effect = {
			Y66 = {
				country_event = { 
					id = flavor_honsai.16 # they rejected
				}
			}
		}
	}
}

# MT (4) Government reform
country_event = {
	id = flavor_honsai.10
	title = flavor_honsai.10.t
	desc = flavor_honsai.10.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
		
	}
	
	option = {
		name = "flavor_honsai.10.a"
		add_government_reform = ghost_emperor_reform_2
	}
}

#MT (5) reborn kingdom
country_event = { 
	id = flavor_honsai.11
	title = flavor_honsai.11.t
	desc = flavor_honsai.11.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
	
	}
	
	option = {
		name = "flavor_honsai.11.a"
		hinphat_area = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
				NOT = { province_id = 5424 }
			}
			add_permanent_claim = ROOT
		}
		custom_tooltip = a_kingdom_reborn_tt
		phaktai_area = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		add_prestige = 20
		define_advisor = {
			type = artist
			skill = 2
		}	
	}
}

#MT (7.3) Dwarves_vassalisation
country_event = { 
	id = flavor_honsai.12
	title = flavor_honsai.12.t
	desc = flavor_honsai.12.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = Y63
	}
		
	option = {
		name = "flavor_honsai.12.a"			# Accept vassalisation
		ai_chance = { factor = 100 }
		hidden_effect = {
			Y97 = {
				country_event = { 
					id = flavor_honsai.13 # they accepted
				}
			}
		}
	}
	
	option = {
		name = "flavor_honsai.12.b"			# reject
		ai_chance = { factor = 0 }
		hidden_effect = {
			Y97 = {
				country_event = { 
					id = flavor_honsai.14 # they rejected
				}
			}
		}
	}
}

#MT (7.3) Dwarves accepted
country_event = { 
	id = flavor_honsai.13
	title = flavor_honsai.13.t
	desc = flavor_honsai.13.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
		
	option = {
		name = "flavor_honsai.13.a"			# Accept vassalisation
		create_march = Y63
		add_country_modifier = {
			name = honsai_cheap_artillery
			duration = 7300 
		}	
	}
}
#MT (7.3) Dwarfes rejected
country_event = { 
	id = flavor_honsai.14
	title = flavor_honsai.14.t
	desc = flavor_honsai.14.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	option = {
		name = "flavor_honsai.14.a"			# reject
		add_casus_belli = {
			target = Y63
			type = cb_vassalize_mission 
			months = 120
		}		
	}
}

#MT (3.1) Hebat Hari accepted
country_event = { 
	id = flavor_honsai.15
	title = flavor_honsai.15.t
	desc = flavor_honsai.15.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
		
	option = {
		name = "flavor_honsai.15.a"			# Accept vassalisation
		create_march = Y76
	}
}
#MT (3.1) Hebat Hari rejected
country_event = { 
	id = flavor_honsai.16
	title = flavor_honsai.16.t
	desc = flavor_honsai.16.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	option = {
		name = "flavor_honsai.16.a"			# reject
		add_casus_belli = {
			target = Y76
			type = cb_vassalize_mission 
			months = 120
		}		
	}
}

#MT (9.4) the_artillery
country_event = { 
	id = flavor_honsai.17
	title = flavor_honsai.17.t
	desc = flavor_honsai.17.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	immediate = {
		remove_country_modifier = honsai_militaryreform_training
	}
	
	
	option = {
		name = "flavor_honsai.17.a"			# Militaryreform completed
		add_country_modifier = {
			name = honsai_militaryreform_1
			duration = -1
		}
		add_country_modifier = {
			name = honsai_increased_professionalism
			duration = 9125
		}
		
	}
}

#MT (6.1) the_coastal_defense_network
country_event = { 
	id = flavor_honsai.18
	title = flavor_honsai.18.t
	desc = flavor_honsai.18.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
	
	option = {
		name = "flavor_honsai.18.a"			# attack pruhakin
		trigger = {
			exists = Y53
		}
		set_country_flag = pruhakin_chosen
		add_casus_belli = {
			target = Y53
			type = cb_vassalize_mission 
			months = 120
		}		
	}
	option = {
		name = "flavor_honsai.18.b"			# attack pinghoi
		trigger = {
			exists = Y64
		}
		set_country_flag = pinghoi_chosen
		add_casus_belli = {
			target = Y64
			type = cb_vassalize_mission 
			months = 120
		}
		
	}
	option = {
		name = "flavor_honsai.18.c"			# create our pirate vassal only if non of the pirates alive
		trigger = {
			AND = {
				NOT = { exists = Y53 }
				NOT = { exists = Y64 }
			}
		}
		khindi_area = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
	}
}

#MT (6.2) Prepare_for_Succession
country_event = { 
	id = flavor_honsai.19
	title = flavor_honsai.19.t
	desc = flavor_honsai.19.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
		
	option = {
		name = "flavor_honsai.19.a"			# Choose Monarchy
		ai_chance = { factor = 50 } 
		set_country_flag = honsai_monarchy
		country_event = {
				id = flavor_honsai.20 #Who will be the ruler
		}
	}
	option = {
		name = "flavor_honsai.19.b"			# Choose Republic
		ai_chance = { factor = 50 }
		set_country_flag = honsai_republic
		country_event = {
			id = flavor_honsai.21 #Who will be the ruler
		}
	}
}

country_event = { 
	id = flavor_honsai.20
	title = flavor_honsai.20.t
	desc = flavor_honsai.20.d
	picture = wihgfx_FEMALE_RULER_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			tag = Y66
			was_tag = Y66
		}
	}
		
	option = {
		name = "flavor_honsai.20.a"			# caoban
		ai_chance = { factor = 50 } 
		set_country_flag = honsai_monarchy_adm			
		}
	}
	option = {
		name = "flavor_honsai.20.b"			# Taikhon
		ai_chance = { factor = 50 }
		set_country_flag = honsai_monarchy_dip
	}
	option = {
		name = "flavor_honsai.20.c"			# Visal
		ai_chance = { factor = 50 }
		set_country_flag = honsai_monarchy_mil
	}
}