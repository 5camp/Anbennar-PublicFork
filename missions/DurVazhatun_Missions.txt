#Designed and coded by: Druplesnubb

vazhatun_1 = { 
	slot = 1
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }

	vazhatun_discovery_of_the_survivors = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_fresh_air }
		
		provinces_to_highlight = {
			OR = {
				owned_by = I02
				province_id = 4208
			}
		}

		trigger = {
			OR = {
				owns = 4208
				
				I02 = {
					has_opinion = {
						who = ROOT
						value = 75
					}

					is_neighbor_of = ROOT
				}
			}
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.2 }
		}
	}
	
	vazhatun_records_of_the_fall = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_discovery_of_the_survivors }
		
		provinces_to_highlight = {
			area = amldihr_area
		}

		trigger = {
			owns = amldihr_area
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.3 }
			
			royal_terrace_area = { add_permanent_claim = ROOT }
			assembly_terrace_area = { add_permanent_claim = ROOT }
		}
	}
}

vazhatun_2 = { 
	slot = 2
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }
	
	vazhatun_fresh_air = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 1
		required_missions = {}
		
		provinces_to_highlight = {
			OR = {
				region = northern_pass_region
				region = serpents_vale_region
				region = yyl_moista_region
			}
		}

		trigger = {
			Development_in_provinces = {
				value = 40
				OR ={
					Region = northern_pass_region
					Region = serpents_vale_region
					Region = yyl_moista_region
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = vazhatun_exploring_outside
					duration = 7300
			}
		}
	}
	
	vazhatun_proper_equipment = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_fresh_air }
		
		provinces_to_highlight = {
			province_id = 4147
		}

		trigger = {
			owns = 4147
		}
		
		effect = {
			add_country_modifier = {
				name = vazhatun_expedition_equipment
				duration = 7300
			}
			
			castle_hill_area = { add_permanent_claim = ROOT }
			orlazam_area = { add_permanent_claim = ROOT }
			common_terrace_area = { add_permanent_claim = ROOT }
		}
	}
	
	vazhatun_records_of_the_refugees = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_discovery_of_the_survivors }
		
		provinces_to_highlight = {
			owner = {
				owns = 4208
				NOT = { tag = ROOT }
			}
		}

		trigger = {
			OR = {
				AND = {
					owns = 4208
					
					accepted_culture = quartz_dwarf
				}
				
				any_subject_country = {
					AND = {
						owns = 4208

						is_subject_of = ROOT
						liberty_desire < 50
					}
				}
			}
		}
		
		effect = {
			#TODO
			#Add some astronomy efficiency
		}
	}
	
	vazhatun_sequester_the_insane = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 4
		required_missions = { vazhatun_records_of_the_fall, vazhatun_records_of_the_refugees, vazhatun_what_they_left_behind }
		
		provinces_to_highlight = {
			OR = {
				province_id = 4182
				area = lonely_mountains_area
			}
		}

		trigger = {
			owns = 4182
			owns = lonely_mountains_area
			
			4182 = { has_fort_building_trigger = yes }
			
			#TODO
			#Completed at least one observation
		}
		
		effect = {
			lonely_mountains_area = {
				add_base_manpower = 1
				add_province_modifier {
					name = vazhatun_recieving_madmen
					duration = 3650
				}
			}
		}
	}
}

vazhatun_3 = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }

	vazhatun_clearing_our_home = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_repairing_the_setzunkhupa }
		
		provinces_to_highlight = {
			area = vazhatun_area
		}
		
		trigger = {
			owns = vazhatun_area
		}
		
		effect = {
			dagrinrod_13_15_area = { add_permanent_claim = ROOT }
			old_dagrinrod_area = { add_permanent_claim = ROOT }
		}
	}
	
	vazhatun_securing_our_backs = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_proper_equipment, vazhatun_clearing_our_home }
		
		provinces_to_highlight = {
			OR = {
				area = vazhatun_area
				area = orlazam_area
				area = dagrinrod_13_15_area
				area = old_dagrinrod_area
			}
		}
		
		trigger = {
			owns = vazhatun_area
			owns = orlazam_area
			owns = dagrinrod_13_15_area
			owns = old_dagrinrod_area
			4020 = { has_fort_building_trigger = yes }
			4147 = { has_fort_building_trigger = yes }
			2996 = { has_fort_building_trigger = yes }
		}
		
		effect = {
			2996 = { add_permanent_province_modifier = {
				name = vazhatun_entrance_secured
				duration = -1
			} }
		}
	}
}

vazhatun_4 = { 
	slot = 4
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }
	
	vazhatun_improving_the_lens = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_repairing_the_setzunkhupa }
		
		provinces_to_highlight = {
			OR = {
				trade_goods = glass
				trade_goods = gems
			}
		}
		
		trigger = {
			any_core_province = {
				OR = {
					trade_goods = glass
					trade_goods = gems
				}
				
				base_production = 8
				
				has_production_building_trigger = yes
			}
		}
		
		effect = {
			#TODO
			#add astronomy efficiency
		}
	}
	
	vazhatun_reclaim_the_research_stations = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 4
		required_missions = { vazhatun_what_they_left_behind }
		
		provinces_to_highlight = {
			OR = {
				region = northern_pass_region
				region = serpents_vale_region
				region = yyl_moista_region
				region = ogre_mountains_region
			}
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				region = northern_pass_region
				development = 6
			}
			num_of_owned_provinces_with = {
				value = 5
				region = serpents_vale_region
				development = 6
			}
			num_of_owned_provinces_with = {
				value = 5
				region = yyl_moista_region
				development = 6
			}
			num_of_owned_provinces_with = {
				value = 5
				region = ogre_mountains_region
				development = 6
			}
		}
		
		effect = {
			add_country_modifier = {
				name = vazhatun_research_stations
				duration = 7300
			}
			
			#TODO
			#astronomy efficiency increase
		}
	}
}

vazhatun_5 = { 
	slot = 5
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }

	vazhatun_repairing_the_setzunkhupa = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 1
		required_missions = {}
		
		provinces_to_highlight = { province_id = 4020 }
		
		trigger = {
			4020 = {
				development = 60
				has_tax_building_trigger = yes
			}
		}
			
		effect = {
			country_event = { id = flavor_vazhatun.1 }
		}
	}
	
	vazhatun_what_they_left_behind = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_repairing_the_setzunkhupa }
		
		provinces_to_highlight = { province_id = 4020 }
		
		trigger = {
			4020 = { has_dwarven_hold_4 = yes }
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.4 }
		}
	}
}