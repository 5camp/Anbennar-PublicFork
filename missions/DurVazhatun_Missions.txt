#Designed and coded by: Druplesnubb

vazhatun_1 = { 
	slot = 1
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }

	vazhatun_discovery_of_the_survivors = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_fresh_air }
		
		provinces_to_highlight = {
			OR = {
				owned_by = I02
				province_id = 4208
			}
		}

		trigger = {
			OR = {
				owns = 4208
				
				I02 = {
					has_opinion = {
						who = ROOT
						value = 75
					}

					is_neighbor_of = ROOT
				}
			}
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.2 }
		}
	}
	
	vazhatun_records_of_the_fall = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_discovery_of_the_survivors }
		
		provinces_to_highlight = {
			area = amldihr_area
		}

		trigger = {
			owns = amldihr_area
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.3 }
			
			royal_terrace_area = { add_permanent_claim = ROOT }
			assembly_terrace_area = { add_permanent_claim = ROOT }
		}
	}

	vazhatun_securing_the_vale = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 6
		required_missions = { vazhatun_records_of_the_fall }
		
		provinces_to_highlight = {
			OR = {
				province_id = 4122
				province_id = 4128
				province_id = 4151
				province_id = 4164
			}
		}

		trigger = {
			4122 = {
				owner = ROOT
				has_fort_building_trigger
			}
			4128 = {
				owner = ROOT
				has_fort_building_trigger
			}
			4151 = {
				owner = ROOT
				has_fort_building_trigger
			}
			4164 = {
				owner = ROOT
				has_fort_building_trigger
			}
		}
		
		effect = {
			4122 = { add_permanent_province_modifier = {
				name = vazhatun_entrance_secured
				duration = -1
			} }
			4128 = { add_permanent_province_modifier = {
				name = vazhatun_entrance_secured
				duration = -1
			} }
			4151 = { add_permanent_province_modifier = {
				name = vazhatun_entrance_secured
				duration = -1
			} }
			4164 = { add_permanent_province_modifier = {
				name = vazhatun_entrance_secured
				duration = -1
			} }
		}
	}
}

vazhatun_2 = { 
	slot = 2
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }
	
	vazhatun_fresh_air = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 1
		required_missions = {}
		
		provinces_to_highlight = {
			OR = {
				region = northern_pass_region
				region = serpents_vale_region
				region = yyl_moista_region
			}
		}

		trigger = {
			Development_in_provinces = {
				value = 40
				OR ={
					Region = northern_pass_region
					Region = serpents_vale_region
					Region = yyl_moista_region
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = vazhatun_exploring_outside
					duration = 7300
			}
		}
	}
	
	vazhatun_proper_equipment = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_fresh_air }
		
		provinces_to_highlight = {
			province_id = 4147
		}

		trigger = {
			owns = 4147
		}
		
		effect = {
			add_country_modifier = {
				name = vazhatun_expedition_equipment
				duration = 7300
			}
			
			castle_hill_area = { add_permanent_claim = ROOT }
			orlazam_area = { add_permanent_claim = ROOT }
			common_terrace_area = { add_permanent_claim = ROOT }
		}
	}
	
	vazhatun_records_of_the_refugees = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_discovery_of_the_survivors }
		
		provinces_to_highlight = {
			owner = {
				owns = 4208
				NOT = { tag = ROOT }
			}
		}

		trigger = {
			OR = {
				AND = {
					owns = 4208
					
					accepted_culture = quartz_dwarf
				}
				
				any_subject_country = {
					AND = {
						owns = 4208

						is_subject_of = ROOT
						liberty_desire < 50
					}
				}
			}
		}
		
		effect = {
			#TODO
			#Add some astronomy efficiency
		}
	}
	
	vazhatun_sequester_the_insane = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 4
		required_missions = { vazhatun_records_of_the_fall, vazhatun_records_of_the_refugees, vazhatun_what_they_left_behind }
		
		provinces_to_highlight = {
			OR = {
				province_id = 4182
				area = lonely_mountains_area
			}
		}

		trigger = {
			owns = 4182
			owns = lonely_mountains_area
			
			4182 = { has_fort_building_trigger = yes }
			
			#TODO
			#Completed at least one observation
		}
		
		effect = {
			lonely_mountains_area = {
				add_base_manpower = 1
				add_province_modifier {
					name = vazhatun_recieving_madmen
					duration = 3650
				}
			}
		}
	}

	vazhatun_study_the_terror = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 5
		required_missions = { vazhatun_sequester_the_insane }
		
		provinces_to_highlight = {
			area = lonely_mountains_area
		}

		trigger = {
			lonely_mountains_area = {
				type = all
				owner = ROOT
				base_manpower = 5
				has_tax_building_trigger = yes
			}
			lonely_mountains_area = { has_building = mage_tower }
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.5 }
		}
	}

	vazhatun_fortifying_the_pass = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 6
		required_missions = { vazhatun_study_the_terror }
		
		provinces_to_highlight = {
			OR = {
				area = tanning_valley_area
				area = upper_logr_area
				area = the_copperwood_area
				area = middle_logr_area
				area = hidden_respite_area
			}
		}

		trigger = {
			owns =  {
				tanning_valley_area
				upper_logr_area
				the_copperwood_area
				middle_logr_area
				hidden_respite_area
			}
			
			lonely_mountains_area = {
				type = all
				base_manpower = 5
				has_tax_building_trigger = yes
			}
			northern_pass_region = {
				value = 3
				has_fort_building_trigger = yes
			}
		}
		
		effect = {
			lower_logr_area = { add_permanent_claim = ROOT }
			hjyrtsikki_area = { add_permanent_claim = ROOT }
		}
	}
}

vazhatun_3 = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }

	vazhatun_clearing_our_home = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_repairing_the_setzunkhupa }
		
		provinces_to_highlight = {
			area = vazhatun_area
		}
		
		trigger = {
			owns = vazhatun_area
		}
		
		effect = {
			dagrinrod_13_15_area = { add_permanent_claim = ROOT }
			old_dagrinrod_area = { add_permanent_claim = ROOT }
		}
	}
	
	vazhatun_securing_our_backs = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_proper_equipment, vazhatun_clearing_our_home }
		
		provinces_to_highlight = {
			OR = {
				area = vazhatun_area
				area = orlazam_area
				area = dagrinrod_13_15_area
				area = old_dagrinrod_area
			}
		}
		
		trigger = {
			owns = vazhatun_area
			owns = orlazam_area
			owns = dagrinrod_13_15_area
			owns = old_dagrinrod_area
			4020 = { has_fort_building_trigger = yes }
			4147 = { has_fort_building_trigger = yes }
			2996 = { has_fort_building_trigger = yes }
		}
		
		effect = {
			2996 = { add_permanent_province_modifier = {
				name = vazhatun_entrance_secured
				duration = -1
			} }
		}
	}

	vazhatun_eastern_connections = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 6
		required_missions = { vazhatun_contact_with_the_kukatodic_tribes }
		
		provinces_to_highlight = {
			OR = {
				region = yyl_moista_region

				sea_zone = northern_sea_region
			}
		}
		
		trigger = {
			is_at_war = no

			yyl_moista_region = {
				value = 4
				owner = ROOT
				has_trade_building_trigger = yes
			}

			estate_loyalty = {
    			estate = estate_burghers
    			loyalty = 60
			}

			northern_sea_region = {
				num_of_units_in_province = {
					who = ROOT
					amount = 1
				}
			}
		}
		
		effect = {
			southern_isles_region = {
				discover_country = ROOT
			}
			northern_isles_region = {
				discover_country = ROOT
			}

			add_dip_power = 100
		}
	}
}

vazhatun_4 = { 
	slot = 4
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }
	
	vazhatun_improving_the_lens = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 2
		required_missions = { vazhatun_repairing_the_setzunkhupa }
		
		provinces_to_highlight = {
			OR = {
				trade_goods = glass
				trade_goods = gems
			}
		}
		
		trigger = {
			any_core_province = {
				OR = {
					trade_goods = glass
					trade_goods = gems
				}
				
				base_production = 8
				
				has_production_building_trigger = yes
			}
		}
		
		effect = {
			#TODO
			#add astronomy efficiency
		}
	}
	
	vazhatun_reclaim_the_research_stations = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 4
		required_missions = { vazhatun_what_they_left_behind }
		
		provinces_to_highlight = {
			OR = {
				region = northern_pass_region
				region = serpents_vale_region
				region = yyl_moista_region
				region = ogre_mountains_region
			}
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				region = northern_pass_region
				development = 6
			}
			num_of_owned_provinces_with = {
				value = 5
				region = serpents_vale_region
				development = 6
			}
			num_of_owned_provinces_with = {
				value = 5
				region = yyl_moista_region
				development = 6
			}
			num_of_owned_provinces_with = {
				value = 5
				region = ogre_mountains_region
				development = 6
			}
		}
		
		effect = {
			add_country_modifier = {
				name = vazhatun_research_stations
				duration = 7300
			}
			
			#TODO
			#astronomy efficiency increase
		}
	}

	vazhatun_contact_with_the_kukatodic_tribes = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 5
		required_missions = { vazhatun_reclaim_the_research_stations }
		
		provinces_to_highlight = {
			OR = {
				province_id = 5003
			}
		}
		
		trigger = {
			5003 = {
				owned_by = ROOT
				development = 6
				has_trade_building_trigger = yes
			}

			treasury = 50

			#TODO
			#Must have a small amount of astral knowledge
		}
		
		effect = {
			add_treasury = -50

			#TODO
			#Lose small amount of astral knowledge

			country_event = { id = flavor_vazhatun.6 }
			}
		}
	}

	vazhatun_the_damestear_expedition = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 6
		required_missions = { vazhatun_contact_with_the_kukatodic_tribes, vazhatun_excavating_the_secrets }
		
		provinces_to_highlight = {
			province_id = 5006
		}
		
		trigger = {
			5006 = {
				owner = ROOT
				development = 6
				has_building = mage_tower
			}

			estate_influence = {
    			estate = estate_mages
    			influence = 60
			}

			#TODO
			#Have some astral knowledge

			#TODO
			#Completed the custom expedition target
		}
		
		effect = {
			5006 = {
				change_trade_goods = damestear
				add_permanent_province_modifier = {
					name = vazhatun_careful_extraction
					duration = -1
				}
			}
		}
	}
}

vazhatun_5 = { 
	slot = 5
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = I03 }

	vazhatun_repairing_the_setzunkhupa = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 1
		required_missions = {}
		
		provinces_to_highlight = { province_id = 4020 }
		
		trigger = {
			4020 = {
				development = 60
				has_tax_building_trigger = yes
			}
		}
			
		effect = {
			country_event = { id = flavor_vazhatun.1 }
		}
	}
	
	vazhatun_what_they_left_behind = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 3
		required_missions = { vazhatun_repairing_the_setzunkhupa }
		
		provinces_to_highlight = { province_id = 4020 }
		
		trigger = {
			4020 = { has_dwarven_hold_4 = yes }
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.4 }
		}
	}

	vazhatun_excavating_the_secrets = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 5
		required_missions = { vazhatun_what_they_left_behind }
		
		provinces_to_highlight = { province_id = 4020 }
		
		trigger = {
			4020 = { has_dwarven_hold_6 = yes }

			treasury = 1500
			adm_power = 100
		}
		
		effect = {
			country_event = { id = flavor_vazhatun.7 }
		}
	}

	vazhatun_secrets_applied = {
		icon = mission_rb_rein_in_the_highland_clans
		position = 6
		required_missions = { vazhatun_excavating_the_secrets }
		
		provinces_to_highlight = { province_id = 4020 }
		
		trigger = {
			4020 = {
				owner = ROOT
				has_building = mage_tower
			}
			
			estate_influence = {
    			estate = estate_mages
    			influence = 50
			}
			
			#TODO
			#Completed the custom expedition target
		}
		
		effect = {
			#TODO
			#Unlock the mage astronomy efficiency privilege
		}
	}
}