verkalskomdhir_innovations = {
slot = 1 
	generic = no
	ai = yes 
	potential = { tag = I13 }
	has_country_shield = yes
	
	verkalskomdhir_flintlock_schematics = { 
		icon = mission_pirate_havens
		required_missions = { 
			verkalskomdhir_restore_the_archives 
		}
		position = 3
		
		trigger = {
			mil_power = 100
			num_of_owned_provinces_with = {
				OR = {
					trade_goods = copper
					trade_goods = iron
					trade_goods = mithril
				}
				base_production = 5
				has_production_building_trigger = yes
				value = 3
			}
		}
		effect = {
			add_mil_power = -100
			add_country_modifier = {
					name = verkalskomdhir_firearms_1
					duration = -1
			}
		}
	}
	
	verkalskomdhir_flintlock_rifled_barrels = { 
		icon = mission_landsknecht_soldier
		required_missions = { 
			verkalskomdhir_flintlock_pistols_schematics
		}
		position = 4
		
		trigger = {
			mil_power = 200
			num_of_owned_provinces_with = {
				OR = {
					trade_goods = copper
					trade_goods = iron
					trade_goods = mithril
				}
				base_production = 8
				has_production_building_trigger = yes
				has_building = weapons
				value = 6
			}
		}
		effect = {
			add_mil_power = -200
			remove_country_modifier = verkalskomdhir_firearms_1
			add_country_modifier = {
					name = verkalskomdhir_firearms_2
					duration = -1
			}
		}
	}
	
	verkalskomdhir_mass_produce_muskets = { 
		icon = army_reforms
		required_missions = { 
			verkalskomdhir_flintlock_rifled_barrels 
		}
		position = 5
		
		trigger = {
			mil_power = 400
			num_of_owned_provinces_with = {
				OR = {
					trade_goods = copper
					trade_goods = iron
					trade_goods = mithril
				}
				base_production = 15
				has_production_building_trigger = yes
				has_building = weapons
				value = 12
			}
		}
		effect = {
			add_mil_power = -400
			remove_country_modifier = verkalskomdhir_firearms_2
			add_country_modifier = {
					name = verkalskomdhir_firearms_3
					duration = -1
			}
		}
	}
	
	verkalskomdhir_charcoal_for_our_furnaces = { 
		icon = industrialized_rhineland
		required_missions = { 
			verkalskomdhir_arrow_lumber_camps
		}
		position = 6
		
		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				trade_goods = copper
				trade_goods = iron
				trade_goods = mithril
			}
			NOT = { has_building = weapons }
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				OR = {
					trade_goods = copper
					trade_goods = iron
					trade_goods = mithril
				}
				has_building = weapons
				value = 5
			}
		}
		effect = {
			custom_tooltip = verkalskomdhir_charcoal_furnace_tooltip
			hidden_effect = { 
				random_owned_province = {
					limit = { 
						NOT = { has_province_flag = applied_effect }
						OR = {
							trade_goods = copper
							trade_goods = iron
							trade_goods = mithril
						}
						has_building = weapons
					}
					add_base_tax = 1
					add_base_production = 2
					set_province_flag = applied_effect
				}
				random_owned_province = {
					limit = { 
						NOT = { has_province_flag = applied_effect }
						OR = {
							trade_goods = copper
							trade_goods = iron
							trade_goods = mithril
						}
						has_building = weapons
					}
					add_base_tax = 1
					add_base_production = 2
					set_province_flag = applied_effect
				}
				random_owned_province = {
					limit = { 
						NOT = { has_province_flag = applied_effect }
						OR = {
							trade_goods = copper
							trade_goods = iron
							trade_goods = mithril
						}
						has_building = weapons
					}
					add_base_tax = 1
					add_base_production = 2
					set_province_flag = applied_effect
				}
				random_owned_province = {
					limit = { 
						NOT = { has_province_flag = applied_effect }
						OR = {
							trade_goods = copper
							trade_goods = iron
							trade_goods = mithril
						}
						has_building = weapons
					}
					add_base_tax = 1
					add_base_production = 2
					set_province_flag = applied_effect
				}
				random_owned_province = {
					limit = { 
						NOT = { has_province_flag = applied_effect }
						OR = {
							trade_goods = copper
							trade_goods = iron
							trade_goods = mithril
						}
						has_building = weapons
					}
					add_base_tax = 1
					add_base_production = 2
					set_province_flag = applied_effect
				}
				every_owned_province = {
					limit = { has_province_flag = applied_effect }
					clr_province_flag = applied_effect
				}
			}
		}
	}
}

verkalskomdhir_internal_development = {
	slot = 2 
	generic = no
	ai = yes 
	potential = { tag = I13 }
	has_country_shield = yes
	
	verkalskomdhir_repair_the_warding_gate = { 
		icon = mission_early_game_buildings
		required_missions = {  }
		position = 1
		
		provinces_to_highlight = {
			province_id = 4100 #Verkal Skomdhir
		}
		trigger = {
			4100 = {
				owned_by = ROOT
				fort_level = 2
				treasury = 200
			}
		}
		effect = {
			add_treasury = -200
			4100 = {
				add_province_modifier = {
					name = verkalskomdhir_the_warding_gate_1
					duration = -1
				}
			}
			4093 = { # Arg-Ordstun
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	verkalskomdhir_restore_the_archives = { 
		icon = found_the_vatican_library
		required_missions = {
			verkalskomdhir_repair_the_warding_gate
		}
		position = 2
		
		trigger = {
			adm_power = 200
		}
		effect = {
			add_adm_power = -200
			if = {
				limit = { has_dlc = "Rule Britannia" }
				change_innovativeness = 5
			}
			else = {
				add_country_modifier = {
					name = verkalskomdhir_archive_knowledge
					duration = 3650
				}
			}
			country_event = {
				id = verkalskomdhir.1 days = 90
			}
		}
	}
	
	verkalskomdhir_recast_the_warding_spell = { 
		icon = fortify_the_passes
		required_missions = {
			verkalskomdhir_restore_the_archives
		}
		position = 3
		
		provinces_to_highlight = {
			owned_by = ROOT
			trade_goods = gems
			OR = {
				NOT = { base_production = 15 }
				NOT = { has_production_building_trigger = yes }
			}
		}
		
		trigger = {
			any_owned_province = {
				trade_goods = gems
				base_production = 15
				has_production_building_trigger = yes
			}
			OR = {
				AND = {
					ruler_has_personality = mage_personality
					custom_trigger_tooltip = {
				        tooltip = tooltip_has_abjuration_2
						OR = {
							has_ruler_flag = abjuration_2
							has_ruler_flag = abjuration_3
						}
					}
				}
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		effect = {
			4100 = {
				remove_province_modifier = verkalskomdhir_the_warding_gate_1
				add_province_modifier = {
					name = verkalskomdhir_the_warding_gate_2
					duration = -1
				}
			}
		}
	}
	
	verkalskomdhir_rebuild_kekigs_labyrinth = { 
		icon = fixed_garrison_system
		required_missions = {
			verkalskomdhir_recast_the_warding_spell
		}
		position = 4
		
		trigger = {
			fortification_expert = 3
			treasury = 2000
			mil = 200
		}
		effect = {
			add_treasury = -2000
			add_mil_power = -200
			4100 = {
				remove_province_modifier = verkalskomdhir_the_warding_gate_2
				add_province_modifier = {
					name = verkalskomdhir_the_warding_gate_3
					duration = -1
				}
			}
		}
	}
	
	verkalskomdhir_arrow_lumber_camps = { 
		icon = mission_a_million_rice_fields
		required_missions = {
			verkalskomdhir_launch_the_expedition
		}
		position = 5
		
		provinces_to_highlight = {
			province_group = deepwoods_cluster_7 #arrow grove area
			OR = {
				has_production_building_trigger = no
				NOT = { base_production = 7 }
			}
			OR = {
				trade_goods = tropical_wood
				province_id = 3033 #Ayethsir
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				province_group = deepwoods_cluster_7
				has_production_building_trigger = yes
				OR = {
					trade_goods = tropical_wood
					province_id = 3033
				}
				base_production = 7
				value = 3
			}
		}
		effect = {
			3033 = {
				change_trade_goods = tropical_wood
			}
			if = {
				limit = {
					3033 = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
				}
				3033 = {
					center_of_trade = 1
				}
			}
			else_if = {
				limit = {
					3033 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				3033 = {
					add_center_of_trade_level = 1 
				}
			}
		}
	}
	
	verkalskomdhir_the_circular_saw = { 
		icon = mission_pirate_havens
		required_missions = { 
			verkalskomdhir_arrow_lumber_camps
		}
		position = 6
		
		provinces_to_highlight = {
			owned_by = ROOT
			trade_goods = tropical_wood
			NOT = { has_building = mills }
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				trade_goods = tropical_wood
				has_building = mills
				value = 5
			}
		}
		effect = {
			add_country_modifier = {
				name = verkalskomdhir_circular_saw
				duration = 9125
			}
		}
	}
}

verkalskomdhir_deepwoods_development = {
	slot = 3
	generic = no
	ai = yes 
	potential = { tag = I13 }
	has_country_shield = yes
	
	verkalskomdhir_reform_the_forest_rangers = { 
		icon = mission_iroquois_warriors
		required_missions = {
			verkalskomdhir_restore_the_archives
		}
		position = 3
		
		trigger = {
			treasury = 250
			manpower = 20
		}
		effect = {
			add_treasury = -250
			add_manpower = -20
			add_country_modifier = {
				name = verkalskomdhir_ranger_training
				duration = 730
			}
			hidden_effect = {
				country_event = {
					id = verkalskomdhir.2 days = 730
				}
			}
		}
	}
	
	verkalskomdhir_launch_the_expedition = { 
		icon = restore_great_moravia
		required_missions = {
			verkalskomdhir_reform_the_forest_ranger_corps
			verkalskomdhir_recast_the_warding_spell
		}
		position = 4
		
		trigger = {
			treasury = 200
			NOT = { has_country_modifier = verkalskomdhir_ranger_training }
			num_of_conquistadors = 1
		}
		effect = {
			add_treasury = -200
			country_event = {
				id = verkalskomdhir.3
			}
		}
	}
	
	verkalskomdhir_settle_the_woods = { 
		icon = mission_settlers_north_america
		required_missions = {
			verkalskomdhir_establish_outpost
		}
		position = 6
		
		provinces_to_highlight = {
			province_group = deepwoods_cluster_7 #arrow grove area
			NOT = { religion = ancestor_worship }
			NOT = { culture_group = dwarven }
		}
		
		trigger = {
			deepwoods_cluster_7 = {
				type = all
				owned_by = ROOT
				religion = ancestor_worship
				culture_group = dwarven
			}
			
		}
		
		effect = {
			deepwoods_cluster_7 = {
				add_province_modifier = {
					name = verkalskomdhir_settling_the_woods
					duration = 3650
				}
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
	}
	
	verkalskomdhir_flower_lumber_camps = { 
		icon = mission_a_million_rice_fields
		required_missions = {
			verkalskomdhir_control_eastern_groves
		}
		position = 7
		
		provinces_to_highlight = {
			province_group = deepwoods_cluster_5 #Flower grove area
			OR = {
				has_production_building_trigger = no
				NOT = { base_production = 7 }
			}
			OR = {
				trade_goods = tropical_wood
				province_id = 3030 #Emmylscotha
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				province_group = deepwoods_cluster_5
				has_production_building_trigger = yes
				OR = {
					trade_goods = tropical_wood
					province_id = 3030
				}
				base_production = 7
				value = 3
			}
		}
		effect = {
			3030 = {
				change_trade_goods = tropical_wood
			}
			if = {
				limit = {
					3030 = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
				}
				3030 = {
					center_of_trade = 1
				}
			}
			else_if = {
				limit = {
					3030 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				3030 = {
					add_center_of_trade_level = 1 
				}
			}
		}
	}
}

verkalskomdhir_expansion = {
	slot = 4
	generic = no
	ai = yes 
	potential = { tag = I13 }
	has_country_shield = yes
	
	verkalskomdhir_secure_our_surroundings = { 
		icon = mission_unite_home_region
		required_missions = {  }
		position = 1
		
		provinces_to_highlight = {
			area = stunad_skomdihr_area
			NOT = { owned_by = ROOT }
			is_city = no
		}
		trigger = {
			stunad_skomdihr_area = {
				type = all
				is_city = yes
				owned_by = ROOT
			}
			NOT = { exists = H87 }
		}
		effect = {
			add_country_modifier = {
				name = verkalskomdhir_colonial_boom
				duration = 9125
			}
			argrod_6_8_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			shazstundihr_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			argrod_origin_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	verkalskomdhir_gemstones_deposits = { 
		icon = mission_riches_of_golconda
		required_missions = {
			verkalskomdhir_secure_our_surroundings
			verkalskomdhir_repair_the_warding_gate
		}
		position = 2
		
		provinces_to_highlight = {
			province_id = 4093 #Arg-Ordstun
			NOT = { owns_core_province = ROOT }
		}
		trigger = {
			4093 = {
				owned_by = ROOT
			}
		}
		effect = {
			arg_ordstun_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kings_caverns_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	verkalskomdhir_gate_to_bulwar = { 
		icon = mission_fortifying_the_plain
		required_missions = {
			verkalskomdhir_gemstones_deposits
		}
		position = 3
		
		provinces_to_highlight = {
			province_id = 2942 #Shazstundhir
			NOT = { owns_core_province = ROOT }
		}
		trigger = {
			2942 = {
				owned_by = ROOT
			}
		}
		effect = {
			orlghelovar_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	verkalskomdhir_gate_to_cannor = { 
		icon = fortress_of_belgrade
		required_missions = {
			verkalskomdhir_gate_to_bulwar
		}
		position = 4
		
		provinces_to_highlight = {
			province_id = 4238 #Orlghelovar
			NOT = { owns_core_province = ROOT }
		}
		trigger = {
			4238 = {
				owned_by = ROOT
			}
		}
		effect = {
			north_altar_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_altar_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	verkalskomdhir_establish_outpost = { 
		icon = mission_el_badi_palace
		required_missions = {
			verkalskomdhir_launch_the_expedition
		}
		position = 5
		
		provinces_to_highlight = {
			province_group = deepwoods_cluster_7 #arrow grove area
			NOT = { owned_by = ROOT }
		}
		trigger = {
			deepwoods_cluster_7 = {
				type = all
				owned_by = ROOT
				fort_level = 2
			}
		}
		effect = {
			limit = {
				deepwoods_cluster_7 = {
					fort_level = 2
				}
			}
			add_province_modifier = {
				name = verkalskomdhir_fortifications
				duration = 7300
			}
			east_deepwood = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	verkalskomdhir_control_eastern_groves = { 
		icon = cross_the_pindus
		required_missions = {
			verkalskomdhir_establish_outpost
		}
		position = 6
		
		provinces_to_highlight = {
			region = east_deepwood
			NOT = { owned_by = ROOT }
		}
		trigger = {
			east_deepwood = {
				type = all
				owned_by = ROOT
			}
		}
		effect = {
			west_deepwood = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	verkalskomdhir_the_flintwoods = { 
		icon = mission_invade_occitania
		required_missions = {
			verkalskomdhir_control_eastern_groves
		}
		position = 7
		
		provinces_to_highlight = {
			superregion = deepwoods_superregion
			NOT = { owned_by = ROOT }
		}
		trigger = {
			deepwoods_superregion = {
				type = all
				owned_by = ROOT
			}
		}
		effect = {
			add_prestige = 25
			add_country_modifier = {
				name = verkalskomdhir_settling_flintwoods
				duration = 9125
			}
		}
	}
	
	verkalskomdhir_thorn_lumber_camps = { 
		icon = mission_a_million_rice_fields
		required_missions = {
			verkalskomdhir_the_flintwoods
		}
		position = 8
		
		provinces_to_highlight = {
			province_group = deepwoods_cluster_3 #Thorn grove area
			OR = {
				has_production_building_trigger = no
				NOT = { base_production = 7 }
			}
			OR = {
				trade_goods = tropical_wood
				province_id = 3017 #Drennethylle
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				province_group = deepwoods_cluster_3
				has_production_building_trigger = yes
				OR = {
					trade_goods = tropical_wood
					province_id = 3017
				}
				base_production = 7
				value = 3
			}
		}
		effect = {
			3017 = {
				change_trade_goods = tropical_wood
			}
			if = {
				limit = {
					3017 = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
				}
				3017 = {
					center_of_trade = 1
				}
			}
			else_if = {
				limit = {
					3017 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				3017 = {
					add_center_of_trade_level = 1 
				}
			}
		}
	}
}

verkalskomdhir_trade = {
	slot = 5
	generic = no
	ai = yes 
	potential = { tag = I13 }
	has_country_shield = yes
	
	verkalskomdhir_trading_in_dwarovar = { 
		icon = mission_portuguese_ceylon
		required_missions = {
			verkalskomdhir_establish_outpost
		}
		position = 6
		
		trigger = {
			any_ally = {
				capital_scope = { superregion = west_serpentspine_superregion }
				has_opinion = {
					who = ROOT
					value = 150
				}
			}
		}
		effect = {
			argrod_9_11_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			country_event = {
				id = verkalskomdhir.10
			}
		}
	}
	
}
