feiten_missions_1_early = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
	}
	has_country_shield = yes

	feiten_port_facilities = {
		icon = mission_galleys_in_port
		position = 1
		required_missions = { }

		provinces_to_highlight = { province_id = 4879 } # Feiten 
		
		trigger = {
			4879 = {
				development = 25
				has_dock_building_trigger = yes
			}
		}
		
		effect = {
			add_country_modifier = {
				name = feiten_port_facilities_built
				duration = 7300
			}
			4879 = {
				add_unit_construction = {
					type = light_ship
					amount = 5
					speed = 0.5
					cost = 0
				}
			}
		}
	}
	
	feiten_dual_harbors = {
		icon = mission_trade_with_cathay
		position = 3
		required_missions = {
			feiten_port_facilities
			feiten_integrate_cuihiok
		}

		provinces_to_highlight = {
			OR = {
				province_id = 4879 # Feiten
				province_id = 4884 # Cuihiok
			}
			OR = {
				has_trade_building_trigger = no
				has_influencing_fort = no
			}
			if = {
				limit = { has_dlc = "Dharma" }
				
			}
		}
		
		trigger = {
			4884 = {
				has_trade_building_trigger = yes
				has_influencing_fort = yes
			}
			4879 = {
				has_trade_building_trigger = yes
				has_influencing_fort = yes
			}
			OR = {
				4879 = { province_has_center_of_trade_of_level = 2 }
				4884 = { province_has_center_of_trade_of_level = 2 }
			}
		}
		
		effect = {
			add_mercantilism = 3
			custom_tooltip = feiten_dual_harbors_effect_tt
			if = {
				limit = {
					4879 = { province_has_center_of_trade_of_level = 2 }
					4884 = { province_has_center_of_trade_of_level = 2 }
				}
				add_mercantilism = 3
			}
			if = {
				limit = {
					4879 = { province_has_center_of_trade_of_level = 2 }
					4884 = { province_has_center_of_trade_of_level = 2 }
				}
				# I know its not random but the illusion of randomness is fine in this case
				random_list = {
					1 = {
						4879 = {
							add_province_modifier = {
								name = feiten_dual_harbors
								duration = 7300
							}
						}
					}
					1 = {
						4884 = {
							add_province_modifier = {
								name = feiten_dual_harbors
								duration = 7300
							}
						}
					}
				}
			}
			else_if = {
				limit = { 4879 = { province_has_center_of_trade_of_level = 2 } }
				4879 = {
					add_province_modifier = {
						name = feiten_dual_harbors
						duration = 7300
					}
				}
			}
			else_if = {
				limit = { 4884 = { province_has_center_of_trade_of_level = 2 } }
				4884 = {
					add_province_modifier = {
						name = feiten_dual_harbors
						duration = 7300
					}
				}
			}
		}
	}

	feiten_coast_blooms = {
		icon = mission_che_the_cave_country
		position = 4
		required_missions = { feiten_dual_harbors }

		provinces_to_highlight = {
			sea_zone = { province_id = 1371 } # Jellyfish Coast
			owned_by = ROOT
			OR = {
				NOT = { development = 10 }
				if = {
					limit = { has_dlc = "Mandate of Heaven" }
					is_prosperous = no
				}
				else = { has_tax_building_trigger = no }
			}
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 6
				sea_zone = { province_id = 1371 }
				development = 10
			}
			iongsim_area = {
				type = all
				if = {
					limit = { has_dlc = "Mandate of Heaven" }
					is_prosperous = yes
				}
				else = { has_tax_building_trigger = yes }
			}
		}
		
		effect = {
			add_mercantilism = 3
			add_republican_tradition_excess_to_mana_effect = { VAL = 10 }
		}
	}
}

feiten_missions_1_established = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_a_new_trading_power
	}
	has_country_shield = yes

	feiten_haichapha = {
		icon = mission_disrupt_portuguese_trade
		position = 6
		required_missions = {
			feiten_a_new_trading_power
			feiten_coast_blooms
		}

		provinces_to_highlight = {
			owned_by = ROOT
			has_port = yes
		}
		
		trigger = {
			num_of_heavy_ship = 5
			num_of_owned_provinces_with = {
				value = 3
				has_port = yes
				has_coastal_defence_building = yes
			}
		}
		
		effect = {
			custom_tooltip = fulfill_conditions_prov_tt
			tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = feiten_anti_piracy_support
						duration = 7300
					}
					add_base_tax = 1
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = { has_coastal_defence_building = yes }
					add_province_modifier = {
						name = feiten_anti_piracy_support
						duration = 7300
					}
					add_base_tax = 1
				}
			}
		}	
	}
	
	feiten_staging_grounds = {
		icon = mission_mnd_maj_rein_in_brunei
		position = 8
		required_missions = { feiten_mapping_storm_boundaries }

		provinces_to_highlight = {
			OR = {
				province_id = 6512
				province_id = 6147
			}
			OR = {
				has_dock_building_trigger = no
				has_production_building_trigger = no
				NOT = { development = 10 }
			}
		}
		
		trigger = {
			6512 = {
				has_dock_building_trigger = yes
				has_production_building_trigger = yes
				development = 10
			}
			6147 = {
				has_dock_building_trigger = yes
				has_production_building_trigger = yes
				development = 10
			}
		}
		
		effect = {
			6512 = {
				change_trade_goods = fish
				add_permanent_province_modifier = {
					name = feiten_whaling_base_bountiful
					duration = -1
				}
			}
			6147 = {
				change_trade_goods = fish
				add_permanent_province_modifier = {
					name = feiten_whaling_base_bountiful
					duration = -1
				}
			}
		}
	}
	
	feiten_gateways = {
		icon = mission_trade_with_japan
		position = 9
		required_missions = { feiten_staging_grounds }

		provinces_to_highlight = {
			OR = {
				province_id = 4879
				province_id = 4884
			}
			OR = {
				has_shipyard_building_trigger = no
				NOT = { province_trade_power = 30 }
			}
		}
		
		trigger = {
			4879 = {
				has_shipyard_building_trigger = yes
				province_trade_power = 30
			}
			4884 = {
				has_shipyard_building_trigger = yes
				province_trade_power = 30
			}
		}
		
		effect = {
			define_advisor = {
				type = navigator
				# name = ""
				skill = 3
				cost_multiplier = 0.5
			}
			4879 = {
				add_province_modifier = {
					name = feiten_gateways_to_the_world
					duration = -1
				}
			}
			4884 = {
				add_province_modifier = {
					name = feiten_gateways_to_the_world
					duration = -1
				}
			}
		}	
	}
}

feiten_missions_1_world = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_the_world_our_oyster
	}
	has_country_shield = yes

	feiten_determine_settler_policy = {
		icon = mission_clear_the_delta
		position = 13
		required_missions = {
			feiten_the_world_our_oyster
			feiten_gateways
		}

		provinces_to_highlight = { }
		
		trigger = {
			num_of_colonists = 1
		}
		
		effect = {
			country_event = { id = flavor_feiten.200 }
		}
	}

	feiten_of_guano_and_whale_oil = {
		icon = mission_protect_white_sea_trade
		position = 15
		required_missions = { feiten_determine_settler_policy }

		provinces_to_highlight = {
			province_id = 2063 # Sardach
		}
		
		trigger = {
			has_discovered = 2063
		}
		
		effect = {

			create_colony_mission_reward = { province = 2063 }
			
			hidden_effect = {
				every_province = {
					limit = {
						island = yes
						is_city = no
					}
					add_province_triggered_modifier = feiten_island_colonization_handler
				}
			}
		}
	}

	feiten_aelantir_ambitions = {
		icon = mission_never_again
		position = 17
		required_missions = { feiten_of_guano_and_whale_oil }

		provinces_to_highlight = { }
		
		trigger = {
			calc_true_if = {
				amount = 2
				all_subject_country = {
					has_opinion = {
						who = ROOT
						value = 190
					}
					total_development = 150
					NOT = { liberty_desire = 25 }
				}
			}
		}
		
		effect = {
			
		}
	}

	feiten_secrets_of_the_precursors = {
		icon = mission_kon_anzikus_copper
		position = 20
		required_missions = { feiten_aelantir_ambitions }

		provinces_to_highlight = {
			trade_goods = precursor_relics
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				trade_goods = precursor_relics
				base_production = 10
			}
			# Have emerged from Spirit Tide?
			# Have completed X expeditions?
		}
		
		effect = {
			custom_tooltip = "We will unlock a new, costlier, research privilege, which will accelerate the reserach process."
		}
	}

	feiten_the_foreign_quarter = {
		icon = mission_control_the_barbary_coast
		position = 23
		required_missions = { feiten_league_in_schism }

		provinces_to_highlight = { province_id = 4884 }
		
		trigger = {
			4884 = {
				development = 30
				OR = {
					has_building = stock_exchange
					has_building = trade_depot
				}
				if = {
					limit = { has_dlc = "Dharma" }
					province_has_center_of_trade_of_level = 3
				}
			}
			if = {
				limit = { NOT = { has_dlc = "Dharma" } }
				treasury = 1000
			}
		}
		
		effect = {
			if = {
				limit = { NOT = { has_dlc = "Dharma" } }
				add_treasury = -1000
			}
			
			custom_tooltip = "If the §yTraditionalists§! are in powe:"
			tooltip = {
				add_country_modifier = {
					name = feiten_foreigners_welcomed
					duration = 7300
				}
			}
			custom_tooltip = "If the §yReformists§! are in power:"
			tooltip = {
				add_country_modifier = {
					name = feiten_foreigners_welcomed
					duration = 7300
				}
			}
			hidden_effect = {
				if = {
					limit = { is_statists_in_power = yes }
					add_country_modifier = {
					name = feiten_foreigners_welcomed
					duration = 7300
				}
				}
				else = {
					add_country_modifier = {
						name = feiten_foreigners_contained
						duration = 7300
					}
				}
			}
			4884 = {
				add_province_modifier = {
					name = feiten_foreigners_quarter
					duration = -1
				}
			}
		}
	}

	feiten_advent_of_unraveling = {
		icon = mission_kon_repel_the_missionaries
		position = 24
		required_missions = { feiten_the_foreign_quarter }

		provinces_to_highlight = {

		}
		
		trigger = {
			
		}
		
		effect = {

		}
	}

	feiten_unity_of_thought = {
		icon = mission_the_chola_campaigns
		position = 25
		required_missions = { feiten_advent_of_unraveling }

		provinces_to_highlight = {

		}
		
		trigger = {
			
		}
		
		effect = {

		}
	}


}

feiten_missions_2_early = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
	}
	has_country_shield = yes

	feiten_integrate_cuihiok = {
		icon = mission_mnd_dai_universities
		position = 2
		required_missions = { }

		provinces_to_highlight = { province_id = 4884 } # Cuihiok 
		
		trigger = {
			4884 = {
				has_tax_building_trigger = yes
				NOT = { local_autonomy = 10 }
			}
		}
		
		effect = {
			4884 = {
				add_base_manpower = 1
				add_base_production = 1
				add_base_tax = 1
				change_religion = high_philosophy
			}
			hungngon_area = { add_permanent_claim = ROOT }
			wanglam_area = { add_claim = ROOT }
			4984 = { add_claim = ROOT }
			4982 = { add_claim = ROOT }
		}
	}

	feiten_into_the_tea_forest = {
		icon = mission_verdant_secret
		position = 3
		required_missions = { feiten_integrate_cuihiok }

		provinces_to_highlight = {
			area = hungngon_area
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		
		trigger = {
			hungngon_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		
		effect = {
			wanglam_area = { add_permanent_claim = ROOT }
			4984 = { add_permanent_claim = ROOT }
			4982 = { add_permanent_claim = ROOT }
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 10
			}
		}
	}

	feiten_monopoly_on_tea_gardens = {
		icon = mission_rice_farming
		position = 4
		required_missions = { feiten_into_the_tea_forest }

		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = ROOT
			trade_goods = tea
			OR = {
				has_production_building_trigger = no
				has_trade_building_trigger = no
			}
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 3
				trade_goods = tea
				has_production_building_trigger = yes
				has_trade_building_trigger = yes
			}
		}
		
		effect = {
			add_years_of_owned_provinces_production_income = {
				years = 2
				trigger = {
					trade_goods = tea
					has_production_building_trigger = yes
					has_trade_building_trigger = yes
				}
			}
			custom_tooltip = fulfill_conditions_prov_tt
			tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = feiten_local_trade_monopoly
						duration = 10950
					}
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						trade_goods = tea
						has_production_building_trigger = yes
						has_trade_building_trigger = yes
					}
					add_province_modifier = {
						name = feiten_local_trade_monopoly
						duration = 10950
					}
				}
			}
		}
	}
}

feiten_missions_2_established = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_a_new_trading_power
	}
	has_country_shield = yes

	feiten_chasing_whale_migrations = {
		icon = mission_protect_white_sea_trade
		position = 6
		required_missions = { feiten_a_new_trading_power }

		provinces_to_highlight = { }
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = "If Exploration Ideas has been finished:\n50 dip\nElse:\n100 dip"
				if = {
					limit = { full_idea_group = exploration_ideas }
					dip_power = 50
				}
				else = {
					dip_power = 100
				}
			}
			sailors_percentage = 1
		}
		
		effect = {
			define_explorer = {
				# name = ""
				shock = 2
				fire = 2
				manuever = 6
				trait = accomplished_sailor_personality
			}
			add_sailors = -5000
			if = {
				limit = { full_idea_group = exploration_ideas }
				add_dip_power = -50
			}
			else = { add_dip_power = -100 }
			add_country_modifier = {
				name = feiten_chasing_whale_migrations
				duration = 7300
			}
		}	
	}
	
	feiten_mapping_storm_boundaries = {
		icon = mission_burning_separation
		position = 7
		required_missions = {
			feiten_chasing_whale_migrations
			feiten_haichapha
		}

		provinces_to_highlight = {
			OR = {
				province_id = 1619
				province_id = 6512
			}
		}
		
		trigger = {
			has_discovered = 1619
			has_discovered = 6512
			has_institution = new_world_i
		}
		
		effect = {
			create_colony_mission_reward = { province = 6512 }
			create_colony_mission_reward = { province = 6147 }
		}
	}
	
	feiten_to_build_an_airfleet = {
		icon = mission_machine_of_war
		position = 10
		required_missions = {
			feiten_gateways
			feiten_paradigm_shift
		}

		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = ROOT
			if = {
				limit = {
					NOT = {
						ROOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 3
								has_building = wharf
								base_production = 8
							}
						}
					}
				}
				OR = {
					trade_goods = naval_supplies
					trade_goods = fish
					trade_goods = salt	
				}
			}
			else_if = {
				limit = {
					NOT = {
						ROOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 3
								has_building = textile
								base_production = 8
							}
						}
					}
				}
				OR = {
					trade_goods = silk
					trade_goods = cloth
					trade_goods = dyes
					trade_goods = wool
				}
			}
			else_if = {
				limit = {
					NOT = {
						ROOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 2
								has_building = weapons
								base_production = 8
							}
						}
					}
				}
				OR = {
					trade_goods = iron
					trade_goods = copper
				}
			}
			else = {
				OR = {
					trade_goods = silk
					trade_goods = cloth
					trade_goods = dyes
					trade_goods = wool
					trade_goods = iron
					trade_goods = copper
					trade_goods = naval_supplies
					trade_goods = fish
					trade_goods = salt
				}
			}
			OR = {
				has_no_manufactory_trigger = yes
				NOT = { base_production = 8 }
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				has_building = wharf
				base_production = 8
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 2
				has_building = textile
				base_production = 8
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 2
				has_building = weapons
				base_production = 8
			}
		}
		
		effect = {
			custom_tooltip = fulfill_conditions_prov_tt
			tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = feiten_state_investment
						duration = 7300
					}
				}
			}
			hidden_effect = {
				every_owned_province = {
					if = {
						limit = { base_production = 12 }
						add_province_modifier = {
							name = feiten_state_investment
							duration = 14600
						}
					}
					else = {
						add_province_modifier = {
							name = feiten_state_investment
							duration = 7300
						}
					}
				}
				every_subject_country = {
					every_owned_province = {
						if = {
							limit = { base_production = 12 }
							add_province_modifier = {
								name = feiten_state_investment
								duration = 14600
							}
						}
						else = {
							add_province_modifier = {
								name = feiten_state_investment
								duration = 7300
							}
						}
					}
				}
			}
			custom_tooltip = "Modifier length will double if there is 12 production in the province"
		}	
	}
}

feiten_missions_2_world = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_the_world_our_oyster
	}
	has_country_shield = yes

	feiten_league_in_schism = {
		icon = mission_dethrone_the_rurikovichs
		position = 22
		required_missions = { feiten_age_of_silk }

		provinces_to_highlight = { }
		
		trigger = {
			has_reached_government_reform_tier = { tier_7 = yes }
			government_reform_progress = 100
		}
		
		effect = {
			change_government_reform_progress = -100
			add_government_reform = feiten_reformist_movement
		}	
	}

	feiten_dredging_feiten_bay = {
		icon = new_pilings
		position = 23
		required_missions = { feiten_cannorian_experts }

		provinces_to_highlight = { province_id = 4879 }
		
		trigger = {
			treasury = 1000
			4879 = {
				heavy_ships_in_province = 40
				has_building = drydock
			}
		}
		
		effect = {
			if = {
				limit = {
					4879 = {
						num_free_building_slots = 1
						NOT = { has_building = grand_shipyard }
					}
				}
				4879 = { add_building = grand_shipyard }
			}
			4879 = { add_province_modifier = { name = feiten_harbour_dredged duration = -1 } }
			hidden_effect = { country_event = { id = flavor_feiten.204 days = 3650 random = 730 } }
		}
	}

	feiten_lighter_than_air = {
		icon = mission_conquer_air
		position = 25
		required_missions = { feiten_luminescent_coast }

		provinces_to_highlight = { }
		
		trigger = {
		}
		
		effect = {

		}
	}

	feiten_feiten_school_ascendant = {
		icon = mission_mnd_maj_end_disaster
		position = 26
		required_missions = { feiten_unity_of_thought }

		provinces_to_highlight = { }
		
		trigger = {
		}
		
		effect = {

		}	
	}
}

feiten_missions_3_early = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
	}
	has_country_shield = yes

	feiten_incite_the_rebellious_cub = {
		icon = mission_conquer_bengal_tau
		position = 1
		required_missions = { }

		provinces_to_highlight = {
			OR = {
				owned_by = Y24 # Luoyip
				owned_by = Y21 # Xiyun
			}
		}
		
		trigger = {
			reverse_has_opinion = {
				who = Y24
				value = 200
			}
			has_spy_network_in = {
				who = Y21
				value = 50
			}
		}
		
		effect = {
			every_province = {
				limit = { owned_by = Y21 }
				add_permanent_claim = Y24
			}
			declare_war_with_cb = {
				who = Y21
				casus_belli = cb_conquest
			}
			Y24 = { join_all_offensive_wars_of = ROOT }
			add_favors = { who = Y24 amount = 20 }
		}
	}

	feiten_under_our_wing = {
		icon = mission_sweat_fealty
		position = 2
		required_missions = { feiten_incite_the_rebellious_cub }

		provinces_to_highlight = {
			if = {
				limit = { exists = Y21 }
				OR = {
					owned_by = Y24
					owned_by = Y21
				}
				
			}
			else = {
				OR = {
					province_id = 4888
					province_id = 4889
					province_id = 4893
				}
				NOT = { is_core = Y24 }
			}
		}
		
		trigger = {
			Y24 = { trust = { who = ROOT value = 90 } }
			4888 = { is_core = Y24 }
			4889 = { is_core = Y24 }
			4893 = { is_core = Y24 }
		}
		
		effect = {
			create_march = Y24
			add_dip_power = -150
		}
	}

	feiten_sate_silk_turban_greed = {
		icon = mission_riches_of_golconda
		position = 3
		required_missions = { feiten_under_our_wing }

		provinces_to_highlight = { province_id = 4890 } # Ongdou
		
		trigger = {
			4890 = {
				has_trade_building_trigger = yes
				has_production_building_trigger = yes
			}
		}
		
		effect = {
			add_years_of_owned_provinces_production_income = {
				years = 2
				trigger = { province_id = 4890 }
			}
			4890 = {
				add_province_modifier = {
					name = feiten_local_trade_monopoly
					duration = 10950
				}
			}
			add_prestige_excess_to_splendour_effect = { VAL = 10 }
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = 10
			}
		}
	}

	feiten_a_new_trading_power = {
		icon = mission_mal_riches_of_trade
		position = 5
		required_missions = {
			feiten_sate_silk_turban_greed
			feiten_monopoly_on_tea_gardens
			feiten_monopoly_on_salt
		}

		provinces_to_highlight = { province_id = 1372 } # Tianlou Bay
		
		trigger = {
			republican_tradition = 95
			stability = 1
			4871 = { # Tianlou
				trade_share = {
					country = ROOT
					share = 20
				}
			}
		}
		
		effect = {
			random_country = {
				limit = { owns = 4871 }
				add_historical_rival = ROOT
				ROOT = { add_historical_rival = PREV }
			}
			add_country_modifier = {
				name = feiten_trade_power_rises
				duration = 18250
			}
			add_government_reform = feiten_silken_jellyfish_council
			custom_tooltip = new_missions_revealed_tt
			hidden_effect = { swap_non_generic_missions = yes }

		}
	}
}

feiten_missions_3_established = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_a_new_trading_power
	}
	has_country_shield = yes

	feiten_masters_of_the_seas = {
		icon = mission_to_the_south_china_sea
		position = 6
		required_missions = { feiten_a_new_trading_power }

		provinces_to_highlight = {
			owner = {
				capital_scope = { superregion = yanshen_superregion }
				naval_strength = {
					who = ROOT
					value = 0.5
				}
			}
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = "Our navy is twice as large as any in Yanshen"
				NOT = {
					any_country = {
						capital_scope = { superregion = yanshen_superregion }
						naval_strength = {
							who = ROOT
							value = 0.5
						}
					}
				}
			}
			OR = {
				full_idea_group = exploration_ideas
				full_idea_group = maritime_ideas
				full_idea_group = naval_ideas
				navy_tradition = 40
			}
		}
		
		effect = {
			tianlou_area = { add_permanent_claim = ROOT }
		}	
	}
	
	feiten_bombs_over_tianlou = {
		icon = mission_crush_delhi
		position = 8
		required_missions = {
			feiten_shuimu_engineering_cadre
			feiten_masters_of_the_seas
		}

		provinces_to_highlight = { province_id = 4871  }
		
		trigger = {
			OR = {
				owns = 4871
				4871 = { sieged_by = ROOT }
			}
		}
		
		effect = {
			custom_tooltip = "If sieging Tianlou..."

			hidden_effect = {
				if = {
					limit = { 4871 = { sieged_by = ROOT } }
					country_event = {
						id = flavor_feiten.70
					}
				}
			}
		}	
	}
	
	feiten_paradigm_shift = {
		icon = mission_thinking_king
		position = 9
		required_missions = {
			feiten_staging_grounds
			feiten_bombs_over_tianlou
			feiten_entrenching_the_artificers
		}

		provinces_to_highlight = {

		}
		
		trigger = {
			
		}
		
		effect = {

		}	
	}

	feiten_to_house_an_airfleet = {
		icon = mission_se_medicine_wheel
		position = 10
		required_missions = {
			feiten_gateways
			feiten_paradigm_shift
			feiten_developing_an_air_doctrine
		}

		provinces_to_highlight = { province_id = 4879 }
		
		trigger = {
			if = {
				limit = { has_dlc = "Dharma" }
				4879 = { province_has_center_of_trade_of_level = 3 }
			}
			else = { treasury = 1000 }
			dip_power = 50
			adm_power = 50
			mil_power = 50
		}
		
		effect = {
			if = {
				limit = { has_dlc = "Dharma" }
			}
			else = { add_treasury = 1000 }
			add_dip_power = -50
			add_adm_power = -50
			add_mil_power = -50
			4879 = { add_great_project = { type = feiten_aerodrome } }
		}	
	}

	feiten_the_first_voyage = {
		icon = mission_launch_a_flagship
		position = 11
		required_missions = {
			feiten_to_build_an_airfleet
			feiten_to_house_an_airfleet
			feiten_to_man_an_airfleet
		}

		provinces_to_highlight = {

		}
		
		trigger = {
			
		}
		
		effect = {

		}	
	}

	feiten_the_world_our_oyster = {
		icon = mission_dharma_mission_religious_harmony
		position = 12
		required_missions = { feiten_the_first_voyage }

		provinces_to_highlight = {

		}
		
		trigger = {
			republican_tradition = 100
			prestige = 99
		}
		
		effect = {
			add_stability_or_adm_power = yes
			swap_non_generic_missions = yes
		}	
	}
}

feiten_missions_3_world = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_the_world_our_oyster
	}
	has_country_shield = yes

	feiten_bait_and_trap_the_pirates = {
		icon = mission_end_arakan_piracy
		position = 13
		required_missions = { feiten_the_world_our_oyster }

		provinces_to_highlight = {
			OR = {
				province_id = 1624 # Ringlet Basin
				province_id = 6145 # Inahmang
			}
		}
		
		trigger = {
			6145 = { has_building = naval_battery }
			1624 = {
				custom_trigger_tooltip = {
					tooltip = "At least 20 Light Ships present"
					num_of_units_in_province = {
						who = ROOT
						type = light_ship
						amount = 20
					}
				}
			}
		}
		
		effect = {
			country_event = { id = flavor_feiten.50 }
			ringlet_isles_region = { add_permanent_claim = ROOT }
		}	
	}

	feiten_face_the_benefactors = {
		icon = mission_claim_the_canaries
		position = 14
		required_missions = { feiten_bait_and_trap_the_pirates }

		provinces_to_highlight = {
			region = ringlet_isles_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			ringlet_isles_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			amkamsek_area = { add_claim = ROOT }
			hoangdesinh_area = { add_claim = ROOT }
			4701 = {
				owner = {
					reverse_add_casus_belli = {
						type = cb_feiten_anti_piracy
						target = ROOT
					}
					set_country_flag = feiten_piracy_target
				}
			}
		}	
	}

	feiten_avenge_the_rebellion = {
		icon = mission_destroyed_city
		position = 15
		required_missions = { feiten_face_the_benefactors }

		provinces_to_highlight = {
			OR = {
				province_id = 4701
				area = amkamsek_area
			}
		}
		
		trigger = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = "We have won a war against the owner of [4701.GetName] within the last 50 years"
					any_country = {
						owns = 4701
						ROOT = {
							has_won_war_against = {
								who = PREV
								max_years_since = 50
							}
						}
					}
				}
				4701 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			amkamsek_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_prestige_or_monarch_power = { VAL = 20 }
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 15
			}
		}	
	}

	feiten_age_of_silk = {
		icon = mission_defy_the_dragon
		position = 21
		required_missions = {
			feiten_secrets_of_the_precursors
			feiten_field_demonstration
		}

		provinces_to_highlight = { }
		
		trigger = {
			has_institution = manufactories
			1371 = { trade_node_value = 40 }
			# Have unlocked X airship inventions
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 80
			}
			estate_influence = {
				estate = estate_artificers
				influence = 70
			}
		}
		
		effect = {
			custom_tooltip = "We will unlock two new Elite companies: the Turtle and Lightning Shuimu. The Lightning Shuimu can instantly win sieges for a cost, while the Turtle Shuimu can train and drop off marines in any province they operate in. Each company requires 5 artificer cap to operate."
		}	
	}

	feiten_cannorian_experts = {
		icon = strengthen_the_vroedschappen
		position = 22
		required_missions = { feiten_age_of_silk }

		provinces_to_highlight = { }
		
		trigger = {
			treasury = 1000
			OR = {
				dip = 6
				mil = 6
				adm = 6
			}
			government_reform_progress = 50
		}
		
		effect = {
			change_government_reform_progress = -50
			capital_scope = {
				if = {
					limit = {
						any_country = {
							OR = {
								has_unit_type = gnomish_30_advanced_gunners
								has_unit_type = gnomish_30_warforged_army
							}
						}
					}
					gnomish_30_advanced_gunners = ROOT
					gnomish_30_advanced_gunners = ROOT
					gnomish_30_advanced_gunners = ROOT
					gnomish_30_advanced_gunners = ROOT
					gnomish_30_advanced_gunners = ROOT
				}
				else_if = {
					limit = {
						any_country = {
							OR = {
								has_unit_type = gnomish_28_early_war_golems
								has_unit_type = gnomish_28_sparkdrive_riflemen
							}
						}
					}
					gnomish_28_sparkdrive_riflemen = ROOT
					gnomish_28_sparkdrive_riflemen = ROOT
					gnomish_28_sparkdrive_riflemen = ROOT
					gnomish_28_sparkdrive_riflemen = ROOT
					gnomish_28_sparkdrive_riflemen = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_26_sparkdrive_prototypes } }
					gnomish_26_sparkdrive_prototypes = ROOT
					gnomish_26_sparkdrive_prototypes = ROOT
					gnomish_26_sparkdrive_prototypes = ROOT
					gnomish_26_sparkdrive_prototypes = ROOT
					gnomish_26_sparkdrive_prototypes = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_23_line_infantry } }
					gnomish_23_line_infantry = ROOT
					gnomish_23_line_infantry = ROOT
					gnomish_23_line_infantry = ROOT
					gnomish_23_line_infantry = ROOT
					gnomish_23_line_infantry = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_19_military_artificers } }
					gnomish_19_military_artificers = ROOT
					gnomish_19_military_artificers = ROOT
					gnomish_19_military_artificers = ROOT
					gnomish_19_military_artificers = ROOT
					gnomish_19_military_artificers = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_15_reload_companies } }
					gnomish_15_reload_companies = ROOT
					gnomish_15_reload_companies = ROOT
					gnomish_15_reload_companies = ROOT
					gnomish_15_reload_companies = ROOT
					gnomish_15_reload_companies = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_12_musketeers } }
					gnomish_12_musketeers = ROOT
					gnomish_12_musketeers = ROOT
					gnomish_12_musketeers = ROOT
					gnomish_12_musketeers = ROOT
					gnomish_12_musketeers = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_9_arquebusiers } }
					gnomish_9_arquebusiers = ROOT
					gnomish_9_arquebusiers = ROOT
					gnomish_9_arquebusiers = ROOT
					gnomish_9_arquebusiers = ROOT
					gnomish_9_arquebusiers = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_5_foreign_auxiliaries } }
					gnomish_5_foreign_auxiliaries = ROOT
					gnomish_5_foreign_auxiliaries = ROOT
					gnomish_5_foreign_auxiliaries = ROOT
					gnomish_5_foreign_auxiliaries = ROOT
					gnomish_5_foreign_auxiliaries = ROOT
				}
				else_if = {
					limit = { any_country = { has_unit_type = gnomish_1_skirmishers } }
					gnomish_1_skirmishers = ROOT
					gnomish_1_skirmishers = ROOT
					gnomish_1_skirmishers = ROOT
					gnomish_1_skirmishers = ROOT
					gnomish_1_skirmishers = ROOT
				}
			}
			country_event = { id = flavor_feiten.60 }
		}	
	}

	feiten_optics_industry = {
		icon = bohemian_crystal
		position = 23
		required_missions = { feiten_cannorian_experts }

		provinces_to_highlight = { province_id = 4883 }
		
		trigger = {
			adm_power = 100
			4883 = {
				base_production = 15
				has_manufactory_trigger = yes
				if = {
					limit = { ROOT = { adm_tech = 24 } }
					has_building = counting_house
				}
				else = { has_building = workshop }
			}
		}
		
		effect = {
			add_adm_power = -100
			4883 = {
				if = {
					limit = { has_building = farm_estate }
					remove_building = farm_estate
					add_building = mills
				}
				if = {
					limit = { has_large_gnomish_minority_trigger = yes }
					add_base_production = 2
				}
				else = {
					add_gnomish_minority_size_effect = yes
				}
			}
			mission_reward_artifice_points_2 = yes
		}	
	}

	feiten_luminescent_coast = {
		icon = mission_lantern_festival
		position = 23
		required_missions = {
			feiten_optics_industry
			feiten_dredging_feiten_bay
			feiten_hills_black_with_coal
			feiten_the_foreign_quarter
			feiten_university_row
		}

		provinces_to_highlight = {
			province_group = jellyfish_coast_provinces
			OR = {
				NOT = { development = 30 }
				is_prosperous = no
				NOT = { num_of_buildings_in_province = 6 }
				has_no_manufactory_trigger = yes
			}
		}
		
		trigger = {
			jellyfish_coast_provinces = {
				type = all
				development = 30
				is_prosperous = yes
				num_of_buildings_in_province = 6
				has_manufactory_trigger = yes
			}
		}
		
		effect = {
			add_country_modifier = {
				name = feiten_luminescent_coast_country
				duration = 7300
			}
			custom_tooltip = "Provinces bordering the Jellyfish Coast will gain the following modifier:"
			tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = feiten_luminescent_coast_prov
						duration = -1
					}
				}
			}
			custom_tooltip = "Provinces bordering the Jellyfish Coast that have 40 development or above will gain the following, upgraded modifier instead:"
			tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = feiten_luminescent_coast_prov_great
						duration = -1
					}
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = { province_group = jellyfish_coast_provinces }
					if = {
						limit = { development = 40 }
						add_province_modifier = {
							name = feiten_luminescent_coast_prov_great
							duration = -1
						}
					}
					else = {
						add_province_modifier = {
							name = feiten_luminescent_coast_prov
							duration = -1
						}
					}
				}
			}
		}
	}

	feiten_rigid_body_diagram = {
		icon = mission_sw_torquoise_mining
		position = 23
		required_missions = { feiten_luminescent_coast }

		provinces_to_highlight = {
			owner = { culture_group = dwarven }
		}
		
		trigger = {
			any_known_country = {
				culture = dwarven
				has_opinion = {
					who = ROOT
					value = 100
				}
			}
		}
		
		effect = {

		}	
	}

	feiten_flight_of_first_dirigible = {
		icon = mission_dirigible
		position = 23
		required_missions = {
			feiten_lighter_than_air
			feiten_rigid_body_diagram
			feiten_of_pistons_and_steam
		}

		provinces_to_highlight = { }
		
		trigger = {
			
		}
		
		effect = {

		}	
	}

	feiten_masters_of_the_skies = {
		icon = mission_balloon
		position = 23
		required_missions = {
			feiten_flight_of_first_dirigible
			feiten_futurology
			feiten_feiten_school_ascendant
		}

		provinces_to_highlight = {
			
		}
		
		trigger = {
			any_hired_mercenary_company = { template = merc_feiten_box_jellyfish }
			any_hired_mercenary_company = { template = merc_feiten_lightning_jellyfish }
			any_hired_mercenary_company = { template = merc_feiten_stasis }
			any_hired_mercenary_company = { template = merc_feiten_firestorm }
			any_hired_mercenary_company = { template = merc_feiten_paratroopers }
		}
		
		effect = {

		}	
	}
}

feiten_missions_4_early = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
	}
	has_country_shield = yes

	feiten_white_gold = {
		icon = mission_desert_pilgrim
		position = 2
		required_missions = { }

		provinces_to_highlight = { owned_by = Y27 }
		
		trigger = {
			if = {
				limit = { exists = Y27 }
				OR = {
					has_spy_network_in = {
						who = Y27
						value = 50
					}
					reverse_has_opinion = {
						who = Y27
						value = 190
					}
				}
			}
			else = { 4896 = { country_or_non_sovereign_subject_holds = ROOT } }
		}
		
		effect = {
			custom_tooltip = feiten_white_gold_effect_tt_1
			tooltip = {
				Y27 = {
					add_country_modifier = {
						name = feiten_salt_trade_deal_kohai
						duration = 7300
					}
				}
				add_country_modifier = {
					name = feiten_salt_trade_deal_feiten
					duration = 7300
				}
				add_trust = {
					who = Y27
					value = 10
					mutual = yes
				}
			}
			custom_tooltip = feiten_white_gold_effect_tt_2
			tooltip = { hongnguan_area = { add_permanent_claim = ROOT } }
			hidden_effect = {
				if = {
					limit = { exists = Y27 }
					if = {
						limit = {
							has_spy_network_in = {
								who = Y27
								value = 50
							}
						}
						hongnguan_area = { add_permanent_claim = ROOT }
					}
					else_if = {
						limit = {
							reverse_has_opinion = {
								who = Y27
								value = 190
							}
						}
						Y27 = {
							add_country_modifier = {
								name = feiten_salt_trade_deal_kohai
								duration = 7300
							}
						}
						add_country_modifier = {
							name = feiten_salt_trade_deal_feiten
							duration = 7300
						}
						add_trust = {
							who = Y27
							value = 10
							mutual = yes
						}
					}
				}
			}
		}
	}

	feiten_control_the_salt_road = {
		icon = mission_the_grand_trunk_road_bng
		position = 3
		required_missions = { feiten_white_gold }

		provinces_to_highlight = {
			if = {
				limit = {
					4896 = { is_permanent_claim = ROOT } # Sising
					province_id = 4896
				}
			}
			else = { owned_by = Y27 }
		}
		
		trigger = {
			OR = {
				4896 = { owned_by = ROOT }
				AND = {
					alliance_with = Y27
					Y27 = { trust = { who = ROOT value = 75 } }
					1371 = {
						trade_share = {
							country = ROOT
							share = 50
						}
					}
				}
			}
		}
		
		effect = {
			4871 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 10
					key = "Control of the Salt Road"
				}
			}
			4859 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 10
					key = "Control of the Salt Road"
				}
			}
			add_country_modifier = {
				name = feiten_salt_road_control
				duration = 7300
			}
			if = {
				limit = { has_country_modifier = feiten_salt_trade_deal_feiten }
				remove_country_modifier = feiten_salt_trade_deal_feiten
				Y27 = { remove_country_modifier = feiten_salt_trade_deal_kohai }
			}
		}
	}

	feiten_monopoly_on_salt = {
		icon = mission_son_own_develop_clothes_and_salt
		position = 4
		required_missions = { feiten_control_the_salt_road }

		provinces_to_highlight = { province_id = 4896 }
		
		trigger = {
			OR = {
				4896 = {
					has_trade_building_trigger = yes
					has_production_building_trigger = yes
					owned_by = ROOT
				}
				# wtf this doesn't work
				# Y27 = {
				# 	has_opinion_modifier = {
				# 		who = ROOT
				# 		modifier = transfers_trade_power
				# 	}
				# }
				custom_trigger_tooltip = {
					tooltip = feiten_monopoly_on_salt_trigger_tt
					Y27 = { has_country_flag = transfers_trade_to_feiten }
				}
			}				
		}
		
		effect = {
			if = {
				limit = { 4896 = { owned_by = ROOT } }
				add_years_of_owned_provinces_production_income = {
					years = 2
					trigger = { province_id = 4896 }
				}
				4896 = {
					add_province_modifier = {
						name = feiten_local_trade_monopoly
						duration = 10950
					}
				}
			}
			else = {
				add_years_of_trade_income = {
					years = 2
					custom_tooltip = feiten_monopoly_on_salt_effect_tt
				}
			}
		}
	}
}

feiten_missions_4_established = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_a_new_trading_power
	}
	
	has_country_shield = yes

	feiten_house_of_fire_and_water = {
		icon = mission_science
		position = 6
		required_missions = { feiten_a_new_trading_power }

		provinces_to_highlight = {
			if = {
				limit = { Y24 = { is_subject_of = Y20 } }
				owned_by = Y24
			}
			else = {
				area = luoyip_area
				NOT = { is_core = ROOT }
			}
		}
		
		trigger = {
			if = {
				limit = { has_dlc = "Rule Britannia" }
				innovativeness = 33
			}
			if = {
				limit = { Y24 = { is_subject_of = Y20 } }
				custom_trigger_tooltip = { tooltip = "Because [Y24.GetName] is our Vassal:" }
				Y24 = {
					NOT = { liberty_desire = 1 }
					has_divert_trade = yes
					trust = {
						who = ROOT
						value = 100
					}
				}
			}
			else = {
				custom_trigger_tooltip = { tooltip = "Because [Y24.GetName] is NOT our Vassal:" }
				luoyip_area = {
					type = all
					is_core = ROOT
				}
			}
		}
		
		effect = {
			4879 = {
				add_building_construction = {
					building = university
					speed = 0.5
					cost = 0
				}
				add_permanent_province_modifier = {
					name = feiten_house_of_fire_and_water_hq
					duration = -1
				}
				mission_reward_artifice_points_3 = yes
			}
		}
	}
	
	feiten_shuimu_engineering_cadre = {
		icon = mission_artificier_experience
		position = 7
		required_missions = {
			feiten_starry_eyed_philosophers
			feiten_house_of_fire_and_water
		}

		provinces_to_highlight = { province_id = 4879 }
		
		trigger = {
			treasury = 400
			4879 = { has_building = mage_tower }
		}
		
		effect = {
			custom_tooltip = "The Shuimu Engineering Cadre will be unlocked as our artificer estate"
			set_country_flag = supporting_artificers
			set_estate_privilege = estate_artificers_organization_feiten_shuimu_cadre
		}
	}
	
	feiten_to_man_an_airfleet = {
		icon = mission_landsknecht_soldier
		position = 10
		required_missions = {
			feiten_paradigm_shift
			feiten_developing_an_air_doctrine
		}

		provinces_to_highlight = {

		}
		
		trigger = {
			high_tolerance_kobold_race_trigger = yes
			num_of_marines = 5
		}
		
		effect = {
			4879 = {
				if = {
					limit = { has_large_kobold_minority_trigger = yes }
					add_base_production = 1
					add_base_manpower = 1
				}
				else = { add_kobold_minority_size_effect = yes }
			}
			every_owned_province = {
				limit = { has_any_kobold_pop_trigger = yes }
				add_base_manpower = 1
			}
		}	
	}
}

feiten_missions_4_world = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_the_world_our_oyster
	}
	has_country_shield = yes

	feiten_aeronauts_handbook = {
		icon = mission_writing_book
		position = 22
		required_missions = { feiten_age_of_silk }

		provinces_to_highlight = { }
		
		trigger = {
			feiten_airfleet_admiral = 5
			estate_loyalty = {
				estate = estate_artificers
				loyalty = 65
			}
			estate_influence = {
				estate = estate_artificers
				influence = 65
			}
			monthly_adm = 15
			monthly_dip = 15
			monthly_mil = 15
		}
		
		effect = {
			country_event = { id = flavor_feiten.80 }
		}
	}

	feiten_hills_black_with_coal = {
		icon = mission_rb_central_belt_coal_mining
		position = 23
		required_missions = { feiten_cannorian_experts }

		provinces_to_highlight = { province_id = 4881 }
		
		trigger = {
			4881 = {
				base_production = 15
				has_building = furnace
				has_building = counting_house
			}
		}
		
		effect = {
			jellyfish_coast_provinces = {
				limit = { owned_by = ROOT }
				add_next_institution_embracement = 33
				if = {
					limit = { industrialization = 100 }
					add_province_modifier = {
						name = feiten_industrialized_prov
						duration = 7300
					}
				}
			}
		}	
	}

	feiten_of_pistons_and_steam = {
		icon = mission_rb_prospect_for_coal
		position = 25
		required_missions = { feiten_luminescent_coast }

		provinces_to_highlight = { }
		
		trigger = {

		}
		
		effect = {

		}	
	}

	feiten_futurology = {
		icon = mission_asian_city
		position = 26
		required_missions = { feiten_new_explosives }

		provinces_to_highlight = { }
		
		trigger = {

		}
		
		effect = {

		}	
	}
}

feiten_missions_5_early = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
	}
	has_country_shield = yes

	feiten_state_whaling_expeditions = {
		icon = mission_rb_cod_wars
		position = 1
		required_missions = { }

		provinces_to_highlight = { }
		
		trigger = {
			OR = {
				AND = {

					ruler_has_personality = entrepreneur_personality 
					dip = 5
				}
				treasury = 150
			}
		}
		
		effect = {
			if = {
				limit = {
					NOT = { dip = 5 }
					NOT = { ruler_has_personality = entrepreneur_personality }
				}
				add_treasury = -150
			}
			country_event = { id = flavor_feiten.1 }
		}
	}

	feiten_first_foray_into_the_skies = {
		icon = crush_the_revolution
		position = 3
		required_missions = {
			feiten_state_whaling_expeditions
			feiten_white_gold
		}

		provinces_to_highlight = { province_id = 4879 }
		
		trigger = {
			4879 = { renaissance = 100 }
			NOT = { has_country_modifier = feiten_active_whaling_expedition }
		}
		
		effect = {
			define_advisor = {
				type = natural_scientist
				name = "Xiao Yang"
				skill = 2
				discount = yes
			}
			add_country_modifier = {
				name = feiten_starting_balloon_research
				duration = -1
			}
			hidden_effect = { country_event = { id = flavor_feiten.30 days = 180 } }
		}
	}

	feiten_from_theory_to_practice = {
		icon = mission_star_comet
		position = 4
		required_missions = { feiten_first_foray_into_the_skies }

		provinces_to_highlight = { }
		
		trigger = {
			NOT = { has_country_modifier = feiten_starting_balloon_research }
			OR = {
				has_mil_advisor_2 = yes
				mil = 5
			}
		}
		
		effect = {
			country_event = { id = flavor_feiten.10 }
			if = {
				limit = { has_dlc = "Rule Britannia" }
				change_innovativeness = 3
			}
			else = {
				add_adm_power = 60
				add_dip_power = 60
				add_mil_power = 60
			}
			custom_tooltip = feiten_unlock_jellyfish_scouts
			custom_tooltip = merc_elite_no_army_prof_tt
		}
	}
}

feiten_missions_5_established = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_a_new_trading_power
	}
	has_country_shield = yes

	feiten_starry_eyed_philosophers = {
		icon = mission_scholar_officials
		position = 6
		required_missions = {
			feiten_a_new_trading_power
			feiten_from_theory_to_practice
		}

		provinces_to_highlight = { province_id = 4861 }
		
		trigger = {
			OR = {
				owns = 4861
				4861 = {
					owner = {
						has_opinion = {
							who = ROOT
							value = 165
						}
					}
				}
			}
			estate_loyalty = {
				estate = estate_church
				loyalty = 60
			}
			estate_influence = {
				estate = estate_church
				influence = 40
			}
		}
		
		effect = {
			add_country_modifier = {
				name = feiten_invite_school_of_starry_eye
				duration = 7300
			}
			country_event = { id = flavor_feiten.20 }
		}
	}
	
	feiten_entrenching_the_artificers = {
		icon = mission_brahmin_administrators
		position = 8
		required_missions = { feiten_shuimu_engineering_cadre }

		provinces_to_highlight = { }
		
		trigger = {
			num_of_estate_privileges = {
				estate = estate_artificers
				value = 2
			}
			crown_land_share = 40
		}
		
		effect = {
			change_estate_land_share = {
				estate = estate_artificers
				share = 10
			}
			custom_tooltip = "We will unlock a new privilege for the Shuimu Engineering Cadre: Facilities Investment"
			set_country_flag = feiten_shuimu_engineering_workshop_unlocked
		}	
	}
	
	feiten_developing_an_air_doctrine = {
		icon = mission_retake_ceuta
		position = 9
		required_missions = { feiten_entrenching_the_artificers }

		provinces_to_highlight = { }
		
		trigger = {
			has_mil_advisor_3 = yes
			if = {
				limit = { army_professionalism = 0.4 }
				dip_power = 150
			}
			else = { dip_power = 300 }
		}
		
		effect = {
			set_country_flag = feiten_airfleet_captain_unlocked
			custom_tooltip = "We will unlock a new type of advisor: Airfleet Captain"
			define_advisor = {
				type = feiten_airfleet_admiral
				female = yes
				skill = 3
				cost_multiplier = 0.5
			}
			custom_tooltip = "If army professionalism is over 40%, the cost is halved"
			if = {
				limit = { army_professionalism = 0.4 }
				add_dip_power = -150
			}
			else = { add_dip_power = -300 }
			country_event = { id = flavor_feiten.205 }
		}	
	}
}

feiten_missions_5_world = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			was_tag = Y20
			tag = Y20
		}
		mission_completed = feiten_the_world_our_oyster
	}
	has_country_shield = yes

	feiten_arrival_of_gnomes = {
		icon = mission_gnomish_ship
		position = 13
		required_missions = {
			feiten_developing_an_air_doctrine
			feiten_the_world_our_oyster
		}

		provinces_to_highlight = { }
		
		trigger = {
			OR = {
				has_discovered = 8 # Anbenncost
				4879 = {
					OR = {
						has_province_modifier = gnomish_institute_gommo
						has_province_modifier = feiten_gnome_quarter
					}
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = feiten_arrival_of_gnomes
				duration = 7300
			}
			custom_tooltip = "We will unlock a new privilege for the Shuimu Engineering Cadre: Wairen Membership"
			discover_province = 8
			discover_province = 112
			discover_province = 169
			discover_province = 126
			discover_province = 151
			discover_province = 52
		}
	}

	feiten_sharing_notes = {
		icon = mission_rb_monopolize_the_channel
		position = 15
		required_missions = { feiten_arrival_of_gnomes }

		provinces_to_highlight = { }
		
		trigger = {
			calc_true_if = {
				amount = 3
				desc = "\nWe have unlocked at least 3 inventions"
				has_country_flag = unlocked_artifice_invention_arithmatons
				has_country_flag = unlocked_artifice_invention_apparitional_communicator
				has_country_flag = unlocked_artifice_invention_mystic_ciphers
				has_country_flag = unlocked_artifice_invention_viewcatcher
				has_country_flag = unlocked_artifice_invention_conversation_calibrator
				has_country_flag = unlocked_artifice_invention_centipedal_chests
				has_country_flag = unlocked_artifice_invention_god_fragment_decoder
				has_country_flag = unlocked_artifice_invention_sunblotter_cream
				has_country_flag = unlocked_artifice_invention_talking_god_temples
				has_country_flag = unlocked_artifice_invention_thinkquik_drink_mix
				has_country_flag = unlocked_artifice_invention_wondrous_lunchbox
				has_country_flag = unlocked_artifice_invention_brass_prosthesis
				has_country_flag = unlocked_artifice_invention_artificer_exo_arms
				has_country_flag = unlocked_artifice_invention_t_wave_transceivers
				has_country_flag = unlocked_artifice_invention_mechanim_workforce
				has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates
				has_country_flag = unlocked_artifice_invention_automated_translator
				has_country_flag = unlocked_artifice_invention_great_processor
				has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments
				has_country_flag = unlocked_artifice_invention_soarwing_grafts
				has_country_flag = unlocked_artifice_invention_balloonboost_packs
				has_country_flag = unlocked_artifice_invention_sparkdrive_rifles
				has_country_flag = unlocked_artifice_invention_mechanim_soldiers
				has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb
				has_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems
				has_country_flag = unlocked_artifice_invention_artifice_hunting_masks
				has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum
				has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit
				has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers
				has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors
				has_country_flag = unlocked_artifice_invention_dragonscale_plating
				has_country_flag = unlocked_artifice_invention_eplusplus_compound
				has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels
				has_country_flag = unlocked_artifice_invention_lullaby_cannon
				has_country_flag = unlocked_artifice_invention_power_fists
				has_country_flag = unlocked_artifice_invention_sunbeam_armaments
				has_country_flag = unlocked_artifice_invention_warfare_simulator
				has_country_flag = unlocked_artifice_invention_arcane_blaster
				has_country_flag = unlocked_artifice_invention_sending_stones
				has_country_flag = unlocked_artifice_invention_crierless_crier_device
				has_country_flag = unlocked_artifice_invention_living_mirrors
				has_country_flag = unlocked_artifice_invention_fey_spray
				has_country_flag = unlocked_artifice_invention_vendorless_stall
				has_country_flag = unlocked_artifice_invention_spell_in_a_box
				has_country_flag = unlocked_artifice_invention_chi_cultivation_charm
				has_country_flag = unlocked_artifice_invention_weather_predicticator
				has_country_flag = unlocked_artifice_invention_vorpal_bullets
				has_country_flag = unlocked_artifice_invention_war_golems
				has_country_flag = unlocked_artifice_invention_wandlocks
				has_country_flag = unlocked_artifice_invention_personal_mageshields
				has_country_flag = unlocked_artifice_invention_antimagic_field_generator
				has_country_flag = unlocked_artifice_invention_controlled_rage_serum
				has_country_flag = unlocked_artifice_invention_elemental_gunpowder
				has_country_flag = unlocked_artifice_invention_controlled_rage_serum
				has_country_flag = unlocked_artifice_invention_veykoda_rune_protections
				has_country_flag = unlocked_artifice_invention_box_of_holding
				has_country_flag = unlocked_artifice_invention_growth_beans
				has_country_flag = unlocked_artifice_invention_magic_missile_deployer
				has_country_flag = unlocked_artifice_invention_naval_mageshields
				has_country_flag = unlocked_artifice_invention_remedial_tinctures
				has_country_flag = unlocked_artifice_invention_elemental_locomotives
				has_country_flag = unlocked_artifice_invention_burrower_arms
				has_country_flag = unlocked_artifice_invention_divendancer_speedboat
				has_country_flag = unlocked_artifice_invention_scrapperclaws
				has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories
				has_country_flag = unlocked_artifice_invention_city_maintenance_bots
				has_country_flag = unlocked_artifice_invention_fine_print_obfuscator
				has_country_flag = unlocked_artifice_invention_mechanim_handymen
				has_country_flag = unlocked_artifice_invention_pearl_cultivators
				has_country_flag = unlocked_artifice_invention_superfast_elevators
				has_country_flag = unlocked_artifice_invention_wine_ageifier
				has_country_flag = unlocked_artifice_invention_commercial_sky_galleons
				has_country_flag = unlocked_artifice_invention_self_cleaning_parchment
				has_country_flag = unlocked_artifice_invention_high_velocity_irrigation
				has_country_flag = unlocked_artifice_invention_gene_food_cultivation
				has_country_flag = unlocked_artifice_invention_chase_em_rockets
				has_country_flag = unlocked_artifice_invention_giantshape_warframe
				has_country_flag = unlocked_artifice_invention_gu_boats
				has_country_flag = unlocked_artifice_invention_gyrocopters
				has_country_flag = unlocked_artifice_invention_kronium_battlesuit
				has_country_flag = unlocked_artifice_invention_predator_exoskeleton
				has_country_flag = unlocked_artifice_invention_scrap_mechs
				has_country_flag = unlocked_artifice_invention_war_rigs
				has_country_flag = unlocked_artifice_invention_wind_invokers
				has_country_flag = unlocked_artifice_invention_portable_turrets
				has_country_flag = unlocked_artifice_invention_black_damestear_bullets
				has_country_flag = unlocked_artifice_invention_artillery_autoloader
				has_country_flag = unlocked_artifice_invention_prototype_tanks
				has_country_flag = unlocked_artifice_invention_military_sky_galleons 
			}
			any_known_country = {
				has_opinion = {
					value = 150
					who = ROOT
				}
				OR = {
					# Uncomment + change to Triarchy's tag once they're added
					# TAG = TRI 
					culture_group = gnomish
					has_reform = technocracy_republic_reform
					check_variable = {
						which = MaxArtificePoints
						value = 40
					}
				}
			}
		}
		
		effect = {
			if = {
				limit = { has_dlc = "Rule Britannia" }
				change_innovativeness = 5
			}
			else = {
				add_adm_power = 50
				add_dip_power = 50
				add_mil_power = 50
			}
			random_country = {
				limit = {
					has_opinion = {
						value = 150
						who = ROOT
					}
					OR = {
						# Uncomment + change to Triarchy's tag once they're added
						# TAG = TRI 
						culture_group = gnomish
						has_reform = technocracy_republic_reform
						check_variable = {
							which = MaxArtificePoints
							value = 40
						}
					}
				}
				save_global_event_target_as = feiten_sharing_notes_with
			}
			custom_tooltip = "We will have a chance to unlock a random invention that our target has, or gain monarch points"
			random_list = {
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_arithmatons } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_arithmatons } } set_country_flag = unlocked_artifice_invention_arithmatons }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_apparitional_communicator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_apparitional_communicator } } set_country_flag = unlocked_artifice_invention_apparitional_communicator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mystic_ciphers } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_mystic_ciphers } } set_country_flag = unlocked_artifice_invention_mystic_ciphers }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_viewcatcher } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_viewcatcher } } set_country_flag = unlocked_artifice_invention_viewcatcher }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_conversation_calibrator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_conversation_calibrator } } set_country_flag = unlocked_artifice_invention_conversation_calibrator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_centipedal_chests } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_centipedal_chests } } set_country_flag = unlocked_artifice_invention_centipedal_chests }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_god_fragment_decoder } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_god_fragment_decoder } } set_country_flag = unlocked_artifice_invention_god_fragment_decoder }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sunblotter_cream } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_sunblotter_cream } } set_country_flag = unlocked_artifice_invention_sunblotter_cream }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_talking_god_temples } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_talking_god_temples } } set_country_flag = unlocked_artifice_invention_talking_god_temples }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_thinkquik_drink_mix } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_thinkquik_drink_mix } } set_country_flag = unlocked_artifice_invention_thinkquik_drink_mix }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wondrous_lunchbox } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_wondrous_lunchbox } } set_country_flag = unlocked_artifice_invention_wondrous_lunchbox }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_brass_prosthesis } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_brass_prosthesis } } set_country_flag = unlocked_artifice_invention_brass_prosthesis }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artificer_exo_arms } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_artificer_exo_arms } } set_country_flag = unlocked_artifice_invention_artificer_exo_arms }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_t_wave_transceivers } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_t_wave_transceivers } } set_country_flag = unlocked_artifice_invention_t_wave_transceivers }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mechanim_workforce } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_mechanim_workforce } } set_country_flag = unlocked_artifice_invention_mechanim_workforce }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates } } set_country_flag = unlocked_artifice_invention_artificial_egg_surrogates }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_automated_translator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_automated_translator } } set_country_flag = unlocked_artifice_invention_automated_translator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_great_processor } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_great_processor } } set_country_flag = unlocked_artifice_invention_great_processor }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments } } set_country_flag = unlocked_artifice_invention_prehensile_tail_attachments }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_soarwing_grafts } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_soarwing_grafts } } set_country_flag = unlocked_artifice_invention_soarwing_grafts }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_balloonboost_packs } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_balloonboost_packs } } set_country_flag = unlocked_artifice_invention_balloonboost_packs }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sparkdrive_rifles } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_sparkdrive_rifles } } set_country_flag = unlocked_artifice_invention_sparkdrive_rifles }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mechanim_soldiers } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_mechanim_soldiers } } set_country_flag = unlocked_artifice_invention_mechanim_soldiers }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb } } set_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems } } set_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artifice_hunting_masks } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_artifice_hunting_masks } } set_country_flag = unlocked_artifice_invention_artifice_hunting_masks }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum } } set_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit } } set_country_flag = unlocked_artifice_invention_codorran_powered_exosuit }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers } } set_country_flag = unlocked_artifice_invention_demonflame_flamethrowers }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors } } set_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_dragonscale_plating } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_dragonscale_plating } } set_country_flag = unlocked_artifice_invention_dragonscale_plating }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_eplusplus_compound } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_eplusplus_compound } } set_country_flag = unlocked_artifice_invention_eplusplus_compound }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels } } set_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_lullaby_cannon } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_lullaby_cannon } } set_country_flag = unlocked_artifice_invention_lullaby_cannon }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_power_fists } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_power_fists } } set_country_flag = unlocked_artifice_invention_power_fists }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sunbeam_armaments } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_sunbeam_armaments } } set_country_flag = unlocked_artifice_invention_sunbeam_armaments }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_warfare_simulator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_warfare_simulator } } set_country_flag = unlocked_artifice_invention_warfare_simulator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_arcane_blaster } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_arcane_blaster } } set_country_flag = unlocked_artifice_invention_arcane_blaster }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sending_stones } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_sending_stones } } set_country_flag = unlocked_artifice_invention_sending_stones }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_crierless_crier_device } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_crierless_crier_device } } set_country_flag = unlocked_artifice_invention_crierless_crier_device }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_living_mirrors } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_living_mirrors } } set_country_flag = unlocked_artifice_invention_living_mirrors }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_fey_spray } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_fey_spray } } set_country_flag = unlocked_artifice_invention_fey_spray }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_vendorless_stall } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_vendorless_stall } } set_country_flag = unlocked_artifice_invention_vendorless_stall }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_spell_in_a_box } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_spell_in_a_box } } set_country_flag = unlocked_artifice_invention_spell_in_a_box }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_chi_cultivation_charm } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_chi_cultivation_charm } } set_country_flag = unlocked_artifice_invention_chi_cultivation_charm }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_weather_predicticator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_weather_predicticator } } set_country_flag = unlocked_artifice_invention_weather_predicticator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_vorpal_bullets } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_vorpal_bullets } } set_country_flag = unlocked_artifice_invention_vorpal_bullets }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_war_golems } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_war_golems } } set_country_flag = unlocked_artifice_invention_war_golems }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wandlocks } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_wandlocks } } set_country_flag = unlocked_artifice_invention_wandlocks }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_personal_mageshields } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_personal_mageshields } } set_country_flag = unlocked_artifice_invention_personal_mageshields }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_antimagic_field_generator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_antimagic_field_generator } } set_country_flag = unlocked_artifice_invention_antimagic_field_generator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } } set_country_flag = unlocked_artifice_invention_controlled_rage_serum }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_elemental_gunpowder } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_elemental_gunpowder } } set_country_flag = unlocked_artifice_invention_elemental_gunpowder }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } } set_country_flag = unlocked_artifice_invention_controlled_rage_serum }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_veykoda_rune_protections } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_veykoda_rune_protections } } set_country_flag = unlocked_artifice_invention_veykoda_rune_protections }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_box_of_holding } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_box_of_holding } } set_country_flag = unlocked_artifice_invention_box_of_holding }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_growth_beans } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_growth_beans } } set_country_flag = unlocked_artifice_invention_growth_beans }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_magic_missile_deployer } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_magic_missile_deployer } } set_country_flag = unlocked_artifice_invention_magic_missile_deployer }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_naval_mageshields } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_naval_mageshields } } set_country_flag = unlocked_artifice_invention_naval_mageshields }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_remedial_tinctures } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_remedial_tinctures } } set_country_flag = unlocked_artifice_invention_remedial_tinctures }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_elemental_locomotives } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_elemental_locomotives } } set_country_flag = unlocked_artifice_invention_elemental_locomotives }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_burrower_arms } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_burrower_arms } } set_country_flag = unlocked_artifice_invention_burrower_arms }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_divendancer_speedboat } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_divendancer_speedboat } } set_country_flag = unlocked_artifice_invention_divendancer_speedboat }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_scrapperclaws } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_scrapperclaws } } set_country_flag = unlocked_artifice_invention_scrapperclaws }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories } } set_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_city_maintenance_bots } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_city_maintenance_bots } } set_country_flag = unlocked_artifice_invention_city_maintenance_bots }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_fine_print_obfuscator } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_fine_print_obfuscator } } set_country_flag = unlocked_artifice_invention_fine_print_obfuscator }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mechanim_handymen } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_mechanim_handymen } } set_country_flag = unlocked_artifice_invention_mechanim_handymen }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_pearl_cultivators } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_pearl_cultivators } } set_country_flag = unlocked_artifice_invention_pearl_cultivators }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_superfast_elevators } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_superfast_elevators } } set_country_flag = unlocked_artifice_invention_superfast_elevators }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wine_ageifier } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_wine_ageifier } } set_country_flag = unlocked_artifice_invention_wine_ageifier }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_commercial_sky_galleons } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_commercial_sky_galleons } } set_country_flag = unlocked_artifice_invention_commercial_sky_galleons }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_self_cleaning_parchment } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_self_cleaning_parchment } } set_country_flag = unlocked_artifice_invention_self_cleaning_parchment }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_high_velocity_irrigation } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_high_velocity_irrigation } } set_country_flag = unlocked_artifice_invention_high_velocity_irrigation }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_gene_food_cultivation } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_gene_food_cultivation } } set_country_flag = unlocked_artifice_invention_gene_food_cultivation }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_chase_em_rockets } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_chase_em_rockets } } set_country_flag = unlocked_artifice_invention_chase_em_rockets }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_giantshape_warframe } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_giantshape_warframe } } set_country_flag = unlocked_artifice_invention_giantshape_warframe }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_gu_boats } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_gu_boats } } set_country_flag = unlocked_artifice_invention_gu_boats }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_gyrocopters } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_gyrocopters } } set_country_flag = unlocked_artifice_invention_gyrocopters }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_kronium_battlesuit } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_kronium_battlesuit } } set_country_flag = unlocked_artifice_invention_kronium_battlesuit }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_predator_exoskeleton } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_predator_exoskeleton } } set_country_flag = unlocked_artifice_invention_predator_exoskeleton }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_scrap_mechs } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_scrap_mechs } } set_country_flag = unlocked_artifice_invention_scrap_mechs }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_war_rigs } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_war_rigs } } set_country_flag = unlocked_artifice_invention_war_rigs }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wind_invokers } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_wind_invokers } } set_country_flag = unlocked_artifice_invention_wind_invokers }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_portable_turrets } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_portable_turrets } } set_country_flag = unlocked_artifice_invention_portable_turrets }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_black_damestear_bullets } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_black_damestear_bullets } } set_country_flag = unlocked_artifice_invention_black_damestear_bullets }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artillery_autoloader } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_artillery_autoloader } } set_country_flag = unlocked_artifice_invention_artillery_autoloader }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_prototype_tanks } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_prototype_tanks } } set_country_flag = unlocked_artifice_invention_prototype_tanks }
				1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_military_sky_galleons  } event_target:feiten_sharing_notes_with = { has_country_flag = unlocked_artifice_invention_military_sky_galleons } } set_country_flag = unlocked_artifice_invention_military_sky_galleons }
				1 = {
					add_adm_power = 100
					add_mil_power = 100
					add_dip_power = 100
				}
			}
			event_target:feiten_sharing_notes_with = {
				if = {
					limit = { has_estate = estate_artificers }
					random_list = {
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_arithmatons } ROOT = { has_country_flag = unlocked_artifice_invention_arithmatons } } set_country_flag = unlocked_artifice_invention_arithmatons }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_apparitional_communicator } ROOT = { has_country_flag = unlocked_artifice_invention_apparitional_communicator } } set_country_flag = unlocked_artifice_invention_apparitional_communicator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mystic_ciphers } ROOT = { has_country_flag = unlocked_artifice_invention_mystic_ciphers } } set_country_flag = unlocked_artifice_invention_mystic_ciphers }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_viewcatcher } ROOT = { has_country_flag = unlocked_artifice_invention_viewcatcher } } set_country_flag = unlocked_artifice_invention_viewcatcher }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_conversation_calibrator } ROOT = { has_country_flag = unlocked_artifice_invention_conversation_calibrator } } set_country_flag = unlocked_artifice_invention_conversation_calibrator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_centipedal_chests } ROOT = { has_country_flag = unlocked_artifice_invention_centipedal_chests } } set_country_flag = unlocked_artifice_invention_centipedal_chests }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_god_fragment_decoder } ROOT = { has_country_flag = unlocked_artifice_invention_god_fragment_decoder } } set_country_flag = unlocked_artifice_invention_god_fragment_decoder }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sunblotter_cream } ROOT = { has_country_flag = unlocked_artifice_invention_sunblotter_cream } } set_country_flag = unlocked_artifice_invention_sunblotter_cream }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_talking_god_temples } ROOT = { has_country_flag = unlocked_artifice_invention_talking_god_temples } } set_country_flag = unlocked_artifice_invention_talking_god_temples }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_thinkquik_drink_mix } ROOT = { has_country_flag = unlocked_artifice_invention_thinkquik_drink_mix } } set_country_flag = unlocked_artifice_invention_thinkquik_drink_mix }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wondrous_lunchbox } ROOT = { has_country_flag = unlocked_artifice_invention_wondrous_lunchbox } } set_country_flag = unlocked_artifice_invention_wondrous_lunchbox }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_brass_prosthesis } ROOT = { has_country_flag = unlocked_artifice_invention_brass_prosthesis } } set_country_flag = unlocked_artifice_invention_brass_prosthesis }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artificer_exo_arms } ROOT = { has_country_flag = unlocked_artifice_invention_artificer_exo_arms } } set_country_flag = unlocked_artifice_invention_artificer_exo_arms }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_t_wave_transceivers } ROOT = { has_country_flag = unlocked_artifice_invention_t_wave_transceivers } } set_country_flag = unlocked_artifice_invention_t_wave_transceivers }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mechanim_workforce } ROOT = { has_country_flag = unlocked_artifice_invention_mechanim_workforce } } set_country_flag = unlocked_artifice_invention_mechanim_workforce }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates } ROOT = { has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates } } set_country_flag = unlocked_artifice_invention_artificial_egg_surrogates }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_automated_translator } ROOT = { has_country_flag = unlocked_artifice_invention_automated_translator } } set_country_flag = unlocked_artifice_invention_automated_translator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_great_processor } ROOT = { has_country_flag = unlocked_artifice_invention_great_processor } } set_country_flag = unlocked_artifice_invention_great_processor }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments } ROOT = { has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments } } set_country_flag = unlocked_artifice_invention_prehensile_tail_attachments }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_soarwing_grafts } ROOT = { has_country_flag = unlocked_artifice_invention_soarwing_grafts } } set_country_flag = unlocked_artifice_invention_soarwing_grafts }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_balloonboost_packs } ROOT = { has_country_flag = unlocked_artifice_invention_balloonboost_packs } } set_country_flag = unlocked_artifice_invention_balloonboost_packs }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sparkdrive_rifles } ROOT = { has_country_flag = unlocked_artifice_invention_sparkdrive_rifles } } set_country_flag = unlocked_artifice_invention_sparkdrive_rifles }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mechanim_soldiers } ROOT = { has_country_flag = unlocked_artifice_invention_mechanim_soldiers } } set_country_flag = unlocked_artifice_invention_mechanim_soldiers }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb } ROOT = { has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb } } set_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems } ROOT = { has_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems } } set_country_flag = unlocked_artifice_invention_ancestral_gaurdian_golems }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artifice_hunting_masks } ROOT = { has_country_flag = unlocked_artifice_invention_artifice_hunting_masks } } set_country_flag = unlocked_artifice_invention_artifice_hunting_masks }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum } ROOT = { has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum } } set_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit } ROOT = { has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit } } set_country_flag = unlocked_artifice_invention_codorran_powered_exosuit }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers } ROOT = { has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers } } set_country_flag = unlocked_artifice_invention_demonflame_flamethrowers }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors } ROOT = { has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors } } set_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_dragonscale_plating } ROOT = { has_country_flag = unlocked_artifice_invention_dragonscale_plating } } set_country_flag = unlocked_artifice_invention_dragonscale_plating }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_eplusplus_compound } ROOT = { has_country_flag = unlocked_artifice_invention_eplusplus_compound } } set_country_flag = unlocked_artifice_invention_eplusplus_compound }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels } ROOT = { has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels } } set_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_lullaby_cannon } ROOT = { has_country_flag = unlocked_artifice_invention_lullaby_cannon } } set_country_flag = unlocked_artifice_invention_lullaby_cannon }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_power_fists } ROOT = { has_country_flag = unlocked_artifice_invention_power_fists } } set_country_flag = unlocked_artifice_invention_power_fists }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sunbeam_armaments } ROOT = { has_country_flag = unlocked_artifice_invention_sunbeam_armaments } } set_country_flag = unlocked_artifice_invention_sunbeam_armaments }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_warfare_simulator } ROOT = { has_country_flag = unlocked_artifice_invention_warfare_simulator } } set_country_flag = unlocked_artifice_invention_warfare_simulator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_arcane_blaster } ROOT = { has_country_flag = unlocked_artifice_invention_arcane_blaster } } set_country_flag = unlocked_artifice_invention_arcane_blaster }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_sending_stones } ROOT = { has_country_flag = unlocked_artifice_invention_sending_stones } } set_country_flag = unlocked_artifice_invention_sending_stones }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_crierless_crier_device } ROOT = { has_country_flag = unlocked_artifice_invention_crierless_crier_device } } set_country_flag = unlocked_artifice_invention_crierless_crier_device }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_living_mirrors } ROOT = { has_country_flag = unlocked_artifice_invention_living_mirrors } } set_country_flag = unlocked_artifice_invention_living_mirrors }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_fey_spray } ROOT = { has_country_flag = unlocked_artifice_invention_fey_spray } } set_country_flag = unlocked_artifice_invention_fey_spray }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_vendorless_stall } ROOT = { has_country_flag = unlocked_artifice_invention_vendorless_stall } } set_country_flag = unlocked_artifice_invention_vendorless_stall }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_spell_in_a_box } ROOT = { has_country_flag = unlocked_artifice_invention_spell_in_a_box } } set_country_flag = unlocked_artifice_invention_spell_in_a_box }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_chi_cultivation_charm } ROOT = { has_country_flag = unlocked_artifice_invention_chi_cultivation_charm } } set_country_flag = unlocked_artifice_invention_chi_cultivation_charm }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_weather_predicticator } ROOT = { has_country_flag = unlocked_artifice_invention_weather_predicticator } } set_country_flag = unlocked_artifice_invention_weather_predicticator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_vorpal_bullets } ROOT = { has_country_flag = unlocked_artifice_invention_vorpal_bullets } } set_country_flag = unlocked_artifice_invention_vorpal_bullets }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_war_golems } ROOT = { has_country_flag = unlocked_artifice_invention_war_golems } } set_country_flag = unlocked_artifice_invention_war_golems }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wandlocks } ROOT = { has_country_flag = unlocked_artifice_invention_wandlocks } } set_country_flag = unlocked_artifice_invention_wandlocks }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_personal_mageshields } ROOT = { has_country_flag = unlocked_artifice_invention_personal_mageshields } } set_country_flag = unlocked_artifice_invention_personal_mageshields }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_antimagic_field_generator } ROOT = { has_country_flag = unlocked_artifice_invention_antimagic_field_generator } } set_country_flag = unlocked_artifice_invention_antimagic_field_generator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } ROOT = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } } set_country_flag = unlocked_artifice_invention_controlled_rage_serum }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_elemental_gunpowder } ROOT = { has_country_flag = unlocked_artifice_invention_elemental_gunpowder } } set_country_flag = unlocked_artifice_invention_elemental_gunpowder }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } ROOT = { has_country_flag = unlocked_artifice_invention_controlled_rage_serum } } set_country_flag = unlocked_artifice_invention_controlled_rage_serum }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_veykoda_rune_protections } ROOT = { has_country_flag = unlocked_artifice_invention_veykoda_rune_protections } } set_country_flag = unlocked_artifice_invention_veykoda_rune_protections }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_box_of_holding } ROOT = { has_country_flag = unlocked_artifice_invention_box_of_holding } } set_country_flag = unlocked_artifice_invention_box_of_holding }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_growth_beans } ROOT = { has_country_flag = unlocked_artifice_invention_growth_beans } } set_country_flag = unlocked_artifice_invention_growth_beans }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_magic_missile_deployer } ROOT = { has_country_flag = unlocked_artifice_invention_magic_missile_deployer } } set_country_flag = unlocked_artifice_invention_magic_missile_deployer }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_naval_mageshields } ROOT = { has_country_flag = unlocked_artifice_invention_naval_mageshields } } set_country_flag = unlocked_artifice_invention_naval_mageshields }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_remedial_tinctures } ROOT = { has_country_flag = unlocked_artifice_invention_remedial_tinctures } } set_country_flag = unlocked_artifice_invention_remedial_tinctures }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_elemental_locomotives } ROOT = { has_country_flag = unlocked_artifice_invention_elemental_locomotives } } set_country_flag = unlocked_artifice_invention_elemental_locomotives }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_burrower_arms } ROOT = { has_country_flag = unlocked_artifice_invention_burrower_arms } } set_country_flag = unlocked_artifice_invention_burrower_arms }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_divendancer_speedboat } ROOT = { has_country_flag = unlocked_artifice_invention_divendancer_speedboat } } set_country_flag = unlocked_artifice_invention_divendancer_speedboat }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_scrapperclaws } ROOT = { has_country_flag = unlocked_artifice_invention_scrapperclaws } } set_country_flag = unlocked_artifice_invention_scrapperclaws }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories } ROOT = { has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories } } set_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_city_maintenance_bots } ROOT = { has_country_flag = unlocked_artifice_invention_city_maintenance_bots } } set_country_flag = unlocked_artifice_invention_city_maintenance_bots }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_fine_print_obfuscator } ROOT = { has_country_flag = unlocked_artifice_invention_fine_print_obfuscator } } set_country_flag = unlocked_artifice_invention_fine_print_obfuscator }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_mechanim_handymen } ROOT = { has_country_flag = unlocked_artifice_invention_mechanim_handymen } } set_country_flag = unlocked_artifice_invention_mechanim_handymen }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_pearl_cultivators } ROOT = { has_country_flag = unlocked_artifice_invention_pearl_cultivators } } set_country_flag = unlocked_artifice_invention_pearl_cultivators }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_superfast_elevators } ROOT = { has_country_flag = unlocked_artifice_invention_superfast_elevators } } set_country_flag = unlocked_artifice_invention_superfast_elevators }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wine_ageifier } ROOT = { has_country_flag = unlocked_artifice_invention_wine_ageifier } } set_country_flag = unlocked_artifice_invention_wine_ageifier }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_commercial_sky_galleons } ROOT = { has_country_flag = unlocked_artifice_invention_commercial_sky_galleons } } set_country_flag = unlocked_artifice_invention_commercial_sky_galleons }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_self_cleaning_parchment } ROOT = { has_country_flag = unlocked_artifice_invention_self_cleaning_parchment } } set_country_flag = unlocked_artifice_invention_self_cleaning_parchment }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_high_velocity_irrigation } ROOT = { has_country_flag = unlocked_artifice_invention_high_velocity_irrigation } } set_country_flag = unlocked_artifice_invention_high_velocity_irrigation }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_gene_food_cultivation } ROOT = { has_country_flag = unlocked_artifice_invention_gene_food_cultivation } } set_country_flag = unlocked_artifice_invention_gene_food_cultivation }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_chase_em_rockets } ROOT = { has_country_flag = unlocked_artifice_invention_chase_em_rockets } } set_country_flag = unlocked_artifice_invention_chase_em_rockets }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_giantshape_warframe } ROOT = { has_country_flag = unlocked_artifice_invention_giantshape_warframe } } set_country_flag = unlocked_artifice_invention_giantshape_warframe }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_gu_boats } ROOT = { has_country_flag = unlocked_artifice_invention_gu_boats } } set_country_flag = unlocked_artifice_invention_gu_boats }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_gyrocopters } ROOT = { has_country_flag = unlocked_artifice_invention_gyrocopters } } set_country_flag = unlocked_artifice_invention_gyrocopters }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_kronium_battlesuit } ROOT = { has_country_flag = unlocked_artifice_invention_kronium_battlesuit } } set_country_flag = unlocked_artifice_invention_kronium_battlesuit }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_predator_exoskeleton } ROOT = { has_country_flag = unlocked_artifice_invention_predator_exoskeleton } } set_country_flag = unlocked_artifice_invention_predator_exoskeleton }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_scrap_mechs } ROOT = { has_country_flag = unlocked_artifice_invention_scrap_mechs } } set_country_flag = unlocked_artifice_invention_scrap_mechs }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_war_rigs } ROOT = { has_country_flag = unlocked_artifice_invention_war_rigs } } set_country_flag = unlocked_artifice_invention_war_rigs }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_wind_invokers } ROOT = { has_country_flag = unlocked_artifice_invention_wind_invokers } } set_country_flag = unlocked_artifice_invention_wind_invokers }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_portable_turrets } ROOT = { has_country_flag = unlocked_artifice_invention_portable_turrets } } set_country_flag = unlocked_artifice_invention_portable_turrets }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_black_damestear_bullets } ROOT = { has_country_flag = unlocked_artifice_invention_black_damestear_bullets } } set_country_flag = unlocked_artifice_invention_black_damestear_bullets }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_artillery_autoloader } ROOT = { has_country_flag = unlocked_artifice_invention_artillery_autoloader } } set_country_flag = unlocked_artifice_invention_artillery_autoloader }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_prototype_tanks } ROOT = { has_country_flag = unlocked_artifice_invention_prototype_tanks } } set_country_flag = unlocked_artifice_invention_prototype_tanks }
						1 = { trigger = { NOT = { has_country_flag = unlocked_artifice_invention_military_sky_galleons  } ROOT = { has_country_flag = unlocked_artifice_invention_military_sky_galleons  } } set_country_flag = unlocked_artifice_invention_military_sky_galleons  }
					}
				}
				else = {
					add_adm_power = 100
					add_mil_power = 100
					add_dip_power = 100
				}
			}
		}
	}
	
	feiten_earning_gommos_respect = {
		icon = mission_feast
		position = 17
		required_missions = { feiten_sharing_notes }

		provinces_to_highlight = {
			owner = {
				technology_group = western
				tech_difference = 1
			}
		}
		
		trigger = {
			if = {
				limit = { has_dlc = "Rule Britannia" }
				innovativeness = 50
			}
			has_better_tech_than_westerns = yes
		}
		
		effect = {
			4884 = {
				if = {
					limit = {
						OR = {
							has_gnomish_majority_trigger = yes
							has_large_gnomish_minority_trigger = yes
						}
					}
					add_base_production = 2
				}
				else = {
					add_gnomish_minority_size_effect = yes
				}
			}
			4879 = {
				if = {
					limit = {
						OR = {
							has_gnomish_majority_trigger = yes
							has_large_gnomish_minority_trigger = yes
						}
					}
					add_base_production = 2
				}
				else = {
					add_gnomish_minority_size_effect = yes
				}
			}
			if = {
				limit = { event_target:feiten_sharing_notes_with = { exists = yes  } }
				event_target:feiten_sharing_notes_with = { create_alliance = ROOT }
			}
			else = {
				random_country = {
					limit = {
						capital_scope = { continent = europe }
						culture_group = gnomish
					}
					create_alliance = ROOT
				}
			}
		}
	}

	feiten_field_demonstration = {
		icon = mission_in_the_name_of_the_fallen
		position = 20
		required_missions = { feiten_earning_gommos_respect }

		provinces_to_highlight = { }
		
		trigger = {
			check_variable = {
				which = feiten_wars_won
				value = 15
			}
		}
		
		effect = {
			custom_tooltip = "The modifier you get will depend on which air doctrine you chose in a previous mission"
			if = {
				limit = { has_country_modifier = feiten_ephyna }
				add_country_modifier = {
					name = feiten_ephyna_upgraded
					duration = -1
				}
				remove_country_modifier = feiten_ephyna
			}
			else_if = {
				limit = { has_country_modifier = feiten_stingers }
				add_country_modifier = {
					name = feiten_stingers_upgraded
					duration = -1
				}
				remove_country_modifier = feiten_stingers
			}
		}
	}

	feiten_university_row = {
		icon = mission_mnd_dai_examination_system
		position = 23
		required_missions = { feiten_aeronauts_handbook }

		provinces_to_highlight = {
			province_group = jellyfish_coast_provinces
			OR = {
				NOT = { has_building = university }
				NOT = { enlightenment = 100 }
			}
		}
		
		trigger = {
			jellyfish_coast_provinces = {
				type = all
				has_building = university
				enlightenment = 100
			}
			OR = {
				has_idea_group = innovative_ideas
				adm_power = 100
			}
		}
		
		effect = {
			add_country_modifier = {
				name = feiten_university_row
				duration = -1
				desc = "until we embrace the next institution"
			}
			if = {
				limit = { NOT = { has_idea_group = innovative_ideas } }
				add_adm_power = -100
			}
			hidden_effect = {
				if = {
					limit = { has_unembraced_institution = enlightenment }
					set_country_flag = feiten_next_institution_enlightenment
				}
				else = { set_country_flag = feiten_next_institution_industrialization }
			}
			jellyfish_coast_provinces = {
				add_province_modifier = {
					name = feiten_university_row_prov
					duration = 7300
				}
			}
		}	
	}

	feiten_whale_oil_experiments = {
		icon = mission_che_botanical_exports
		position = 24
		required_missions = { feiten_university_row }

		provinces_to_highlight = { }
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = "If Administrative Tech"
			}
			natural_scientist = 5
		}
		
		effect = {
			
			if = {
				limit = { adm_tech = 23 }
			}
			else = {

			}
		}	
	}

	feiten_new_explosives = {
		icon = mission_mechanical_mining
		position = 24
		required_missions = { feiten_whale_oil_experiments }

		provinces_to_highlight = { area = eorwestislands_area }
		
		trigger = {
			eorwestislands_area = {
				has_manufactory_trigger = yes
				development = 15
				if = {
					limit = { ROOT = { adm_tech = 24 } }
					has_building = counting_house
				}
				else = { has_building = workshop }
			}
			artifice_has_points_for_basic = yes
		}
		
		effect = {
			country_event = { id = flavor_feiten.203 }
		}	
	}
}