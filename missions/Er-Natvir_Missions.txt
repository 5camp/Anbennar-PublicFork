ernatvir_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = I06
	}
	
	ernatvir_dagrite_repair = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 5
		trigger = {
			num_of_owned_provinces_with = {
				value = 3
				trade_goods = copper
				has_building = weapons
			}
		}
		effect = {
			random_owned_province = {
				limit = { trade_goods = copper }
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			random_owned_province = {
				limit = { trade_goods = copper }
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			random_owned_province = {
				limit = { trade_goods = copper }
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
	}
	
	ernatvir_lighting_dwarovar = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 6
		required_missions = {
			ernatvir_dagrite_repair
		}
		trigger = {
			any_owned_province = {
				has_building = mills
				base_production = 15
				trade_goods = gems
			}
		}
		effect = {
			random_owned_province = {
				limit = {
					has_building = mills
					base_production = 15
					trade_goods = gems
				}

				add_permanent_province_modifier = {
					name = ernatvir_runelight_factory
					duration = -1
				}
			}
		}
	}
	
	ernatvir_advanced_vehicles = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 7
		required_missions = {
			ernatvir_superior_materials
			ernatvir_lighting_dwarovar
		}
		trigger = {
			any_owned_province = {
				has_building = university
				base_production = 25
				OR = { 
					trade_goods = damestear
					trade_goods = coal 
				}

			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_transportation_boom
				duration = 7300
			}
		}
	}
}

ernatvir_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = I06
	}
	
	ernatvir_new_foundries = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 5
		trigger = {
			num_of_owned_provinces_with = {
				value = 4
				trade_goods = iron
				has_building = workshop
			}
		}
		effect = {
			random_owned_province = {
				limit = { trade_goods = iron }
				add_base_production = 2
			}
			random_owned_province = {
				limit = { trade_goods = iron }
				add_base_production = 2
			}
			random_owned_province = {
				limit = { trade_goods = iron }
				add_base_production = 2
			}
			random_owned_province = {
				limit = { trade_goods = iron }
				add_base_production = 2
			}
		}
	}
	
	ernatvir_superior_materials = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 6

		required_missions = {
			ernatvir_new_foundries
		}
		trigger = {
			any_owned_province = {
				has_building = weapons
				base_production = 20
				trade_goods = mithril
			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_advanced_alloys
				duration = -1
			}
		}
	}
	
	ernatvir_depths_of_trade = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 7
		provinces_to_highlight = {
			OR = {
				province_id = 2931
			}
		}
		required_missions = {
			DADV_going_deeper
		}
		trigger = {
			2931 = {
				has_dwarven_hold_6 = yes
				owned_by = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_revitalized_economy
				duration = 9125
			}
		}
	}
}
ernatvir_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = I06
	}

	ernatvir_branching_out = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 7

		required_missions = {
			ernatvir_rebuilding_lines
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 16
				has_terrain = dwarven_road
			}
		}
		effect = {
			serpentreach_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					has_terrain = dwarven_road
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = ernatvir_resettlement_enthusiasm
				duration = 10950
			}
		}
	}

	ernatvir_on_the_road_again = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 8

		required_missions = {
			ernatvir_branching_out
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 25
				has_terrain = dwarven_road
			}
		}
		effect = {
			middle_dwarovar_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					has_terrain = dwarven_road
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = ernatvir_transportation_boom
				duration = 18250
			}
		}
	}

	ernatvir_er-natvir_transcontinental = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 9

		required_missions = {
			ernatvir_on_the_road_again
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 40
				has_terrain = dwarven_road
				development = 10
			}
		}
		effect = {
			west_serpentspine_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					has_terrain = dwarven_road
				}
				add_permanent_claim = ROOT
			}
			east_serpentspine_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					has_terrain = dwarven_road
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = ernatvir_dwarovrod_reclaimers
				duration = 18250
			}
		}
	}
}

ernatvir_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = I06
	}

	ernatvir_rebuilding_lines = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 6

		required_missions = {
			DADV_resettling_the_serpentspine
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 8
				has_terrain = dwarven_road
			}
		}
		effect = {
			west_dwarovar_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
					has_terrain = dwarven_road
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = ernatvir_rebuilders
				duration = 7300
			}
		}
	}

	ernatvir_the_daginrod_line = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 7

		provinces_to_highlight = {
			OR = {
				province_id = 4104
				province_id = 2876
				province_id = 2988
				province_id = 2989
				province_id = 2990
				province_id = 2991
				province_id = 2992
				province_id = 2993
				province_id = 2994
				province_id = 2996
				province_id = 2997
				province_id = 2998
				province_id = 2999
				province_id = 3000
				province_id = 3001
				province_id = 3002
				province_id = 3003
			}
		}
		required_missions = {
			ernatvir_rebuilding_lines
		}
		trigger = {
			# Could maybe use areas for some of these...
			4104 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2876 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2988 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2989 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2990 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2991 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2992 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2993 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2994 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2996 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2997 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2998 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2999 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			3000 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			3001 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			3002 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			3003 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_message_system
				duration = -1
			}
		}
	}

	ernatvir_the_argrod_line = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 8

		provinces_to_highlight = {
			OR = {
				province_id = 2987
				province_id = 2957
				province_id = 2956
				province_id = 2955
				province_id = 2954
				province_id = 2943
				province_id = 2944
				province_id = 2945
				province_id = 2946
				province_id = 2962
				province_id = 4240
				province_id = 2968
				province_id = 2969
				province_id = 2970
				province_id = 2979
				province_id = 2980
				province_id = 2984
				province_id = 2985
				province_id = 4036
				province_id = 4037
				province_id = 4038
			}
		}
		required_missions = {
			ernatvir_the_daginrod_line
		}
		trigger = {
			# Could maybe use areas for some of these...
			2987 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2957 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2956 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2955 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2954 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2943 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2944 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2945 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2946 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2962 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			4240 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2968 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2969 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2970 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2979 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2980 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2984 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			2985 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			4036 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			4037 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
			4038 = {
				owned_by = ROOT
				NOT = { has_province_modifier = dwarovar_rail }
			}
		}
		effect = {
			add_country_modifier = {
				name = global_trade_power
				duration = -1
			}
		}
	}

	ernatvir_widespread_industry = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 9

		required_missions = {
			ernatvir_toll_stations
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 40
				has_terrain = dwarven_road
				development = 20
			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_widespread_industry
				duration = -1
			}
		}
	}

	ernatvir_er-natvir_intercontinental = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 10

		required_missions = {
			ernatvir_widespread_industry
			ernatvir_er-natvir_transcontinental
			ernatvir_widespread_recruitment
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 110
				has_terrain = dwarven_road
				has_province_modifier = advanced_rail
			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_intercontinental
				duration = -1
			}
		}
	}
}
ernatvir_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = I06
	}

	ernatvir_secured_south_junction = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 6

		provinces_to_highlight = {
			OR = {
				province_id = 2932
				province_id = 2934
			}
		}
		required_missions = {
			DADV_resettling_the_serpentspine
		}
		trigger = {
			2932 = {
				owned_by = ROOT
				development = 10
			}
			2934 = {
				owned_by = ROOT
				development = 10
			}
		}
		effect = {
			capital_scope = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				area = {
					limit = { owned_by = ROOT }
					add_province_modifier = {
						name = "growth_of_capital"
						duration = 9125 #25 years
					}
				}
			}
		}
	}

	ernatvir_southern_tunnels = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 7

		provinces_to_highlight = {
			OR = {
			    #Tunnels from West Dwarovar to Serpentreach and Middle Dwarovar
				province_id = 4103
				province_id = 2981
				province_id = 2884
				province_id = 2885
			}
		}
		required_missions = {
			ernatvir_secured_south_junction
		}
		trigger = {
			4103 = {
				owned_by = ROOT
				development = 15
			}
			2981 = {
				owned_by = ROOT
				development = 15
			}
			2884 = {
				owned_by = ROOT
				development = 15
			}
			2885 = {
				owned_by = ROOT
				development = 15
			}
		}
		effect = {
			add_country_modifier = {
				ernatvir_reopened_tunnels
				duration = 10950
			}
		}
	}

	ernatvir_toll_stations = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 8
		required_missions = {
			ernatvir_southern_tunnels
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 8
				has_terrain = dwarven_road
				fort_level = 2
			}
		}
		effect = {
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
			random_owned_province = {
				limit = { 
					has_terrain = dwarven_road
					fort_level = 2
					NOT { 
						has_province_modifier = ernatvir_toll_station 
					}
				}
				add_province_modifier = {
					name = ernatvir_toll_station
					duration = -1
				}
			}
		}
	}

	ernatvir_widespread_recruitment = {
		icon = mission_rb_conquer_brittany
		ai = yes
		position = 9

		required_missions = {
			ernatvir_toll_stations
		}
		trigger = {
			calc_true_if = {
				# TODO: Figure out how to get number of areas containing an owned 60+ dev province
			}
		}
		effect = {
			add_country_modifier = {
				name = ernatvir_widespread_options
				duration = -1
			}
		}
	}
}