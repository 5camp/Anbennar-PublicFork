#Designed and coded by: Auirus
# _# is column number.

##################
######Part 1######
##################
skewered_drake_1 = { 
	slot = 1
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 }
	
	skewered_drake_take_west = {
		icon = crush_heretic_strongholds
		position = 3
		required_missions = { 
			skewered_drake_riding_roads
		}
		
		provinces_to_highlight = {
			OR = {
				AND = {
					area = jorkad_junction_area
					NOT = { owned_by = ROOT }
				}
				AND = {
					province_id = 2963
					has_any_blorc_camp = no
				}
				AND = {
					province_id = 2879
					NOT = { has_fort_building_trigger = yes }
					NOT = { has_manpower_building_trigger = yes }
				}
			}
		}

		trigger = {
			jorkad_junction_area = {
				type = all
				owned_by = ROOT
			}
			2963 = { has_province_modifier = blorc_war_camp }
			2879 = {
				has_fort_building_trigger = yes
				has_manpower_building_trigger = yes
			}
		}
		
		effect = {
			if = {
				limit = { has_ruler = "Gashak" }
				change_adm = 1
				change_dip = 1
			}
			add_church_power = 100
			firanyalen_area = { add_permanent_claim = ROOT }
			misharallen_area = { add_permanent_claim = ROOT }
		}
	}

	skewered_drake_hills_sunlight = {
		icon = crush_heretic_strongholds
		position = 5
		required_missions = { 
			skewered_drake_take_west
		}
		
		provinces_to_highlight = {
			OR = {
				area = firanyalen_area
				area = misharallen_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				has_owner_accepted_culture = no
			}
		}

		trigger = {
			firanyalen_area = {
				type = all
				owned_by = ROOT
				OR = {
					has_owner_accepted_culture = yes
					culture_group = orcish
				}
			}
			misharallen_area = {
				type = all
				owned_by = ROOT
				OR = {
					has_owner_accepted_culture = yes
					culture_group = orcish
				}
			}
		}
		
		effect = {
			add_prestige = 25
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 4
						OR = {
							area = firanyalen_area
							area = misharallen_area
						}
						culture_group = harpy
					}
				}
				define_advisor = {
					type = artist
					skill = 2
					discount = yes
					culture = firanyan_harpy
				}
				define_advisor = {
					type = diplomat
					skill = 2
					discount = yes
					culture = firanyan_harpy
				}
			}
			else = {
				add_legitimacy = 25
				add_splendor = 100
			}
		}
	}
}

skewered_drake_2 = { 
	slot = 2
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 }
	
	skewered_drake_chieftains_hoard = {
		icon = crush_heretic_strongholds
		position = 1
		
		provinces_to_highlight = {
			OR = {
				province_id = 2285
				province_id = 4028
			}
			NOT = { num_of_times_improved_by_owner = 1 }
		}

		trigger = {
			crown_land_share = 40
			stability = 1
			2285 = { num_of_times_improved_by_owner = 1 }
			4028 = { num_of_times_improved_by_owner = 1 }
		}
		
		effect = {
			add_country_modifier = { name = skewered_drake_chieftain_colonies duration = 9125 }
		}
	}

	skewered_drake_riding_roads = {
		icon = crush_heretic_strongholds
		position = 2
		required_missions = { 
			skewered_drake_chieftains_hoard
		}

		trigger = {
			adm_power = 100
			num_of_generals = 2
			num_of_hussars = 4
		}
		
		effect = {
			add_adm_power = -100
			add_army_tradition = 10
			dwarovrod_27_29_area = { discover_country = ROOT }
			dwarovrod_30_32_area = { discover_country = ROOT }
			misty_cave_trail_area = { discover_country = ROOT }
			hehos_legacy_area = { discover_country = ROOT }
			seghdihr_area = { discover_country = ROOT }
			
			dwarovrod_21_24_area = { discover_country = ROOT }
			jorkad_junction_area = { discover_country = ROOT }
		}
	}

	skewered_drake_piles_gold = {
		icon = crush_heretic_strongholds
		position = 4
		required_missions = { 
			skewered_drake_learn_vanquished
		}
		
		provinces_to_highlight = {
			province_id = 2914
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { has_fort_building_trigger = yes }
			}
		}

		trigger = {
			2914 = {
				owned_by = ROOT
				has_fort_building_trigger = yes
			}
			OR = {
				knows_country = M01
				NOT = { exists = M01 }
			}
			OR = {
				treasurer = 2
				master_of_mint = 2
				adm_power = 100
			}
		}
		
		effect = {
			if = {
				limit = { NOT = { treasurer = 2 master_of_mint = 2 } }
				add_adm_power = -100
			}
			if = {
				limit = { exists = M01 }
				add_casus_belli = { type = cb_vassalize_mission target = M01 months = 120 }
			}
			else = {
				hidden_effect = {
					west_serpentspine_superregion = { remove_core = M01 }
					bulwar_superregion = { remove_core = M01 }
				}
				greatcavern_area = { add_core = M01 }
			}
		}
	}

	skewered_drake_obedient_trolls = {
		icon = crush_heretic_strongholds
		position = 5
		required_missions = { 
			skewered_drake_piles_gold
		}
		
		provinces_to_highlight = {
			OR = {
				AND = {
					owned_by = M01
					NOT = { ROOT = { overlord_of = M01 } }
				}
				AND = {
					area = greatcavern_area
					NOT = { owned_by = M01 }
				}
			}
		}

		trigger = {
			M01 = { is_subject_of = ROOT }
			greatcavern_area = { type = all owned_by = M01 }
			num_of_owned_provinces_with = {
				value = 8
				has_production_building_trigger = yes
			}
		}
		
		effect = {
			M01 = {
				every_owned_province = {
					limit = { NOT = { area = greatcavern_area } }
					hidden_effect = { remove_core = M01 }
					cede_province = ROOT
				}
				add_liberty_desire = -25
				medium_increase_of_orcish_tolerance_effect = yes
			}
			greatcavern_area = { add_base_manpower = 1 }
			small_increase_of_troll_tolerance_effect = yes
		}
	}
}

skewered_drake_3 = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 }
	
	skewered_drake_first_many = {
		icon = crush_heretic_strongholds
		position = 2
		required_missions = { 
			skewered_drake_out_wound
		}
		
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 4078
					has_any_blorc_camp = no
				}
				AND = {
					province_id = 4124
					NOT = { H78 = { has_opinion_modifier = { who = ROOT modifier = scornfully_insulted } } }
				}
			}
		}

		trigger = {
			4078 = {
				owned_by = ROOT
				has_any_blorc_camp = yes
			}
			if = {
				limit = { exists = H78 }
				H78 = { has_opinion_modifier = { who = ROOT modifier = scornfully_insulted } }
			}
		}
		
		effect = {
			4124 = { add_permanent_claim = ROOT }
			H78 = {
				every_owned_province = {
					limit = { NOT = { province_id = 4124 } }
					add_permanent_claim = ROOT
				}
			}
		}
	}

	skewered_drake_learn_vanquished = {
		icon = crush_heretic_strongholds
		position = 3
		required_missions = { 
			skewered_drake_riding_roads
			skewered_drake_first_many
		}
		
		provinces_to_highlight = {
			province_id = 4124
			NOT = { owned_by = ROOT }
			NOT = { has_province_modifier = blorc_war_camp }
		}

		trigger = {
			4124 = { owned_by = ROOT has_province_modifier = blorc_war_camp }
			has_institution = renaissance
		}
		
		effect = {
			change_government_reform_progress = 100
			azka_sur_area = { add_permanent_claim = ROOT }
			dwarovrod_33_35_area = { add_permanent_claim = ROOT }
			verkal_gulan_area = { add_permanent_claim = ROOT }
		}
	}

	skewered_drake_roads_sand = {
		icon = crush_heretic_strongholds
		position = 5
		required_missions = { 
			skewered_drake_learn_vanquished
		}
		
		provinces_to_highlight = {
			OR = {
				AND = {
					area = azka_sur_area
					NOT = { owned_by = ROOT }
					NOT = { has_production_building_trigger = yes }
				}
				AND = {
					province_id = 643
					NOT = { province_has_center_of_trade_of_level = 2 }
				}
			}
		}

		trigger = {
			azka_sur_area = {
				type = all
				owned_by = ROOT
				has_production_building_trigger = yes
			}
			643 = { province_has_center_of_trade_of_level = 2 }
		}
		
		effect = {
			if = {
				limit = { NOT = { has_country_flag = removing_monstrous } }
				hidden_effect = { set_variable = { monstrousPoints = 100 } }
				custom_tooltip = start_demonsterization
			}
			custom_tooltip = decrease_monstrous_10_tooltip
			hidden_effect = { subtract_variable = { monstrousPoints = 25 } }

			643 = { change_culture = ROOT }
			small_increase_of_elven_tolerance_effect = yes
			small_increase_of_human_tolerance_effect = yes
		}
	}

	skewered_drake_claim_dominion = {
		icon = crush_heretic_strongholds
		position = 5
		required_missions = { 
			skewered_drake_hills_sunlight
			skewered_drake_obedient_trolls
			skewered_drake_roads_sand
			skewered_drake_alpha_breed
			skewered_drake_drakedens
		}
		
		provinces_to_highlight = {
			owned_by = ROOT
			local_autonomy = 25
		}

		trigger = {
			if = {
				limit = { OR = { government = tribal government = monarchy } }
				legitimacy = 90
			}
			is_tribal = no
			OR = {
				is_semi_monstrous = yes
				NOT = { has_country_modifier = monstrous_nation }
			}
			army_size = 60
			NOT = { average_autonomy = 25 }
		}
		
		effect = {
			if = {
				limit = { has_country_modifier = monstrous_nation }
				custom_tooltip = skewered_drake_claim_dominion_tooltip
			}
			else = { add_stability = 2 }
			country_event = { id = flavor_skewered_drake.2 }
			tooltip = { swap_non_generic_missions = yes }
		}
	}
}

skewered_drake_4 = { 
	slot = 4
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 }
	
	skewered_drake_out_wound = {
		icon = crush_heretic_strongholds
		position = 1

		trigger = {
			num_of_cities = 5
			has_old_dookan_omen = yes
		}
		
		effect = {
			country_event = { id = flavor_skewered_drake.3 }
		}
	}

	skewered_drake_food_body = {
		icon = crush_heretic_strongholds
		position = 4
		required_missions = { 
			skewered_drake_learn_vanquished
		}
		provinces_to_highlight = {
			OR = {
				AND = {
					area = misty_cave_trail_area
					NOT = { owned_by = ROOT }
				}
				AND = {
					owned_by = ROOT
					NOT = {
						ROOT = {
							development_in_provinces = {
								value = 30
								OR = {
									trade_goods = serpentbloom
									trade_goods = livestock
								}
							}
						}
					}
					OR = {
						trade_goods = serpentbloom
						trade_goods = livestock
					}
				}
			}
		}

		trigger = {
			misty_cave_trail_area = {
				type = all
				owned_by = ROOT
			}
			development_in_provinces = {
				value = 30
				OR = {
					trade_goods = serpentbloom
					trade_goods = livestock
				}
			}
			if = {
				limit = { 4228 = { has_province_modifier = expedition_target } }
				NOT = { 4228 = { has_province_modifier = expedition_target } }
			}
		}
		
		effect = {
			4217 = { add_base_tax = 2 add_base_production = 1 add_base_manpower = 2 }
			add_stability_or_adm_power = yes
			country_event = { id = flavor_skewered_drake.4 }
		}
	}

	skewered_drake_alpha_breed = {
		icon = crush_heretic_strongholds
		position = 5
		required_missions = { 
			skewered_drake_food_body
		}
		
		provinces_to_highlight = {
			province_id = 4228
		}

		trigger = {
			num_of_hussars = 6
			4228 = {
				NOT = { has_province_modifier = expedition_target }
				cavalry_in_province = 4
			}
		}
		
		effect = {
			4228 = { kill_units = { who = ROOT type = cavalry amount = 4 } }
			custom_tooltip = skewered_drake_alpha_breed_tooltip
			if = {
				limit = { NOT = { has_ruler = "Gashak" } }
				country_event = { id = flavor_skewered_drake.100 }
			}
		}
	}
}

skewered_drake_5 = { 
	slot = 5
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 }
	
	skewered_drake_end_dreams = {
		icon = crush_heretic_strongholds
		position = 2
		required_missions = { 
			skewered_drake_out_wound
		}
		
		provinces_to_highlight = {
			owned_by = H83
		}

		trigger = {
			NOT = { exists = H83 }
		}
		
		effect = {
			if = {
				limit = { has_ruler = "Gashak" }
				add_ruler_personality = reformist_personality
			}
			add_adm_power = 50
			add_dip_power = 50
			add_mil_power = 50
			serpentspine = { remove_core = H83 }
		}
	}

	skewered_drake_drakedens = {
		icon = crush_heretic_strongholds
		position = 5
		required_missions = { 
			skewered_drake_food_body
		}
		
		provinces_to_highlight = {
			area = misty_cave_trail_area
			OR = {
				NOT = { development = 6 }
				NOT = { has_production_or_gold_building_trigger = yes }
			}
		}

		trigger = {
			misty_cave_trail_area = {
				type = all
				development = 6
				has_production_or_gold_building_trigger = yes
			}
			misty_cave_trail_area = {
				has_fort_building_trigger = yes
			}
			misty_cave_trail_area = {
				has_manpower_building_trigger = yes
			}
		}
		
		effect = {
			misty_cave_trail_area = {
				change_trade_goods = livestock
				add_permanent_province_modifier = { name = skewered_drake_drakedens_modifier duration = -1 }
			}
		}
	}
}

##################
######Part 2######
##################
skewered_drake_1b = { 
	slot = 1
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 has_country_flag = skewered_drake_part2 }
	
	skewered_drake_broken_alliance = {
		icon = crush_heretic_strongholds
		position = 8
		required_missions = { 
			skewered_drake_funding_future
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_picking_scraps = {
		icon = crush_heretic_strongholds
		position = 9
		required_missions = { 
			skewered_drake_broken_alliance
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_visible_dread = {
		icon = crush_heretic_strongholds
		position = 10
		required_missions = { 
			skewered_drake_picking_scraps
			skewered_drake_might_right
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_climbing_trees = {
		icon = crush_heretic_strongholds
		position = 11
		required_missions = { 
			skewered_drake_visible_dread
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_one_master_another = {
		icon = crush_heretic_strongholds
		position = 14
		required_missions = { 
			skewered_drake_climbing_trees
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}
}

skewered_drake_2b = { 
	slot = 2
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 has_country_flag = skewered_drake_part2 }
	
	skewered_drake_funding_future = {
		icon = crush_heretic_strongholds
		position = 7
		required_missions = { 
			skewered_drake_claim_dominion
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_administering_subjects = {
		icon = crush_heretic_strongholds
		position = 8
		required_missions = { 
			skewered_drake_funding_future
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_might_right = {
		icon = crush_heretic_strongholds
		position = 9
		required_missions = { 
			skewered_drake_administering_subjects
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_elven_spear = {
		icon = crush_heretic_strongholds
		position = 11
		required_missions = { 
			skewered_drake_might_right
			skewered_drake_one_swoop
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_symbiotic_warfare = {
		icon = crush_heretic_strongholds
		position = 12
		required_missions = { 
			skewered_drake_elven_spear
			skewered_drake_climbing_trees
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_false_overlord = {
		icon = crush_heretic_strongholds
		position = 13
		required_missions = { 
			skewered_drake_only_kneel
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}
}

skewered_drake_3b = { 
	slot = 3
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 has_country_flag = skewered_drake_part2 }
	
	skewered_drake_drakelords_throne = {
		icon = crush_heretic_strongholds
		position = 7
		required_missions = { 
			skewered_drake_claim_dominion
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_planting_seeds = {
		icon = crush_heretic_strongholds
		position = 8
		required_missions = { 
			skewered_drake_drakelords_throne
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_reap_sow = {
		icon = crush_heretic_strongholds
		position = 9
		required_missions = { 
			skewered_drake_planting_seeds
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_one_swoop = {
		icon = crush_heretic_strongholds
		position = 10
		required_missions = { 
			skewered_drake_reap_sow
			skewered_drake_king_queen
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_draken_keep = {
		icon = crush_heretic_strongholds
		position = 11
		required_missions = { 
			skewered_drake_one_swoop
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_only_kneel = {
		icon = crush_heretic_strongholds
		position = 12
		required_missions = { 
			skewered_drake_draken_keep
			skewered_drake_wet_skewer
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_master_world = {
		icon = crush_heretic_strongholds
		position = 14
		required_missions = { 
			skewered_drake_false_overlord
			skewered_drake_cats_drakons
			skewered_drake_return_roots
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}
}

skewered_drake_4b = { 
	slot = 4
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 has_country_flag = skewered_drake_part2 }
	
	skewered_drake_flex_muscles = {
		icon = crush_heretic_strongholds
		position = 7
		required_missions = { 
			skewered_drake_claim_dominion
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_heat_endurace = {
		icon = crush_heretic_strongholds
		position = 8
		required_missions = { 
			skewered_drake_flex_muscles
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_king_queen = {
		icon = crush_heretic_strongholds
		position = 9
		required_missions = {
			skewered_drake_planting_seeds
			skewered_drake_heat_endurace
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_wet_skewer = {
		icon = crush_heretic_strongholds
		position = 11
		required_missions = { 
			skewered_drake_one_swoop
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_cats_drakons = {
		icon = crush_heretic_strongholds
		position = 13
		required_missions = { 
			skewered_drake_only_kneel
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}
}

skewered_drake_5b = { 
	slot = 5
	generic = no
	ai = yes 
	has_country_shield = yes
	potential = { tag = H73 has_country_flag = skewered_drake_part2 }
	
	skewered_drake_bark_bite = {
		icon = crush_heretic_strongholds
		position = 8
		required_missions = { 
			skewered_drake_flex_muscles
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_blood_sports = {
		icon = crush_heretic_strongholds
		position = 9
		required_missions = { 
			skewered_drake_bark_bite
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_plain_sight = {
		icon = crush_heretic_strongholds
		position = 10
		required_missions = { 
			skewered_drake_blood_sports
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_welcome_traders = {
		icon = crush_heretic_strongholds
		position = 11
		required_missions = { 
			skewered_drake_one_swoop
			skewered_drake_plain_sight
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}

	skewered_drake_return_roots = {
		icon = crush_heretic_strongholds
		position = 13
		required_missions = { 
			skewered_drake_welcome_traders
		}
		
		provinces_to_highlight = {
		}

		trigger = {
			treasury = 1
		}
		
		effect = {
			add_treasury = 1
		}
	}
}