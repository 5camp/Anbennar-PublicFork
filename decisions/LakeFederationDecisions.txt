country_decisions = {

	invest_in_assembly_house_construction = {
		major = yes
		potential = {
			has_country_flag = building_assembly_house
			NOT = { has_global_flag = federation_assembly_house_build }
		}

		allow = {
			treasury = 50
			if = {
				limit = { ai = no }
				NOT = { num_of_loans = 1 }
			}
		}
		effect = {
			custom_tooltip = invest_in_assembly_house_construction_tooltip
			add_treasury = -50
			hidden_effect = {
				REB = {
					change_variable = {
						which = lakeAssemblyHouse
						value = 2
					}
				}
				change_variable = {
					which = lakeInvestment
					value = 50
				}
			}
		}
		ai_will_do = {
			factor = 1
			
			modifier = {
				factor = 0
				
				NOT = { treasury = 100 }
			}
			
			modifier = {
				factor = 0
				
				is_at_war = yes
			}
		}
	}
	
	invest_in_central_bank_construction = {
		major = yes
		potential = {
			has_country_flag = creating_central_bank
			NOT = { has_global_flag = federation_central_bank_build }
		}

		allow = {
			treasury = 50
			capital_scope = { has_province_modifier = lake_local_bank }
			if = {
				limit = { ai = no }
				NOT = { num_of_loans = 1 }
			}
		}
		effect = {
			custom_tooltip = invest_in_central_bank_construction_tooltip
			add_treasury = -50
			hidden_effect = {
				REB = {
					change_variable = {
						which = lakeCentralBank
						value = 2
					}
				}
				change_variable = {
					which = lakeInvestmentBank
					value = 50
				}
			}
		}
		ai_will_do = {
			factor = 1
			
			modifier = {
				factor = 0
				
				NOT = { treasury = 100 }
			}
			
			modifier = {
				factor = 0
				
				is_at_war = yes
			}
		}
	}
	
	federation_ask_for_war_mandat = {
		potential = {
			has_country_modifier = lake_federation_member
			NOT = { has_country_modifier = federation_war_mandat }
			NOT = { has_country_modifier = recently_asked_war_mandat }
			NOT = { is_lake_federation_leader = yes }
		}

		allow = {
			is_at_war = no
			prestige = 0
			custom_trigger_tooltip = {
				tooltip = federation_leader_exist_tooltip
				any_known_country = { 
					has_country_modifier = lake_federation_member
					is_lake_federation_leader = yes
				}
			}
		}
		effect = {
			custom_tooltip = lake_ask_war_mandat_tooltip
			add_country_modifier = {
				name = recently_asked_war_mandat
				duration = 1825
			}
			random_known_country = {
				limit = { is_lake_federation_leader = yes }
				country_event = { id = lake.20 }
			}
			add_prestige = -5
		}
		ai_will_do = {
			factor = 1
			
			modifier = {
				factor = 0
				
				is_at_war = yes
			}
			
			modifier = {
				factor = 0
				
				NOT = { manpower_percentage = 0.50 }
			}
			
			modifier = {
				factor = 0
				
				has_country_modifier = federation_fighter
			}
			
			modifier = {
				factor = 0
				
				NOT = {
					any_neighbor_country = {
						ROOT = { has_casus_belli_against = PREV }
					}
				}
			}
		}
	}
	
	lake_federation_standing = {
		major = yes
		potential = {
			ai = no
			has_country_modifier = lake_federation_member
		}

		allow = {
			hidden_trigger = { always = yes }
		}
		effect = {
			if = {
				limit = { NOT = { has_country_flag = hide_standing } }
				custom_tooltip = our_standing_tooltip	
				if = {
					limit = { J01 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J01_standing_tooltip
				}
				if = {
					limit = { J02 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J02_standing_tooltip
				}
				if = {
					limit = { J03 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J03_standing_tooltip
				}
				if = {
					limit = { J04 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J04_standing_tooltip
				}
				if = {
					limit = { J05 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J05_standing_tooltip
				}
				if = {
					limit = { J06 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J06_standing_tooltip
				}
				if = {
					limit = { J07 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J07_standing_tooltip
				}
				if = {
					limit = { J08 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J08_standing_tooltip
				}
				if = {
					limit = { J09 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J09_standing_tooltip
				}
				if = {
					limit = { J10 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J10_standing_tooltip
				}
				if = {
					limit = { J11 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J11_standing_tooltip
				}
				if = {
					limit = { J12 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J12_standing_tooltip
				}
				if = {
					limit = { J13 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J13_standing_tooltip
				}
				if = {
					limit = { J14 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J14_standing_tooltip
				}
				if = {
					limit = { J15 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J15_standing_tooltip
				}
				if = {
					limit = { J16 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J16_standing_tooltip
				}
				if = {
					limit = { J17 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J17_standing_tooltip
				}
				if = {
					limit = { J18 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J18_standing_tooltip
				}
				if = {
					limit = { J19 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J19_standing_tooltip
				}
				if = {
					limit = { J20 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J20_standing_tooltip
				}
				if = {
					limit = { J21 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J21_standing_tooltip
				}
				if = {
					limit = { J22 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J22_standing_tooltip
				}
				if = {
					limit = { J23 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J23_standing_tooltip
				}
				if = {
					limit = { J24 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J24_standing_tooltip
				}
				if = {
					limit = { J25 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J25_standing_tooltip
				}
				if = {
					limit = { J26 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J26_standing_tooltip
				}
				if = {
					limit = { J27 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J27_standing_tooltip
				}
				if = {
					limit = { J28 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J28_standing_tooltip
				}
				if = {
					limit = { J29 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J29_standing_tooltip
				}
				if = {
					limit = { J30 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J30_standing_tooltip
				}
				if = {
					limit = { J31 = { exists = yes has_country_modifier = lake_federation_member NOT = { tag = ROOT } } }
					custom_tooltip = J31_standing_tooltip
				}
				custom_tooltip = click_to_hide_tooltip
				hidden_effect = { set_country_flag = hide_standing }
			}
			else = {
				custom_tooltip = click_to_display_tooltip
				hidden_effect = { clr_country_flag = hide_standing }
			}

		}
		ai_will_do = {
			factor = 0
		}
	}
	
	the_lake_federation = {
		major = yes
		potential = {
			has_country_modifier = lake_federation_member
			has_global_flag = lake_a_united_federation
		}

		allow = {
			is_lake_federation_leader = yes
			custom_trigger_tooltip = {
				tooltip = lake_the_constitution_tooltip
				has_country_flag = lake_the_constitution
			}
		}
		effect = {
			add_prestige = 25
			capital_scope = {
				add_base_tax = 2
				add_base_manpower = 2
				add_base_production = 2
			}
			custom_tooltip = unite_the_federation_tooltip
			hidden_effect = {
				change_tag = J33
				every_known_country = {
					limit = { 
						has_country_modifier = lake_federation_member
						OR = {
							AND = {
								is_subject = yes
								overlord = { has_country_modifier = lake_federation_member }
							}
							is_subject = no
						}
					}
					country_event = { id = lake.27 days = 1 random = 10 }
				}
				swap_non_generic_missions = yes
				remove_non_electors_emperors_from_empire_effect = yes
				if = {
					limit = {
						NOT = { government_rank = 3 }
					}
					set_government_rank = 3
				}
				add_country_modifier = {
					name = "centralization_modifier"
					duration = 7300
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
				every_province = {
					limit = {
						OR = {
							region = southern_isles_region
							region = northern_isles_region
						}
					}
					add_permanent_claim = J33
				}
				remove_country_modifier = lake_federation_member
				remove_country_modifier = lake_trade
				remove_country_modifier = lake_diplomatic_corps
				remove_country_modifier = federation_linguistic_academy
				remove_country_modifier = lake_growing_administration
				remove_country_modifier = lake_mainland_trade_established
				remove_country_modifier = federation_judiciary_system
				remove_country_modifier = federation_free_trade
				remove_country_modifier = federation_fighter
				remove_country_modifier = federation_subventionner
				remove_country_modifier = federation_leecher
				remove_country_modifier = federation_fighter_conscription
				remove_country_modifier = federation_conscription
				remove_country_modifier = federation_military_reform
				remove_country_modifier = federation_war_mandat
				remove_country_modifier = federation_cutdown
				clear_federation_global_flag = yes
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	rejoin_the_federation = {
		major = yes
		potential = {
			capital_scope = {
				OR = {
					region = southern_isles_region
					region = northern_isles_region
				}
			}
			NOT = { has_country_modifier = lake_federation_member }
			has_country_modifier = human_administration
			NOT = { exists = J33 }
			NOT = { has_global_flag = lake_federation_disbanded }
			#ai = yes
		}

		allow = {
			always = yes
		}
		effect = {
			add_stability = 1
			add_country_modifier = {
				name = lake_federation_member
				duration = -1
			}
			add_government_reform = lake_republic
			change_government = republic
		}
		ai_will_do = {
			factor = 100
		}
	}
	
	assembly_house_politics = {
		major = yes
		potential = {
			has_global_flag = federation_assembly_house_build
			has_country_modifier = lake_federation_member
			NOT = { has_country_flag = federation_politics_menu_open }
		}

		allow = {
			custom_trigger_tooltip = {
				tooltip = federation_politic_point_tooltip
				check_variable = { FederationPolitics = 1 }
			}
			custom_trigger_tooltip = {
				tooltip = no_recent_federation_politic_tooltip
				OR = {
					NOT = { has_country_flag = recent_federation_politic }
					had_country_flag = {
						flag = recent_federation_politic
						days = 730
					}
				}
			}
			is_at_war = no
		}
		effect = {
			country_event = { id = fed_politics.1 }
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 50
	}
	
	disband_the_federation = {
		major = yes
		potential = {
			total_development = 300
			NOT = { has_country_modifier = lake_federation_member }
			NOT = { has_global_flag = lake_federation_disbanded }
			any_owned_province = { superregion = forbidden_lands_superregion }
		}
		
		provinces_to_highlight = {
			OR = {
				region = southern_isles_region
				region = northern_isles_region
			}
			NOT = { country_or_vassal_holds = ROOT }
		}

		allow = {
			calc_true_if = {
				all_province = {
					country_or_vassal_holds = ROOT
					OR = {
						region = southern_isles_region
						region = northern_isles_region
					}
				}
				amount = 60
			}
		}
		effect = {
			add_prestige = 100
			every_country = {
				limit = { has_country_modifier = lake_federation_member }
				country_event = { id = lake.39 }
			}
			hidden_effect = { set_global_flag = lake_federation_disbanded }
			hidden_effect = { set_country_flag = disbanded_lake_federation }
			hidden_effect = { clear_federation_global_flag = yes }
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 50
	}
	
	federation_religious_tension = {
		major = yes
		potential = {
			ai = no
			has_global_flag = lake_appeasing_tension
			has_country_modifier = lake_federation_member
		}

		allow = {
			hidden_trigger = { always = no }
		}
		
		effect = {
			custom_tooltip = federation_religious_tension_tooltip
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 50
	}
}
