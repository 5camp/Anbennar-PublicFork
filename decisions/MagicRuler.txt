country_decisions = {

	cast_siege_magic = {
	
		major = yes
		
		potential = {
			ruler_has_personality = mage_personality
		}
		allow = {
			any_province = {	#does work
				#limit = {
					sieged_by = ROOT
					unit_has_leader = yes
					fort_level = 1
					num_of_units_in_province = {
						who = ROOT
						amount = 1
					}
				#}
			}
			NOT = {
				has_ruler_modifier = ruler_recently_casted_spell
			}
		}
		effect = {
			country_event = { id = magic_siege.1 days = 0 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				estate_loyalty = {	#dont do it if they're neutral or above
						estate = estate_mages
						loyalty = 40
				}
			}
		}
	}
	
	
	study_magic = {
	
		major = yes
		
		potential = {
			ruler_has_personality = mage_personality
		}
		allow = {
				NOT = { has_ruler_modifier = ruler_studying_magic }
				NOT = { has_ruler_flag = ruler_studying_abjuration } 
				NOT = { has_ruler_flag = ruler_studying_conjuration } 
				NOT = { has_ruler_flag = ruler_studying_divination } 
				NOT = { has_ruler_flag = ruler_studying_enchantment } 
				NOT = { has_ruler_flag = ruler_studying_evocation } 
				NOT = { has_ruler_flag = ruler_studying_illusion } 
				NOT = { has_ruler_flag = ruler_studying_necromancy } 
				NOT = { has_ruler_flag = ruler_studying_transmutation }
		}
		effect = {
			country_event = { id = magic_study.0 days = 0 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = { 
					NOT = { adm_power = 50 }
					NOT = { dip_power = 50 }
					NOT = { mil_power = 50 }
				}
			}
		}
	}
	
}