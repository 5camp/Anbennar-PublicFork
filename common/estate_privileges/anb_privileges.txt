estate_mages_organization_magisterium = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	loyalty = -0.1
	influence = 0.2
	can_select = {
		OR = {
			if = {
				limit = { 
					exists = A85 
					NOT = { tag = A85 }
				}
				A85 = {	#Magisterium likes you
					has_opinion = { who = ROOT value = 200 }
				}
			}
			is_part_of_hre = yes
			tag = A85
		}
		
		stability = 2
		adm_power = 200
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { has_country_flag = init_mage_org_setup }
			add_stability = -2
			add_adm_power = -200
		}
		else = {
			set_country_flag = init_mage_org_setup
		}
		custom_tooltip = estate_mages_remove_mage_organization
		hidden_effect = {
			if = {
				limit = { has_estate_privilege = estate_mages_organization_state }
				remove_estate_privilege = estate_mages_organization_state
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_guilds }
				remove_estate_privilege = estate_mages_organization_guilds
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_religious }
				remove_estate_privilege = estate_mages_organization_religious
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = 0.1
		imperial_authority = 0.05
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 100
			tag = A85
		}
		modifier = {
			factor = 10
			is_part_of_hre = yes
		}
	}
}


estate_mages_organization_state = {
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.2
	is_valid = {
		NOT = { tag = A85 }
	}
	can_select = {
		stability = 2
		adm_power = 200
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { has_country_flag = init_mage_org_setup }
			add_stability = -2
			add_adm_power = -200
		}
		else = {
			set_country_flag = init_mage_org_setup
		}
		custom_tooltip = estate_mages_remove_mage_organization
		hidden_effect = {
			if = {
				limit = { has_estate_privilege = estate_mages_organization_magisterium }
				remove_estate_privilege = estate_mages_organization_magisterium
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_guilds }
				remove_estate_privilege = estate_mages_organization_guilds
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_religious }
				remove_estate_privilege = estate_mages_organization_religious
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = -0.1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 10
			current_age = age_of_absolutism
		}
		modifier = {
			factor = 0
			has_estate_privilege = estate_mages_organization_magisterium
		}
	}
}

estate_mages_organization_guilds = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	loyalty = -0.05
	influence = 0.05
	is_valid = {
		NOT = { tag = A85 }
	}
	can_select = {
		stability = 2
		adm_power = 200
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { has_country_flag = init_mage_org_setup }
			add_stability = -2
			add_adm_power = -200
		}
		else = {
			set_country_flag = init_mage_org_setup
		}
		custom_tooltip = estate_mages_remove_mage_organization
		hidden_effect = {
			if = {
				limit = { has_estate_privilege = estate_mages_organization_magisterium }
				remove_estate_privilege = estate_mages_organization_magisterium
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_state }
				remove_estate_privilege = estate_mages_organization_state
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_religious }
				remove_estate_privilege = estate_mages_organization_religious
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = 0.05
	}
	ai_will_do = {
		factor = 0
	}
}

estate_mages_organization_religious = {
	icon = privilege_promote_maratha_nobility
	loyalty = -0.05
	influence = 0.05
	land_share = 5
	is_valid = {
		NOT = { tag = A85 }
		OR = {
			religion = ravelian
			religion = the_jadd
			religion = bulwari_sun_cult
			religion = old_bulwari_sun_cult
			religion = xhazobkult
			religion = skaldhyrric_faith 
		}
	}
	can_select = {
		stability = 2
		adm_power = 200
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { has_country_flag = init_mage_org_setup }
			add_stability = -2
			add_adm_power = -200
		}
		else = {
			set_country_flag = init_mage_org_setup
		}
		custom_tooltip = estate_mages_remove_mage_organization
		hidden_effect = {
			if = {
				limit = { has_estate_privilege = estate_mages_organization_magisterium }
				remove_estate_privilege = estate_mages_organization_magisterium
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_state }
				remove_estate_privilege = estate_mages_organization_state
			}
			if = {
				limit = { has_estate_privilege = estate_mages_organization_guilds }
				remove_estate_privilege = estate_mages_organization_guilds
			}
		}
	}
	penalties = {
	}
	benefits = {
		global_missionary_strength = 0.02
		church_loyalty_modifier = 0.05
		church_influence_modifier = 0.05
		
		papal_influence = 0.5
		church_power_modifier = 0.5
		monthly_fervor_increase = 1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_mages_battlemage_academies = {
	icon = privilege_promote_purbias
	max_absolutism = -5
	influence = 0.05
	can_select = {
		army_tradition = 30
	}
	on_granted = {
		add_army_tradition = -15
		
		custom_tooltip = tooltip_estate_nobles_battlemage_academies
	}
	penalties = {
		army_tradition_decay = 0.1
	}
	benefits = {
		land_morale = 0.05
	}
	ai_will_do = {
		factor = 0
	}
}


