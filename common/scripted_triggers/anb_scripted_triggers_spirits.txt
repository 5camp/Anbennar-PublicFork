#temple check triggers, saves some time and space
#if you don't use these after they're merged, I will yell at you
has_temple_complex = { #any version
	OR = {
		has_province_modifier = temple_complex
		has_province_modifier = damaged_temple_complex
		has_province_modifier = derelict_temple_complex
		has_province_modifier = ruined_temple_complex
		has_province_modifier = corrupted_temple_complex
	}
}

has_non_ruined_temple_complex = {
	OR = {
		has_province_modifier = temple_complex
		has_province_modifier = damaged_temple_complex
		has_province_modifier = derelict_temple_complex
		has_province_modifier = corrupted_temple_complex
	}
}

has_non_corrupted_temple_complex = {
	OR = {
		has_province_modifier = temple_complex
		has_province_modifier = damaged_temple_complex
		has_province_modifier = derelict_temple_complex
		has_province_modifier = ruined_temple_complex
	}
}

has_non_ruined_or_corrupted_temple_complex = {
	OR = {
		has_province_modifier = temple_complex
		has_province_modifier = damaged_temple_complex
		has_province_modifier = derelict_temple_complex
	}
}

has_damaged_derelict_or_corrupted_temple_complex = {
	OR = {
		has_province_modifier = damaged_temple_complex
		has_province_modifier = derelict_temple_complex
		has_province_modifier = corrupted_temple_complex
	}
}


#### The Rending ####

#####################

is_warded = {
	OR = {
		has_active_triggered_province_modifier = rending_spirit_protection
	}
}

own_domain = {
	OR = { # a workaround to bypass the fact that type = all is a special case in calc_true_if
		$great_spirit$_spirit_area = {
			type = all
			country_or_non_sovereign_subject_holds = ROOT
		}
		always = no
	}
}

owned_domains = {
	calc_true_if = {
		amount = $number$
		own_domain = { great_spirit = yanhe }
		own_domain = { great_spirit = dhenbasana }
		own_domain = { great_spirit = tughayasa }
		own_domain = { great_spirit = hengdu_bowu }
		own_domain = { great_spirit = hukai }
		own_domain = { great_spirit = telebei }
		own_domain = { great_spirit = phokhao }
		own_domain = { great_spirit = gehet_ketine }
		own_domain = { great_spirit = lupulan }
		own_domain = { great_spirit = semat_tidukhai }
		own_domain = { great_spirit = cinulau }
		own_domain = { great_spirit = hokuma }
	}
}


can_hire_hunter = {
	own_domain = { great_spirit = $great_spirit$ }
	OR = {
		ai = no
		AND = { # ai can take option only if no player own a province in spirit domain
			ai = yes
			$great_spirit$_spirit_area = {
				type = all
				owner = {
					ai = yes
				}
			}
		}
	}
}

can_suppress_spirit = {

	custom_trigger_tooltip = {
		tooltip = rending_already_suppressing_tt
		NOT = { has_global_flag = rending_$great_spirit$_suppress_start }
	}
	$great_spirit$_spirit_area  = {
		type = all
		is_warded = yes
		owner = {
			OR = {
				AND = {
					is_subject = no
					has_country_flag = rending_ward_and_suppress
				}
				overlord = { has_country_flag = rending_ward_and_suppress }
			}
		}
	}
	OR = {
		ai = no
		AND = { # ai can take option only if no player own a province in spirit domain
			ai = yes
			$great_spirit$_spirit_area = {
				type = all
				owner = {
					ai = yes
				}
			}
		}
	}
}