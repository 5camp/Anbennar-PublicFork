

estate_ahati_increase_mil = {
	can_select = {
		NOT = {
			monthly_mil = 11
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		if = {
			limit = { monthly_mil = 9 }
			set_country_flag = target_mil_11
		}
		else_if = {
			limit = { monthly_mil = 7 }
			set_country_flag = target_mil_9
		}
		else_if = {
			limit = { monthly_mil = 5 }
			set_country_flag = target_mil_7
		}
		else = {}
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else_if = {
			limit = { has_country_flag = target_mil_11 }
			monthly_mil = 11
		}
		else_if = {
			limit = { has_country_flag = target_mil_9 }
			monthly_mil = 9
		}
		else_if = {
			limit = { has_country_flag = target_mil_7 }
			monthly_mil = 7
		}
		else = { monthly_mil = 5 }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_army_tradition = 5
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
    }
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
		hidden_effect = {
			clr_country_flag = target_mil_11
			clr_country_flag = target_mil_9
			clr_country_flag = target_mil_7
		}
    }
	on_invalid = {
		clr_country_flag = target_mil_11
		clr_country_flag = target_mil_9
		clr_country_flag = target_mil_7
	}
}

estate_ahati_increase_corruption = {
	can_select = { 
		NOT = { corruption = 1 } 
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else = { corruption = 5 }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
	}
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
	}
}

estate_ahati_obtain_satrapy = {
	can_select = { 
		OR = {
			any_neighbor_country = {
				is_subject = no
				NOT = { is_subject_of = ROOT }
			}
			any_subject_country = {
				any_neighbor_country = {
					is_subject = no
					NOT = { is_subject_of = ROOT }
				}
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		if = {
			limit = {
				any_neighbor_country = {
					is_subject = no
					NOT = { is_subject_of = ROOT }
				}
			}
			random_neighbor_country = {
				limit = {
					is_subject = no
					NOT = { is_subject_of = ROOT }
				}
				save_event_target_as = agenda_country
			}
		}
		else = {
			random_subject_country = {
				limit = {
					any_neighbor_country = {
						is_subject = no
						NOT = { is_subject_of = ROOT }
					}
				}
				random_neighbor_country = {
					limit = {
						is_subject = no
						NOT = { is_subject_of = ROOT }
					}
					save_event_target_as = agenda_country
				}
			}
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else = { event_target:agenda_country = { is_subject_of = ROOT is_subject_of_type = tributary_state } }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
		event_target:agenda_country = { add_liberty_desire = -10 }
	}
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
	}
}

estate_ahati_recruit_ahati = {
	can_select = { 
		NOT = { janissary_percentage = 0.25 } 
	}
	selection_weight = {
		factor = 1
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else = { janissary_percentage = 0.35 }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
		add_country_modifier = { name = ahati_agenda_recruit_ahati_modifier duration = 3650 }
	}
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
	}
}

estate_ahati_build_household = {
	can_select = { 
		adm_tech = 15
		any_owned_province = {
			has_manufactory_trigger = no
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		if = {
			limit = { 
				any_owned_province = {
					has_manufactory_trigger = no
					OR = {
						trade_goods = grain
						trade_goods = fish
						trade_goods = livestock
						trade_goods = wine
					}
				}
			}
			random_owned_province = {
				limit = {
					has_manufactory_trigger = no
					OR = {
						trade_goods = grain
						trade_goods = fish
						trade_goods = livestock
						trade_goods = wine
					}
				}
				save_event_target_as = agenda_province
			}
		}
		else = {
			random_owned_province = {
				limit = { has_manufactory_trigger = no }
				save_event_target_as = agenda_province
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else = { event_target:agenda_province = { has_building = soldier_households } }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
		event_target:agenda_province = { add_base_manpower = 1 }
		change_estate_land_share = { estate = estate_ahati share = 1 }
	}
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
	}
}


estate_ahati_conquer_area = {
	can_select = { 
		any_neighbor_country = {
			num_of_cities = 5
			is_subject = no
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		random_neighbor_country = {
			limit = {
				num_of_cities = 5
				is_subject = no
			}
			random_owned_province = {
				limit = { any_neighbor_province = { owned_by = ROOT } }
				save_event_target_as = agenda_province
			}
		}
	}
	immediate_effect = {
		if = {
			limit = {
				event_target:agenda_province = {
					area_for_scope_province = {
						NOT = { is_claim = ROOT }
						NOT = { is_core = ROOT }
					}
				}
			}
			event_target:agenda_province = {
				area = {
					limit = {
						NOT = { is_claim = root }
						NOT = { is_core = root }
					}
					add_claim = ROOT
				}
			}
		}
	}
	provinces_to_highlight = {
		area_for_scope_province = {
			province_id = event_target:agenda_province
		}
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else = { event_target:agenda_province = { area_for_scope_province = { owned_by = ROOT } } }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
		add_mandate = 5
		change_estate_land_share = { estate = estate_ahati share = 2 }
	}
	fail_if = {
		event_target:agenda_province = {
			area_for_scope_province = {
				type = all
				NOT = { 
					is_claim = ROOT 
					is_core = ROOT
					owned_by = ROOT
				}
			}
		}
	}
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
	}
	on_invalid = {
		if = {
			limit = {
				event_target:agenda_province = {
					area_for_scope_province = {
						is_claim = ROOT
						NOT = { is_permanent_claim = ROOT }
					}
				}
			}
			event_target:agenda_province = {
				area = {
					limit = {
						is_claim = ROOT
						NOT = { is_permanent_claim = ROOT }
					}
					remove_claim = ROOT
				}
			}
		}
	}
}

estate_ahati_trade_power = {
	can_select = { 
		NOT = {
			AND = {
				1309 = { is_strongest_trade_power = ROOT } #brasan
				481 = { is_strongest_trade_power = ROOT } #golkorra
				1467 = { is_strongest_trade_power = ROOT } #janama
				5890 = { is_strongest_trade_power = ROOT } #khet highlands
				5728 = { is_strongest_trade_power = ROOT } #fojara
				601 = { is_strongest_trade_power = ROOT } #bulwar
			}
		}
	}
	selection_weight = {
		factor = 1
	}
	pre_effect = {
		if = {
			limit = { NOT = { 1309 = { is_strongest_trade_power = ROOT } } } #brasan
			1309 = { save_event_target_as = agenda_province }
		}
		else_if = {
			limit = { NOT = { 481 = { is_strongest_trade_power = ROOT } } } #golkorra
			481 = { save_event_target_as = agenda_province }
		}
		else_if = {
			limit = { NOT = { 1467 = { is_strongest_trade_power = ROOT } } } #janama
			1467 = { save_event_target_as = agenda_province }
		}
		else_if = {
			limit = { NOT = { 5890 = { is_strongest_trade_power = ROOT } } } #khet highlands
			5890 = { save_event_target_as = agenda_province }
		}
		else_if = {
			limit = { NOT = { 5728 = { is_strongest_trade_power = ROOT } } } #fojara
			5728 = { save_event_target_as = agenda_province }
		}
		else = { 601 = { save_event_target_as = agenda_province } } #bulwar
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	task_requirements = {
		if = {
			limit = { has_estate_agenda_auto_completion = { estate = estate_ahati } }
			has_estate_agenda_auto_completion = { estate = estate_ahati }
		}
		else = { event_target:agenda_province = { is_strongest_trade_power = ROOT } }
	}
    task_completed_effect = {
		on_completed_agenda_effect = { estate = estate_ahati }
		add_estate_loyalty = { estate = estate_ahati loyalty = 10 }
		add_country_modifier = { name = ahati_agenda_trade_power_modifier duration = 3650 }
	}
    failing_effect = {
		on_failed_agenda_effect = yes
        add_estate_loyalty_modifier = { estate = estate_ahati desc = EST_VAL_AGENDA_DENIED loyalty = -5 duration = 7300 }
		add_mandate = -5
	}
}


# #Condottieri against rival (with Mare Nostrum)
# estate_janissaries_condottieri_rivals = {
# 	can_select = {
# 		has_dlc = "Mare Nostrum"
# 		is_at_war = no
# 		NOT = {
# 			any_country = {
# 				root = { is_renting_condottieri_to = prev }
# 			}
# 		}
# 		any_rival_country = {
# 			is_at_war = yes
# 			any_country = {
# 				war_with = prev
# 				num_of_cities = 5
# 				NOT = {
# 					border_distance = {
# 						who = root
# 						distance = 200
# 					}
# 				}
# 				NOT = { is_rival = root }
# 				NOT = { root = { is_rival = prev } }
# 				has_opinion = {
# 					who = root
# 					value = -50
# 				}
# 				is_free_or_tributary_trigger = yes
# 			}
# 		}
# 		manpower_percentage = 0.5
# 		army_size_percentage = 0.5
# 		NOT = { has_estate_privilege = estate_janissary_allow_other_professions }
# 	}
# 	selection_weight = {
# 		factor = 2
# 		modifier = {
# 			factor = 2
# 			calc_true_if = {
# 				amount = 5
# 				all_country = {
# 					coalition_target = root
# 				}
# 			}
# 		}
# 		modifier = {
# 			factor = 0.5
# 			NOT = {
# 				any_country = {
# 					coalition_target = root
# 					army_size = root
# 				}
# 			}
# 		}
# 	}
# 	pre_effect = {
# 		random_rival_country = {
# 			limit = {
# 				is_at_war = yes
# 				any_country = {
# 					war_with = prev
# 					num_of_cities = 5
# 					NOT = {
# 						border_distance = {
# 							who = root
# 							distance = 200
# 						}
# 					}
# 					NOT = { is_rival = root }
# 					NOT = { root = { is_rival = prev } }
# 					has_opinion = {
# 						who = root
# 						value = -50
# 					}
# 					is_free_or_tributary_trigger = yes
# 				}
# 			}
# 			save_event_target_as = agenda_country
# 			random_country = {
# 				limit = {
# 					war_with = prev
# 					num_of_cities = 5
# 					NOT = {
# 						border_distance = {
# 							who = root
# 							distance = 200
# 						}
# 					}
# 					NOT = { is_rival = root }
# 					NOT = { root = { is_rival = prev } }
# 					has_opinion = {
# 						who = root
# 						value = -50
# 					}
# 					is_free_or_tributary_trigger = yes
# 				}
# 				save_event_target_as = agenda_enemy_country
# 			}
# 		}
# 	}
# 	fail_if = {
# 		OR = {
# 			is_subject = yes
# 			war_with = event_target:agenda_country
# 			event_target:agenda_country = {
# 				OR = {
# 					is_at_war = no
# 					NOT = { num_of_cities = 1 }
# 				}
# 			}
# 		}
# 	}
# 	provinces_to_highlight = {
# 		is_capital = yes
# 		owner = {
# 			war_with = event_target:agenda_country
# 		}
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			any_country = {
# 				war_with = event_target:agenda_country
# 				custom_trigger_tooltip = {
# 					tooltip = sending_condottieri_to_them
# 					ROOT = { is_renting_condottieri_to = prev }
# 				}
# 			}
# 		}
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		add_mil_power = 50
# 	}
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Bigger Army than Rival
# estate_janissaries_bigger_army_than_rival = {
# 	can_select = {
# 		NOT = { has_country_modifier = thriving_arms_industry }
# 		NOT = { army_size_percentage = 1 }
# 		any_rival_country = {
# 			NOT = { war_with = root }
# 			NOT = { root = { army_size = prev } }
# 			army_balance = {
# 				who = root
# 				value = 1.05
# 			}
# 			NOT = {
# 				army_balance = {
# 					who = root
# 					value = 1.25
# 				}
# 			}
# 		}
# 		NOT = { has_estate_privilege = estate_janissary_allow_other_professions }
# 	}
# 	selection_weight = {
# 		factor = 5
# 	}
# 	pre_effect = {
# 		random_rival_country = {
# 			limit = {
# 				NOT = { war_with = root }
# 				NOT = { root = { army_size = prev } }
# 				army_balance = {
# 					who = root
# 					value = 1.05
# 				}
# 				NOT = {
# 					army_balance = {
# 						who = root
# 						value = 1.25
# 					}
# 				}
# 			}
# 			save_event_target_as = agenda_country
# 		}
# 	}
# 	provinces_to_highlight = {
# 		is_capital_of = event_target:agenda_country
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			if = {
# 				limit = { event_target:agenda_country = { num_of_cities = 1 } }
# 				army_size = event_target:agenda_country
# 			}
# 			else = {
# 				always = yes
# 			}
# 		}
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		add_country_modifier = {
# 			name = thriving_arms_industry
# 			duration = 3650
# 		}
# 	}
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Manpower reserves
# estate_janissaries_build_up_manpower_reserves = {
# 	can_select = {
# 		is_at_war = no
# 		NOT = { manpower_percentage = 0.40 }
# 		NOT = { has_estate_privilege = estate_janissary_allow_other_professions }
# 	}
# 	selection_weight = {
# 		factor = 5
# 		modifier = {
# 			factor = 1.5
# 			NOT = { manpower_percentage = 0.35 }
# 		}
# 		modifier = {
# 			factor = 1.5
# 			NOT = { manpower_percentage = 0.3 }
# 		}
# 		modifier = {
# 			factor = 1.5
# 			NOT = { manpower_percentage = 0.25 }
# 		}
# 		modifier = {
# 			factor = 2
# 			NOT = { manpower_percentage = 0.2 }
# 		}
# 		modifier = {
# 			factor = 3
# 			NOT = { manpower_percentage = 0.15 }
# 		}
# 	}
# 	pre_effect = {
# 		set_variable = {
# 			which = estate_janissaries_build_up_manpower_reserves_variable
# 			value = 0
# 		}
# 		if = {
# 			limit = {
# 				NOT = {
# 					manpower_percentage = 0.1
# 				}
# 			}
# 			set_variable = {
# 				which = estate_janissaries_build_up_manpower_reserves_variable
# 				value = 1
# 			}
# 		}
# 		else_if = {
# 			limit = {
# 				NOT = {
# 					manpower_percentage = 0.3
# 				}
# 			}
# 			set_variable = {
# 				which = estate_janissaries_build_up_manpower_reserves_variable
# 				value = 2
# 			}
# 		}
# 		else = {
# 			set_variable = {
# 				which = estate_janissaries_build_up_manpower_reserves_variable
# 				value = 3
# 			}
# 		}
# 		pick_type_of_military_advisor = yes
# 	}
# 	fail_if = {
# 		is_at_war = yes
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			if = {
# 				limit = {
# 					check_variable = {
# 						which = estate_janissaries_build_up_manpower_reserves_variable
# 						value = 3
# 					}
# 				}
# 				manpower_percentage = 0.9
# 			}
# 			else_if = {
# 				limit = {
# 					check_variable = {
# 						which = estate_janissaries_build_up_manpower_reserves_variable
# 						value = 2
# 					}
# 				}
# 				manpower_percentage = 0.75
# 			}
# 			else = {
# 				manpower_percentage = 0.5
# 			}
# 		}
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		generate_scaled_military_advisor_of_religion_effect = {
# 			religion = hinduism
# 			discount = yes
# 		}
# 		clear_random_military_advisor_generation_flags = yes
# 	}
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
# 		}
# 		clear_random_military_advisor_generation_flags = yes
#     }
# }



# #Commercial Agendas - become more and more frequent the softer the Janissaries become
# #Develop heathen Production
# estate_janissaries_develop_heathen_x = {
# 	can_select = {
# 		any_owned_province = {
# 			NOT = { religion_group = ROOT }
# 			is_state_core = root
# 		}
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	pre_effect = {
# 		random_list = {
# 			1 = {
# 				random_owned_province = {
# 					limit = {
# 						NOT = { religion_group = ROOT }
# 						is_state_core = root
# 						area_for_scope_province = {
# 							is_capital_of = root
# 						}
# 					}
# 					save_event_target_as = agenda_province
# 				}
# 			}
# 			2 = {
# 				trigger = {
# 					any_owned_province = {
# 						NOT = { religion_group = ROOT }
# 						is_state_core = root
# 						OR = {
# 							AND = {
# 								religion = root
# 								OR = {
# 									culture = root
# 									has_owner_accepted_culture = yes
# 								}
# 							}
# 						}
# 						region_for_scope_province = {
# 							is_capital_of = root
# 						}
# 					}
# 				}
# 				random_owned_province = {
# 					limit = {
# 						NOT = { religion_group = ROOT }
# 						is_state_core = root
# 						OR = {
# 							AND = {
# 								religion = root
# 								OR = {
# 									culture = root
# 									has_owner_accepted_culture = yes
# 								}
# 							}
# 						}
# 						region_for_scope_province = {
# 							is_capital_of = root
# 						}
# 					}
# 					save_event_target_as = agenda_province
# 				}
# 			}
# 			1 = {
# 				random_owned_province = {
# 					limit = {
# 						NOT = { religion_group = ROOT }
# 						is_state_core = root
# 					}
# 					save_event_target_as = agenda_province
# 				}
# 			}
# 		}
# 		event_target:agenda_province = {
# 			if = {
# 				limit = {
# 					check_variable = {
# 						which = province_dip_var
# 						value = 1
# 					}
# 				}
# 				set_variable = {
# 					which = province_dip_var
# 					value = 0
# 				}
# 			}
# 			export_to_variable = {
# 				which = province_dip_var
# 				value = trigger_value:base_production
# 			}
# 			change_variable = {
# 				which = province_dip_var
# 				value = 2
# 			}
# 		}
# 	}
# 	selection_weight = {
# 		factor = 1
# 	}
# 	provinces_to_highlight = {
# 		province_id = event_target:agenda_province
# 	}
# 	fail_if = {
# 		event_target:agenda_province = {
# 			NOT = { owned_by = root }
# 		}
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			event_target:agenda_province = {
# 				base_production = "province_dip_var"
# 			}
# 		}
#     }
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		add_years_of_income = 0.3
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
# 		event_target:agenda_province = {
# 			if = {
# 				limit = { owned_by = root }
# 				add_named_unrest = {
# 					name = local_janissaries_displeased
# 					value = 5
# 				}
# 			}
# 		}
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Construct Market building
# estate_janissaries_build_trade_building_in_y = {
# 	can_select = {
# 		dip_tech = 4
# 		any_owned_province = {
# 			is_state_core = root
# 			NOT = { has_building = stock_exchange }
# 			OR = {
# 				AND = {
# 					NOT = { has_building = marketplace }
# 					NOT = { has_building = trade_depot }
# 					num_free_building_slots = 1
# 				}
# 				AND = {
# 					ROOT = { dip_tech = 17 }
# 					NOT = { has_building = trade_depot }
# 					OR = {
# 						num_free_building_slots = 1
# 						has_building = marketplace
# 					}
# 				}
# 				AND = {
# 					ROOT = { dip_tech = 22 }
# 					OR = {
# 						num_free_building_slots = 1
# 						has_building = trade_depot
# 					}
# 				}
# 			}
# 		}
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	selection_weight = {
# 		factor = 1
# 		modifier = {
# 			factor = 0.65
# 			NOT = {
# 				any_owned_province = {
# 					is_state_core = root
# 					OR = {
# 						province_has_center_of_trade_of_level = 1
# 						province_trade_power = 10
# 					}
# 					NOT = { has_building = stock_exchange }
# 					OR = {
# 						AND = {
# 							NOT = { has_building = marketplace }
# 							NOT = { has_building = trade_depot }
# 							num_free_building_slots = 1
# 						}
# 						AND = {
# 							ROOT = { dip_tech = 17 }
# 							NOT = { has_building = trade_depot }
# 							OR = {
# 								num_free_building_slots = 1
# 								has_building = marketplace
# 							}
# 						}
# 						AND = {
# 							ROOT = { dip_tech = 22 }
# 							OR = {
# 								num_free_building_slots = 1
# 								has_building = trade_depot
# 							}
# 						}
# 					}
# 				}
# 			}
# 		}
# 		modifier = {
# 			factor = 1.2
# 			any_owned_province = {
# 				is_state_core = root
# 				OR = {
# 					province_has_center_of_trade_of_level = 2
# 					province_trade_power = 20
# 				}
# 				NOT = { has_building = stock_exchange }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = marketplace }
# 						NOT = { has_building = trade_depot }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 17 }
# 						NOT = { has_building = trade_depot }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = marketplace
# 						}
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 22 }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = trade_depot
# 						}
# 					}
# 				}
# 			}
# 		}
# 		modifier = {
# 			factor = 2
# 			is_institution_enabled = global_trade
# 			NOT = { has_institution = global_trade }
# 		}
# 		modifier = {
# 			factor = 2
# 			NOT = {
# 				crown_land_share = 15
# 			}
# 		}
# 	}
# 	pre_effect = {
# 		set_variable = {
# 			which = estate_janissaries_build_trade_building_in_y_var
# 			value = 0
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				NOT = { has_building = stock_exchange }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = marketplace }
# 						NOT = { has_building = trade_depot }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 17 }
# 						NOT = { has_building = trade_depot }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = marketplace
# 						}
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 22 }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = trade_depot
# 						}
# 					}
# 				}
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				OR = {
# 					province_has_center_of_trade_of_level = 1
# 					province_trade_power = 10
# 				}
# 				NOT = { has_building = stock_exchange }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = marketplace }
# 						NOT = { has_building = trade_depot }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 17 }
# 						NOT = { has_building = trade_depot }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = marketplace
# 						}
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 22 }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = trade_depot
# 						}
# 					}
# 				}
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				OR = {
# 					province_has_center_of_trade_of_level = 2
# 					province_trade_power = 20
# 				}
# 				NOT = { has_building = stock_exchange }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = marketplace }
# 						NOT = { has_building = trade_depot }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 17 }
# 						NOT = { has_building = trade_depot }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = marketplace
# 						}
# 					}
# 					AND = {
# 						ROOT = { dip_tech = 22 }
# 						OR = {
# 							num_free_building_slots = 1
# 							has_building = trade_depot
# 						}
# 					}
# 				}
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		event_target:agenda_province = {
# 			if = {
# 				limit = {
# 					has_building = trade_depot
# 				}
# 				ROOT = {
# 					set_variable = {
# 						which = estate_janissaries_build_trade_building_in_y_var
# 						value = 3
# 					}
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					has_building = marketplace
# 				}
# 				ROOT = {
# 					set_variable = {
# 						which = estate_janissaries_build_trade_building_in_y_var
# 						value = 2
# 					}
# 				}
# 			}
# 			else = {
# 				ROOT = {
# 					set_variable = {
# 						which = estate_janissaries_build_trade_building_in_y_var
# 						value = 1
# 					}
# 				}
# 			}
# 		}
# 	}
# 	provinces_to_highlight = {
# 		province_id = event_target:agenda_province
# 	}
# 	fail_if = {
# 		event_target:agenda_province = {
# 			NOT = { owned_by = root }
# 		}
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			if = {
# 				limit = {
# 					check_variable = {
# 						which = estate_janissaries_build_trade_building_in_y_var
# 						value = 3
# 					}
# 				}
# 				event_target:agenda_province = {
# 					has_building = stock_exchange
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					check_variable = {
# 						which = estate_janissaries_build_trade_building_in_y_var
# 						value = 2
# 					}
# 				}
# 				event_target:agenda_province = {
# 					OR = {
# 						has_building = trade_depot
# 						has_building = stock_exchange
# 					}
# 				}
# 			}
# 			else = {
# 				event_target:agenda_province = {
# 					OR = {
# 						has_building = marketplace
# 						has_building = trade_depot
# 						has_building = stock_exchange
# 					}
# 				}
# 			}
# 		}
#     }
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		if = {
# 			limit = {
# 				NOT = { crown_land_share = 15 }
# 				estate_territory = {
# 					estate = estate_janissaries
# 					territory = 10
# 				}
# 				estate_not_has_exempt_from_seize_land_privilege = { estate = estate_janissaries }
# 			}
# 			take_estate_land_share_small = { estate = estate_janissaries }
# 		}
# 		else = {
# 			event_target:agenda_province = {
# 				add_base_production = 1
# 			}
# 		}
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
# 		event_target:agenda_province = {
# 			if = {
# 				limit = { owned_by = root }
# 				add_named_unrest = {
# 					name = local_janissaries_displeased
# 					value = 5
# 				}
# 			}
# 		}
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Improve trade power in node X
# estate_janissaries_increase_trade_power_in_X = {
# 	can_select = {
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 		any_active_trade_node = {
# 			trade_share = {
# 				country = root
# 				share = 5
# 			}
# 			NOT = {
# 				trade_share = {
# 					country = root
# 					share = 50
# 				}
# 			}
# 			any_trade_node_member_province = {
# 				has_port = yes
# 			}
# 		}
# 	}
# 	selection_weight = {
# 		factor = 1.5
# 		modifier = { #a good indication that you should be doing trade stuff
# 			factor = 2
# 			num_of_merchants = 3
# 		}
# 		modifier = {
# 			factor = 2
# 			num_of_merchants = 4
# 		}
# 		modifier = {
# 			factor = 2
# 			trade_income_percentage = 0.3
# 		}
# 	}
# 	pre_effect = {
# 		set_variable = {
# 			which = estate_janissaries_increase_trade_power_in_X_var
# 			value = 0
# 		}
# 		random_active_trade_node = {
# 			limit = {
# 				trade_share = {
# 					country = root
# 					share = 5
# 				}
# 				NOT = {
# 					trade_share = {
# 						country = root
# 						share = 50
# 					}
# 				}
# 				any_trade_node_member_province = {
# 					has_port = yes
# 				}
# 			}
# 			save_event_target_as = agenda_trade_node
# 			if = {
# 				limit = {
# 					trade_share = { #Requires 65
# 						country = root
# 						share = 40
# 					}
# 				}
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 7
# 					}
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					trade_share = { #Requires 50
# 						country = root
# 						share = 30
# 					}
# 				}
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 6
# 					}
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					trade_share = { #Requires 40
# 						country = root
# 						share = 23
# 					}
# 				}
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 5
# 					}
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					trade_share = { #Requires 30
# 						country = root
# 						share = 15
# 					}
# 				}
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 4
# 					}
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					trade_share = { #Requires 25
# 						country = root
# 						share = 10
# 					}
# 				}
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 3
# 					}
# 				}
# 			}
# 			else_if = {
# 				limit = {
# 					trade_share = { #Requires 20
# 						country = root
# 						share = 7
# 					}
# 				}
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 2
# 					}
# 				}
# 			}
# 			else = { #Requires 15
# 				root = {
# 					set_variable = {
# 						which = estate_janissaries_increase_trade_power_in_X_var
# 						value = 1
# 					}
# 				}
# 			}
# 		}
# 	}
# 	provinces_to_highlight = {
# 		province_id = event_target:agenda_trade_node
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			event_target:agenda_trade_node = {
# 				if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 7
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 65
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 6
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 50
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 5
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 40
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 4
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 30
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 3
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 25
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 2
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 20
# 					}
# 				}
# 				else_if = {
# 					limit = {
# 						root = {
# 							check_variable = {
# 								which = estate_janissaries_increase_trade_power_in_X_var
# 								value = 1
# 							}
# 						}
# 					}
# 					trade_share = {
# 						country = root
# 						share = 15
# 					}
# 				}
# 			}
# 		}
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		generate_scaled_advisor_of_type_and_religion_effect = {
# 			type = trader
# 			religion = root
# 			discount = yes
# 		}
# 	}
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Reduce Inflation
# estate_janissaries_restore_currency = {
# 	can_select = {
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 		inflation = 10
# 		NOT = {
# 			inflation = 30
# 		}
# 		NOT = { has_country_modifier = boom_economy }
# 	}
# 	selection_weight = {
# 		factor = 2.5
# 		modifier = {
# 			factor = 2
# 			inflation = 20
# 		}
# 	}
# 	fail_if = {
# 		inflation = 35
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			NOT = { inflation = 5 }
# 		}
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		add_country_modifier = {
# 			name = boom_economy
# 			duration = 5475
# 		}
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Get a treasury
# estate_janissaries_get_cash = {
# 	can_select = {
# 		NOT = { years_of_income = 0.5 }
# 		NOT = { num_of_loans = 1 }
# 		is_at_war = no
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	selection_weight = {
# 		factor = 1
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			years_of_income = 2.5
# 			NOT = { num_of_loans = 1 }
# 		}
# 	}
# 	fail_if = {
# 		num_of_loans = 1
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		if = {
# 			limit = {
# 				inflation = 5
# 			}
# 			add_estate_loyalty = {
# 				estate = estate_janissaries
# 				loyalty = 10
# 			}
# 			generate_scaled_advisor_of_type_and_religion_effect = {
# 				type = master_of_mint
# 				religion = root
# 				discount = yes
# 			}
# 		}
# 		else = {
# 			add_estate_loyalty = {
# 				estate = estate_janissaries
# 				loyalty = 15
# 			}
# 		}
# 	}
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# estate_janissaries_build_university_in_y = {
# 	can_select = {
# 		adm_tech = 17
# 		any_owned_province = {
# 			is_state_core = root
# 			NOT = { has_building = university }
# 			OR = {
# 				development = 10
# 				is_capital = yes
# 			}
# 		}
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	selection_weight = {
# 		factor = 1
# 		modifier = {
# 			factor = 0.75
# 			NOT = {
# 				any_owned_province = {
# 					is_state_core = root
# 					NOT = { has_building = university }
# 					development = 15
# 				}
# 			}
# 		}
# 		modifier = {
# 			factor = 1.2
# 			any_owned_province = {
# 				is_state_core = root
# 				NOT = { has_building = university }
# 				development = 20
# 			}
# 		}
# 		modifier = {
# 			factor = 2
# 			is_institution_enabled = enlightenment
# 			NOT = { has_institution = enlightenment }
# 		}
# 	}
# 	pre_effect = {
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				NOT = { has_building = university }
# 				development = 10
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				NOT = { has_building = university }
# 				development = 15
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				NOT = { has_building = university }
# 				development = 20
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				NOT = { has_building = university }
# 				is_capital = yes
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 	}
# 	provinces_to_highlight = {
# 		province_id = event_target:agenda_province
# 	}
# 	fail_if = {
# 		event_target:agenda_province = {
# 			NOT = { owned_by = root }
# 		}
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			event_target:agenda_province = {
# 				has_building = university
# 			}
# 		}
#     }
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		add_adm_power = 35
# 		add_dip_power = 35
# 		add_mil_power = 35
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
# 		event_target:agenda_province = {
# 			if = {
# 				limit = { owned_by = root }
# 				add_named_unrest = {
# 					name = local_janissaries_displeased
# 					value = 5
# 				}
# 			}
# 		}
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# estate_janissaries_build_manufactory_in_y = {
# 	can_select = {
# 		any_owned_province = {
# 			is_state_core = root
# 			root_can_build_manufactory_here_trigger = yes
# 			has_nobles_trade_good_trigger = yes
# 		}
# 		monthly_income = 30
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	selection_weight = {
# 		factor = 1
# 		modifier = {
# 			factor = 0.75
# 			always = yes
# 		}
# 		modifier = {
# 			factor = 0.5
# 			OR = {
# 				current_age = age_of_discovery
# 				current_age = age_of_reformation
# 			}
# 		}
# 		modifier = {
# 			factor = 0.5
# 			NOT = { monthly_income = 40 }
# 		}
# 		modifier = {
# 			factor = 2
# 			monthly_income = 60
# 		}
# 		modifier = {
# 			factor = 2
# 			is_institution_enabled = manufactories
# 			NOT = { has_institution = manufactories }
# 		}
# 	}
# 	pre_effect = {
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				root_can_build_manufactory_here_trigger = yes
# 				has_nobles_trade_good_trigger = yes
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				base_production = 5
# 				root_can_build_manufactory_here_trigger = yes
# 				has_nobles_trade_good_trigger = yes
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				base_production = 10
# 				root_can_build_manufactory_here_trigger = yes
# 				has_nobles_trade_good_trigger = yes
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 	}
# 	provinces_to_highlight = {
# 		province_id = event_target:agenda_province
# 	}
# 	fail_if = {
# 		event_target:agenda_province = {
# 			NOT = { owned_by = root }
# 		}
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			event_target:agenda_province = {
# 				custom_trigger_tooltip = {
# 					tooltip = has_manufactory_trigger_tooltip
# 					OR = {
# 						if = {
# 							limit = {
# 								OR = {
# 									trade_goods = naval_supplies
# 									trade_goods = fish
# 									trade_goods = salt
# 								}
# 							}
# 							has_building = wharf
# 						}
# 						else_if = {
# 							limit = {
# 								OR = {
# 									trade_goods = copper
# 									trade_goods = iron
# 								}
# 							}
# 							has_building = weapons
# 						}
# 						else_if = {
# 							limit = {
# 								OR = {
# 									trade_goods = wool
# 									trade_goods = cloth
# 									trade_goods = silk
# 									trade_goods = dyes
# 								}
# 							}
# 							has_building = textile
# 						}
# 						else_if = {
# 							limit = {
# 								OR = {
# 									trade_goods = ivory
# 									trade_goods = slaves
# 									trade_goods = spices
# 									trade_goods = cloves
# 									trade_goods = fur
# 									trade_goods = incense
# 								}
# 							}
# 							has_building = tradecompany
# 						}
# 						else_if = {
# 							limit = {
# 								OR = {
# 									trade_goods = grain
# 									trade_goods = livestock
# 									trade_goods = wine
# 								}
# 							}
# 							has_building = farm_estate
# 						}
# 						else_if = {
# 							limit = {
# 								OR = {
# 									trade_goods = paper
# 									trade_goods = gems
# 									trade_goods = tropical_wood
# 									trade_goods = glass
# 									trade_goods = chinaware
# 								}
# 							}
# 							has_building = mills
# 						}
# 						else_if = {
# 							limit = {
# 								trade_goods = coal
# 							}
# 							has_building = furnace
# 						}
# 						else = {
# 							has_building = plantations
# 						}
# 						has_building = ramparts
# 						has_building = soldier_households
# 						has_building = impressment_offices
# 						has_building = state_house
# 					}
# 				}
# 			}
# 		}
#     }
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		event_target:agenda_province = {
# 			add_base_tax = 1
# 			add_province_modifier = {
# 				name = prospering_production
# 				duration = 5475
# 			}
# 		}
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
# 		event_target:agenda_province = {
# 			if = {
# 				limit = { owned_by = root }
# 				add_named_unrest = {
# 					name = local_janissaries_displeased
# 					value = 5
# 				}
# 			}
# 		}
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# estate_janissaries_build_production_building_in_y = {
# 	can_select = {
# 		adm_tech = 6
# 		any_owned_province = {
# 			is_state_core = root
# 			NOT = { has_building = counting_house }
# 			OR = {
# 				AND = {
# 					NOT = { has_building = workshop }
# 					num_free_building_slots = 1
# 				}
# 				AND = {
# 					ROOT = { adm_tech = 24 }
# 					OR = {
# 						has_building = workshop
# 						num_free_building_slots = 1
# 					}
# 				}
# 			}
# 			NOT = { trade_goods = gold }
# 		}
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	selection_weight = {
# 		factor = 1
# 		modifier = {
# 			factor = 0.65
# 			NOT = {
# 				any_owned_province = {
# 					is_state_core = root
# 					base_production = 4
# 					NOT = { has_building = counting_house }
# 					OR = {
# 						AND = {
# 							NOT = { has_building = workshop }
# 							num_free_building_slots = 1
# 						}
# 						AND = {
# 							ROOT = { adm_tech = 24 }
# 							OR = {
# 								has_building = workshop
# 								num_free_building_slots = 1
# 							}
# 						}
# 					}
# 					NOT = { trade_goods = gold }
# 				}
# 			}
# 		}
# 		modifier = {
# 			factor = 1.2
# 			any_owned_province = {
# 				is_state_core = root
# 				OR = {
# 					base_production = 7
# 					has_building = wharf
# 					has_building = weapons
# 					has_building = textile
# 					has_building = tradecompany
# 					has_building = farm_estate
# 					has_building = mills
# 					has_building = plantations
# 					has_building = furnace
# 				}
# 				NOT = { has_building = counting_house }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = workshop }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { adm_tech = 24 }
# 						OR = {
# 							has_building = workshop
# 							num_free_building_slots = 1
# 						}
# 					}
# 				}
# 				NOT = { trade_goods = gold }
# 			}
# 		}
# 		modifier = {
# 			factor = 2
# 			NOT = {
# 				crown_land_share = 15
# 			}
# 		}
# 	}
# 	pre_effect = {
# 		set_variable = {
# 			which = estate_janissaries_build_production_building_in_y_var
# 			value = 0
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				NOT = { has_building = counting_house }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = workshop }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { adm_tech = 24 }
# 						OR = {
# 							has_building = workshop
# 							num_free_building_slots = 1
# 						}
# 					}
# 				}
# 				NOT = { trade_goods = gold }
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				base_production = 4
# 				NOT = { has_building = counting_house }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = workshop }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { adm_tech = 24 }
# 						OR = {
# 							has_building = workshop
# 							num_free_building_slots = 1
# 						}
# 					}
# 				}
# 				NOT = { trade_goods = gold }
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		random_owned_province = {
# 			limit = {
# 				is_state_core = root
# 				OR = {
# 					base_production = 7
# 					has_building = wharf
# 					has_building = weapons
# 					has_building = textile
# 					has_building = tradecompany
# 					has_building = farm_estate
# 					has_building = mills
# 					has_building = plantations
# 					has_building = furnace
# 				}
# 				NOT = { has_building = counting_house }
# 				OR = {
# 					AND = {
# 						NOT = { has_building = workshop }
# 						num_free_building_slots = 1
# 					}
# 					AND = {
# 						ROOT = { adm_tech = 24 }
# 						OR = {
# 							has_building = workshop
# 							num_free_building_slots = 1
# 						}
# 					}
# 				}
# 				NOT = { trade_goods = gold }
# 			}
# 			save_event_target_as = agenda_province
# 		}
# 		event_target:agenda_province = {
# 			if = {
# 				limit = {
# 					has_building = workshop
# 				}
# 				ROOT = {
# 					set_variable = {
# 						which = estate_janissaries_build_production_building_in_y_var
# 						value = 2
# 					}
# 				}
# 			}
# 			else = {
# 				ROOT = {
# 					set_variable = {
# 						which = estate_janissaries_build_production_building_in_y_var
# 						value = 1
# 					}
# 				}
# 			}
# 		}
# 	}
# 	provinces_to_highlight = {
# 		province_id = event_target:agenda_province
# 	}
# 	fail_if = {
# 		event_target:agenda_province = {
# 			NOT = { owned_by = root }
# 		}
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			if = {
# 				limit = {
# 					check_variable = {
# 						which = estate_janissaries_build_production_building_in_y_var
# 						value = 2
# 					}
# 				}
# 				event_target:agenda_province = {
# 					has_building = counting_house
# 				}
# 			}
# 			else = {
# 				event_target:agenda_province = {
# 					OR = {
# 						has_building = workshop
# 						has_building = counting_house
# 					}
# 				}
# 			}
# 		}
#     }
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		if = {
# 			limit = {
# 				NOT = { crown_land_share = 15 }
# 				estate_territory = {
# 					estate = estate_janissaries
# 					territory = 10
# 				}
# 				estate_not_has_exempt_from_seize_land_privilege = { estate = estate_janissaries }
# 			}
# 			take_estate_land_share_small = { estate = estate_janissaries }
# 		}
# 		else = {
# 			event_target:agenda_province = {
# 				add_base_production = 1
# 			}
# 		}
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
# 		event_target:agenda_province = {
# 			if = {
# 				limit = { owned_by = root }
# 				add_named_unrest = {
# 					name = local_janissaries_displeased
# 					value = 5
# 				}
# 			}
# 		}
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }

# #Gain Mercantilism
# estate_janissaries_gain_mercantilism = {
# 	can_select = {
# 		NOT = { mercantilism = 100 }
# 		has_estate_privilege = estate_janissary_allow_other_professions
# 	}
# 	selection_weight = {
# 		factor = 1
# 	}
# 	pre_effect = {
# 		set_variable = {
# 			which = estate_janissaries_gain_mercantilism_var
# 			value = 0
# 		}
# 		if = { limit = { mercantilism = 95 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 1 } }
# 		else_if = { limit = { mercantilism = 90 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 2 } }
# 		else_if = { limit = { mercantilism = 85 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 3 } }
# 		else_if = { limit = { mercantilism = 80 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 4 } }
# 		else_if = { limit = { mercantilism = 75 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 5 } }
# 		else_if = { limit = { mercantilism = 70 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 6 } }
# 		else_if = { limit = { mercantilism = 65 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 7 } }
# 		else_if = { limit = { mercantilism = 60 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 8 } }
# 		else_if = { limit = { mercantilism = 55 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 9 } }
# 		else_if = { limit = { mercantilism = 50 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 10 } }
# 		else_if = { limit = { mercantilism = 45 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 11 } }
# 		else_if = { limit = { mercantilism = 40 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 12 } }
# 		else_if = { limit = { mercantilism = 35 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 13 } }
# 		else_if = { limit = { mercantilism = 30 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 14 } }
# 		else_if = { limit = { mercantilism = 25 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 15 } }
# 		else_if = { limit = { mercantilism = 20 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 16 } }
# 		else_if = { limit = { mercantilism = 15 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 17 } }
# 		else_if = { limit = { mercantilism = 10 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 18 } }
# 		else_if = { limit = { mercantilism = 5 } set_variable = { which = estate_janissaries_gain_mercantilism_var value = 19 } }
# 		else = { set_variable = { which = estate_janissaries_gain_mercantilism_var value = 20 } }
# 	}
# 	task_requirements = {
# 		if = {
# 			limit = {
# 				has_estate_agenda_auto_completion = {
# 					estate = estate_janissaries
# 				}
# 			}
# 			has_estate_agenda_auto_completion = {
# 				estate = estate_janissaries
# 			}
# 		}
# 		else = {
# 			if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 20 } } mercantilism = 5 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 19 } } mercantilism = 10 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 18 } } mercantilism = 15 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 17 } } mercantilism = 20 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 16 } } mercantilism = 25 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 15 } } mercantilism = 30 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 14 } } mercantilism = 35 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 13 } } mercantilism = 40 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 12 } } mercantilism = 45 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 11 } } mercantilism = 50 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 10 } } mercantilism = 55 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 9 } } mercantilism = 60 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 8 } } mercantilism = 65 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 7 } } mercantilism = 70 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 6 } } mercantilism = 75 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 5 } } mercantilism = 80 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 4 } } mercantilism = 85 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 3 } } mercantilism = 90 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 2 } } mercantilism = 95 }
# 			else_if = { limit = { check_variable = { which = estate_janissaries_gain_mercantilism_var value = 1 } } mercantilism = 100 }
# 			else = {
# 				mercantilism = 0	#Fallback, should never be relevant
# 			}
# 		}
# 	}
#     task_completed_effect = {
# 		on_completed_agenda_effect = {
# 			estate = estate_janissaries
# 		}
# 		add_estate_loyalty = {
# 			estate = estate_janissaries
# 			loyalty = 10
# 		}
# 		add_years_of_trade_income = {
# 			years = 2
# 			custom_tooltip = YEARS_OF_TRADE_INCOME_2
# 		}
#     }
#     failing_effect = {
# 		on_failed_agenda_effect = yes
# 		clr_auto_complete_flag = yes
#         add_estate_loyalty_modifier = {
#             estate = estate_janissaries
# 			desc = EST_VAL_AGENDA_DENIED
# 			loyalty = -5
# 			duration = 7300
#         }
#     }
# }