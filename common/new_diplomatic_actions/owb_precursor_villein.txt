# Create new diplomatic actions like this. AI will currently never send them.
create_new_villein = {
	category = influence
	
	alert_index = 40
	alert_tooltip = demand_dummy_alert_tooltip
	
	require_acceptance = no # Whether the recipient gets an option to decline
	
	is_visible = {
		tag = OWB
		capital_scope = {
			OR = {
				has_province_modifier = owb_magical_intelligence_1
				has_province_modifier = owb_magical_intelligence_2
				has_province_modifier = owb_magical_intelligence_3
			}
		}
		FROM = {
			is_subject_of = ROOT
			NOT = { is_subject_of_type = precursor_villein }
		}
	}
	is_allowed = {
		hidden_trigger = {
			tag = OWB
			capital_scope = {
				OR = {
					has_province_modifier = owb_magical_intelligence_1
					has_province_modifier = owb_magical_intelligence_2
					has_province_modifier = owb_magical_intelligence_3
				}
			}
			FROM = {
				is_subject_of = ROOT
				NOT = { is_subject_of_type = precursor_villein }
			}
		}
		reverse_has_opinion = {
			who = FROM
			value = 0
		}
		FROM = {
			NOT = { is_subject_of_type = autonomous_vassal }
			AND = {
				is_subject_of = ROOT
				NOT = { is_subject_of_type = precursor_villein }
			}
		}
	}
	on_accept = {
		add_trust = {
			who = FROM
			value = 10
			mutual = yes
		}
		create_subject = {
			subject_type = precursor_villein
			subject = FROM 
		}
	}
	on_decline = 	{
	}
	
	ai_acceptance = { # This works similarly to variable_arithmetic_trigger, but does not support triggers generally. Instead, "limit" will be evaluated first and the rest ignored if it isn't passed.
	}

	ai_will_do = { # this is a trigger
		always = no
	}
}
