
update_artifice_points = {
	if = {
		limit = {
			OR = {
				has_estate = estate_artificers
				AND = {
					has_estate = estate_dragon_command
					has_institution = manufactories
				}
			}
		}
		hidden_effect = {
			set_variable = {
				which = MaxArtificePoints
				value = 0
			}

			169 = {
				PREV = {
					set_variable = {
						which = GlobalArtficeLimit
						which = PREV
					}
				}
			}

			change_variable = {
				which = MaxArtificePoints
				which = GlobalArtficeLimit
			}

			# If you're adding a modifier here make sure to also add it to the artifice localization (in artifice_l_english and anb_custom_artifice_localization) otherwise it will not show up in game

			#unique hold wonder
			if = {
				limit = {
					any_owned_province = {
						has_province_modifier = artificier_hall
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}

			if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.2
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 25
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.15
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 20
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.10
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 15
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.05
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 10
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.01
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}

			if = {
				limit = {
					trading_part = {
						trade_goods = damestear
						value = 0.1
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 10
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = damestear
						value = 0.075
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 7
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.05
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.025
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 2
				}
			}
			else_if = {
				limit = {
					trading_part = {
						trade_goods = precursor_relics
						value = 0.01
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 1
				}
			}

			#dwarovar artifice dungeon
			if = {
				limit = {
					has_dlc = "Leviathan"
					any_owned_province = {
						has_great_project = { type = dd_leforn tier = 3 }
						owner = {
							OR = {
								culture_group = dwarven
								culture_group = goblin
								culture_group = kobold
								culture = black_orc
								culture = mossmouth_ogre
							}
						}
					}
				}
				change_variable = {
					which = MaxArtificePoints
					value = 5
				}
			}


			#static sources from things like missions and upkeep
			change_variable = {
				which = MaxArtificePoints
				which = StaticArtificePoints
			}

			# Feiten's mercs cost artificer cap
			if = {
				limit = { any_hired_mercenary_company = { template = merc_feiten_lightning_jellyfish } }
				change_variable = {
					which = MaxArtificePoints
					value = -5
				}
			}
			if = {
				limit = { any_hired_mercenary_company = { template = merc_feiten_stasis } }
				change_variable = {
					which = MaxArtificePoints
					value = -5
				}
			}
			if = {
				limit = { any_hired_mercenary_company = { template = merc_feiten_firestorm } }
				change_variable = {
					which = MaxArtificePoints
					value = -5
				}
			}
			if = {
				limit = { any_hired_mercenary_company = { template = merc_feiten_sky_factory } }
				change_variable = {
					which = MaxArtificePoints
					value = -5
				}
			}
			if = {
				limit = { has_country_flag = feiten_firestorm_active }
				change_variable = {
					which = MaxArtificePoints
					value = -25
				}
			}
			if = {
				limit = { has_country_flag = feiten_stasis_field_active }
				change_variable = {
					which = MaxArtificePoints
					value = -50
				}
			}
			if = {
				limit = { has_country_flag = feiten_skyfactory_active }
				change_variable = {
					which = MaxArtificePoints
					value = -10
				}
			}
			# Investments done as Feiten
			if = {
				limit = { OR = { tag = Y20 was_tag = Y20 } }
				change_variable = {
					which = MaxArtificePoints
					which = feiten_number_of_shuimu_engineering_cadre_facilities_investments
				}
			}

			#Varain√© artificer cap from allies/subjects
			if = {
				limit = {
					has_government_attribute = is_varaine_alchemical_corps
				}

				set_variable = {
					which = VaraineAlliesArtificePoints
					value = 0
				}
				set_variable = {
					which = VaraineForeignAlliesArtificePoints
					value = 0
				}
				if = {
					limit = {
						OR = {
							num_of_allies = 1
							num_of_subjects = 1
						}
					}
					every_ally = {
						limit = {
							capital_scope = {continent = ROOT}
						}
						ROOT = {
							change_variable = {
								which = MaxArtificePoints
								value = 2
							}
							change_variable = {
								which = VaraineAlliesArtificePoints
								value = 2
							}
						}
					}
					every_subject_country = {
						limit = {
							capital_scope = {continent = ROOT}
						}
						ROOT = {
							change_variable = {
								which = MaxArtificePoints
								value = 2
							}
							change_variable = {
								which = VaraineAlliesArtificePoints
								value = 2
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							num_of_allies = 1
							num_of_subjects = 1
						}
					}
					every_ally = {
						limit = {
							NOT = {capital_scope = {continent = ROOT}}
						}
						ROOT = {
							change_variable = {
								which = MaxArtificePoints
								value = 4
							}
							change_variable = {
								which = VaraineForeignAlliesArtificePoints
								value = 4
							}
						}
					}
					every_subject_country = {
						limit = {
							NOT = {capital_scope = {continent = ROOT}}
						}
						ROOT = {
							change_variable = {
								which = MaxArtificePoints
								value = 4
							}
							change_variable = {
								which = VaraineForeignAlliesArtificePoints
								value = 4
							}
						}
					}
				}
			}

			#Brelari Clockwork Watermills
			if = {
				limit = {
					tag = G27
				}
				set_variable = {
					which = BrelarWatermillPoints
					value = 0
				}
				if = {
					limit = {
						any_owned_province = {
							has_province_modifier = g27_clockwork_watermill
						}
					}
					every_owned_province = {
						limit = {
							has_province_modifier = g27_clockwork_watermill
						}
						ROOT = {
							change_variable = {
								which = MaxArtificePoints
								value = 3
							}
							change_variable = {
								which = BrelarWatermillPoints
								value = 3
							}
						}
					}
				}
			}

			# Points Multiplier
			set_variable = {
				which = ArtificePointsMultiplier
				value = 1
			}

			#IF YOU WANT TO ADD MORE MULTIPLIERS MAKE SURE TO add to getArtificeHasMultipliers in anb_custom_artifice_localization or the multipliers may not show up correctly

			#liches and witch kings have no need for artifice and are distrustful of the threat it represents to them
			if = {
				limit = {
					ruler_has_personality = mage_personality
				}
				subtract_variable = {
					which = ArtificePointsMultiplier
					value = 0.4
				}
			}
			if = {
				limit = {
					OR = {
						has_ruler_modifier = witch_king_modifier
						has_country_flag = witch_king_flag
					}
				}
				subtract_variable = {
					which = ArtificePointsMultiplier
					value = 0.25
				}
			}

			else_if = {
				limit = {
					OR = {
						has_government_attribute = is_feiten_keju
						has_government_attribute = is_plumstead_technocracy
					}
				}
				change_variable = {
					which = ArtificePointsMultiplier
					value = 0.25
				}
			}
			
			# Floor at 0
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = ArtificePointsMultiplier
							value = 0
						}
					}
				}
				set_variable = {
					which = ArtificePointsMultiplier
					value = 0
				}
			}
			else = {
				multiply_variable = {
					which = MaxArtificePoints
					which = ArtificePointsMultiplier
				}
			}

			# Floor at 0
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = MaxArtificePoints
							value = 0
						}
					}
				}
				set_variable = {
					which = MaxArtificePoints
					value = 0
				}
			}

			set_variable = {
				which = RemainingArtificePoints
				value = 0
			}

			change_variable = {
				which = RemainingArtificePoints
				which = MaxArtificePoints
			}

			subtract_variable = {
				which = RemainingArtificePoints
				which = ArtificeUpkeep
			}

			# If over capacity
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = RemainingArtificePoints
							value = 0
						}
					}
				}
				add_country_modifier = { name =  artificers_over_artifice_capacity duration = -1 }
			}
			else = {
				remove_country_modifier = artificers_over_artifice_capacity
			}
		}
	}
}

research_speed = {
	hidden_effect = {
		if = {
			limit = {
				has_country_flag = artifice_research_fast
			}
			set_variable = {
				which = ResearchSpeed
				value = 5
			}
		}
		else_if = {
			limit = {
				has_country_flag = artifice_research_slow
			}
			set_variable = {
				which = ResearchSpeed
				value = 15
			}
		}
		else = {
			set_variable = {
				which = ResearchSpeed
				value = 10
			}
		}
		if = {
			limit = {
				has_estate_privilege = estate_artificers_relic_fueled_artificery
			}
			multiply_variable = {
				which = ResearchSpeed
				value = 0.8
			}
		}
	}
}

set_up_artifice_system = {
	if = {
		limit = {
			NOT = {
				has_country_flag = artifice_set_up
			}
		}
		#set_variable = {  #according to Heho, variables are initialized by anything that affects them
		#	which = MaxArtificePoints
		#	value = 0
		#}
		set_variable = {
			which = StaticArtificePoints
			value = 0
		}
		set_variable = {
			which = ArtificeUpkeep
			value = 0
		}
		set_country_flag = artifice_set_up
	}
	update_artifice_points = yes
}

artifice_granted_basic = {
	custom_tooltip = increases_our_artifice_upkeep_by_10
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 10
		}
	}
	update_artifice_points = yes
}

artifice_remove_basic = {
	custom_tooltip = decreases_our_artifice_upkeep_by_10
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 10
		}
	}
	update_artifice_points = yes
}

artifice_granted_advanced = {
	custom_tooltip = increases_our_artifice_upkeep_by_20
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 20
		}
	}
	update_artifice_points = yes
}

artifice_remove_advanced = {
	custom_tooltip = decreases_our_artifice_upkeep_by_20
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 20
		}
	}
	update_artifice_points = yes
}

artifice_granted_expert = {
	custom_tooltip = increases_our_artifice_upkeep_by_30
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 30
		}
	}
	update_artifice_points = yes
}

artifice_remove_expert = {
	custom_tooltip = decreases_our_artifice_upkeep_by_30
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 30
		}
	}
	update_artifice_points = yes
}


artifice_granted_masterwork = {
	custom_tooltip = increases_our_artifice_upkeep_by_40
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		change_variable = {
			which = ArtificeUpkeep
			value = 40
		}
	}
	update_artifice_points = yes
}

artifice_remove_masterwork = {
	custom_tooltip = decreases_our_artifice_upkeep_by_40
	custom_tooltip = artificer_points_upkeep_tt
	hidden_effect = {
		subtract_variable = {
			which = ArtificeUpkeep
			value = 40
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_1 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_1_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 1
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_2 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_2_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 2
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_3 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_3_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 3
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_4 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_4_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 4
		}
	}
	update_artifice_points = yes
}

mission_reward_artifice_points_5 = {
	custom_tooltip = permanently_increases_our_artifice_points_by_5_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = 5
		}
	}
	update_artifice_points = yes
}

debuff_artifice_points_2 = {
	custom_tooltip = permanently_decreases_our_artifice_points_by_2_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = -2
		}
	}
	update_artifice_points = yes
}

debuff_artifice_points_5 = {
	custom_tooltip = permanently_decreases_our_artifice_points_by_5_tt
	hidden_effect = {
		change_variable = {
			which = StaticArtificePoints
			value = -5
		}
	}
	update_artifice_points = yes
}

#research rewards

artifice_research_rewards = {
	random_list = {
		#brill

		# Brilliance - society
		10 = {
			set_country_flag = unlocked_artifice_invention_arithmatons
			# custom_tooltip = invention_arithmatons_tt
			ROOT = { country_event = { id = artifice_inventions.100 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_arithmatons
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_apparitional_communicator
			ROOT = { country_event = { id = artifice_inventions.101 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_apparitional_communicator
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_mystic_ciphers
			ROOT = { country_event = { id = artifice_inventions.102 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_mystic_ciphers
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_viewcatcher
			# custom_tooltip = invention_viewcatcher_tt
			ROOT = { country_event = { id = artifice_inventions.103 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_viewcatcher
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_conversation_calibrator
			ROOT = { country_event = { id = artifice_inventions.104 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_conversation_calibrator
			}
			modifier = {
				factor = 0
				NOT = {
					culture_group = gnomish
				}
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_centipedal_chests
		# 	ROOT = { country_event = { id = artifice_inventions.105 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_brilliance
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_society }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_centipedal_chests
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_god_fragment_decoder
			ROOT = { country_event = { id = artifice_inventions.106 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_god_fragment_decoder
			}
			modifier = {
				factor = 0
				NOT = { religion = ravelian }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_sunblotter_cream
			ROOT = { country_event = { id = artifice_inventions.107 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_sunblotter_cream
			}
			modifier = {
				factor = 0
				NOT = { has_estate = estate_vampires }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_talking_god_temples
			ROOT = { country_event = { id = artifice_inventions.108 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_talking_god_temples
			}
			modifier = {
				factor = 0
				NOT = { religion = gods_of_the_taychend }
			}
		}

		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_thinkquik_drink_mix
		# 	ROOT = { country_event = { id = artifice_inventions.109 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_brilliance
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_society }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_thinkquik_drink_mix
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { religion = the_thought }
		# 	}
		# }
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_wondrous_lunchbox
		# 	ROOT = { country_event = { id = artifice_inventions.110 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_brilliance
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_society }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_wondrous_lunchbox
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { culture_group = halfling }
		# 	}
		# }

		# Brilliance - industry & state
		10 = {
			set_country_flag = unlocked_artifice_invention_brass_prosthesis
			# custom_tooltip = invention_brass_prosthesis_tt
			ROOT = { country_event = { id = artifice_inventions.200 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_brass_prosthesis
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_artificer_exo_arms
			# custom_tooltip = invention_artificer_exo_arms_tt
			ROOT = { country_event = { id = artifice_inventions.201 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_artificer_exo_arms
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_t_wave_transceivers
			# custom_tooltip = invention_t_wave_transceivers_tt
			ROOT = { country_event = { id = artifice_inventions.202 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_t_wave_transceivers
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_mechanim_workforce
			ROOT = { country_event = { id = artifice_inventions.203 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_mechanim_workforce
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_artificial_egg_surrogates
			ROOT = { country_event = { id = artifice_inventions.204 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates
			}
			modifier = {
				factor = 0
				NOT = { culture_group = harpy }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_automated_translator
			ROOT = { country_event = { id = artifice_inventions.205 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_automated_translator
			}
			modifier = {
				factor = 0
				NOT = { primary_culture = west_damerian }
				NOT = { primary_culture = east_damerian }
				NOT = { primary_culture = rogieran }
				NOT = { primary_culture = nurcestiran }
				NOT = { primary_culture = ancardian }
				NOT = { primary_culture = anbenncoster }
				NOT = { primary_culture = anbenlander }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_great_processor
			ROOT = { country_event = { id = artifice_inventions.206 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_great_processor
			}
			modifier = {
				factor = 0
				NOT = { religion = feast_of_the_gods }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_prehensile_tail_attachments
			ROOT = { country_event = { id = artifice_inventions.207 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments
			}
			modifier = {
				factor = 0
				NOT = { culture_group = kobold }
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_soarwing_grafts
		# 	ROOT = { country_event = { id = artifice_inventions.208 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_brilliance
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_industry }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_soarwing_grafts
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { culture_group = kobold }
		# 	}
		# }

		# Brilliance - warfare & armaments
		10 = {
			set_country_flag = unlocked_artifice_invention_balloonboost_packs
			# custom_tooltip = invention_sparkdrive_rifles_tt
			ROOT = { country_event = { id = artifice_inventions.300 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_balloonboost_packs
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_sparkdrive_rifles
			# custom_tooltip = invention_sparkdrive_rifles_tt
			ROOT = { country_event = { id = artifice_inventions.301 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_sparkdrive_rifles
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_mechanim_soldiers
			# custom_tooltip = invention_mechanim_soldiers_tt
			ROOT = { country_event = { id = artifice_inventions.302 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_mechanim_soldiers
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb
			ROOT = { country_event = { id = artifice_inventions.303 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb
			}
			modifier = {
				factor = 0
				NOT = { culture_group = goblin }
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_ancestral_guardian_golems
			ROOT = { country_event = { id = artifice_inventions.304 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_ancestral_guardian_golems
			}
			modifier = {
				factor = 0
				NOT = { religion = ancestor_worship }
			}
			modifier = {
				factor = 0
				has_country_flag = asra_model_golems_unlocked
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_artifice_hunting_masks
		# 	ROOT = { country_event = { id = artifice_inventions.305 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_brilliance
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_military }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_artifice_hunting_masks
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { religion = kalun_masks }
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum
			ROOT = { country_event = { id = artifice_inventions.306 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum
			}
			modifier = {
				factor = 0
				NOT = { religion_group = cannorian }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_codorran_powered_exosuit
			ROOT = { country_event = { id = artifice_inventions.307 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = gnomish_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_demonflame_flamethrowers
			ROOT = { country_event = { id = artifice_inventions.308 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers
			}
			modifier = {
				factor = 0
				NOT = { religion = xhazobkult }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors
			ROOT = { country_event = { id = artifice_inventions.309 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = kobold_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_dragonscale_plating
			ROOT = { country_event = { id = artifice_inventions.310 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_dragonscale_plating
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = kobold_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_eplusplus_compound
			ROOT = { country_event = { id = artifice_inventions.311 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_eplusplus_compound
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = goblin_military }
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels
			ROOT = { country_event = { id = artifice_inventions.312 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels
			}
			modifier = {
				factor = 0
				NOT = { culture_group = kheionai_ruinborn_elf }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_lullaby_cannon
			ROOT = { country_event = { id = artifice_inventions.313 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_lullaby_cannon
			}
			modifier = {
				factor = 0
				NOT = { religion = skaldhyrric_faith }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_power_fists
			ROOT = { country_event = { id = artifice_inventions.314 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_power_fists
			}
			modifier = {
				factor = 0
				NOT = { religion = righteous_path }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_sunbeam_armaments
			ROOT = { country_event = { id = artifice_inventions.315 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_sunbeam_armaments
			}
			modifier = {
				factor = 0
				NOT = { religion_group = bulwari }
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_warfare_simulator
		# 	ROOT = { country_event = { id = artifice_inventions.316 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_brilliance
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_military }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_warfare_simulator
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { culture_group = hobgoblin }
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_arcane_blaster
			ROOT = { country_event = { id = artifice_inventions.317 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_arcane_blaster
			}
		}



		# Technomancy - society & trade
		10 = {
			set_country_flag = unlocked_artifice_invention_sending_stones
			# custom_tooltip = invention_sending_stones_tt
			ROOT = { country_event = { id = artifice_inventions.400 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_sending_stones
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_crierless_crier_device
			# custom_tooltip = invention_crierless_crier_device_tt
			ROOT = { country_event = { id = artifice_inventions.401 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_crierless_crier_device
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_living_mirrors
			# custom_tooltip = invention_living_mirrors_tt
			ROOT = { country_event = { id = artifice_inventions.402 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_living_mirrors
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_game_of_khet
			ROOT = { country_event = { id = artifice_inventions.404 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_game_of_khet
			}
			modifier = {
				factor = 0
				NOT = { religion_group = khetist }
				NOT = { has_harmonized_with = khetist }
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_fey_spray
		# 	ROOT = { country_event = { id = artifice_inventions.403 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_technomancy
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_society }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_fey_spray
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { religion_group = fey_religion }
		# 	}
		# }

		# Technomany - Industry & State
		10 = {
			set_country_flag = unlocked_artifice_invention_vendorless_stall
			# custom_tooltip = invention_vendorless_stall_tt
			ROOT = { country_event = { id = artifice_inventions.500 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_vendorless_stall
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_spell_in_a_box
			# custom_tooltip = invention_spell_in_a_box_tt
			ROOT = { country_event = { id = artifice_inventions.501 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_spell_in_a_box
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_chi_cultivation_charm
			ROOT = { country_event = { id = artifice_inventions.502 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_chi_cultivation_charm
			}
			modifier = {
				factor = 0
				NOT = { religion = lefthand_path }
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_weather_predicticator
		# 	ROOT = { country_event = { id = artifice_inventions.503 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_technomancy
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_industry }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_weather_predicticator
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { culture_group = eordan_ruinborn_elf }
		# 	}
		# }

		# Technomany - Warfare & Armaments
		10 = {
			set_country_flag = unlocked_artifice_invention_vorpal_bullets
			# custom_tooltip = invention_vorpal_bullets_tt
			ROOT = { country_event = { id = artifice_inventions.600 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_vorpal_bullets
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_war_golems
			# custom_tooltip = invention_war_golems_tt
			ROOT = { country_event = { id = artifice_inventions.601 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_war_golems
			}
			modifier = {
				factor = 0
				has_country_flag = asra_model_golems_unlocked
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_wandlocks
			# custom_tooltip = invention_wandlocks_tt
			ROOT = { country_event = { id = artifice_inventions.602 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_wandlocks
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_personal_mageshields
			# custom_tooltip = invention_personal_mageshields_tt
			ROOT = { country_event = { id = artifice_inventions.603 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_personal_mageshields
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_antimagic_field_generator
		# 	ROOT = { country_event = { id = artifice_inventions.604 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_technomancy
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_military }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_antimagic_field_generator
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { religion = ravelian }
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_controlled_rage_serum
			ROOT = { country_event = { id = artifice_inventions.605 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_controlled_rage_serum
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = orcish_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_elemental_gunpowder
			ROOT = { country_event = { id = artifice_inventions.606 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_elemental_gunpowder
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = goblin_military }
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_vernman_hero_tonic
			ROOT = { country_event = { id = artifice_inventions.607 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_vernman_hero_tonic
			}
			modifier = {
				factor = 0
				NOT = { primary_culture = vernman }
				NOT = { primary_culture = valorman }
				NOT = { primary_culture = heartman }
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_veykoda_rune_protections
		# 	ROOT = { country_event = { id = artifice_inventions.608 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_technomancy
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_military }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_veykoda_rune_protections
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { culture_group = ynnic_ruinborn_elf }
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_box_of_holding
			ROOT = { country_event = { id = artifice_inventions.609 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_box_of_holding
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_growth_beans
			ROOT = { country_event = { id = artifice_inventions.610 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 10
				tag = Y65
				any_owned_province = {
					has_province_modifier = arawkelin_soil_erosion
				}
			}
			modifier = {
				factor = 20
				num_of_owned_provinces_with = {
					value = 10
					has_province_modifier = arawkelin_soil_erosion
				}
			}
			modifier = {
				factor = 50
				num_of_owned_provinces_with = {
					value = 20
					has_province_modifier = arawkelin_soil_erosion
				}
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_growth_beans
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_magic_missile_deployer
			ROOT = { country_event = { id = artifice_inventions.611 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_magic_missile_deployer
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_naval_mageshields
			ROOT = { country_event = { id = artifice_inventions.612 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_naval_mageshields
			}
		}



		# Mechanists - Society & Trade
		10 = {
			set_country_flag = unlocked_artifice_invention_remedial_tinctures
			# custom_tooltip = invention_remedial_tinctures_tt
			ROOT = { country_event = { id = artifice_inventions.700 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_remedial_tinctures
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_elemental_locomotives
			# custom_tooltip = invention_elemental_locomotives_tt
			ROOT = { country_event = { id = artifice_inventions.701 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_elemental_locomotives
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_burrower_arms
			# custom_tooltip = invention_burrower_arms_tt
			ROOT = { country_event = { id = artifice_inventions.702 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_burrower_arms
			}
			modifier = {
				factor = 0
				NOT = { culture_group = kobold }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_divendancer_speedboat
			# custom_tooltip = invention_divendancer_speedboat_tt
			ROOT = { country_event = { id = artifice_inventions.703 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_divendancer_speedboat
			}
			modifier = {
				factor = 0
				NOT = { OR = { culture_group = businori tag = A33 } }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_scrapperclaws
			# custom_tooltip = invention_scrapperclaws_tt
			ROOT = { country_event = { id = artifice_inventions.704 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_scrapperclaws
			}
			modifier = {
				factor = 0
				NOT = { culture_group = gnollish }
			}
		}


		# Mechanists - Industry & State
		10 = {
			set_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories
			# custom_tooltip = invention_remedial_tinctures_tt
			ROOT = { country_event = { id = artifice_inventions.800 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories
			}
			modifier = {
				factor = 0
				NOT = { culture_group = alenic }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_city_maintenance_bots
			# custom_tooltip = invention_remedial_tinctures_tt
			ROOT = { country_event = { id = artifice_inventions.801 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_city_maintenance_bots
			}
			modifier = {
				factor = 0
				NOT = { culture_group = triunic }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_fine_print_obfuscator
			# custom_tooltip = invention_fine_print_obfuscator_tt
			ROOT = { country_event = { id = artifice_inventions.802 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_fine_print_obfuscator
			}
			modifier = {
				factor = 0
				NOT = { primary_culture = crownsman }
				NOT = { primary_culture = ionnic }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_mechanim_handymen
			# custom_tooltip = invention_fine_print_obfuscator_tt
			ROOT = { country_event = { id = artifice_inventions.803 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_mechanim_handymen
			}
			modifier = {
				factor = 0
				NOT = { culture_group = gnomish }
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_pearl_cultivators
		# 	# custom_tooltip = invention_fine_print_obfuscator_tt
		# 	ROOT = { country_event = { id = artifice_inventions.804 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_machinery
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_industry }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_pearl_cultivators
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = {
		# 			primary_culture = pearlsedger
		# 			#culture_group = baashiwati
		# 		}
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_superfast_elevators
			ROOT = { country_event = { id = artifice_inventions.805 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_superfast_elevators
			}
			modifier = {
				factor = 0
				NOT = { culture_group = dwarven }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_wine_ageifier
			# custom_tooltip = invention_wine_ageifier_tt
			ROOT = { country_event = { id = artifice_inventions.806 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_wine_ageifier
			}
			modifier = {
				factor = 0
				NOT = { culture_group = lencori }
				NOT = { primary_culture = rosanda }
			}
		}
		10 = {
			trigger = { has_institution = industrialization }
			set_country_flag = unlocked_artifice_invention_commercial_sky_galleons
			# custom_tooltip = invention_commercial_sky_galleons_tt
			ROOT = { country_event = { id = artifice_inventions.808 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_commercial_sky_galleons
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_self_cleaning_parchment
			# custom_tooltip = invention_self_cleaning_parchment_tt
			ROOT = { country_event = { id = artifice_inventions.809 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_self_cleaning_parchment
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_high_velocity_irrigation
		# 	# custom_tooltip = invention_remedial_tinctures_tt
		# 	ROOT = { country_event = { id = artifice_inventions.810 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_machinery
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_industry }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_high_velocity_irrigation
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { culture_group = bulwari }
		# 	}
		# }
		10 = {
			set_country_flag = unlocked_artifice_invention_gene_food_cultivation
			ROOT = { country_event = { id = artifice_inventions.914 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_gene_food_cultivation
			}
		}


		# Mechanists - Warfare & Armaments
		10 = {
			set_country_flag = unlocked_artifice_invention_chase_em_rockets
			# custom_tooltip = invention_chase_em_rockets_tt
			ROOT = { country_event = { id = artifice_inventions.900 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_chase_em_rockets
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = goblin_military }
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_giantshape_warframe
			# custom_tooltip = invention_giantshape_warframe_tt
			ROOT = { country_event = { id = artifice_inventions.901 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_giantshape_warframe
			}
			modifier = {
				factor = 0
				NOT = { 		
					OR = {
						has_country_modifier = troll_military
						has_country_modifier = ogre_military
					} 
				}
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_gu_boats
			# custom_tooltip = invention_gu_boats_tt
			ROOT = { country_event = { id = artifice_inventions.902 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_gu_boats
			}
			modifier = {
				factor = 0
				NOT = { culture_group = gnomish }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_gyrocopters
			# custom_tooltip = invention_gyrocopters_tt
			ROOT = { country_event = { id = artifice_inventions.903 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_gyrocopters
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = dwarven_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_platinum_warsuit
			# custom_tooltip = invention_platinum_warsuit_tt
			ROOT = { country_event = { id = artifice_inventions.904 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_platinum_warsuit
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = dwarven_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_predator_exoskeleton
			# custom_tooltip = invention_predator_exoskeleton_tt
			ROOT = { country_event = { id = artifice_inventions.905 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_predator_exoskeleton
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = harimari_military }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_scrap_mechs
			# custom_tooltip = invention_scrap_mechs_tt
			ROOT = { country_event = { id = artifice_inventions.906 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_scrap_mechs
			}
			modifier = {
				factor = 0
				NOT = { has_country_modifier = goblin_military }
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_war_rigs
			# custom_tooltip = invention_war_rigs_tt
			ROOT = { country_event = { id = artifice_inventions.907 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_war_rigs
			}
			modifier = {
				factor = 0
				NOT = { culture_group = taychendi_ruinborn_elf }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_wind_invokers
			# custom_tooltip = invention_wind_invokers_tt
			ROOT = { country_event = { id = artifice_inventions.908 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_wind_invokers
			}
			modifier = {
				factor = 0
				NOT = { religion = irdaeos_worship }
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_portable_turrets
			# custom_tooltip = invention_portable_turrets_tt
			ROOT = { country_event = { id = artifice_inventions.909 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_portable_turrets
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_black_damestear_bullets
			# custom_tooltip = invention_black_damestear_bullets_tt
			ROOT = { country_event = { id = artifice_inventions.910 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_black_damestear_bullets
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_artillery_autoloader
			# custom_tooltip = invention_artillery_autoloader_tt
			ROOT = { country_event = { id = artifice_inventions.911 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_artillery_autoloader
			}
		}
		# 10 = {
		# 	set_country_flag = unlocked_artifice_invention_prototype_tanks
		# 	# custom_tooltip = invention_prototype_tanks_tt
		# 	ROOT = { country_event = { id = artifice_inventions.912 } }
		# 	modifier = {
		# 		factor = 2
		# 		has_country_flag = artifice_research_machinery
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		NOT = { has_country_flag = artifice_research_military }
		# 	}
		# 	modifier = {
		# 		factor = 0
		# 		has_country_flag = unlocked_artifice_invention_prototype_tanks
		# 	}
		# }
		10 = {
			trigger = { has_institution = industrialization }
			set_country_flag = unlocked_artifice_invention_military_sky_galleons
			# custom_tooltip = invention_military_sky_galleons_tt
			ROOT = { country_event = { id = artifice_inventions.913 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_flag = unlocked_artifice_invention_military_sky_galleons
			}
		}
		10 = {
			set_country_flag = unlocked_artifice_invention_spirit_proof_exoskeleton
			# custom_tooltip = invention_spirit_proof_exoskeleton
			ROOT = { country_event = { id = artifice_inventions.916 }}
			modifier = {
				factor = 2
				tag = Y65
			}
			modifier = {
				factor = 0
				NOT = { tag = Y65 }
			}
		}

		# Feiten stuff
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_farsight_telescopes
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			set_country_flag = feiten_invention_farsight_telescopes
			ROOT = { country_event = { id = flavor_feiten.250 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_porcelain_caged_firebirds
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			set_country_flag = feiten_invention_porcelain_caged_firebirds
			ROOT = { country_event = { id = flavor_feiten.251 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_specialized_construction_arms
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			set_country_flag = feiten_invention_specialized_construction_arms
			ROOT = { country_event = { id = flavor_feiten.252 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_expanding_storage_holds
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			set_country_flag = feiten_invention_expanding_storage_holds
			ROOT = { country_event = { id = flavor_feiten.253 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_skywriting
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			set_country_flag = feiten_invention_skywriting
			ROOT = { country_event = { id = flavor_feiten.254 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_electroplated_armor
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			set_country_flag = feiten_invention_electroplated_armor
			ROOT = { country_event = { id = flavor_feiten.255 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_ivory_conduits
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			set_country_flag = feiten_invention_ivory_conduits
			ROOT = { country_event = { id = flavor_feiten.256 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_silken_cladding
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			set_country_flag = feiten_invention_silken_cladding
			ROOT = { country_event = { id = flavor_feiten.257 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_damestear_ribbing
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			set_country_flag = feiten_invention_damestear_ribbing
			ROOT = { country_event = { id = flavor_feiten.258 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_long_rockets
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			set_country_flag = feiten_invention_long_rockets
			ROOT = { country_event = { id = flavor_feiten.259 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_lightning_amplifier
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			set_country_flag = feiten_invention_lightning_amplifier
			ROOT = { country_event = { id = flavor_feiten.260 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_steel_rudders
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			set_country_flag = feiten_invention_steel_rudders
			ROOT = { country_event = { id = flavor_feiten.261 } }
		}

		# Allclan Stuff

		50 = {
			trigger = { OR = { tag = I98 was_tag = I98 } }
			set_country_flag = I98_unlocked_artifice_invention_drill_shells
			ROOT = { country_event = { id = allclan.1001 } }
			modifier = {
				factor = 0
				has_country_flag = I98_unlocked_artifice_invention_drill_shells
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		50 = {
			trigger = { OR = { tag = I98 was_tag = I98 } }
			set_country_flag = I98_unlocked_artifice_invention_super_boots
			ROOT = { country_event = { id = allclan.1002 } }
			modifier = {
				factor = 0
				has_country_flag = I98_unlocked_artifice_invention_super_boots
			}
			modifier = {
				factor = 5
				has_estate_privilege = estate_artificers_organization_discombobulatorium
			}
		}
		
		#Breluslad Stuff
		50 = {
			trigger = { tag = G27 has_country_flag = g27_breluslad_flag }
			modifier = {
				factor = 0
				has_country_flag = g27_unlocked_watermills
			}
			modifier = {
				factor = 0.5
				has_country_flag = artifice_research_military
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_industry
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 1000
				has_estate_influence_modifier = {
					estate = estate_burghers
					modifier = G27_requested_architect_desc
				}
			}
			set_country_flag = g27_unlocked_watermills
			ROOT = { country_event = { id = flavour_brelar.100 } }
		}
		50 = {
			trigger = { tag = G27 has_country_flag = g27_breluslad_flag has_country_flag = g27_unlocked_watermills }
			modifier = {
				factor = 0
				has_country_flag = g27_unlocked_riverways
			}
			modifier = {
				factor = 0.5
				has_country_flag = artifice_research_military
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_industry
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 100
				has_estate_influence_modifier = {
					estate = estate_burghers
					modifier = G27_requested_architect_desc
				}
			}
			modifier = {
				factor = 1000
				has_estate_privilege = estate_artificers_clockwork_architects
			}
			set_country_flag = g27_unlocked_riverways
			ROOT = { country_event = { id = flavour_brelar.101 } }
		}


		#bonuses as fallback
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1000 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_machinery_mil
			}
		}
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1001 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_machinery_ind
			}
		}
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1002 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_machinery
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_machinery_society
			}
		}

		1 = {
			ROOT = { country_event = { id = artifice_inventions.1003 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_technomancy_mil
			}
		}
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1004 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_technomancy_ind
			}
		}
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1005 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_technomancy
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_technomancy_society
			}
		}

		1 = {
			ROOT = { country_event = { id = artifice_inventions.1006 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_military }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_brilliance_mil
			}
		}
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1007 } }
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_industry }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_brilliance_ind
			}
		}
		1 = {
			ROOT = { country_event = { id = artifice_inventions.1008 } }
			add_country_modifier = {
				name = artificer_research_bonus_brilliance_society
				duration = 3650
			}
			modifier = {
				factor = 2
				has_country_flag = artifice_research_brilliance
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = artifice_research_society }
			}
			modifier = {
				factor = 0
				has_country_modifier = artificer_research_bonus_brilliance_society
			}
		}
	}

	#cleanup
	clr_country_flag = artifice_research_brilliance
	clr_country_flag = artifice_research_technomancy
	clr_country_flag = artifice_research_machinery

	clr_country_flag = artifice_research_society
	clr_country_flag = artifice_research_industry
	clr_country_flag = artifice_research_military
	clr_country_flag = feiten_directed_airfleet_research
}

airfleet_research_rewards = {
	random_list = {
		# Feiten stuff
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_farsight_telescopes
			}
			set_country_flag = feiten_invention_farsight_telescopes
			ROOT = { country_event = { id = flavor_feiten.250 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_porcelain_caged_firebirds
			}
			set_country_flag = feiten_invention_porcelain_caged_firebirds
			ROOT = { country_event = { id = flavor_feiten.251 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_specialized_construction_arms
			}
			set_country_flag = feiten_invention_specialized_construction_arms
			ROOT = { country_event = { id = flavor_feiten.252 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_expanding_storage_holds
			}
			set_country_flag = feiten_invention_expanding_storage_holds
			ROOT = { country_event = { id = flavor_feiten.253 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_skywriting
			}
			set_country_flag = feiten_invention_skywriting
			ROOT = { country_event = { id = flavor_feiten.254 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_electroplated_armor
			}
			set_country_flag = feiten_invention_electroplated_armor
			ROOT = { country_event = { id = flavor_feiten.255 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_ivory_conduits
			}
			set_country_flag = feiten_invention_ivory_conduits
			ROOT = { country_event = { id = flavor_feiten.256 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_silken_cladding
			}
			set_country_flag = feiten_invention_silken_cladding
			ROOT = { country_event = { id = flavor_feiten.257 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_damestear_ribbing
			}
			set_country_flag = feiten_invention_damestear_ribbing
			ROOT = { country_event = { id = flavor_feiten.258 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_long_rockets
			}
			set_country_flag = feiten_invention_long_rockets
			ROOT = { country_event = { id = flavor_feiten.259 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_lightning_amplifier
			}
			set_country_flag = feiten_invention_lightning_amplifier
			ROOT = { country_event = { id = flavor_feiten.260 } }
		}
		50 = {
			trigger = { OR = { tag = Y20 was_tag = Y20 } }
			modifier = {
				factor = 0
				has_country_flag = feiten_invention_steel_rudders
			}
			set_country_flag = feiten_invention_steel_rudders
			ROOT = { country_event = { id = flavor_feiten.261 } }
		}
	}

	#cleanup
	clr_country_flag = artifice_research_brilliance
	clr_country_flag = artifice_research_technomancy
	clr_country_flag = artifice_research_machinery

	clr_country_flag = artifice_research_society
	clr_country_flag = artifice_research_industry
	clr_country_flag = artifice_research_military
	clr_country_flag = feiten_directed_airfleet_research
}

#New Stuff - River
create_leader_scaling_with_tradition_artifice = {
	if = {
		limit = {
			$type$_tradition = 80
		}
		create_$leader$ = {
			tradition = 100
			add_fire = 3
		}
	}
	else_if = {
		limit = {
			$type$_tradition = 70
		}
		create_$leader$ = {
			tradition = 90
			add_fire = 3
		}
	}
	else_if = {
		limit = {
			$type$_tradition = 60
		}
		create_$leader$ = {
			tradition = 80
			add_fire = 3
		}
	}
	else_if = {
		limit = {
			$type$_tradition = 50
		}
		create_$leader$ = {
			tradition = 70
			add_fire = 2
		}
	}
	else_if = {
		limit = {
			$type$_tradition = 40
		}
		create_$leader$ = {
			tradition = 60
			add_fire = 2
		}
	}
	else_if = {
		limit = {
			$type$_tradition = 30
		}
		create_$leader$ = {
			tradition = 50
			add_fire = 2
		}
	}
	else = {
		create_$leader$ = {
			tradition = 40
			add_fire = 2
		}
	}
	custom_tooltip = create_leader_scaling_with_tradition_tt
}
estate_action_GRANT_GENERALSHIP_ARTIFICE = {
	create_leader_scaling_with_tradition_artifice = {
		leader = general
		type = army
	}
	add_estate_loyalty = {
		estate = estate_artificers
		loyalty = -10
	}
}

#Research Scripted Effect - Randomization Of Inventions
artifice_research_select_innovation_options_effect = {

	#Normal Research Options - Iterated until variable hits 0 - Tier 1
	if = {
		limit = {
			check_variable = {
				which = artificeResearchOptionsTier1
				value = 1
			}
		}

		random_list = {
			#Economic Inventions - Tier 1
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_artificer_exo_arms
							has_country_flag = unlocked_artifice_invention_artificer_exo_arms
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_artificer_exo_arms
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_spell_in_a_box
							has_country_flag = unlocked_artifice_invention_spell_in_a_box
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_spell_in_a_box
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_commercial_sky_galleons
							has_country_flag = unlocked_artifice_invention_commercial_sky_galleons
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_commercial_sky_galleons
			}
			#Military Inventions - Tier 1
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_portable_turrets
							has_country_flag = unlocked_artifice_invention_portable_turrets
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_portable_turrets
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_sparkdrive_rifles
							has_country_flag = unlocked_artifice_invention_sparkdrive_rifles
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_sparkdrive_rifles
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_vorpal_bullets
							has_country_flag = unlocked_artifice_invention_vorpal_bullets
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_vorpal_bullets
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_magic_missile_deployer
							has_country_flag = unlocked_artifice_invention_magic_missile_deployer
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_magic_missile_deployer
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_box_of_holding
							has_country_flag = unlocked_artifice_invention_box_of_holding
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_box_of_holding
			}
			#Society Inventions  - Tier 1
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_viewcatcher
							has_country_flag = unlocked_artifice_invention_viewcatcher
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_viewcatcher
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_sending_stones
							has_country_flag = unlocked_artifice_invention_sending_stones
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_sending_stones
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_centipedal_chests
							has_country_flag = unlocked_artifice_invention_centipedal_chests
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_centipedal_chests
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_living_mirrors
							has_country_flag = unlocked_artifice_invention_living_mirrors
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_living_mirrors
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_apparitional_communicator
							has_country_flag = unlocked_artifice_invention_apparitional_communicator
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_apparitional_communicator
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_mystic_ciphers
							has_country_flag = unlocked_artifice_invention_mystic_ciphers
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_mystic_ciphers
			}
			#Special Inventions  - Tier 1
			#Economic
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_fine_print_obfuscator
							has_country_flag = unlocked_artifice_invention_fine_print_obfuscator
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						primary_culture = crownsman
						primary_culture = ionnic
					}
				}
				set_country_flag = research_artifice_invention_fine_print_obfuscator
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_automated_translator
							has_country_flag = unlocked_artifice_invention_automated_translator
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						primary_culture = west_damerian
						primary_culture = east_damerian
						primary_culture = rogieran
						primary_culture = nurcestiran
						primary_culture = ancardian
						primary_culture = anbenncoster
						primary_culture = anbenlander
					}
				}
				set_country_flag = research_artifice_invention_automated_translator
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_wine_ageifier
							has_country_flag = unlocked_artifice_invention_wine_ageifier
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						culture_group = lencori
						primary_culture = rosanda
					}
				}
				set_country_flag = research_artifice_invention_wine_ageifier
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_pearl_cultivators
							has_country_flag = unlocked_artifice_invention_pearl_cultivators
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					primary_culture = pearlsedger

				}
				set_country_flag = research_artifice_invention_pearl_cultivators
			}
			#Military
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_ancestral_guardian_golems
							has_country_flag = unlocked_artifice_invention_ancestral_guardian_golems
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						
					}
				}
				set_country_flag = research_artifice_invention_ancestral_guardian_golems
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_antimagic_field_generator
							has_country_flag = unlocked_artifice_invention_antimagic_field_generator
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					religion = ravelian
				}
				set_country_flag = research_artifice_invention_antimagic_field_generator
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_believable_ruin_2_bomb
							has_country_flag = unlocked_artifice_invention_believable_ruin_2_bomb
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = goblin
				}
				set_country_flag = research_artifice_invention_believable_ruin_2_bomb
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_vernman_hero_tonic
							has_country_flag = unlocked_artifice_invention_vernman_hero_tonic
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						primary_culture = vernman
						primary_culture = valorman
						primary_culture = heartman
					}
				}
				set_country_flag = research_artifice_invention_vernman_hero_tonic
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_dragonscale_plating
							has_country_flag = unlocked_artifice_invention_dragonscale_plating
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = kobold_military
				}
				set_country_flag = research_artifice_invention_dragonscale_plating
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_predator_exoskeleton
							has_country_flag = unlocked_artifice_invention_predator_exoskeleton
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = harimari_military
				}
				set_country_flag = research_artifice_invention_predator_exoskeleton
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_scrap_mechs
							has_country_flag = unlocked_artifice_invention_scrap_mechs
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = goblin_military
				}
				set_country_flag = research_artifice_invention_scrap_mechs
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_war_rigs
							has_country_flag = unlocked_artifice_invention_war_rigs
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = taychendi_ruinborn_elf
				}
				set_country_flag = research_artifice_invention_war_rigs
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_sunbeam_armaments
							has_country_flag = unlocked_artifice_invention_sunbeam_armaments
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = bulwari
				}
				set_country_flag = research_artifice_invention_sunbeam_armaments
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_power_fists
							has_country_flag = unlocked_artifice_invention_power_fists
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					religion = righteous_path
				}
				set_country_flag = research_artifice_invention_power_fists
			}
			#Society
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_fey_spray
							has_country_flag = unlocked_artifice_invention_fey_spray
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					religion_group = fey_religion
				}
				set_country_flag = research_artifice_invention_fey_spray
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_scrapperclaws
							has_country_flag = unlocked_artifice_invention_scrapperclaws
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					culture_group = gnollish
				}
				set_country_flag = research_artifice_invention_scrapperclaws
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_great_processor
							has_country_flag = unlocked_artifice_invention_great_processor
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					religion = feast_of_the_gods
				}
				set_country_flag = research_artifice_invention_great_processor
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_conversation_calibrator
							has_country_flag = unlocked_artifice_invention_conversation_calibrator
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					culture_group = gnomish
				}
				set_country_flag = research_artifice_invention_conversation_calibrator
			}
		}
		subtract_variable = {
			which = artificeResearchOptionsTier1
			value = 1
		}
	}

	#Advanced Research Options - Iterated until variable hits 0 - Tier 2
	if = {
		limit = {
			check_variable = {
				which = artificeResearchOptionsTier2
				value = 1
			}
		}

		random_list = {
			#Economic Inventions - Tier 2
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_growth_beans
							has_country_flag = unlocked_artifice_invention_growth_beans
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_growth_beans
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_vendorless_stall
							has_country_flag = unlocked_artifice_invention_vendorless_stall
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_vendorless_stall
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_brass_prosthesis
							has_country_flag = unlocked_artifice_invention_brass_prosthesis
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_brass_prosthesis
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_gene_food_cultivation
							has_country_flag = unlocked_artifice_invention_gene_food_cultivation
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_gene_food_cultivation
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_self_cleaning_parchment
							has_country_flag = unlocked_artifice_invention_self_cleaning_parchment
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_self_cleaning_parchment
			}
			#Military Inventions - Tier 2
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_wandlocks
							has_country_flag = unlocked_artifice_invention_wandlocks
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_wandlocks
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_balloonboost_packs
							has_country_flag = unlocked_artifice_invention_balloonboost_packs
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_balloonboost_packs
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_prototype_tanks
							has_country_flag = unlocked_artifice_invention_prototype_tanks
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_prototype_tanks
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_war_golems
							has_country_flag = unlocked_artifice_invention_war_golems
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_war_golems
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_arcane_blaster
							has_country_flag = unlocked_artifice_invention_arcane_blaster
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_arcane_blaster
			}
			#Society Inventions  - Tier 2
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_remedial_tinctures
							has_country_flag = unlocked_artifice_invention_conversation_calibrator
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_remedial_tinctures
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_arithmatons
							has_country_flag = unlocked_artifice_invention_arithmatons
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_arithmatons
			}
			#Special Inventions  - Tier 2
			#Economic
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_prehensile_tail_attachments
							has_country_flag = unlocked_artifice_invention_prehensile_tail_attachments
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					culture_group = kobold
				}
				set_country_flag = research_artifice_invention_prehensile_tail_attachments
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_chi_cultivation_charm
							has_country_flag = unlocked_artifice_invention_chi_cultivation_charm
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					religion = lefthand_path
				}
				set_country_flag = research_artifice_invention_chi_cultivation_charm
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_city_maintenance_bots
							has_country_flag = unlocked_artifice_invention_city_maintenance_bots
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					culture_group = triunic
				}
				set_country_flag = research_artifice_invention_city_maintenance_bots
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_artificial_egg_surrogates
							has_country_flag = unlocked_artifice_invention_artificial_egg_surrogates
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						culture_group = harpy
						culture_group = kobold
					}
				}
				set_country_flag = research_artifice_invention_artificial_egg_surrogates
			}
			#Military
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_wind_invokers
							has_country_flag = unlocked_artifice_invention_wind_invokers
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					religion = irdaeos_worship
				}
				set_country_flag = research_artifice_invention_wind_invokers
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_avatar_supersoldier_serum
							has_country_flag = unlocked_artifice_invention_avatar_supersoldier_serum
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					religion_group = cannorian
				}
				set_country_flag = research_artifice_invention_avatar_supersoldier_serum
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_lullaby_cannon
							has_country_flag = unlocked_artifice_invention_lullaby_cannon
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					religion = skaldhyrric_faith
				}
				set_country_flag = research_artifice_invention_lullaby_cannon
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_giantshape_warframe
							has_country_flag = unlocked_artifice_invention_giantshape_warframe
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					OR = {
						has_country_modifier = troll_military
						has_country_modifier = ogre_military
					}
				}
				set_country_flag = research_artifice_invention_giantshape_warframe
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_controlled_rage_serum
							has_country_flag = unlocked_artifice_invention_controlled_rage_serum
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = orcish_military
				}
				set_country_flag = research_artifice_invention_controlled_rage_serum
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_codorran_powered_exosuit
							has_country_flag = unlocked_artifice_invention_codorran_powered_exosuit
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = gnomish_military
				}
				set_country_flag = research_artifice_invention_codorran_powered_exosuit
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_eplusplus_compound
							has_country_flag = unlocked_artifice_invention_eplusplus_compound
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = goblin_military
				}
				set_country_flag = research_artifice_invention_eplusplus_compound
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_elemental_gunpowder
							has_country_flag = unlocked_artifice_invention_elemental_gunpowder
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = goblin_military
				}
				set_country_flag = research_artifice_invention_elemental_gunpowder
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_gyrocopters
							has_country_flag = unlocked_artifice_invention_gyrocopters
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = dwarven_military
				}
				set_country_flag = research_artifice_invention_gyrocopters
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_kaydhano_powered_vessels
							has_country_flag = unlocked_artifice_invention_kaydhano_powered_vessels
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = kheionai_ruinborn_elf
				}
				set_country_flag = research_artifice_invention_kaydhano_powered_vessels
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_warfare_simulator
							has_country_flag = unlocked_artifice_invention_warfare_simulator
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = hobgoblin
				}
				set_country_flag = research_artifice_invention_warfare_simulator
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_gu_boats
							has_country_flag = unlocked_artifice_invention_gu_boats
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = gnomish
				}
				set_country_flag = research_artifice_invention_gu_boats
			}
			#Society
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_burrower_arms
							has_country_flag = unlocked_artifice_invention_burrower_arms
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					culture_group = kobold
				}
				set_country_flag = research_artifice_invention_burrower_arms
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_god_fragment_decoder
							has_country_flag = unlocked_artifice_invention_god_fragment_decoder
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					religion = ravelian
				}
				set_country_flag = research_artifice_invention_god_fragment_decoder
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_talking_god_temples
							has_country_flag = unlocked_artifice_invention_talking_god_temples
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					OR = {
						religion = gods_of_the_taychend
						religion = gods_of_the_taychend_reformed
					}
				}
				set_country_flag = research_artifice_invention_talking_god_temples
			}
		}
		subtract_variable = {
			which = artificeResearchOptionsTier2
			value = 1
		}
	}

	#Expert Research Options - Iterated until variable hits 0 - Tier 3
	if = {
		limit = {
			check_variable = {
				which = artificeResearchOptionsTier3
				value = 1
			}
		}

		random_list = {
			#Economic Inventions - Tier 3
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_mechanim_workforce
							has_country_flag = unlocked_artifice_invention_mechanim_workforce
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_mechanim_workforce
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_elemental_locomotives
							has_country_flag = unlocked_artifice_invention_elemental_locomotives
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_elemental_locomotives
			}
			#Military Inventions - Tier 3
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_black_damestear_bullets
							has_country_flag = unlocked_artifice_invention_black_damestear_bullets
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_black_damestear_bullets
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_artillery_autoloader
							has_country_flag = unlocked_artifice_invention_artillery_autoloader
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_artillery_autoloader
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_mechanim_soldiers
							has_country_flag = unlocked_artifice_invention_mechanim_soldiers
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_mechanim_soldiers
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_personal_mageshields
							has_country_flag = unlocked_artifice_invention_personal_mageshields
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_personal_mageshields
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_military_sky_galleons
							has_country_flag = unlocked_artifice_invention_military_sky_galleons
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_military_sky_galleons
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_naval_mageshields
							has_country_flag = unlocked_artifice_invention_naval_mageshields
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
				}
				set_country_flag = research_artifice_invention_naval_mageshields
			}
			#Society Inventions  - Tier 3
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_crierless_crier_device
							has_country_flag = unlocked_artifice_invention_crierless_crier_device
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_crierless_crier_device
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_t_wave_transceivers
							has_country_flag = unlocked_artifice_invention_t_wave_transceivers
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
				}
				set_country_flag = research_artifice_invention_t_wave_transceivers
			}
			#Special Inventions  - Tier 3
			#Economic
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_high_velocity_irrigation
							has_country_flag = unlocked_artifice_invention_high_velocity_irrigation
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					culture_group = bulwari
				}
				set_country_flag = research_artifice_invention_high_velocity_irrigation
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_weather_predicticator
							has_country_flag = unlocked_artifice_invention_weather_predicticator
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					culture_group = eordan_ruinborn_elf
				}
				set_country_flag = research_artifice_invention_weather_predicticator
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_artifice_powered_magnate_factories
							has_country_flag = unlocked_artifice_invention_artifice_powered_magnate_factories
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					culture_group = alenic
				}
				set_country_flag = research_artifice_invention_artifice_powered_magnate_factories
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_mechanim_handymen
							has_country_flag = unlocked_artifice_invention_mechanim_handymen
							has_country_flag = artifice_researching_military
							has_country_flag = artifice_research_society
						}
					}
					culture_group = gnomish
				}
				set_country_flag = research_artifice_invention_mechanim_handymen
			}
			#Military
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_demonflame_flamethrowers
							has_country_flag = unlocked_artifice_invention_demonflame_flamethrowers
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					culture_group = goblin
				}
				set_country_flag = research_artifice_invention_demonflame_flamethrowers
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_chase_em_rockets
							has_country_flag = unlocked_artifice_invention_chase_em_rockets
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = goblin_military
				}
				set_country_flag = research_artifice_invention_chase_em_rockets
			}
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_dragonblood_gene_warriors
							has_country_flag = unlocked_artifice_invention_dragonblood_gene_warriors
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_society
						}
					}
					has_country_modifier = kobold_military
				}
				set_country_flag = research_artifice_invention_dragonblood_gene_warriors
			}
			#Society
			1 = {
				trigger = {
					NOT = {
						OR = {
							has_country_flag = research_artifice_invention_divendancer_speedboat
							has_country_flag = unlocked_artifice_invention_divendancer_speedboat
							has_country_flag = artifice_researching_economic
							has_country_flag = artifice_research_military
						}
					}
					culture_group = businori
				}
				set_country_flag = research_artifice_invention_divendancer_speedboat
			}
		}
		subtract_variable = {
			which = artificeResearchOptionsTier3
			value = 1
		}
	}
}

artifice_tiering_update = {
	change_variable = {
		which = artifice_level_progress
		value = 1
	}
	if = {
		limit = {
			has_country_flag = artifice_research_slow
		}
		if = {
			limit = { 
				has_country_flag = artifice_unlocked_basic 
				check_variable = {
					which = artifice_level_progress
					value = 2
				}
			}
			set_country_flag = artifice_unlocked_advanced
			clr_country_flag = artifice_unlocked_basic
			set_variable = {
				which = artifice_level_progress
				value = 0
			}
		}
		else_if = {			
			limit = { 
				has_country_flag = artifice_unlocked_advanced
				check_variable = {
					which = artifice_level_progress
					value = 2
				}
			}
			set_country_flag = artifice_unlocked_expert
			clr_country_flag = artifice_unlocked_advanced
			set_variable = {
				which = artifice_level_progress
				value = 0
			}
		}		
	}
	else_if = {
		limit = {
			has_country_flag = artifice_research_normal
		}
		if = {
			limit = { 
				has_country_flag = artifice_unlocked_basic 
				check_variable = {
					which = artifice_level_progress
					value = 3
				}
			}
			set_country_flag = artifice_unlocked_advanced
			clr_country_flag = artifice_unlocked_basic
			set_variable = {
				which = artifice_level_progress
				value = 0
			}
		}
		else_if = {			
			limit = { 
				has_country_flag = artifice_unlocked_advanced
				check_variable = {
					which = artifice_level_progress
					value = 3
				}
			}
			set_country_flag = artifice_unlocked_expert
			clr_country_flag = artifice_unlocked_advanced
			set_variable = {
				which = artifice_level_progress
				value = 0
			}
		}		
	}
	else_if = {
		limit = {
			has_country_flag = artifice_research_fast
		}
		if = {
			limit = { 
				has_country_flag = artifice_unlocked_basic 
				check_variable = {
					which = artifice_level_progress
					value = 6
				}
			}
			set_country_flag = artifice_unlocked_advanced
			clr_country_flag = artifice_unlocked_basic
			set_variable = {
				which = artifice_level_progress
				value = 0
			}
		}
		else_if = {			
			limit = { 
				has_country_flag = artifice_unlocked_advanced
				check_variable = {
					which = artifice_level_progress
					value = 6
				}
			}
			set_country_flag = artifice_unlocked_expert
			clr_country_flag = artifice_unlocked_advanced
			set_variable = {
				which = artifice_level_progress
				value = 0
			}
		}		
	}
}

artifice_gui_tab_flag_clearing = {
	clr_country_flag = artificery_tab_generic_tier_1_open
	clr_country_flag = artificery_tab_generic_tier_2_open
	clr_country_flag = artificery_tab_generic_tier_3_open
	clr_country_flag = artifice_invention_menu_open_cultural
	clr_country_flag = artifice_invention_menu_open_unique_large
	clr_country_flag = artifice_invention_menu_open_unique_small
}

artifice_inventions_currently_used_increase = {
	change_variable = {
		which = artifice_inventions_currently_used
		value = 1
	}
}

artifice_inventions_currently_used_decrease = {
	subtract_variable = {
		which = artifice_inventions_currently_used
		value = 1
	}
}