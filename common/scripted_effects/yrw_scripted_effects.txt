calculate_ruler_zodiac = {
	remove_country_modifier = ynn_worship_1
	remove_country_modifier = ynn_worship_2
	remove_country_modifier = ynn_worship_3
	remove_country_modifier = ynn_worship_4
	remove_country_modifier = ynn_worship_5
	remove_country_modifier = ynn_worship_6
	remove_country_modifier = ynn_worship_7
	remove_country_modifier = ynn_worship_8
	remove_country_modifier = ynn_worship_9
	remove_country_modifier = ynn_worship_10
	remove_country_modifier = ynn_worship_11
	remove_country_modifier = ynn_worship_12
	remove_country_modifier = ynn_worship_13
	remove_country_modifier = ynn_worship_14
	remove_country_modifier = ynn_worship_15
	remove_country_modifier = ynn_worship_16

	export_to_variable = {
		variable_name = current_ruler_age_zodiac
		value = trigger_value:ruler_age
	}

#	set_variable = {
#		current_ruler_age_zodiac = 21
#	}
    
	while = {
		limit = { 
			check_variable = {
				current_ruler_age_zodiac = 17
			}
		}
		divide_variable = {
			which = current_ruler_age_zodiac 
			value = 4
		}
	}

	REB = {
		ROOT = {
			set_variable = {
				which = ynn_zodiac_tracker
				which = PREV
			}
		}
	}

	subtract_variable = {
		which = ynn_zodiac_tracker
		which = current_ruler_age_zodiac 
	}

	if = {
		limit = {
			NOT = {
				check_variable = {
					ynn_zodiac_tracker = 1
				}
			}
		}
		change_variable = {
			which = ynn_zodiac_tracker
			value = 16
		}
	}

	if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 16
			}
		}
		add_country_modifier = {
			name = ynn_worship_16
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 15
			}
		}
		add_country_modifier = {
			name = ynn_worship_15
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 14
			}
		}
		add_country_modifier = {
			name = ynn_worship_14
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 13
			}
		}
		add_country_modifier = {
			name = ynn_worship_13
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 12
			}
		}
		add_country_modifier = {
			name = ynn_worship_12
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 11
			}
		}
		add_country_modifier = {
			name = ynn_worship_11
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 10
			}
		}
		add_country_modifier = {
			name = ynn_worship_10
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 9
			}
		}
		add_country_modifier = {
			name = ynn_worship_9
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 8
			}
		}
		add_country_modifier = {
			name = ynn_worship_8
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 7
			}
		}
		add_country_modifier = {
			name = ynn_worship_7
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 6
			}
		}
		add_country_modifier = {
			name = ynn_worship_6
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 5
			}
		}
		add_country_modifier = {
			name = ynn_worship_5
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 4
			}
		}
		add_country_modifier = {
			name = ynn_worship_4
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 3
			}
		}
		add_country_modifier = {
			name = ynn_worship_3
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 2
			}
		}
		add_country_modifier = {
			name = ynn_worship_2
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 1
			}
		}
		add_country_modifier = {
			name = ynn_worship_1
			duration = -1
		}
	}
}

calculate_heir_zodiac = {
	remove_country_modifier = ynn_worship_1
	remove_country_modifier = ynn_worship_2
	remove_country_modifier = ynn_worship_3
	remove_country_modifier = ynn_worship_4
	remove_country_modifier = ynn_worship_5
	remove_country_modifier = ynn_worship_6
	remove_country_modifier = ynn_worship_7
	remove_country_modifier = ynn_worship_8
	remove_country_modifier = ynn_worship_9
	remove_country_modifier = ynn_worship_10
	remove_country_modifier = ynn_worship_11
	remove_country_modifier = ynn_worship_12
	remove_country_modifier = ynn_worship_13
	remove_country_modifier = ynn_worship_14
	remove_country_modifier = ynn_worship_15
	remove_country_modifier = ynn_worship_16

	export_to_variable = {
		variable_name = current_heir_age_zodiac
		value = trigger_value:heir_age
	}

#	set_variable = {
#		current_ruler_age_zodiac = 21
#	}
    
	while = {
		limit = { 
			check_variable = {
				current_heir_age_zodiac = 17
			}
		}
		divide_variable = {
			which = current_heir_age_zodiac 
			value = 4
		}
	}

	REB = {
		ROOT = {
			set_variable = {
				which = ynn_zodiac_tracker
				which = PREV
			}
		}
	}

	subtract_variable = {
		which = ynn_zodiac_tracker
		which = current_heir_age_zodiac 
	}

	if = {
		limit = {
			NOT = {
				check_variable = {
					ynn_zodiac_tracker = 1
				}
			}
		}
		change_variable = {
			which = ynn_zodiac_tracker
			value = 16
		}
	}

	if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 16
			}
		}
		add_country_modifier = {
			name = ynn_worship_16
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 15
			}
		}
		add_country_modifier = {
			name = ynn_worship_15
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 14
			}
		}
		add_country_modifier = {
			name = ynn_worship_14
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 13
			}
		}
		add_country_modifier = {
			name = ynn_worship_13
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 12
			}
		}
		add_country_modifier = {
			name = ynn_worship_12
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 11
			}
		}
		add_country_modifier = {
			name = ynn_worship_11
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 10
			}
		}
		add_country_modifier = {
			name = ynn_worship_10
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 9
			}
		}
		add_country_modifier = {
			name = ynn_worship_9
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 8
			}
		}
		add_country_modifier = {
			name = ynn_worship_8
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 7
			}
		}
		add_country_modifier = {
			name = ynn_worship_7
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 6
			}
		}
		add_country_modifier = {
			name = ynn_worship_6
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 5
			}
		}
		add_country_modifier = {
			name = ynn_worship_5
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 4
			}
		}
		add_country_modifier = {
			name = ynn_worship_4
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 3
			}
		}
		add_country_modifier = {
			name = ynn_worship_3
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 2
			}
		}
		add_country_modifier = {
			name = ynn_worship_2
			duration = -1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				which = ynn_zodiac_tracker
				value = 1
			}
		}
		add_country_modifier = {
			name = ynn_worship_1
			duration = -1
		}
	}
}